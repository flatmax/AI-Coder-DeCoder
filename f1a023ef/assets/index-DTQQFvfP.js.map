{"version":3,"mappings":"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ACA,SACA,SACA,MACA,QACA,QACA,QAIA,WACA,QACA,QACA,SACA,SACA,OACA,SACA,UAEA,OACF,EACMC,GAAW,CACf,OACA,QACA,OACA,YACA,MACA,UACF,EAGMC,GAAQ,CAEZ,SACA,WACA,UACA,SAEA,OACA,OACA,SACA,SAEA,SACA,SAEA,QACA,eACA,eACA,YACA,aACA,oBACA,aACA,aACA,cACA,cACA,gBACA,iBAEA,MACA,MACA,UACA,UAEA,cACA,oBACA,UACA,WACA,OAEA,UACA,YACA,oBACA,gBAEA,UACA,QAEA,OAEA,aACF,EAEMC,GAAc,CAClB,QACA,YACA,gBACA,aACA,iBACA,cACA,YACA,UACF,EAEMC,GAAmB,CACvB,cACA,aACA,gBACA,eAEA,UACA,UAEA,OACA,WACA,QACA,aACA,WACA,YACA,qBACA,YACA,qBACA,SACA,UACF,EAEMC,GAAqB,CACzB,YACA,OACA,QACA,UACA,SACA,WACA,eACA,iBACA,SACA,QACF,EAEMC,GAAY,GAAG,OACnBF,GACAF,GACAC,EACF,EAWA,SAASI,GAAW7G,EAAM,CACxB,MAAMhY,EAAQgY,EAAK,MAQb8G,EAAgB,CAAC/Z,EAAO,CAAE,MAAAga,EAAK,IAAO,CAC1C,MAAMxb,GAAM,KAAOwB,EAAM,CAAC,EAAE,MAAM,CAAC,EAEnC,OADYA,EAAM,MAAM,QAAQxB,GAAKwb,EAAK,IAC3B,EACjB,EAEMC,EAAahN,GACbiN,EAAW,CACf,MAAO,KACP,IAAK,KACT,EAEQC,EAAmB,4BACnBC,EAAU,CACd,MAAO,sBACP,IAAK,4BAKL,kBAAmB,CAACpa,EAAO+O,KAAa,CACtC,MAAMsL,GAAkBra,EAAM,CAAC,EAAE,OAASA,EAAM,MAC1Csa,GAAWta,EAAM,MAAMqa,EAAe,EAC5C,GAIEC,KAAa,KAGbA,KAAa,IACX,CACFvL,GAAS,YAAW,EACpB,MACF,CAIIuL,KAAa,MAGVP,EAAc/Z,EAAO,CAAE,MAAOqa,EAAe,CAAE,GAClDtL,GAAS,YAAW,GAOxB,IAAIvW,GACJ,MAAM+hB,GAAava,EAAM,MAAM,UAAUq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CACA,CACA,CCvvBA,SAASG,GAAOhJ,EAAM,CACpB,MAAMhY,EAAQgY,EAAK,MACbhG,EAAW,qCACXiP,EAAiB,CACrB,MACA,KACA,SACA,QACA,QACA,QACA,OACA,QACA,WACA,MACA,MACA,OACA,OACA,SACA,UACA,MACA,OACA,SACA,KACA,SACA,KACA,KACA,SACA,QACA,cACA,MACA,KACA,OACA,QACA,SACA,MACA,QACA,OACA,OACJ,EAsGQ3C,EAAW,CACf,SAAU,sBACV,QAAS2C,EACT,SAvGgB,CAChB,aACA,MACA,MACA,MACA,QACA,MACA,OACA,aACA,YACA,QACA,WACA,MACA,cACA,UACA,UACA,UACA,OACA,MACA,SACA,YACA,OACA,OACA,SACA,QACA,SACA,YACA,UACA,UACA,UACA,OACA,OACA,MACA,KACA,QACA,MACA,aACA,aACA,OACA,MACA,OACA,SACA,MACA,MACA,aACA,MACA,OACA,SACA,MACA,OACA,MACA,MACA,QACA,WACA,QACA,OACA,WACA,QACA,MACA,UACA,QACA,SACA,eACA,MACA,MACA,QACA,QACA,OACA,OACA,KACJ,EAkCI,QAhCe,CACf,YACA,WACA,QACA,OACA,iBACA,MACJ,EA0BI,KArBY,CACZ,MACA,WACA,YACA,OACA,OACA,UACA,UACA,WACA,WACA,MACA,QACA,OACA,OACJ,CAQA,EAEQC,EAAS,CACb,UAAW,OACX,MAAO,gBACX,EAEQtB,EAAQ,CACZ,UAAW,QACX,MAAO,KACP,IAAK,KACL,SAAUtB,EACV,QAAS,GACb,EAEQ6C,EAAkB,CACtB,MAAO,OACP,UAAW,CACf,EAEQC,EAAS,CACb,UAAW,SACX,SAAU,CAAEpJ,EAAK,gBAAgB,EACjC,SAAU,CACR,CACE,MAAO,yCACP,IAAK,MACL,SAAU,CACRA,EAAK,iBACLkJ,CACV,EACQ,UAAW,EACnB,EACM,CACE,MAAO,yCACP,IAAK,MACL,SAAU,CACRlJ,EAAK,iBACLkJ,CACV,EACQ,UAAW,EACnB,EACM,CACE,MAAO,8BACP,IAAK,MACL,SAAU,CACRlJ,EAAK,iBACLkJ,EACAC,EACAvB,CACV,CACA,EACM,CACE,MAAO,8BACP,IAAK,MACL,SAAU,CACR5H,EAAK,iBACLkJ,EACAC,EACAvB,CACV,CACA,EACM,CACE,MAAO,eACP,IAAK,IACL,UAAW,EACnB,EACM,CACE,MAAO,eACP,IAAK,IACL,UAAW,EACnB,EACM,CACE,MAAO,4BACP,IAAK,GACb,EACM,CACE,MAAO,4BACP,IAAK,GACb,EACM,CACE,MAAO,4BACP,IAAK,IACL,SAAU,CACR5H,EAAK,iBACLmJ,EACAvB,CACV,CACA,EACM,CACE,MAAO,4BACP,IAAK,IACL,SAAU,CACR5H,EAAK,iBACLmJ,EACAvB,CACV,CACA,EACM5H,EAAK,iBACLA,EAAK,iBACX,CACA,EAGQqJ,EAAY,kBACZC,EAAa,QAAQD,CAAS,UAAUA,CAAS,SAASA,CAAS,OAMnEpQ,EAAY,OAAOgQ,EAAe,KAAK,GAAG,CAAC,GAC3CtB,EAAS,CACb,UAAW,SACX,UAAW,EACX,SAAU,CAWR,CACE,MAAO,QAAQ0B,CAAS,MAAMC,CAAU,eAAeD,CAAS,YAAYpQ,CAAS,GAC7F,EACM,CACE,MAAO,IAAIqQ,CAAU,QAC7B,EAQM,CACE,MAAO,0CAA0CrQ,CAAS,GAClE,EACM,CACE,MAAO,4BAA4BA,CAAS,GACpD,EACM,CACE,MAAO,6BAA6BA,CAAS,GACrD,EACM,CACE,MAAO,mCAAmCA,CAAS,GAC3D,EAIM,CACE,MAAO,OAAOoQ,CAAS,WAAWpQ,CAAS,GACnD,CACA,CACA,EACQsQ,EAAe,CACnB,UAAW,UACX,MAAOvhB,EAAM,UAAU,SAAS,EAChC,IAAK,IACL,SAAUse,EACV,SAAU,CACR,CACE,MAAO,SACf,EAEM,CACE,MAAO,IACP,IAAK,OACL,eAAgB,EACxB,CACA,CACA,EACQ8B,EAAS,CACb,UAAW,SACX,SAAU,CAER,CACE,UAAW,GACX,MAAO,UACP,KAAM,EACd,EACM,CACE,MAAO,KACP,IAAK,KACL,aAAc,GACd,WAAY,GACZ,SAAU9B,EACV,SAAU,CACR,OACA4C,EACAvB,EACAyB,EACApJ,EAAK,iBACf,CACA,CACA,CACA,EACE,OAAA4H,EAAM,SAAW,CACfwB,EACAzB,EACAuB,CACJ,EAES,CACL,KAAM,SACN,QAAS,CACP,KACA,MACA,SACN,EACI,aAAc,GACd,SAAU5C,EACV,QAAS,cACT,SAAU,CACR4C,EACAvB,EACA,CAEE,MAAO,oBACP,MAAO,UACf,EACM,CAGE,cAAe,KACf,UAAW,CACnB,EACM,CAAE,MAAO,SAAU,MAAO,SAAS,EACnCyB,EACAG,EACAvJ,EAAK,kBACL,CACE,MAAO,CACL,QAAS,MACThG,CACV,EACQ,MAAO,CACL,EAAG,UACH,EAAG,gBACb,EACQ,SAAU,CAAEoO,CAAM,CAC1B,EACM,CACE,SAAU,CACR,CACE,MAAO,CACL,UAAW,MACXpO,EAAU,MACV,QAASA,EAAS,OAChC,CACA,EACU,CACE,MAAO,CACL,UAAW,MACXA,CACd,CACA,CACA,EACQ,MAAO,CACL,EAAG,UACH,EAAG,cACH,EAAG,uBACb,CACA,EACM,CACE,UAAW,OACX,MAAO,WACP,IAAK,UACL,SAAU,CACR2N,EACAS,EACAgB,CACV,CACA,CACA,CACA,CACA,CCjbA,MAAMpP,GAAW,2BACXsM,GAAW,CACf,KACA,KACA,KACA,KACA,MACA,QACA,UACA,MACA,MACA,WACA,KACA,SACA,OACA,OACA,QACA,QACA,aACA,OACA,QACA,OACA,UACA,MACA,SACA,WACA,SACA,SACA,MACA,QACA,QACA,QAIA,WACA,QACA,QACA,SACA,SACA,OACA,SACA,UAEA,OACF,EACMC,GAAW,CACf,OACA,QACA,OACA,YACA,MACA,UACF,EAGMC,GAAQ,CAEZ,SACA,WACA,UACA,SAEA,OACA,OACA,SACA,SAEA,SACA,SAEA,QACA,eACA,eACA,YACA,aACA,oBACA,aACA,aACA,cACA,cACA,gBACA,iBAEA,MACA,MACA,UACA,UAEA,cACA,oBACA,UACA,WACA,OAEA,UACA,YACA,oBACA,gBAEA,UACA,QAEA,OAEA,aACF,EAEMC,GAAc,CAClB,QACA,YACA,gBACA,aACA,iBACA,cAC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ACA,MACA,MACA,OACA,OACA,MACJ,EACQC,EAAgBnL,EAAK,QAAQ,CACjC,OAAQ,IAAIkL,EAAe,KAAK,GAAG,CAAC,IACpC,UAAW,EACf,CAAG,EACKE,EAAW,CACf,UAAW,WACX,MAAO,4BACP,YAAa,GACb,SAAU,CAAEpL,EAAK,QAAQA,EAAK,WAAY,CAAE,MAAO,YAAY,CAAE,CAAC,EAClE,UAAW,CACf,EAEQsG,EAAW,CACf,KACA,OACA,OACA,OACA,KACA,OACA,MACA,QACA,QACA,KACA,KACA,OACA,OACA,OACA,SACA,WACA,QACJ,EAEQC,EAAW,CACf,OACA,OACJ,EAGQ8E,EAAY,CAAE,MAAO,gBAAgB,EAGrCC,EAAkB,CACtB,QACA,KACA,WACA,OACA,OACA,OACA,SACA,UACA,OACA,MACA,WACA,SACA,QACA,OACA,QACA,OACA,QACA,OACJ,EAEQC,EAAiB,CACrB,QACA,OACA,UACA,SACA,UACA,UACA,OACA,SACA,OACA,MACA,QACA,SACA,UACA,SACA,OACA,YACA,SACA,OACA,OACA,UACA,SACA,SACJ,EAEQC,EAAgB,CACpB,WACA,KACA,UACA,MACA,MACA,QACA,QACA,gBACA,WACA,UACA,eACA,YACA,aACA,YACA,WACA,UACA,aACA,OACA,UACA,SACA,SACA,SACA,UACA,KACA,KACA,QACA,YACA,SACA,QACA,UACA,UACA,OACA,OACA,QACA,MACA,SACA,OACA,QACA,QACA,SACA,SACA,QACA,SACA,SACA,OACA,UACA,SACA,aACA,SACA,UACA,WACA,QACA,OACA,SACA,QACA,QACA,WACA,UACA,OACA,MACA,WACA,aACA,QACA,OACA,cACA,UACA,SACA,MACJ,EAEQC,EAAiB,CACrB,QACA,QACA,QACA,QACA,KACA,KACA,KACA,MACA,YACA,KACA,KACA,QACA,SACA,QACA,SACA,KACA,WACA,KACA,QACA,QACA,OACA,QACA,WACA,OACA,QACA,SACA,SACA,MACA,QACA,OACA,SACA,MACA,SACA,MACA,OACA,OACA,OACA,SACA,KACA,SACA,KACA,QACA,MACA,KACA,UACA,YACA,YACA,YACA,YACA,OACA,OACA,QACA,MACA,MACA,OACA,KACA,QACA,WACA,OACA,KACA,OACA,WACA,SACA,OACA,UACA,KACA,OACA,MACA,OACA,SAEA,SACA,SACA,KACA,OACA,UACA,OACA,QACA,QACA,UACA,QACA,WACA,SACA,MACA,WACA,SACA,MACA,QACA,OACA,SACA,OACA,MACA,OACA,UAEA,MACA,QACA,SACA,SACA,QACA,MACA,SACA,KACJ,EAEE,MAAO,CACL,KAAM,OACN,QAAS,CACP,KACA,KACN,EACI,SAAU,CACR,SAAU,wBACV,QAASnF,EACT,QAASC,EACT,SAAU,CACR,GAAG+E,EACH,GAAGC,EAEH,MACA,QACA,GAAGC,EACH,GAAGC,CACX,CACA,EACI,SAAU,CACRN,EACAnL,EAAK,QAAO,EACZoL,EACAH,EACApQ,EACA+P,EACAS,EACAR,EACAC,EACAC,EACAC,EACAN,CACN,CACA,CACA,CCtZA,MAAM9O,GAASoE,IACN,CACL,UAAW,CACT,MAAO,OACP,MAAO,YACb,EACI,cAAeA,EAAK,qBACpB,SAAU,CACR,MAAO,SACP,MAAO,iDACb,EACI,kBAAmB,CACjB,UAAW,WACX,MAAO,cACb,EACI,wBAAyB,CACvB,MAAO,gBACP,MAAO,KACP,IAAK,KACL,QAAS,IACT,SAAU,CACRA,EAAK,iBACLA,EAAK,iBACb,CACA,EACI,gBAAiB,CACf,MAAO,SACP,MAAOA,EAAK,UAAY,kGASxB,UAAW,CACjB,EACI,aAAc,CACZ,UAAW,OACX,MAAO,2BACb,CACA,GAGM0L,GAAY,CAChB,IACA,OACA,UACA,UACA,QACA,QACA,IACA,aACA,OACA,SACA,SACA,UACA,OACA,OACA,KACA,MACA,UACA,MACA,MACA,KACA,KACA,KACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,SACA,SACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,OACA,OACA,MACA,SACA,KACA,WACA,SACA,IACA,UACA,IACA,QACA,OACA,UACA,SACA,SACA,OACA,SACA,UACA,MACA,QACA,QACA,KACA,WACA,QACA,KACA,QACA,OACA,KACA,KACA,MACA,OACF,EAEMC,GAAW,CACf,OACA,IACA,SACA,OACA,UACA,MACA,SACA,SACA,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,UACA,iBACA,UACA,UACA,eACA,WACA,qBACA,SACA,eACA,iBACA,iBACA,OACA,SACA,UACA,QACA,OACA,OACA,UACA,WACA,OACA,OACA,MACA,WACA,QACA,gBACA,UACF,EAEMC,GAAO,CACX,GAAGF,GACH,GAAGC,EACL,EAKME,GAAiB,CACrB,YACA,cACA,eACA,QACA,cACA,cACA,sBACA,gBACA,eACA,eACA,gBACA,OACA,SACA,QACA,kBACA,aACA,cACA,iBACA,kBACA,UACA,uBACA,mBACA,yBACA,+BACA,aACA,OACA,YACA,SACA,QAEA,YACA,YACA,aACA,YACF,EAAE,KAAI,EAAG,QAAO,EAGVC,GAAiB,CACrB,SACA,WACA,QACA,UACA,UACA,UACA,UACA,MACA,WACA,OACA,QACA,UACA,QACA,cACA,gBACA,aACA,SACA,QACA,gBACA,eACA,MACA,OACA,eACA,QACA,gBACA,WACA,UACA,KACA,OACA,aACA,eACA,OACA,OACA,aACA,MACA,YACA,UACA,iBACA,eACA,mBACA,cACA,aACA,eACA,WACA,eACA,OACA,oBACA,YACA,aACA,WACA,QACA,OACA,QACA,SACA,gBACA,eACA,QACA,UACA,OACF,EAAE,KAAI,EAAG,QAAO,EAGVC,GAAkB,CACtB,QACA,WACA,SACA,MACA,aACA,eACA,aACA,gBACA,SACA,OACA,cACA,YACA,UACA,gBACF,EAAE,KAAI,EAAG,QAAO,EAEVC,GAAa,CACjB,eACA,gBACA,cACA,aACA,qBACA,MACA,cACA,YACA,wBACA,kBACA,sBACA,qBACA,sBACA,4BACA,iBACA,uBACA,kBACA,sBACA,wBACA,qBACA,4BACA,aACA,eACA,kBACA,sBACA,aACA,wBACA,wBACA,kBACA,mBACA,mBACA,oBACA,sBACA,wBACA,wBACA,oBACA,kBACA,iBACA,aACA,SACA,eACA,qBACA,mBACA,yBACA,yBACA,yBACA,qBACA,2BACA,2BACA,2BACA,qBACA,qBACA,gBACA,sBACA,4BACA,6BACA,sBACA,sBACA,kBACA,eACA,wBACA,0BACA,eACA,sBACA,sBACA,qBACA,sBACA,qBACA,gBACA,sBACA,oBACA,0BACA,0BACA,0BACA,sBACA,4BACA,4BACA,4BACA,sBACA,sBACA,cACA,oBACA,oBACA,oBACA,gBACA,eACA,qBACA,qBACA,qBACA,iBACA,0BACA,4BACA,eACA,aACA,mBACA,yBACA,0BACA,mBACA,mBACA,eACA,SACA,YACA,uBACA,gBACA,WACA,iBACA,YACA,oBACA,aACA,WACA,aACA,aACA,cACA,eACA,eACA,eACA,cACA,QACA,OACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,eACA,eACA,cACA,aACA,cACA,oBACA,oBACA,oBACA,cACA,eACA,UACA,UACA,+BACA,2BACA,gCACA,yBACA,0BACA,YACA,iBACA,iBACA,UACA,qBACA,oBACA,gBACA,cACA,MACA,YACA,aACA,SACA,KACA,KACA,YACA,UACA,oBACA,cACA,oBACA,eACA,OACA,eACA,YACA,SACA,OACA,aACA,iBACA,YACA,YACA,cACA,YACA,QACA,cACA,gBACA,OACA,OACA,eACA,cACA,wBACA,eACA,yBACA,sBACA,eACA,YACA,mBACA,cACA,iBACA,eACA,aACA,iBACA,0BACA,4BACA,uBACA,wBACA,eACA,0BACA,oBACA,0BACA,qBACA,yBACA,uBACA,wBACA,0BACA,cACA,sBACA,MACA,+BACA,6BACA,OACA,YACA,oBACA,iBACA,iBACA,cACA,kBACA,oBACA,WACA,WACA,eACA,iBACA,gBACA,sBACA,wBACA,qBACA,sBACA,SACA,sBACA,wBACA,UACA,OACA,oBACA,kBACA,mBACA,WACA,iBACA,uBACA,cACA,QACA,aACA,cACA,kBACA,oBACA,eACA,mBACA,qBACA,YACA,kBACA,gBACA,eACA,UACA,OACA,iBACA,iBACA,aACA,cACA,mBACA,aACA,mBACA,sBACA,kBACA,SACA,eACA,mBACA,qBACA,gBACA,gBACA,oBACA,sBACA,cACA,eACA,aACA,cACA,SACA,aACA,aACA,eACA,QACA,OACA,cACA,mBACA,qBACA,qBACA,oBACA,qBACA,oBACA,YACA,iBACA,aACA,YACA,cACA,gBACA,cACA,YACA,YACA,oBACA,aACA,aACA,aACA,iBACA,aACA,kBACA,YACA,iBACA,aACA,kBACA,YACA,iBACA,WACA,YACA,WACA,YACA,SACA,OACA,SACA,aACA,kBACA,SACA,gBACA,kBACA,cACA,kBACA,gBACA,UACA,QACA,UACA,UACA,gBACA,iBACA,gBACA,gBACA,WACA,kBACA,iBACA,uBACA,kBACA,gBACA,aACA,aACA,UACA,sBACA,4BACA,6BACA,wBACA,wBACA,UACA,gBACA,oBACA,sBACA,iBACA,iBACA,qBACA,uBACA,eACA,gBACA,cACA,OACA,mBACA,oBACA,oBACA,cACA,QACA,cACA,eACA,cACA,qBACA,gBACA,cACA,aACA,iBACA,WACA,kBACA,sBACA,qBACA,SACA,IACA,SACA,OACA,aACA,cACA,QACA,SACA,UACA,aACA,gBACA,QACA,kBACA,gBACA,sBACA,0BACA,4BACA,uBACA,uBACA,2BACA,6BACA,qBACA,sBACA,oBACA,iBACA,uBACA,2BACA,6BACA,wBACA,wBACA,4BACA,8BACA,sBACA,uBACA,qBACA,oBACA,mBACA,mBACA,kBACA,uBACA,uBACA,kBACA,mBACA,kBACA,wBACA,eACA,gBACA,kBACA,QACA,WACA,MACA,aACA,eACA,SACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,eACA,WACA,eACA,aACA,iBACA,kBACA,cACA,uBACA,kBACA,wBACA,uBACA,uBACA,2BACA,wBACA,4BACA,gBACA,sBACA,yBACA,sBACA,cACA,eACA,mBACA,gBACA,iBACA,cACA,mBACA,iBACA,wBACA,0BACA,YACA,iBACA,kBACA,iBACA,MACA,eACA,YACA,gBACA,mBACA,kBACA,aACA,sBACA,mBACA,sBACA,sBACA,6BACA,YACA,eACA,cACA,cACA,gBACA,iBACA,gBACA,qBACA,sBACA,qBACA,uBACA,aACA,gBACA,iBACA,eACA,cACA,cACA,aACA,eACA,eACA,cACA,uBACA,SACA,QACA,cACA,aACA,eACA,YACA,eACA,IACA,IACA,UACA,MACF,EAAE,KAAI,EAAG,QAAO,EAUhB,SAASC,GAAIjM,EAAM,CACjB,MAAMhY,EAAQgY,EAAK,MACbkM,EAAQtQ,GAAMoE,CAAI,EAClBmM,EAAgB,CAAE,MAAO,8BAA8B,EACvDC,EAAe,kBACfC,EAAiB,oBACjBrS,EAAW,0BACXsS,EAAU,CACdtM,EAAK,iBACLA,EAAK,iBACT,EAEE,MAAO,CACL,KAAM,MACN,iBAAkB,GAClB,QAAS,UACT,SAAU,CAAE,iBAAkB,SAAS,EACvC,iBAAkB,CAGhB,iBAAkB,cAAc,EAClC,SAAU,CACRkM,EAAM,cACNC,EAGAD,EAAM,gBACN,CACE,UAAW,cACX,MAAO,kBACP,UAAW,CACnB,EACM,CACE,UAAW,iBACX,MAAO,MAAQlS,EACf,UAAW,CACnB,EACMkS,EAAM,wBACN,CACE,UAAW,kBACX,SAAU,CACR,CAAE,MAAO,KAAOJ,GAAe,KAAK,GAAG,EAAI,GAAG,EAC9C,CAAE,MAAO,SAAWC,GAAgB,KAAK,GAAG,EAAI,GAAG,CAC7D,CACA,EAOMG,EAAM,aACN,CACE,UAAW,YACX,MAAO,OAASF,GAAW,KAAK,GAAG,EAAI,MAC/C,EAEM,CACE,MAAO,IACP,IAAK,QACL,SAAU,CACRE,EAAM,cACNA,EAAM,SACNA,EAAM,UACNA,EAAM,gBACN,GAAGI,EAIH,CACE,MAAO,mBACP,IAAK,KACL,UAAW,EACX,SAAU,CAAE,SAAU,cAAc,EACpC,SAAU,CACR,GAAGA,EACH,CACE,UAAW,SAGX,MAAO,OACP,eAAgB,GAChB,WAAY,EAC5B,CACA,CACA,EACUJ,EAAM,iBAChB,CACA,EACM,CACE,MAAOlkB,EAAM,UAAU,GAAG,EAC1B,IAAK,OACL,UAAW,EACX,QAAS,IACT,SAAU,CACR,CACE,UAAW,UACX,MAAOqkB,CACnB,EACU,CACE,MAAO,KACP,eAAgB,GAChB,WAAY,GACZ,UAAW,EACX,SAAU,CACR,SAAU,UACV,QAASD,EACT,UAAWP,GAAe,KAAK,GAAG,CAChD,EACY,SAAU,CACR,CACE,MAAO,eACP,UAAW,WAC3B,EACc,GAAGS,EACHJ,EAAM,eACpB,CACA,CACA,CACA,EACM,CACE,UAAW,eACX,MAAO,OAASN,GAAK,KAAK,GAAG,EAAI,MACzC,CACA,CACA,CACA,CC16BA,SAASW,GAAIvM,EAAM,CACjB,MAAMhY,EAAQgY,EAAK,MAQbwM,EAAcxkB,EAAM,OAAO,YAAaA,EAAM,SAAS,kBAAkB,EAAG,iBAAiB,EAC7FykB,EAAe,mBACfC,EAAe,CACnB,UAAW,SACX,MAAO,kCACX,EACQC,EAAoB,CACxB,MAAO,KACP,SAAU,CACR,CACE,UAAW,UACX,MAAO,sBACP,QAAS,IACjB,CACA,CACA,EACQC,EAAwB5M,EAAK,QAAQ2M,EAAmB,CAC5D,MAAO,KACP,IAAK,IACT,CAAG,EACKE,EAAwB7M,EAAK,QAAQA,EAAK,iBAAkB,CAAE,UAAW,SAAU,EACnF8M,EAAyB9M,EAAK,QAAQA,EAAK,kBAAmB,CAAE,UAAW,SAAU,EACrF+M,EAAgB,CACpB,eAAgB,GAChB,QAAS,IACT,UAAW,EACX,SAAU,CACR,CACE,UAAW,OACX,MAAON,EACP,UAAW,CACnB,EACM,CACE,MAAO,OACP,UAAW,EACX,SAAU,CACR,CACE,UAAW,SACX,WAAY,GACZ,SAAU,CACR,CACE,MAAO,IACP,IAAK,IACL,SAAU,CAAEC,CAAY,CACxC,EACc,CACE,MAAO,IACP,IAAK,IACL,SAAU,CAAEA,CAAY,CACxC,EACc,CAAE,MAAO,cAAc,CACrC,CACA,CACA,CACA,CACA,CACA,EACE,MAAO,CACL,KAAM,YACN,QAAS,CACP,OACA,QACA,MACA,OACA,MACA,MACA,MACA,QACA,MACA,KACN,EACI,iBAAkB,GAClB,aAAc,GACd,SAAU,CACR,CACE,UAAW,OACX,MAAO,UACP,IAAK,IACL,UAAW,GACX,SAAU,CACRC,EACAG,EACAD,EACAD,EACA,CACE,MAAO,KACP,IAAK,KACL,SAAU,CACR,CACE,UAAW,OACX,MAAO,UACP,IAAK,IACL,SAAU,CACRD,EACAC,EACAE,EACAD,CAClB,CACA,CACA,CACA,CACA,CACA,EACM7M,EAAK,QACH,OACA,MACA,CAAE,UAAW,EAAE,CACvB,EACM,CACE,MAAO,cACP,IAAK,QACL,UAAW,EACnB,EACM0M,EAEA,CACE,UAAW,OACX,IAAK,MACL,SAAU,CACR,CACE,MAAO,SACP,UAAW,GACX,SAAU,CACRI,CACd,CACA,EACU,CACE,MAAO,mBACnB,CACA,CAEA,EACM,CACE,UAAW,MAMX,MAAO,iBACP,IAAK,IACL,SAAU,CAAE,KAAM,OAAO,EACzB,SAAU,CAAEC,CAAa,EACzB,OAAQ,CACN,IAAK,YACL,UAAW,GACX,YAAa,CACX,MACA,KACZ,CACA,CACA,EACM,CACE,UAAW,MAEX,MAAO,kBACP,IAAK,IACL,SAAU,CAAE,KAAM,QAAQ,EAC1B,SAAU,CAAEA,CAAa,EACzB,OAAQ,CACN,IAAK,aACL,UAAW,GACX,YAAa,CACX,aACA,aACA,KACZ,CACA,CACA,EAEM,CACE,UAAW,MACX,MAAO,SACf,EAEM,CACE,UAAW,MACX,MAAO/kB,EAAM,OACX,IACAA,EAAM,UAAUA,EAAM,OACpBwkB,EAIAxkB,EAAM,OAAO,MAAO,IAAK,IAAI,CACzC,CAAW,CACX,EACQ,IAAK,OACL,SAAU,CACR,CACE,UAAW,OACX,MAAOwkB,EACP,UAAW,EACX,OAAQO,CACpB,CACA,CACA,EAEM,CACE,UAAW,MACX,MAAO/kB,EAAM,OACX,MACAA,EAAM,UAAUA,EAAM,OACpBwkB,EAAa,GACzB,CAAW,CACX,EACQ,SAAU,CACR,CACE,UAAW,OACX,MAAOA,EACP,UAAW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EAEQ8N,EAAU,CACd,UAAW,SACX,SAAU,CACR,CAAE,MAAO,cAAc,EACvB,CAAE,MAAO,iFAAiF,EAC1F,CAAE,MAAO,kHAAkH,EAC3H,CAAE,MAAO,wDAAwD,CACvE,EACI,UAAW,CACf,EAEQC,EAAe,CACnB,UAAW,OACX,MAAO,eACP,IAAK,IACL,SAAU,CAAE,QACR,yGACwD,EAC5D,SAAU,CACR,CACE,MAAO,OACP,UAAW,CACnB,EACM/N,EAAK,QAAQsM,EAAS,CAAE,UAAW,QAAQ,CAAE,EAC7C,CACE,UAAW,SACX,MAAO,OACf,EACMpR,EACA8E,EAAK,oBACX,CACA,EAEQvE,EAAa,CACjB,UAAW,QACX,MAAOzT,EAAM,SAAS4lB,CAAY,EAAI5N,EAAK,SAC3C,UAAW,CACf,EAEQgO,EAAiBhmB,EAAM,SAAS4lB,CAAY,EAAI5N,EAAK,SAAW,UAoFhEsG,EAAW,CACf,QAnFiB,CACjB,MACA,OACA,QACA,OACA,WACA,UACA,KACA,OACA,OACA,SACA,MACA,UACA,OACA,KACA,SACA,WACA,WACA,SACA,SACA,SACA,gBACA,SACA,SACA,UACA,QACA,WACA,QACA,WACA,WACA,UACA,WACA,YACA,iBACA,gBAEA,UACA,UACA,WACA,gBACA,eAEA,SACJ,EAyCI,KAvCc,CACd,QACA,SACA,SACA,WACA,MACA,QACA,OACA,OACA,OACA,QACA,UACA,WACA,aACA,aACA,aACA,aACA,cACA,cACA,eACA,WACA,WACA,WACA,YACA,YACA,YACA,aAEA,QACA,SACA,YAEA,UACA,OACA,WACJ,EAKI,QAAS,kBAET,SAAU,kzBASd,EAEQ2H,EAAsB,CAC1BF,EACAvH,EACAtL,EACA8E,EAAK,qBACL8N,EACAxB,CACJ,EAEQ4B,EAAqB,CAIzB,SAAU,CACR,CACE,MAAO,IACP,IAAK,GACb,EACM,CACE,MAAO,KACP,IAAK,IACb,EACM,CACE,cAAe,wBACf,IAAK,GACb,CACA,EACI,SAAU5H,EACV,SAAU2H,EAAoB,OAAO,CACnC,CACE,MAAO,KACP,IAAK,KACL,SAAU3H,EACV,SAAU2H,EAAoB,OAAO,CAAE,MAAM,CAAE,EAC/C,UAAW,CACnB,CACA,CAAK,EACD,UAAW,CACf,EAEQE,EAAuB,CAC3B,MAAO,IAAMN,EAAmB,eAAiBG,EACjD,YAAa,GACb,IAAK,QACL,WAAY,GACZ,SAAU1H,EACV,QAAS,iBACT,SAAU,CACR,CACE,MAAOqH,EACP,SAAUrH,EACV,UAAW,CACnB,EACM,CACE,MAAO0H,EACP,YAAa,GACb,SAAU,CAAEhO,EAAK,QAAQvE,EAAY,CAAE,UAAW,gBAAgB,CAAE,CAAC,EACrE,UAAW,CACnB,EAGM,CACE,UAAW,EACX,MAAO,GACf,EACM,CACE,UAAW,SACX,MAAO,KACP,IAAK,KACL,SAAU6K,EACV,UAAW,EACX,SAAU,CACRpL,EACA8E,EAAK,qBACLsM,EACAwB,EACAtH,EAEA,CACE,MAAO,KACP,IAAK,KACL,SAAUF,EACV,UAAW,EACX,SAAU,CACR,OACApL,EACA8E,EAAK,qBACLsM,EACAwB,EACAtH,CACd,CACA,CACA,CACA,EACMA,EACAtL,EACA8E,EAAK,qBACL+N,CACN,CACA,EAEE,MAAO,CACL,KAAM,IACN,QAAS,CAAE,GAAG,EACd,SAAUzH,EAGV,kBAAmB,GACnB,QAAS,KACT,SAAU,GAAG,OACX4H,EACAC,EACAF,EACA,CACEF,EACA,CACE,MAAO/N,EAAK,SAAW,KACvB,SAAUsG,CACpB,EACQ,CACE,UAAW,QACX,cAAe,0BACf,IAAK,WACL,SAAU,CACR,CAAE,cAAe,oBAAoB,EACrCtG,EAAK,UACjB,CACA,CACA,CAAO,EACH,QAAS,CACP,aAAc+N,EACd,QAASzB,EACT,SAAUhG,CAChB,CACA,CACA,CCnUA,SAAS8H,GAAIpO,EAAM,CACjB,MAAMhY,EAAQgY,EAAK,MAIb9E,EAAsB8E,EAAK,QAAQ,KAAM,IAAK,CAAE,SAAU,CAAE,CAAE,MAAO,MAAM,CAAE,CAAE,CAAE,EACjF2N,EAAmB,qBACnBC,EAAe,kBAEfC,EAAmB,cACrBF,EAAmB,IACnB3lB,EAAM,SAAS4lB,CAAY,EAC3B,gBAAkB5lB,EAAM,SAJC,UAI4B,EACvD,IAEIqmB,EAAsB,CAC1B,UAAW,OACX,MAAO,oBACX,EAKQ/B,EAAU,CACd,UAAW,SACX,SAAU,CACR,CACE,MAAO,cACP,IAAK,IACL,QAAS,MACT,SAAU,CAAEtM,EAAK,gBAAgB,CACzC,EACM,CACE,MAAO,eAXa,uDAWyB,MAC7C,IAAK,IACL,QAAS,GACjB,EACMA,EAAK,kBAAkB,CACrB,MAAO,mCACP,IAAK,qBACb,CAAO,CACP,CACA,EAEQ8N,EAAU,CACd,UAAW,SACX,SAAU,CAER,CAAE,MACA,8UAkBR,EAEM,CAAE,MACA,6JAcR,CACA,EACI,UAAW,CACf,EAEQC,EAAe,CACnB,UAAW,OACX,MAAO,eACP,IAAK,IACL,SAAU,CAAE,QACR,wFACuC,EAC3C,SAAU,CACR,CACE,MAAO,OACP,UAAW,CACnB,EACM/N,EAAK,QAAQsM,EAAS,CAAE,UAAW,QAAQ,CAAE,EAC7C,CACE,UAAW,SACX,MAAO,OACf,EACMpR,EACA8E,EAAK,oBACX,CACA,EAEQvE,EAAa,CACjB,UAAW,QACX,MAAOzT,EAAM,SAAS4lB,CAAY,EAAI5N,EAAK,SAC3C,UAAW,CACf,EAEQgO,EAAiBhmB,EAAM,SAAS4lB,CAAY,EAAI5N,EAAK,SAAW,UAGhEsO,EAAoB,CACxB,UACA,UACA,MACA,SACA,MACA,gBACA,gBACA,kBACA,OACA,SACA,QACA,QACA,OACA,QACA,QACA,WACA,YACA,WACA,QACA,UACA,gBACA,YACA,YACA,YACA,WACA,WACA,UACA,SACA,KACA,kBACA,OACA,OACA,WACA,SACA,SACA,QACA,QACA,MACA,SACA,OACA,KACA,SACA,SACA,SACA,UACA,YACA,MACA,WACA,MACA,SACA,UACA,WACA,KACA,QACA,WACA,UACA,YACA,SACA,WACA,WACA,sBACA,WACA,SACA,SACA,gBACA,iBACA,SACA,SACA,eACA,WACA,OACA,eACA,QACA,mBACA,2BACA,OACA,MACA,UACA,SACA,WACA,QACA,QACA,UACA,WACA,QACA,MACA,QACJ,EAGQC,EAAiB,CACrB,OACA,OACA,WACA,WACA,UACA,SACA,QACA,MACA,OACA,QACA,OACA,UACA,WACA,SACA,QACA,QACJ,EAEQC,EAAa,CACjB,MACA,WACA,UACA,mBACA,SACA,UACA,qBACA,yBACA,qBACA,QACA,aACA,WACA,WACA,SACA,YACA,mBACA,gBACA,UACA,QACA,aACA,WACA,WACA,QACA,WACA,gBACA,gBACA,OACA,UACA,iBACA,QACA,kBACA,wBACA,cACA,MACA,gBACA,cACA,eACA,qBACA,aACA,QACA,cACA,eACA,cACA,SACA,YACA,QACA,cACA,aACA,gBACA,qBACA,qBACA,gBACA,UACA,SACA,WACA,UACA,cACJ,EAEQC,EAAiB,CACrB,QACA,MACA,OACA,QACA,WACA,OACA,OACA,QACA,SACA,OACA,OACA,MACA,OACA,MACA,OACA,OACA,UACA,OACA,WACA,OACA,MACA,OACA,QACA,OACA,UACA,UACA,QACA,OACA,QACA,SACA,SACA,SACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WACA,OACA,UACA,QACA,MACA,QACA,YACA,cACA,4BACA,aACA,cACA,SACA,SACA,SACA,SACA,SACA,OACA,OACA,MACA,SACA,UACA,OACA,UACA,QACA,MACA,OACA,WACA,UACA,OACA,SACA,MACA,SACA,QACA,SACA,SACA,SACA,SACA,SACA,UACA,SACA,UACA,UACA,UACA,UACA,UACA,SACA,SACA,OACA,MACA,OACA,YACA,gBACA,UACA,UACA,WACA,QACA,UACA,UACJ,EAaQC,EAAe,CACnB,KAAMH,EACN,QAASD,EACT,QAde,CACf,OACA,QACA,UACA,UACA,MACJ,EASI,SANe,CAAE,SAAS,EAO1B,YAAaE,CACjB,EAEQG,EAAoB,CACxB,UAAW,oBACX,UAAW,EACX,SAAU,CAER,MAAOF,CAAc,EACvB,MAAOzmB,EAAM,OACX,KACA,eACA,SACA,UACA,aACA,YACAgY,EAAK,SACLhY,EAAM,UAAU,kBAAkB,CAAC,CACzC,EAEQimB,EAAsB,CAC1BU,EACAZ,EACAM,EACAnT,EACA8E,EAAK,qBACL8N,EACAxB,CACJ,EAEQ4B,EAAqB,CAIzB,SAAU,CACR,CACE,MAAO,IACP,IAAK,GACb,EACM,CACE,MAAO,KACP,IAAK,IACb,EACM,CACE,cAAe,wBACf,IAAK,GACb,CACA,EACI,SAAUQ,EACV,SAAUT,EAAoB,OAAO,CACnC,CACE,MAAO,KACP,IAAK,KACL,SAAUS,EACV,SAAUT,EAAoB,OAAO,CAAE,MAAM,CAAE,EAC/C,UAAW,CACnB,CACA,CAAK,EACD,UAAW,CACf,EAEQE,GAAuB,CAC3B,UAAW,WACX,MAAO,IAAMN,EAAmB,eAAiBG,EACjD,YAAa,GACb,IAAK,QACL,WAAY,GACZ,SAAUU,EACV,QAAS,iBACT,SAAU,CACR,CACE,MAAOf,EACP,SAAUe,EACV,UAAW,CACnB,EACM,CACE,MAAOV,EACP,YAAa,GACb,SAAU,CAAEvS,CAAU,EACtB,UAAW,CACnB,EAGM,CACE,MAAO,KACP,UAAW,CACnB,EAEM,CACE,MAAO,IACP,eAAgB,GAChB,SAAU,CACR6Q,EACAwB,CACV,CACA,EAGM,CACE,UAAW,EACX,MAAO,GACf,EACM,CACE,UAAW,SACX,MAAO,KACP,IAAK,KACL,SAAUY,EACV,UAAW,EACX,SAAU,CACRxT,EACA8E,EAAK,qBACLsM,EACAwB,EACAO,EAEA,CACE,MAAO,KACP,IAAK,KACL,SAAUK,EACV,UAAW,EACX,SAAU,CACR,OACAxT,EACA8E,EAAK,qBACLsM,EACAwB,EACAO,CACd,CACA,CACA,CACA,EACMA,EACAnT,EACA8E,EAAK,qBACL+N,CACN,CACA,EAEE,MAAO,CACL,KAAM,MACN,QAAS,CACP,KACA,MACA,MACA,MACA,KACA,MACA,KACN,EACI,SAAUW,EACV,QAAS,KACT,iBAAkB,CAAE,oBAAqB,UAAU,EACnD,SAAU,GAAG,OACXR,EACAC,GACAQ,EACAV,EACA,CACEF,EACA,CACE,MAAO,8NACP,IAAK,IACL,SAAUW,EACV,SAAU,CACR,OACAL,CACZ,CACA,EACQ,CACE,MAAOrO,EAAK,SAAW,KACvB,SAAU0O,CACpB,EACQ,CACE,MAAO,CAEL,wDACA,MACA,KACZ,EACU,UAAW,CACT,EAAG,UACH,EAAG,aACf,CACA,CACA,CAAO,CACP,CACA,CCjlBA,SAASE,GAAK5O,EAAM,CAClB,MAAMhY,EAAQgY,EAAK,MACnB,MAAO,CACL,KAAM,OACN,QAAS,CAAE,OAAO,EAClB,SAAU,CACR,CACE,UAAW,OACX,UAAW,GACX,MAAOhY,EAAM,OACX,+BACA,8BACA,sBACV,CACA,EACM,CACE,UAAW,UACX,SAAU,CACR,CACE,MAAOA,EAAM,OACX,UACA,SACA,QACA,QACA,UACA,SACA,aACd,EACY,IAAK,GACjB,EACU,CAAE,MAAO,UAAU,CAC7B,CACA,EACM,CACE,UAAW,WACX,MAAO,MACP,IAAK,GACb,EACM,CACE,UAAW,WACX,MAAO,KACP,IAAK,GACb,EACM,CACE,UAAW,WACX,MAAO,KACP,IAAK,GACb,CACA,CACA,CACA,CCnDA,SAAS8M,GAASkL,EAAM,CACtB,MAAMhY,EAAQgY,EAAK,MACb6O,EAAc,CAClB,MAAO,gBACP,IAAK,IACL,YAAa,MACb,UAAW,CACf,EACQC,EAAkB,CACtB,MAAO,cACP,IAAK,GACT,EACQC,EAAO,CACX,UAAW,OACX,SAAU,CAER,CAAE,MAAO,+BAA+B,EACxC,CAAE,MAAO,+BAA+B,EAExC,CACE,MAAO,MACP,IAAK,WACb,EACM,CACE,MAAO,MACP,IAAK,WACb,EACM,CAAE,MAAO,OAAO,EAChB,CACE,MAAO,kBAGP,SAAU,CACR,CACE,MAAO,cACP,IAAK,QACjB,CACA,EACQ,UAAW,CACnB,CACA,CACA,EACQC,EAAO,CACX,UAAW,SACX,MAAO,kCACP,IAAK,OACL,WAAY,EAChB,EACQC,EAAiB,CACrB,MAAO,eACP,YAAa,GACb,SAAU,CACR,CACE,UAAW,SACX,MAAO,KACP,IAAK,KACL,aAAc,GACd,WAAY,EACpB,EACM,CACE,UAAW,OACX,MAAO,OACP,IAAK,IACL,aAAc,EACtB,CACA,CACA,EACQC,EAAa,0BACbC,EAAO,CACX,S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AAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AA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","names":["t","e","s","o","n$2","r","n","i","S","c","h","a","l","p","d","u","f","b","y$1","y","v","_","m","g","$","x","E","A","C","P","V","N","I","L","z","H","M","R","k","Z","B","D","_callProxy","_readyPromise","_readyResolve","_listeners","_ensurePromise","resolve","SharedRpc","callProxy","listener","RpcMixin","superClass","method","args","result","keys","_getDefaults","_defaults","changeDefaults","newDefaults","noopTest","edit","regex","opt","source","obj","name","val","valSource","other","bull","indent","newline","blockCode","fences","hr","heading","bullet","lheadingCore","lheading","lheadingGfm","_paragraph","blockText","_blockLabel","def","list","_tag","_comment","html","paragraph","blockquote","blockNormal","gfmTable","blockGfm","blockPedantic","escape","inlineCode","br","inlineText","_punctuation","_punctuationOrSpace","_notPunctuationOrSpace","punctuation","_punctuationGfmStrongEm","_punctuationOrSpaceGfmStrongEm","_notPunctuationOrSpaceGfmStrongEm","blockSkip","emStrongLDelimCore","emStrongLDelim","emStrongLDelimGfm","emStrongRDelimAstCore","emStrongRDelimAst","emStrongRDelimAstGfm","emStrongRDelimUnd","anyPunctuation","autolink","_inlineComment","tag","_inlineLabel","link","reflink","nolink","reflinkSearch","inlineNormal","inlinePedantic","inlineGfm","inlineBreaks","block","inline","escapeReplacements","getEscapeReplacement","ch","escape2","html2","encode","cleanUrl","href","splitCells","tableRow","count","row","match","offset","str","escaped","curr","cells","rtrim","invert","suffLen","findClosingBracket","level","outputLink","cap","link2","raw","lexer2","rules","title","text","token","indentCodeCompensation","matchIndentToCode","indentToCode","node","matchIndentInNode","indentInNode","_Tokenizer","options2","src","trimmed","lines","tokens","inBlockquote","currentLines","currentRaw","currentText","top","lastToken","oldToken","newText","newToken","isordered","list2","itemRegex","endsWithBlankLine","endEarly","itemContents","line","nextLine","blankLine","nextBulletRegex","hrRegex","fencesBeginRegex","headingBeginRegex","htmlBeginRegex","rawLine","nextLineWithoutTabs","istask","ischecked","lastItem","spacers","hasMultipleLineBreaks","tag2","headers","aligns","rows","item","align","cell","trimmedUrl","rtrimSlash","lastParenIndex","linkLen","links","linkString","maskedSrc","prevChar","lLength","rDelim","rLength","delimTotal","midDelimTotal","endReg","lastCharLength","text2","hasNonSpaceChars","hasSpaceCharsOnBothEnds","prevCapZero","_Lexer","__Lexer","next","lastParagraphClipped","extTokenizer","cutSrc","startIndex","tempSrc","tempStart","getStartIndex","errMsg","keepPrevChar","_Renderer","lang","langString","code","depth","ordered","start","body","j","type","startAttr","itemBody","checkbox","checked","header","content","cleanHref","out","_TextRenderer","_Parser","__Parser","anyToken","genericToken","ret","textToken","renderer","_Hooks","markdown","Marked","callback","values","tableToken","listToken","childTokens","tokens2","extensions","pack","opts","ext","prevRenderer","args2","extLevel","prop","rendererProp","rendererFunc","tokenizer","tokenizerProp","tokenizerFunc","prevTokenizer","hooks","hooksProp","hooksFunc","prevHook","arg","ret2","walkTokens2","packWalktokens","blockType","origOpt","throwError","parser2","src2","silent","async","msg","markedInstance","marked","deepFreeze","Response","mode","escapeHTML","value","inherit$1","original","objects","key","SPAN_CLOSE","emitsWrappingTags","scopeToCSSClass","prefix","pieces","HTMLRenderer","parseTree","options","className","newNode","TokenTree","scope","builder","child","el","TokenTreeEmitter","emitter","re","lookahead","concat","anyNumberOfTimes","optional","stripOptionsFromArgs","either","countMatchGroups","startsWith","lexeme","BACKREF_RE","_rewriteBackreferences","regexps","joinWith","numCaptures","MATCH_NOTHING_RE","IDENT_RE","UNDERSCORE_IDENT_RE","NUMBER_RE","C_NUMBER_RE","BINARY_NUMBER_RE","RE_STARTERS_RE","SHEBANG","beginShebang","resp","BACKSLASH_ESCAPE","APOS_STRING_MODE","QUOTE_STRING_MODE","PHRASAL_WORDS_MODE","COMMENT","begin","end","modeOptions","ENGLISH_WORD","C_LINE_COMMENT_MODE","C_BLOCK_COMMENT_MODE","HASH_COMMENT_MODE","NUMBER_MODE","C_NUMBER_MODE","BINARY_NUMBER_MODE","REGEXP_MODE","TITLE_MODE","UNDERSCORE_TITLE_MODE","METHOD_GUARD","MODES","skipIfHasPrecedingDot","response","scopeClassName","_parent","beginKeywords","parent","compileIllegal","compileMatch","compileRelevance","beforeMatchExt","originalMode","COMMON_KEYWORDS","DEFAULT_KEYWORD_SCOPE","compileKeywords","rawKeywords","caseInsensitive","scopeName","compiledKeywords","compileList","keywordList","keyword","pair","scoreForKeyword","providedScore","commonKeyword","seenDeprecations","error","message","warn","deprecated","version","MultiClassError","remapScopeNames","regexes","scopeNames","emit","positions","beginMultiClass","endMultiClass","scopeSugar","MultiClass","compileLanguage","language","langRe","global","MultiRegex","terminators","matchData","ResumableMultiRegex","index","matcher","m2","buildModeRegex","mm","term","compileMode","cmode","keywordPattern","expandOrCloneMode","dependencyOnParent","variant","HTMLInjectionError","reason","inherit","NO_MATCH","MAX_KEYWORD_HITS","HLJS","hljs","languages","aliases","plugins","SAFE_MODE","LANGUAGE_NOT_FOUND","PLAINTEXT_LANGUAGE","shouldNotHighlight","languageName","blockLanguage","classes","getLanguage","_class","highlight","codeOrLanguageName","optionsOrCode","ignoreIllegals","context","fire","_highlight","codeToHighlight","continuation","keywordHits","keywordData","matchText","processKeywords","modeBuffer","lastIndex","buf","word","data","kind","keywordRelevance","relevance","cssClass","emitKeyword","processSubLanguage","continuations","highlightAuto","processBuffer","emitMultiClass","max","klass","startNewMode","endOfMode","matchPlusRemainder","matched","doIgnore","resumeScanAtSamePosition","doBeginMatch","newMode","beforeCallbacks","cb","doEndMatch","endMode","origin","processContinuations","current","lastMatch","processLexeme","textBeforeMatch","err","processed","iterations","md","beforeMatch","processedCount","justTextHighlightResult","languageSubset","plaintext","results","autoDetection","sorted","best","secondBest","updateClassName","element","currentLang","resultLang","highlightElement","configure","userOptions","initHighlighting","highlightAll","initHighlightingOnLoad","wantsHighlight","boot","registerLanguage","languageDefinition","error$1","registerAliases","unregisterLanguage","alias","listLanguages","aliasList","upgradePluginAPI","plugin","addPlugin","removePlugin","event","deprecateHighlightBlock","core","KEYWORDS","LITERALS","TYPES","ERROR_TYPES","BUILT_IN_GLOBALS","BUILT_IN_VARIABLES","BUILT_INS","javascript","hasClosingTag","after","IDENT_RE$1","FRAGMENT","XML_SELF_CLOSING","XML_TAG","afterMatchIndex","nextChar","afterMatch","KEYWORDS$1","decimalDigits","frac","decimalInteger","NUMBER","SUBST","HTML_TEMPLATE","CSS_TEMPLATE","GRAPHQL_TEMPLATE","TEMPLATE_STRING","SUBST_INTERNALS","SUBST_AND_COMMENTS","PARAMS_CONTAINS","PARAMS","CLASS_OR_EXTENDS","CLASS_REFERENCE","USE_STRICT","FUNCTION_DEFINITION","UPPER_CASE_CONSTANT","noneOf","FUNCTION_CALL","PROPERTY_ACCESS","GETTER_OR_SETTER","FUNC_LEAD_IN_RE","FUNCTION_VARIABLE","python","RESERVED_WORDS","PROMPT","LITERAL_BRACKET","STRING","digitpart","pointfloat","COMMENT_TYPE","typescript","tsLanguage","NAMESPACE","INTERFACE","TS_SPECIFIC_KEYWORDS","DECORATOR","swapMode","label","replacement","indx","ATTRIBUTE_HIGHLIGHT","OPTIONAL_KEY_OR_ARGUMENT","functionDeclaration","json","ATTRIBUTE","PUNCTUATION","LITERALS_MODE","bash","VAR","BRACED_VAR","HERE_DOC","QUOTE_STRING","ESCAPED_QUOTE","APOS_STRING","ESCAPED_APOS","ARITHMETIC","SH_LIKE_SHELLS","KNOWN_SHEBANG","FUNCTION","PATH_MODE","SHELL_BUILT_INS","BASH_BUILT_INS","ZSH_BUILT_INS","GNU_CORE_UTILS","HTML_TAGS","SVG_TAGS","TAGS","MEDIA_FEATURES","PSEUDO_CLASSES","PSEUDO_ELEMENTS","ATTRIBUTES","css","modes","VENDOR_PREFIX","AT_MODIFIERS","AT_PROPERTY_RE","STRINGS","xml","TAG_NAME_RE","XML_IDENT_RE","XML_ENTITIES","XML_META_KEYWORDS","XML_META_PAR_KEYWORDS","APOS_META_STRING_MODE","QUOTE_META_STRING_MODE","TAG_INTERNALS","yaml","URI_CHARACTERS","KEY","TEMPLATE_VARIABLES","SINGLE_QUOTE_STRING","CONTAINER_STRING","TIMESTAMP","VALUE_CONTAINER","OBJECT","ARRAY","VALUE_MODES","DECLTYPE_AUTO_RE","NAMESPACE_RE","FUNCTION_TYPE_RE","NUMBERS","PREPROCESSOR","FUNCTION_TITLE","EXPRESSION_CONTAINS","EXPRESSION_CONTEXT","FUNCTION_DECLARATION","cpp","CPP_PRIMITIVE_TYPES","RESERVED_KEYWORDS","RESERVED_TYPES","TYPE_HINTS","FUNCTION_HINTS","CPP_KEYWORDS","FUNCTION_DISPATCH","diff","INLINE_HTML","HORIZONTAL_RULE","CODE","LIST","LINK_REFERENCE","URL_SCHEME","LINK","BOLD","ITALIC","BOLD_WITHOUT_ITALIC","ITALIC_WITHOUT_BOLD","CONTAINABLE","highlighted","escapeHtml","renderMarkdown","Diff","oldString","newString","_options$timeout","self","done","newLen","oldLen","editLength","maxEditLength","maxExecutionTime","abortAfterTimestamp","bestPath","newPos","buildValues","minDiagonalToConsider","maxDiagonalToConsider","execEditLength","diagonalPath","basePath","removePath","addPath","canAdd","addPathNewPos","canRemove","exec","path","added","removed","oldPosInc","last","oldPos","commonCount","left","right","array","chars","changeObjects","lastComponent","useLongestToken","components","nextComponent","componentPos","componentLen","component","oldValue","longestCommonPrefix","str1","str2","longestCommonSuffix","replacePrefix","string","oldPrefix","newPrefix","replaceSuffix","oldSuffix","newSuffix","removePrefix","removeSuffix","maximumOverlap","string1","string2","overlapCount","startA","endB","map","extendedWordChars","tokenizeIncludingWhitespace","wordDiff","parts","segment","prevPart","part","changes","lastKeep","insertion","deletion","change","dedupeWhitespaceInChangeObjects","diffWords","oldStr","newStr","startKeep","endKeep","oldWsPrefix","oldWsSuffix","newWsPrefix","newWsSuffix","commonWsPrefix","commonWsSuffix","newWsFull","delWsStart","delWsEnd","newWsStart","newWsEnd","endKeepWsPrefix","deletionWsSuffix","overlap","startKeepWsSuffix","deletionWsPrefix","_overlap","wordWithSpaceDiff","lineDiff","retLines","linesAndNewlines","diffLines","sentenceDiff","cssDiff","_typeof","jsonDiff","undefinedReplacement","_options$stringifyRep","stringifyReplacer","canonicalize","stack","replacementStack","replacer","canonicalizedObj","sortedKeys","_key","arrayDiff","EDIT_START","EDIT_SEP","EDIT_END","segmentResponse","segments","textBuf","state","candidatePath","oldLines","newLines","flushText","_looksLikePath","prev","prevLines","computeDiff","removes","adds","paired","charDiff","computeCharDiff","oldSegs","newSegs","_mergeSegments","segs","merged","ChatPanel","LitElement","sentinel","container","entry","filePath","allMessages","hasContent","nothing","idx","total","isUser","isLast","forceVisible","actionBar","pos","unsafeHTML","textHtml","imgs","showEditResults","isFinal","resultMap","allMentionedFiles","seg","rendered","processedHtml","files","status","applied","failed","skipped","htmlContent","rawContent","candidates","foundFiles","skipPattern","lastIdx","combinedRe","selectedSet","before","lastOpen","lastClose","nearBefore","notInContext","inCtx","img","copyBtn","pre","mention","btn","retries","lastScrollHeight","pump","SpeechToText","SpeechRecognition","MAX_IMAGE_SIZE","MAX_IMAGES","URL_DETECT_DEBOUNCE_MS","ChatInput","urls","textarea","items","file","reader","history","query","q","scored","lower","substringIdx","qi","ti","UrlChips","url","hasDetected","hasFetched","hasFetching","info","isFetching","icon","isExcluded","hasError","FilePicker","changed","fpath","isDir","children","walk","nodes","sel","blockMid","ev","blockPaste","dirFiles","hasUnstaged","hasStaged","defaultVal","op","paths","extra","dirPath","flat","expanded","checkState","isFocused","selected","badge","stats","isActiveInViewer","clampedX","clampedY","placeholder","input","DEBOUNCE_MS","SESSION_CACHE_TTL","HistoryBrowser","now","sessions","sessionId","messages","timestamp","diffMs","diffDays","len","clean","truncated","pattern","isSearching","isHighlighted","TokenHud","usage","cacheHitPct","FilesTab","picker","panel","selectedFiles","insert","wasSelected","fileName","suffix","existingFiles","parenthetical","seen","fetchedSet","existing","images","userMsg","requestId","dx","newWidth","staged","unstaged","diffResult","msgResult","commitMsg","commitResult","pickerStyle","SearchTab","gen","group","wordBound","totalMatches","totalFiles","flatIdx","matchCount","matchRows","ctx","ContextTab","rate","detailFn","hasDetail","totals","CacheTab","threshold","pct","blocks","promotions","demotions","tierClass","filteredContents","filtered","it","CONFIG_CARDS","SettingsTab","card","TABS","AcDialog","tabId","dy","host","rect","dir","width","height","activeLabel","tab","contentFn","LANG_MAP","detectLanguage","dot","DiffViewer","modified","is_new","is_read_only","is_config","config_type","real_path","existingIdx","configType","displayPath","editResults","filesModified","updated","monaco","__vitePreload","root","clone","fixes","originalModel","modifiedModel","oldModel","modifiedEditor","decorations","currentContent","hasDirty","isDirty","isActive","changedProps","viewer","langId","model","position","_ctx","modelUri","targetFile","range","targetLine","targetCol","ref","refFile","uri","startLine","startCol","KIND_MAP","ToastContainer","toast","duration","id","oldest","AcApp","JRPCClient","port","wasConnected","delay","detail","diffViewer","isConfig"],"ignoreList":[0,1,2,3,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,22],"sources":["../../node_modules/@lit/reactive-element/css-tag.js","../../node_modules/@lit/reactive-element/reactive-element.js","../../node_modules/lit-html/lit-html.js","../../node_modules/lit-element/lit-element.js","../../src/rpc-mixin.js","../../node_modules/lit-html/directive.js","../../node_modules/lit-html/directives/unsafe-html.js","../../node_modules/marked/lib/marked.esm.js","../../node_modules/highlight.js/lib/core.js","../../node_modules/highlight.js/es/languages/javascript.js","../../node_modules/highlight.js/es/languages/python.js","../../node_modules/highlight.js/es/languages/typescript.js","../../node_modules/highlight.js/es/languages/json.js","../../node_modules/highlight.js/es/languages/bash.js","../../node_modules/highlight.js/es/languages/css.js","../../node_modules/highlight.js/es/languages/xml.js","../../node_modules/highlight.js/es/languages/yaml.js","../../node_modules/highlight.js/es/languages/c.js","../../node_modules/highlight.js/es/languages/cpp.js","../../node_modules/highlight.js/es/languages/diff.js","../../node_modules/highlight.js/es/languages/markdown.js","../../src/utils/markdown.js","../../node_modules/diff/lib/index.mjs","../../src/utils/edit-blocks.js","../../src/chat/chat-panel.js","../../src/prompt/SpeechToText.js","../../src/chat/chat-input.js","../../src/chat/url-chips.js","../../src/chat/file-picker.js","../../src/chat/history-browser.js","../../src/chat/token-hud.js","../../src/chat/files-tab.js","../../src/chat/search-tab.js","../../src/chat/context-tab.js","../../src/chat/cache-tab.js","../../src/chat/settings-tab.js","../../src/dialog/ac-dialog.js","../../src/chat/diff-viewer.js","../../src/chat/toast-container.js","../../src/app-shell.js"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1],t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,css,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:h,getOwnPropertyNames:r,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),b={attribute:!0,type:String,converter:u,reflect:!1,useDefault:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class y extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=b){if(s.state&&(s.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(t)&&((s=Object.create(s)).wrapped=!0),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),h=this.getPropertyDescriptor(t,i,s);void 0!==h&&e(this.prototype,t,h)}}static getPropertyDescriptor(t,s,i){const{get:e,set:r}=h(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get:e,set(s){const h=e?.call(this);r?.call(this,s),this.requestUpdate(t,h,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??b}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...r(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(t=>t(this))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(t=>t.hostConnected?.())}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach(t=>t.hostDisconnected?.())}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$ET(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const h=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==h?this.removeAttribute(e):this.setAttribute(e,h),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e;const r=h.fromAttribute(s,t.type);this[e]=r??this._$Ej?.get(e)??r,this._$Em=null}}requestUpdate(t,s,i,e=!1,h){if(void 0!==t){const r=this.constructor;if(!1===e&&(h=this[t]),i??=r.getPropertyOptions(t),!((i.hasChanged??f)(h,s)||i.useDefault&&i.reflect&&h===this._$Ej?.get(t)&&!this.hasAttribute(r._$Eu(t,i))))return;this.C(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(t,s,{useDefault:i,reflect:e,wrapped:h},r){i&&!(this._$Ej??=new Map).has(t)&&(this._$Ej.set(t,r??s??this[t]),!0!==h||void 0!==r)||(this._$AL.has(t)||(this.hasUpdated||i||(s=void 0),this._$AL.set(t,s)),!0===e&&this._$Em!==t&&(this._$Eq??=new Set).add(t))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t){const{wrapped:t}=i,e=this[s];!0!==t||this._$AL.has(s)||void 0===e||this.C(s,void 0,i,e)}}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach(t=>t.hostUpdate?.()),this.update(s)):this._$EM()}catch(s){throw t=!1,this._$EM(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(t){}firstUpdated(t){}}y.elementStyles=[],y.shadowRootOptions={mode:\"open\"},y[d(\"elementProperties\")]=new Map,y[d(\"finalized\")]=new Map,p?.({ReactiveElement:y}),(a.reactiveElementVersions??=[]).push(\"2.1.2\");export{y as ReactiveElement,s as adoptStyles,u as defaultConverter,t as getCompatibleStyle,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t=>t,s=t.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,h=\"$lit$\",o=`lit$${Math.random().toFixed(9).slice(2)}$`,n=\"?\"+o,r=`<${n}>`,l=document,c=()=>l.createComment(\"\"),a=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,u=Array.isArray,d=t=>u(t)||\"function\"==typeof t?.[Symbol.iterator],f=\"[ \\t\\n\\f\\r]\",v=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,_=/-->/g,m=/>/g,p=RegExp(`>|${f}(?:([^\\\\s\"'>=/]+)(${f}*=${f}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),g=/'/g,$=/\"/g,y=/^(?:script|style|textarea|title)$/i,x=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),b=x(1),w=x(2),T=x(3),E=Symbol.for(\"lit-noChange\"),A=Symbol.for(\"lit-nothing\"),C=new WeakMap,P=l.createTreeWalker(l,129);function V(t,i){if(!u(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==e?e.createHTML(i):i}const N=(t,i)=>{const s=t.length-1,e=[];let n,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=v;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,f=0;for(;f<s.length&&(c.lastIndex=f,u=c.exec(s),null!==u);)f=c.lastIndex,c===v?\"!--\"===u[1]?c=_:void 0!==u[1]?c=m:void 0!==u[2]?(y.test(u[2])&&(n=RegExp(\"</\"+u[2],\"g\")),c=p):void 0!==u[3]&&(c=p):c===p?\">\"===u[0]?(c=n??v,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?p:'\"'===u[3]?$:g):c===$||c===g?c=p:c===_||c===m?c=v:(c=p,n=void 0);const x=c===p&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===v?s+r:d>=0?(e.push(a),s.slice(0,d)+h+s.slice(d)+o+x):s+o+(-2===d?i:x)}return[V(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),e]};class S{constructor({strings:t,_$litType$:i},e){let r;this.parts=[];let l=0,a=0;const u=t.length-1,d=this.parts,[f,v]=N(t,i);if(this.el=S.createElement(f,e),P.currentNode=this.el.content,2===i||3===i){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=P.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(h)){const i=v[a++],s=r.getAttribute(t).split(o),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:l,name:e[2],strings:s,ctor:\".\"===e[1]?I:\"?\"===e[1]?L:\"@\"===e[1]?z:H}),r.removeAttribute(t)}else t.startsWith(o)&&(d.push({type:6,index:l}),r.removeAttribute(t));if(y.test(r.tagName)){const t=r.textContent.split(o),i=t.length-1;if(i>0){r.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)r.append(t[s],c()),P.nextNode(),d.push({type:2,index:++l});r.append(t[i],c())}}}else if(8===r.nodeType)if(r.data===n)d.push({type:2,index:l});else{let t=-1;for(;-1!==(t=r.data.indexOf(o,t+1));)d.push({type:7,index:l}),t+=o.length-1}l++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function M(t,i,s=t,e){if(i===E)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=a(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=M(t,h._$AS(t,i.values),h,e)),i}class R{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??l).importNode(i,!0);P.currentNode=e;let h=P.nextNode(),o=0,n=0,r=s[0];for(;void 0!==r;){if(o===r.index){let i;2===r.type?i=new k(h,h.nextSibling,this,t):1===r.type?i=new r.ctor(h,r.name,r.strings,this,t):6===r.type&&(i=new Z(h,this,t)),this._$AV.push(i),r=s[++n]}o!==r?.index&&(h=P.nextNode(),o++)}return P.currentNode=l,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class k{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=M(this,t,i),a(t)?t===A||null==t||\"\"===t?(this._$AH!==A&&this._$AR(),this._$AH=A):t!==this._$AH&&t!==E&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):d(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==A&&a(this._$AH)?this._$AA.nextSibling.data=t:this.T(l.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=S.createElement(V(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new R(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=C.get(t.strings);return void 0===i&&C.set(t.strings,i=new S(t)),i}k(t){u(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new k(this.O(c()),this.O(c()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,s){for(this._$AP?.(!1,!0,s);t!==this._$AB;){const s=i(t).nextSibling;i(t).remove(),t=s}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class H{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=A,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=A}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=M(this,t,i,0),o=!a(t)||t!==this._$AH&&t!==E,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=M(this,e[s+n],i,n),r===E&&(r=this._$AH[n]),o||=!a(r)||r!==this._$AH[n],r===A?t=A:t!==A&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class I extends H{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===A?void 0:t}}class L extends H{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==A)}}class z extends H{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=M(this,t,i,0)??A)===E)return;const s=this._$AH,e=t===A&&s!==A||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==A&&(s===A||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class Z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){M(this,t)}}const j={M:h,P:o,A:n,C:1,L:N,R,D:d,V:M,I:k,H,N:L,U:z,B:I,F:Z},B=t.litHtmlPolyfillSupport;B?.(S,k),(t.litHtmlVersions??=[]).push(\"3.3.2\");const D=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new k(i.insertBefore(c(),t),t,void 0,s??{})}return h._$AI(t),h};export{j as _$LH,b as html,T as mathml,E as noChange,A as nothing,D as render,w as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as r}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=globalThis;class i extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return r}}i._$litElement$=!0,i[\"finalized\"]=!0,s.litElementHydrateSupport?.({LitElement:i});const o=s.litElementPolyfillSupport;o?.({LitElement:i});const n={_$AK:(t,e,r)=>{t._$AK(e,r)},_$AL:t=>t._$AL};(s.litElementVersions??=[]).push(\"4.2.2\");export{i as LitElement,n as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * RPC Mixin  shared singleton for jrpc-oo call proxy.\n *\n * The root app shell sets the call proxy on connection.\n * Child components use this mixin to access RPC methods.\n *\n * Usage:\n *   class MyComponent extends RpcMixin(LitElement) {\n *     async onRpcReady() {\n *       const result = await this.rpcCall('Repo.get_file_tree');\n *     }\n *   }\n */\n\nlet _callProxy = null;\nlet _readyPromise = null;\nlet _readyResolve = null;\nconst _listeners = new Set();\n\n// Create the initial ready promise\nfunction _ensurePromise() {\n  if (!_readyPromise) {\n    _readyPromise = new Promise(resolve => { _readyResolve = resolve; });\n  }\n}\n_ensurePromise();\n\nexport const SharedRpc = {\n  /** Called by the root app shell when jrpc-oo connection is ready */\n  set(callProxy) {\n    _callProxy = callProxy;\n    if (_readyResolve) {\n      _readyResolve(callProxy);\n      _readyResolve = null;\n    }\n    // Notify all mounted components\n    for (const listener of _listeners) {\n      try { listener.onRpcReady(); } catch (e) { console.error('onRpcReady error:', e); }\n    }\n  },\n\n  /** Get the call proxy (may be null if not connected) */\n  get call() { return _callProxy; },\n\n  /** True if the connection is established */\n  get connected() { return _callProxy !== null; },\n\n  /** Wait for connection */\n  get ready() {\n    _ensurePromise();\n    return _readyPromise;\n  },\n\n  /** Reset on disconnect */\n  reset() {\n    _callProxy = null;\n    _readyPromise = new Promise(resolve => { _readyResolve = resolve; });\n  },\n};\n\n/**\n * RPC Mixin for LitElement components.\n *\n * Provides:\n *   this.rpcCall(method, ...args)  raw call returning {MethodName: result}\n *   this.rpcExtract(method, ...args)  unwraps the envelope\n *   this.rpcConnected  boolean\n *   this.onRpcReady()  override to react to connection\n */\nexport const RpcMixin = (superClass) => class extends superClass {\n  constructor() {\n    super();\n    this._rpcRegistered = false;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    _listeners.add(this);\n    this._rpcRegistered = true;\n    if (SharedRpc.connected) {\n      // Already connected  schedule callback\n      queueMicrotask(() => this.onRpcReady());\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    _listeners.delete(this);\n    this._rpcRegistered = false;\n  }\n\n  get rpcConnected() {\n    return SharedRpc.connected;\n  }\n\n  /**\n   * Raw RPC call  returns the full envelope { MethodName: result }.\n   */\n  async rpcCall(method, ...args) {\n    if (!SharedRpc.call) {\n      await SharedRpc.ready;\n    }\n    return SharedRpc.call[method](...args);\n  }\n\n  /**\n   * RPC call that unwraps the jrpc-oo response envelope.\n   * jrpc-oo returns { 'MethodName': returnValue }, this extracts returnValue.\n   */\n  async rpcExtract(method, ...args) {\n    const result = await this.rpcCall(method, ...args);\n    if (result === null || result === undefined) return result;\n    if (typeof result === 'object') {\n      const keys = Object.keys(result);\n      if (keys.length === 1) {\n        return result[keys[0]];\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Override in subclasses to react when RPC becomes available.\n   */\n  onRpcReady() {}\n};\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{nothing as t,noChange as i}from\"../lit-html.js\";import{directive as r,Directive as s,PartType as n}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class e extends s{constructor(i){if(super(i),this.it=t,i.type!==n.CHILD)throw Error(this.constructor.directiveName+\"() can only be used in child bindings\")}render(r){if(r===t||null==r)return this._t=void 0,this.it=r;if(r===i)return r;if(\"string\"!=typeof r)throw Error(this.constructor.directiveName+\"() called with a non-string value\");if(r===this.it)return this._t;this.it=r;const s=[r];return s.raw=s,this._t={_$litType$:this.constructor.resultType,strings:s,values:[]}}}e.directiveName=\"unsafeHTML\",e.resultType=1;const o=r(e);export{e as UnsafeHTMLDirective,o as unsafeHTML};\n//# sourceMappingURL=unsafe-html.js.map\n","/**\n * marked v15.0.12 - a markdown parser\n * Copyright (c) 2011-2025, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n\n// src/defaults.ts\nfunction _getDefaults() {\n  return {\n    async: false,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    hooks: null,\n    pedantic: false,\n    renderer: null,\n    silent: false,\n    tokenizer: null,\n    walkTokens: null\n  };\n}\nvar _defaults = _getDefaults();\nfunction changeDefaults(newDefaults) {\n  _defaults = newDefaults;\n}\n\n// src/rules.ts\nvar noopTest = { exec: () => null };\nfunction edit(regex, opt = \"\") {\n  let source = typeof regex === \"string\" ? regex : regex.source;\n  const obj = {\n    replace: (name, val) => {\n      let valSource = typeof val === \"string\" ? val : val.source;\n      valSource = valSource.replace(other.caret, \"$1\");\n      source = source.replace(name, valSource);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(source, opt);\n    }\n  };\n  return obj;\n}\nvar other = {\n  codeRemoveIndent: /^(?: {1,4}| {0,3}\\t)/gm,\n  outputLinkReplace: /\\\\([\\[\\]])/g,\n  indentCodeCompensation: /^(\\s+)(?:```)/,\n  beginningSpace: /^\\s+/,\n  endingHash: /#$/,\n  startingSpaceChar: /^ /,\n  endingSpaceChar: / $/,\n  nonSpaceChar: /[^ ]/,\n  newLineCharGlobal: /\\n/g,\n  tabCharGlobal: /\\t/g,\n  multipleSpaceGlobal: /\\s+/g,\n  blankLine: /^[ \\t]*$/,\n  doubleBlankLine: /\\n[ \\t]*\\n[ \\t]*$/,\n  blockquoteStart: /^ {0,3}>/,\n  blockquoteSetextReplace: /\\n {0,3}((?:=+|-+) *)(?=\\n|$)/g,\n  blockquoteSetextReplace2: /^ {0,3}>[ \\t]?/gm,\n  listReplaceTabs: /^\\t+/,\n  listReplaceNesting: /^ {1,4}(?=( {4})*[^ ])/g,\n  listIsTask: /^\\[[ xX]\\] /,\n  listReplaceTask: /^\\[[ xX]\\] +/,\n  anyLine: /\\n.*\\n/,\n  hrefBrackets: /^<(.*)>$/,\n  tableDelimiter: /[:|]/,\n  tableAlignChars: /^\\||\\| *$/g,\n  tableRowBlankLine: /\\n[ \\t]*$/,\n  tableAlignRight: /^ *-+: *$/,\n  tableAlignCenter: /^ *:-+: *$/,\n  tableAlignLeft: /^ *:-+ *$/,\n  startATag: /^<a /i,\n  endATag: /^<\\/a>/i,\n  startPreScriptTag: /^<(pre|code|kbd|script)(\\s|>)/i,\n  endPreScriptTag: /^<\\/(pre|code|kbd|script)(\\s|>)/i,\n  startAngleBracket: /^</,\n  endAngleBracket: />$/,\n  pedanticHrefTitle: /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/,\n  unicodeAlphaNumeric: /[\\p{L}\\p{N}]/u,\n  escapeTest: /[&<>\"']/,\n  escapeReplace: /[&<>\"']/g,\n  escapeTestNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/,\n  escapeReplaceNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/g,\n  unescapeTest: /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig,\n  caret: /(^|[^\\[])\\^/g,\n  percentDecode: /%25/g,\n  findPipe: /\\|/g,\n  splitPipe: / \\|/,\n  slashPipe: /\\\\\\|/g,\n  carriageReturn: /\\r\\n|\\r/g,\n  spaceLine: /^ +$/gm,\n  notSpaceStart: /^\\S*/,\n  endingNewline: /\\n$/,\n  listItemRegex: (bull) => new RegExp(`^( {0,3}${bull})((?:[\t ][^\\\\n]*)?(?:\\\\n|$))`),\n  nextBulletRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \t][^\\\\n]*)?(?:\\\\n|$))`),\n  hrRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`),\n  fencesBeginRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`),\n  headingBeginRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`),\n  htmlBeginRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}<(?:[a-z].*>|!--)`, \"i\")\n};\nvar newline = /^(?:[ \\t]*(?:\\n|$))+/;\nvar blockCode = /^((?: {4}| {0,3}\\t)[^\\n]+(?:\\n(?:[ \\t]*(?:\\n|$))*)?)+/;\nvar fences = /^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/;\nvar hr = /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/;\nvar heading = /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/;\nvar bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nvar lheadingCore = /^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\\n(?!\\s*?\\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/;\nvar lheading = edit(lheadingCore).replace(/bull/g, bullet).replace(/blockCode/g, /(?: {4}| {0,3}\\t)/).replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g, / {0,3}>/).replace(/heading/g, / {0,3}#{1,6}/).replace(/html/g, / {0,3}<[^\\n>]+>\\n/).replace(/\\|table/g, \"\").getRegex();\nvar lheadingGfm = edit(lheadingCore).replace(/bull/g, bullet).replace(/blockCode/g, /(?: {4}| {0,3}\\t)/).replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g, / {0,3}>/).replace(/heading/g, / {0,3}#{1,6}/).replace(/html/g, / {0,3}<[^\\n>]+>\\n/).replace(/table/g, / {0,3}\\|?(?:[:\\- ]*\\|)+[\\:\\- ]*\\n/).getRegex();\nvar _paragraph = /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/;\nvar blockText = /^[^\\n]+/;\nvar _blockLabel = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\nvar def = edit(/^ {0,3}\\[(label)\\]: *(?:\\n[ \\t]*)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n[ \\t]*)?| *\\n[ \\t]*)(title))? *(?:\\n+|$)/).replace(\"label\", _blockLabel).replace(\"title\", /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/).getRegex();\nvar list = edit(/^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/).replace(/bull/g, bullet).getRegex();\nvar _tag = \"address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul\";\nvar _comment = /<!--(?:-?>|[\\s\\S]*?(?:-->|$))/;\nvar html = edit(\n  \"^ {0,3}(?:<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)|comment[^\\\\n]*(\\\\n+|$)|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$)|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$)|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \t]*)+\\\\n|$))\",\n  \"i\"\n).replace(\"comment\", _comment).replace(\"tag\", _tag).replace(\"attribute\", / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\nvar paragraph = edit(_paragraph).replace(\"hr\", hr).replace(\"heading\", \" {0,3}#{1,6}(?:\\\\s|$)\").replace(\"|lheading\", \"\").replace(\"|table\", \"\").replace(\"blockquote\", \" {0,3}>\").replace(\"fences\", \" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\", \" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\", \"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\", _tag).getRegex();\nvar blockquote = edit(/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/).replace(\"paragraph\", paragraph).getRegex();\nvar blockNormal = {\n  blockquote,\n  code: blockCode,\n  def,\n  fences,\n  heading,\n  hr,\n  html,\n  lheading,\n  list,\n  newline,\n  paragraph,\n  table: noopTest,\n  text: blockText\n};\nvar gfmTable = edit(\n  \"^ *([^\\\\n ].*)\\\\n {0,3}((?:\\\\| *)?:?-+:? *(?:\\\\| *:?-+:? *)*(?:\\\\| *)?)(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)\"\n).replace(\"hr\", hr).replace(\"heading\", \" {0,3}#{1,6}(?:\\\\s|$)\").replace(\"blockquote\", \" {0,3}>\").replace(\"code\", \"(?: {4}| {0,3}\t)[^\\\\n]\").replace(\"fences\", \" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\", \" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\", \"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\", _tag).getRegex();\nvar blockGfm = {\n  ...blockNormal,\n  lheading: lheadingGfm,\n  table: gfmTable,\n  paragraph: edit(_paragraph).replace(\"hr\", hr).replace(\"heading\", \" {0,3}#{1,6}(?:\\\\s|$)\").replace(\"|lheading\", \"\").replace(\"table\", gfmTable).replace(\"blockquote\", \" {0,3}>\").replace(\"fences\", \" {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n\").replace(\"list\", \" {0,3}(?:[*+-]|1[.)]) \").replace(\"html\", \"</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)\").replace(\"tag\", _tag).getRegex()\n};\nvar blockPedantic = {\n  ...blockNormal,\n  html: edit(\n    `^ *(?:comment *(?:\\\\n|\\\\s*$)|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\\\s[^'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))`\n  ).replace(\"comment\", _comment).replace(/tag/g, \"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b\").getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n  fences: noopTest,\n  // fences not supported\n  lheading: /^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  paragraph: edit(_paragraph).replace(\"hr\", hr).replace(\"heading\", \" *#{1,6} *[^\\n]\").replace(\"lheading\", lheading).replace(\"|table\", \"\").replace(\"blockquote\", \" {0,3}>\").replace(\"|fences\", \"\").replace(\"|list\", \"\").replace(\"|html\", \"\").replace(\"|tag\", \"\").getRegex()\n};\nvar escape = /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/;\nvar inlineCode = /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/;\nvar br = /^( {2,}|\\\\)\\n(?!\\s*$)/;\nvar inlineText = /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/;\nvar _punctuation = /[\\p{P}\\p{S}]/u;\nvar _punctuationOrSpace = /[\\s\\p{P}\\p{S}]/u;\nvar _notPunctuationOrSpace = /[^\\s\\p{P}\\p{S}]/u;\nvar punctuation = edit(/^((?![*_])punctSpace)/, \"u\").replace(/punctSpace/g, _punctuationOrSpace).getRegex();\nvar _punctuationGfmStrongEm = /(?!~)[\\p{P}\\p{S}]/u;\nvar _punctuationOrSpaceGfmStrongEm = /(?!~)[\\s\\p{P}\\p{S}]/u;\nvar _notPunctuationOrSpaceGfmStrongEm = /(?:[^\\s\\p{P}\\p{S}]|~)/u;\nvar blockSkip = /\\[[^[\\]]*?\\]\\((?:\\\\.|[^\\\\\\(\\)]|\\((?:\\\\.|[^\\\\\\(\\)])*\\))*\\)|`[^`]*?`|<[^<>]*?>/g;\nvar emStrongLDelimCore = /^(?:\\*+(?:((?!\\*)punct)|[^\\s*]))|^_+(?:((?!_)punct)|([^\\s_]))/;\nvar emStrongLDelim = edit(emStrongLDelimCore, \"u\").replace(/punct/g, _punctuation).getRegex();\nvar emStrongLDelimGfm = edit(emStrongLDelimCore, \"u\").replace(/punct/g, _punctuationGfmStrongEm).getRegex();\nvar emStrongRDelimAstCore = \"^[^_*]*?__[^_*]*?\\\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\\\*)punct(\\\\*+)(?=[\\\\s]|$)|notPunctSpace(\\\\*+)(?!\\\\*)(?=punctSpace|$)|(?!\\\\*)punctSpace(\\\\*+)(?=notPunctSpace)|[\\\\s](\\\\*+)(?!\\\\*)(?=punct)|(?!\\\\*)punct(\\\\*+)(?!\\\\*)(?=punct)|notPunctSpace(\\\\*+)(?=notPunctSpace)\";\nvar emStrongRDelimAst = edit(emStrongRDelimAstCore, \"gu\").replace(/notPunctSpace/g, _notPunctuationOrSpace).replace(/punctSpace/g, _punctuationOrSpace).replace(/punct/g, _punctuation).getRegex();\nvar emStrongRDelimAstGfm = edit(emStrongRDelimAstCore, \"gu\").replace(/notPunctSpace/g, _notPunctuationOrSpaceGfmStrongEm).replace(/punctSpace/g, _punctuationOrSpaceGfmStrongEm).replace(/punct/g, _punctuationGfmStrongEm).getRegex();\nvar emStrongRDelimUnd = edit(\n  \"^[^_*]*?\\\\*\\\\*[^_*]*?_[^_*]*?(?=\\\\*\\\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)\",\n  \"gu\"\n).replace(/notPunctSpace/g, _notPunctuationOrSpace).replace(/punctSpace/g, _punctuationOrSpace).replace(/punct/g, _punctuation).getRegex();\nvar anyPunctuation = edit(/\\\\(punct)/, \"gu\").replace(/punct/g, _punctuation).getRegex();\nvar autolink = edit(/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/).replace(\"scheme\", /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace(\"email\", /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex();\nvar _inlineComment = edit(_comment).replace(\"(?:-->|$)\", \"-->\").getRegex();\nvar tag = edit(\n  \"^comment|^</[a-zA-Z][\\\\w:-]*\\\\s*>|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>|^<\\\\?[\\\\s\\\\S]*?\\\\?>|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\"\n).replace(\"comment\", _inlineComment).replace(\"attribute\", /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/).getRegex();\nvar _inlineLabel = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\nvar link = edit(/^!?\\[(label)\\]\\(\\s*(href)(?:(?:[ \\t]*(?:\\n[ \\t]*)?)(title))?\\s*\\)/).replace(\"label\", _inlineLabel).replace(\"href\", /<(?:\\\\.|[^\\n<>\\\\])+>|[^ \\t\\n\\x00-\\x1f]*/).replace(\"title\", /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/).getRegex();\nvar reflink = edit(/^!?\\[(label)\\]\\[(ref)\\]/).replace(\"label\", _inlineLabel).replace(\"ref\", _blockLabel).getRegex();\nvar nolink = edit(/^!?\\[(ref)\\](?:\\[\\])?/).replace(\"ref\", _blockLabel).getRegex();\nvar reflinkSearch = edit(\"reflink|nolink(?!\\\\()\", \"g\").replace(\"reflink\", reflink).replace(\"nolink\", nolink).getRegex();\nvar inlineNormal = {\n  _backpedal: noopTest,\n  // only used for GFM url\n  anyPunctuation,\n  autolink,\n  blockSkip,\n  br,\n  code: inlineCode,\n  del: noopTest,\n  emStrongLDelim,\n  emStrongRDelimAst,\n  emStrongRDelimUnd,\n  escape,\n  link,\n  nolink,\n  punctuation,\n  reflink,\n  reflinkSearch,\n  tag,\n  text: inlineText,\n  url: noopTest\n};\nvar inlinePedantic = {\n  ...inlineNormal,\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/).replace(\"label\", _inlineLabel).getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace(\"label\", _inlineLabel).getRegex()\n};\nvar inlineGfm = {\n  ...inlineNormal,\n  emStrongRDelimAst: emStrongRDelimAstGfm,\n  emStrongLDelim: emStrongLDelimGfm,\n  url: edit(/^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/, \"i\").replace(\"email\", /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),\n  _backpedal: /(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,\n  del: /^(~~?)(?=[^\\s~])((?:\\\\.|[^\\\\])*?(?:\\\\.|[^\\s~\\\\]))\\1(?=[^~]|$)/,\n  text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n};\nvar inlineBreaks = {\n  ...inlineGfm,\n  br: edit(br).replace(\"{2,}\", \"*\").getRegex(),\n  text: edit(inlineGfm.text).replace(\"\\\\b_\", \"\\\\b_| {2,}\\\\n\").replace(/\\{2,\\}/g, \"*\").getRegex()\n};\nvar block = {\n  normal: blockNormal,\n  gfm: blockGfm,\n  pedantic: blockPedantic\n};\nvar inline = {\n  normal: inlineNormal,\n  gfm: inlineGfm,\n  breaks: inlineBreaks,\n  pedantic: inlinePedantic\n};\n\n// src/helpers.ts\nvar escapeReplacements = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': \"&quot;\",\n  \"'\": \"&#39;\"\n};\nvar getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape2(html2, encode) {\n  if (encode) {\n    if (other.escapeTest.test(html2)) {\n      return html2.replace(other.escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (other.escapeTestNoEncode.test(html2)) {\n      return html2.replace(other.escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n  return html2;\n}\nfunction cleanUrl(href) {\n  try {\n    href = encodeURI(href).replace(other.percentDecode, \"%\");\n  } catch {\n    return null;\n  }\n  return href;\n}\nfunction splitCells(tableRow, count) {\n  const row = tableRow.replace(other.findPipe, (match, offset, str) => {\n    let escaped = false;\n    let curr = offset;\n    while (--curr >= 0 && str[curr] === \"\\\\\") escaped = !escaped;\n    if (escaped) {\n      return \"|\";\n    } else {\n      return \" |\";\n    }\n  }), cells = row.split(other.splitPipe);\n  let i = 0;\n  if (!cells[0].trim()) {\n    cells.shift();\n  }\n  if (cells.length > 0 && !cells.at(-1)?.trim()) {\n    cells.pop();\n  }\n  if (count) {\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) cells.push(\"\");\n    }\n  }\n  for (; i < cells.length; i++) {\n    cells[i] = cells[i].trim().replace(other.slashPipe, \"|\");\n  }\n  return cells;\n}\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return \"\";\n  }\n  let suffLen = 0;\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n  return str.slice(0, l - suffLen);\n}\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  let level = 0;\n  for (let i = 0; i < str.length; i++) {\n    if (str[i] === \"\\\\\") {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  if (level > 0) {\n    return -2;\n  }\n  return -1;\n}\n\n// src/Tokenizer.ts\nfunction outputLink(cap, link2, raw, lexer2, rules) {\n  const href = link2.href;\n  const title = link2.title || null;\n  const text = cap[1].replace(rules.other.outputLinkReplace, \"$1\");\n  lexer2.state.inLink = true;\n  const token = {\n    type: cap[0].charAt(0) === \"!\" ? \"image\" : \"link\",\n    raw,\n    href,\n    title,\n    text,\n    tokens: lexer2.inlineTokens(text)\n  };\n  lexer2.state.inLink = false;\n  return token;\n}\nfunction indentCodeCompensation(raw, text, rules) {\n  const matchIndentToCode = raw.match(rules.other.indentCodeCompensation);\n  if (matchIndentToCode === null) {\n    return text;\n  }\n  const indentToCode = matchIndentToCode[1];\n  return text.split(\"\\n\").map((node) => {\n    const matchIndentInNode = node.match(rules.other.beginningSpace);\n    if (matchIndentInNode === null) {\n      return node;\n    }\n    const [indentInNode] = matchIndentInNode;\n    if (indentInNode.length >= indentToCode.length) {\n      return node.slice(indentToCode.length);\n    }\n    return node;\n  }).join(\"\\n\");\n}\nvar _Tokenizer = class {\n  options;\n  rules;\n  // set by the lexer\n  lexer;\n  // set by the lexer\n  constructor(options2) {\n    this.options = options2 || _defaults;\n  }\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: \"space\",\n        raw: cap[0]\n      };\n    }\n  }\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(this.rules.other.codeRemoveIndent, \"\");\n      return {\n        type: \"code\",\n        raw: cap[0],\n        codeBlockStyle: \"indented\",\n        text: !this.options.pedantic ? rtrim(text, \"\\n\") : text\n      };\n    }\n  }\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || \"\", this.rules);\n      return {\n        type: \"code\",\n        raw,\n        lang: cap[2] ? cap[2].trim().replace(this.rules.inline.anyPunctuation, \"$1\") : cap[2],\n        text\n      };\n    }\n  }\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n      if (this.rules.other.endingHash.test(text)) {\n        const trimmed = rtrim(text, \"#\");\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || this.rules.other.endingSpaceChar.test(trimmed)) {\n          text = trimmed.trim();\n        }\n      }\n      return {\n        type: \"heading\",\n        raw: cap[0],\n        depth: cap[1].length,\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: \"hr\",\n        raw: rtrim(cap[0], \"\\n\")\n      };\n    }\n  }\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      let lines = rtrim(cap[0], \"\\n\").split(\"\\n\");\n      let raw = \"\";\n      let text = \"\";\n      const tokens = [];\n      while (lines.length > 0) {\n        let inBlockquote = false;\n        const currentLines = [];\n        let i;\n        for (i = 0; i < lines.length; i++) {\n          if (this.rules.other.blockquoteStart.test(lines[i])) {\n            currentLines.push(lines[i]);\n            inBlockquote = true;\n          } else if (!inBlockquote) {\n            currentLines.push(lines[i]);\n          } else {\n            break;\n          }\n        }\n        lines = lines.slice(i);\n        const currentRaw = currentLines.join(\"\\n\");\n        const currentText = currentRaw.replace(this.rules.other.blockquoteSetextReplace, \"\\n    $1\").replace(this.rules.other.blockquoteSetextReplace2, \"\");\n        raw = raw ? `${raw}\n${currentRaw}` : currentRaw;\n        text = text ? `${text}\n${currentText}` : currentText;\n        const top = this.lexer.state.top;\n        this.lexer.state.top = true;\n        this.lexer.blockTokens(currentText, tokens, true);\n        this.lexer.state.top = top;\n        if (lines.length === 0) {\n          break;\n        }\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === \"code\") {\n          break;\n        } else if (lastToken?.type === \"blockquote\") {\n          const oldToken = lastToken;\n          const newText = oldToken.raw + \"\\n\" + lines.join(\"\\n\");\n          const newToken = this.blockquote(newText);\n          tokens[tokens.length - 1] = newToken;\n          raw = raw.substring(0, raw.length - oldToken.raw.length) + newToken.raw;\n          text = text.substring(0, text.length - oldToken.text.length) + newToken.text;\n          break;\n        } else if (lastToken?.type === \"list\") {\n          const oldToken = lastToken;\n          const newText = oldToken.raw + \"\\n\" + lines.join(\"\\n\");\n          const newToken = this.list(newText);\n          tokens[tokens.length - 1] = newToken;\n          raw = raw.substring(0, raw.length - lastToken.raw.length) + newToken.raw;\n          text = text.substring(0, text.length - oldToken.raw.length) + newToken.raw;\n          lines = newText.substring(tokens.at(-1).raw.length).split(\"\\n\");\n          continue;\n        }\n      }\n      return {\n        type: \"blockquote\",\n        raw,\n        tokens,\n        text\n      };\n    }\n  }\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n      const list2 = {\n        type: \"list\",\n        raw: \"\",\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : \"\",\n        loose: false,\n        items: []\n      };\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n      if (this.options.pedantic) {\n        bull = isordered ? bull : \"[*+-]\";\n      }\n      const itemRegex = this.rules.other.listItemRegex(bull);\n      let endsWithBlankLine = false;\n      while (src) {\n        let endEarly = false;\n        let raw = \"\";\n        let itemContents = \"\";\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n        if (this.rules.block.hr.test(src)) {\n          break;\n        }\n        raw = cap[0];\n        src = src.substring(raw.length);\n        let line = cap[2].split(\"\\n\", 1)[0].replace(this.rules.other.listReplaceTabs, (t) => \" \".repeat(3 * t.length));\n        let nextLine = src.split(\"\\n\", 1)[0];\n        let blankLine = !line.trim();\n        let indent = 0;\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimStart();\n        } else if (blankLine) {\n          indent = cap[1].length + 1;\n        } else {\n          indent = cap[2].search(this.rules.other.nonSpaceChar);\n          indent = indent > 4 ? 1 : indent;\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n        if (blankLine && this.rules.other.blankLine.test(nextLine)) {\n          raw += nextLine + \"\\n\";\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n        if (!endEarly) {\n          const nextBulletRegex = this.rules.other.nextBulletRegex(indent);\n          const hrRegex = this.rules.other.hrRegex(indent);\n          const fencesBeginRegex = this.rules.other.fencesBeginRegex(indent);\n          const headingBeginRegex = this.rules.other.headingBeginRegex(indent);\n          const htmlBeginRegex = this.rules.other.htmlBeginRegex(indent);\n          while (src) {\n            const rawLine = src.split(\"\\n\", 1)[0];\n            let nextLineWithoutTabs;\n            nextLine = rawLine;\n            if (this.options.pedantic) {\n              nextLine = nextLine.replace(this.rules.other.listReplaceNesting, \"  \");\n              nextLineWithoutTabs = nextLine;\n            } else {\n              nextLineWithoutTabs = nextLine.replace(this.rules.other.tabCharGlobal, \"    \");\n            }\n            if (fencesBeginRegex.test(nextLine)) {\n              break;\n            }\n            if (headingBeginRegex.test(nextLine)) {\n              break;\n            }\n            if (htmlBeginRegex.test(nextLine)) {\n              break;\n            }\n            if (nextBulletRegex.test(nextLine)) {\n              break;\n            }\n            if (hrRegex.test(nextLine)) {\n              break;\n            }\n            if (nextLineWithoutTabs.search(this.rules.other.nonSpaceChar) >= indent || !nextLine.trim()) {\n              itemContents += \"\\n\" + nextLineWithoutTabs.slice(indent);\n            } else {\n              if (blankLine) {\n                break;\n              }\n              if (line.replace(this.rules.other.tabCharGlobal, \"    \").search(this.rules.other.nonSpaceChar) >= 4) {\n                break;\n              }\n              if (fencesBeginRegex.test(line)) {\n                break;\n              }\n              if (headingBeginRegex.test(line)) {\n                break;\n              }\n              if (hrRegex.test(line)) {\n                break;\n              }\n              itemContents += \"\\n\" + nextLine;\n            }\n            if (!blankLine && !nextLine.trim()) {\n              blankLine = true;\n            }\n            raw += rawLine + \"\\n\";\n            src = src.substring(rawLine.length + 1);\n            line = nextLineWithoutTabs.slice(indent);\n          }\n        }\n        if (!list2.loose) {\n          if (endsWithBlankLine) {\n            list2.loose = true;\n          } else if (this.rules.other.doubleBlankLine.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n        let istask = null;\n        let ischecked;\n        if (this.options.gfm) {\n          istask = this.rules.other.listIsTask.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== \"[ ] \";\n            itemContents = itemContents.replace(this.rules.other.listReplaceTask, \"\");\n          }\n        }\n        list2.items.push({\n          type: \"list_item\",\n          raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents,\n          tokens: []\n        });\n        list2.raw += raw;\n      }\n      const lastItem = list2.items.at(-1);\n      if (lastItem) {\n        lastItem.raw = lastItem.raw.trimEnd();\n        lastItem.text = lastItem.text.trimEnd();\n      } else {\n        return;\n      }\n      list2.raw = list2.raw.trimEnd();\n      for (let i = 0; i < list2.items.length; i++) {\n        this.lexer.state.top = false;\n        list2.items[i].tokens = this.lexer.blockTokens(list2.items[i].text, []);\n        if (!list2.loose) {\n          const spacers = list2.items[i].tokens.filter((t) => t.type === \"space\");\n          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some((t) => this.rules.other.anyLine.test(t.raw));\n          list2.loose = hasMultipleLineBreaks;\n        }\n      }\n      if (list2.loose) {\n        for (let i = 0; i < list2.items.length; i++) {\n          list2.items[i].loose = true;\n        }\n      }\n      return list2;\n    }\n  }\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: \"html\",\n        block: true,\n        raw: cap[0],\n        pre: cap[1] === \"pre\" || cap[1] === \"script\" || cap[1] === \"style\",\n        text: cap[0]\n      };\n      return token;\n    }\n  }\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      const tag2 = cap[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal, \" \");\n      const href = cap[2] ? cap[2].replace(this.rules.other.hrefBrackets, \"$1\").replace(this.rules.inline.anyPunctuation, \"$1\") : \"\";\n      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline.anyPunctuation, \"$1\") : cap[3];\n      return {\n        type: \"def\",\n        tag: tag2,\n        raw: cap[0],\n        href,\n        title\n      };\n    }\n  }\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (!cap) {\n      return;\n    }\n    if (!this.rules.other.tableDelimiter.test(cap[2])) {\n      return;\n    }\n    const headers = splitCells(cap[1]);\n    const aligns = cap[2].replace(this.rules.other.tableAlignChars, \"\").split(\"|\");\n    const rows = cap[3]?.trim() ? cap[3].replace(this.rules.other.tableRowBlankLine, \"\").split(\"\\n\") : [];\n    const item = {\n      type: \"table\",\n      raw: cap[0],\n      header: [],\n      align: [],\n      rows: []\n    };\n    if (headers.length !== aligns.length) {\n      return;\n    }\n    for (const align of aligns) {\n      if (this.rules.other.tableAlignRight.test(align)) {\n        item.align.push(\"right\");\n      } else if (this.rules.other.tableAlignCenter.test(align)) {\n        item.align.push(\"center\");\n      } else if (this.rules.other.tableAlignLeft.test(align)) {\n        item.align.push(\"left\");\n      } else {\n        item.align.push(null);\n      }\n    }\n    for (let i = 0; i < headers.length; i++) {\n      item.header.push({\n        text: headers[i],\n        tokens: this.lexer.inline(headers[i]),\n        header: true,\n        align: item.align[i]\n      });\n    }\n    for (const row of rows) {\n      item.rows.push(splitCells(row, item.header.length).map((cell, i) => {\n        return {\n          text: cell,\n          tokens: this.lexer.inline(cell),\n          header: false,\n          align: item.align[i]\n        };\n      }));\n    }\n    return item;\n  }\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: \"heading\",\n        raw: cap[0],\n        depth: cap[2].charAt(0) === \"=\" ? 1 : 2,\n        text: cap[1],\n        tokens: this.lexer.inline(cap[1])\n      };\n    }\n  }\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const text = cap[1].charAt(cap[1].length - 1) === \"\\n\" ? cap[1].slice(0, -1) : cap[1];\n      return {\n        type: \"paragraph\",\n        raw: cap[0],\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      return {\n        type: \"text\",\n        raw: cap[0],\n        text: cap[0],\n        tokens: this.lexer.inline(cap[0])\n      };\n    }\n  }\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: \"escape\",\n        raw: cap[0],\n        text: cap[1]\n      };\n    }\n  }\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && this.rules.other.startATag.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && this.rules.other.endATag.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && this.rules.other.startPreScriptTag.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && this.rules.other.endPreScriptTag.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n      return {\n        type: \"html\",\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        block: false,\n        text: cap[0]\n      };\n    }\n  }\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && this.rules.other.startAngleBracket.test(trimmedUrl)) {\n        if (!this.rules.other.endAngleBracket.test(trimmedUrl)) {\n          return;\n        }\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), \"\\\\\");\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        const lastParenIndex = findClosingBracket(cap[2], \"()\");\n        if (lastParenIndex === -2) {\n          return;\n        }\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf(\"!\") === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = \"\";\n        }\n      }\n      let href = cap[2];\n      let title = \"\";\n      if (this.options.pedantic) {\n        const link2 = this.rules.other.pedanticHrefTitle.exec(href);\n        if (link2) {\n          href = link2[1];\n          title = link2[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : \"\";\n      }\n      href = href.trim();\n      if (this.rules.other.startAngleBracket.test(href)) {\n        if (this.options.pedantic && !this.rules.other.endAngleBracket.test(trimmedUrl)) {\n          href = href.slice(1);\n        } else {\n          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline.anyPunctuation, \"$1\") : href,\n        title: title ? title.replace(this.rules.inline.anyPunctuation, \"$1\") : title\n      }, cap[0], this.lexer, this.rules);\n    }\n  }\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n      const linkString = (cap[2] || cap[1]).replace(this.rules.other.multipleSpaceGlobal, \" \");\n      const link2 = links[linkString.toLowerCase()];\n      if (!link2) {\n        const text = cap[0].charAt(0);\n        return {\n          type: \"text\",\n          raw: text,\n          text\n        };\n      }\n      return outputLink(cap, link2, cap[0], this.lexer, this.rules);\n    }\n  }\n  emStrong(src, maskedSrc, prevChar = \"\") {\n    let match = this.rules.inline.emStrongLDelim.exec(src);\n    if (!match) return;\n    if (match[3] && prevChar.match(this.rules.other.unicodeAlphaNumeric)) return;\n    const nextChar = match[1] || match[2] || \"\";\n    if (!nextChar || !prevChar || this.rules.inline.punctuation.exec(prevChar)) {\n      const lLength = [...match[0]].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n      const endReg = match[0][0] === \"*\" ? this.rules.inline.emStrongRDelimAst : this.rules.inline.emStrongRDelimUnd;\n      endReg.lastIndex = 0;\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n        if (!rDelim) continue;\n        rLength = [...rDelim].length;\n        if (match[3] || match[4]) {\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) {\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue;\n          }\n        }\n        delimTotal -= rLength;\n        if (delimTotal > 0) continue;\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n        const lastCharLength = [...match[0]][0].length;\n        const raw = src.slice(0, lLength + match.index + lastCharLength + rLength);\n        if (Math.min(lLength, rLength) % 2) {\n          const text2 = raw.slice(1, -1);\n          return {\n            type: \"em\",\n            raw,\n            text: text2,\n            tokens: this.lexer.inlineTokens(text2)\n          };\n        }\n        const text = raw.slice(2, -2);\n        return {\n          type: \"strong\",\n          raw,\n          text,\n          tokens: this.lexer.inlineTokens(text)\n        };\n      }\n    }\n  }\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(this.rules.other.newLineCharGlobal, \" \");\n      const hasNonSpaceChars = this.rules.other.nonSpaceChar.test(text);\n      const hasSpaceCharsOnBothEnds = this.rules.other.startingSpaceChar.test(text) && this.rules.other.endingSpaceChar.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      return {\n        type: \"codespan\",\n        raw: cap[0],\n        text\n      };\n    }\n  }\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: \"br\",\n        raw: cap[0]\n      };\n    }\n  }\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: \"del\",\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2])\n      };\n    }\n  }\n  autolink(src) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === \"@\") {\n        text = cap[1];\n        href = \"mailto:\" + text;\n      } else {\n        text = cap[1];\n        href = text;\n      }\n      return {\n        type: \"link\",\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: \"text\",\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n  url(src) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === \"@\") {\n        text = cap[0];\n        href = \"mailto:\" + text;\n      } else {\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])?.[0] ?? \"\";\n        } while (prevCapZero !== cap[0]);\n        text = cap[0];\n        if (cap[1] === \"www.\") {\n          href = \"http://\" + cap[0];\n        } else {\n          href = cap[0];\n        }\n      }\n      return {\n        type: \"link\",\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: \"text\",\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n  inlineText(src) {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      const escaped = this.lexer.state.inRawBlock;\n      return {\n        type: \"text\",\n        raw: cap[0],\n        text: cap[0],\n        escaped\n      };\n    }\n  }\n};\n\n// src/Lexer.ts\nvar _Lexer = class __Lexer {\n  tokens;\n  options;\n  state;\n  tokenizer;\n  inlineQueue;\n  constructor(options2) {\n    this.tokens = [];\n    this.tokens.links = /* @__PURE__ */ Object.create(null);\n    this.options = options2 || _defaults;\n    this.options.tokenizer = this.options.tokenizer || new _Tokenizer();\n    this.tokenizer = this.options.tokenizer;\n    this.tokenizer.options = this.options;\n    this.tokenizer.lexer = this;\n    this.inlineQueue = [];\n    this.state = {\n      inLink: false,\n      inRawBlock: false,\n      top: true\n    };\n    const rules = {\n      other,\n      block: block.normal,\n      inline: inline.normal\n    };\n    if (this.options.pedantic) {\n      rules.block = block.pedantic;\n      rules.inline = inline.pedantic;\n    } else if (this.options.gfm) {\n      rules.block = block.gfm;\n      if (this.options.breaks) {\n        rules.inline = inline.breaks;\n      } else {\n        rules.inline = inline.gfm;\n      }\n    }\n    this.tokenizer.rules = rules;\n  }\n  /**\n   * Expose Rules\n   */\n  static get rules() {\n    return {\n      block,\n      inline\n    };\n  }\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options2) {\n    const lexer2 = new __Lexer(options2);\n    return lexer2.lex(src);\n  }\n  /**\n   * Static Lex Inline Method\n   */\n  static lexInline(src, options2) {\n    const lexer2 = new __Lexer(options2);\n    return lexer2.inlineTokens(src);\n  }\n  /**\n   * Preprocessing\n   */\n  lex(src) {\n    src = src.replace(other.carriageReturn, \"\\n\");\n    this.blockTokens(src, this.tokens);\n    for (let i = 0; i < this.inlineQueue.length; i++) {\n      const next = this.inlineQueue[i];\n      this.inlineTokens(next.src, next.tokens);\n    }\n    this.inlineQueue = [];\n    return this.tokens;\n  }\n  blockTokens(src, tokens = [], lastParagraphClipped = false) {\n    if (this.options.pedantic) {\n      src = src.replace(other.tabCharGlobal, \"    \").replace(other.spaceLine, \"\");\n    }\n    while (src) {\n      let token;\n      if (this.options.extensions?.block?.some((extTokenizer) => {\n        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          return true;\n        }\n        return false;\n      })) {\n        continue;\n      }\n      if (token = this.tokenizer.space(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (token.raw.length === 1 && lastToken !== void 0) {\n          lastToken.raw += \"\\n\";\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n      if (token = this.tokenizer.code(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === \"paragraph\" || lastToken?.type === \"text\") {\n          lastToken.raw += \"\\n\" + token.raw;\n          lastToken.text += \"\\n\" + token.text;\n          this.inlineQueue.at(-1).src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n      if (token = this.tokenizer.fences(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.heading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.hr(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.blockquote(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.list(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.html(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.def(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === \"paragraph\" || lastToken?.type === \"text\") {\n          lastToken.raw += \"\\n\" + token.raw;\n          lastToken.text += \"\\n\" + token.raw;\n          this.inlineQueue.at(-1).src = lastToken.text;\n        } else if (!this.tokens.links[token.tag]) {\n          this.tokens.links[token.tag] = {\n            href: token.href,\n            title: token.title\n          };\n        }\n        continue;\n      }\n      if (token = this.tokenizer.table(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.lheading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      let cutSrc = src;\n      if (this.options.extensions?.startBlock) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startBlock.forEach((getStartIndex) => {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === \"number\" && tempStart >= 0) {\n            startIndex = Math.min(startIndex, tempStart);\n          }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n        const lastToken = tokens.at(-1);\n        if (lastParagraphClipped && lastToken?.type === \"paragraph\") {\n          lastToken.raw += \"\\n\" + token.raw;\n          lastToken.text += \"\\n\" + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue.at(-1).src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        lastParagraphClipped = cutSrc.length !== src.length;\n        src = src.substring(token.raw.length);\n        continue;\n      }\n      if (token = this.tokenizer.text(src)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === \"text\") {\n          lastToken.raw += \"\\n\" + token.raw;\n          lastToken.text += \"\\n\" + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue.at(-1).src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n      if (src) {\n        const errMsg = \"Infinite loop on byte: \" + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n    this.state.top = true;\n    return tokens;\n  }\n  inline(src, tokens = []) {\n    this.inlineQueue.push({ src, tokens });\n    return tokens;\n  }\n  /**\n   * Lexing/Compiling\n   */\n  inlineTokens(src, tokens = []) {\n    let maskedSrc = src;\n    let match = null;\n    if (this.tokens.links) {\n      const links = Object.keys(this.tokens.links);\n      if (links.length > 0) {\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n          if (links.includes(match[0].slice(match[0].lastIndexOf(\"[\") + 1, -1))) {\n            maskedSrc = maskedSrc.slice(0, match.index) + \"[\" + \"a\".repeat(match[0].length - 2) + \"]\" + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n          }\n        }\n      }\n    }\n    while ((match = this.tokenizer.rules.inline.anyPunctuation.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + \"++\" + maskedSrc.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);\n    }\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + \"[\" + \"a\".repeat(match[0].length - 2) + \"]\" + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n    }\n    let keepPrevChar = false;\n    let prevChar = \"\";\n    while (src) {\n      if (!keepPrevChar) {\n        prevChar = \"\";\n      }\n      keepPrevChar = false;\n      let token;\n      if (this.options.extensions?.inline?.some((extTokenizer) => {\n        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          return true;\n        }\n        return false;\n      })) {\n        continue;\n      }\n      if (token = this.tokenizer.escape(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.tag(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.link(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n        src = src.substring(token.raw.length);\n        const lastToken = tokens.at(-1);\n        if (token.type === \"text\" && lastToken?.type === \"text\") {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.codespan(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.br(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.del(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (token = this.tokenizer.autolink(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      if (!this.state.inLink && (token = this.tokenizer.url(src))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n      let cutSrc = src;\n      if (this.options.extensions?.startInline) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startInline.forEach((getStartIndex) => {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === \"number\" && tempStart >= 0) {\n            startIndex = Math.min(startIndex, tempStart);\n          }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (token = this.tokenizer.inlineText(cutSrc)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.slice(-1) !== \"_\") {\n          prevChar = token.raw.slice(-1);\n        }\n        keepPrevChar = true;\n        const lastToken = tokens.at(-1);\n        if (lastToken?.type === \"text\") {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n      if (src) {\n        const errMsg = \"Infinite loop on byte: \" + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n    return tokens;\n  }\n};\n\n// src/Renderer.ts\nvar _Renderer = class {\n  options;\n  parser;\n  // set by the parser\n  constructor(options2) {\n    this.options = options2 || _defaults;\n  }\n  space(token) {\n    return \"\";\n  }\n  code({ text, lang, escaped }) {\n    const langString = (lang || \"\").match(other.notSpaceStart)?.[0];\n    const code = text.replace(other.endingNewline, \"\") + \"\\n\";\n    if (!langString) {\n      return \"<pre><code>\" + (escaped ? code : escape2(code, true)) + \"</code></pre>\\n\";\n    }\n    return '<pre><code class=\"language-' + escape2(langString) + '\">' + (escaped ? code : escape2(code, true)) + \"</code></pre>\\n\";\n  }\n  blockquote({ tokens }) {\n    const body = this.parser.parse(tokens);\n    return `<blockquote>\n${body}</blockquote>\n`;\n  }\n  html({ text }) {\n    return text;\n  }\n  heading({ tokens, depth }) {\n    return `<h${depth}>${this.parser.parseInline(tokens)}</h${depth}>\n`;\n  }\n  hr(token) {\n    return \"<hr>\\n\";\n  }\n  list(token) {\n    const ordered = token.ordered;\n    const start = token.start;\n    let body = \"\";\n    for (let j = 0; j < token.items.length; j++) {\n      const item = token.items[j];\n      body += this.listitem(item);\n    }\n    const type = ordered ? \"ol\" : \"ul\";\n    const startAttr = ordered && start !== 1 ? ' start=\"' + start + '\"' : \"\";\n    return \"<\" + type + startAttr + \">\\n\" + body + \"</\" + type + \">\\n\";\n  }\n  listitem(item) {\n    let itemBody = \"\";\n    if (item.task) {\n      const checkbox = this.checkbox({ checked: !!item.checked });\n      if (item.loose) {\n        if (item.tokens[0]?.type === \"paragraph\") {\n          item.tokens[0].text = checkbox + \" \" + item.tokens[0].text;\n          if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === \"text\") {\n            item.tokens[0].tokens[0].text = checkbox + \" \" + escape2(item.tokens[0].tokens[0].text);\n            item.tokens[0].tokens[0].escaped = true;\n          }\n        } else {\n          item.tokens.unshift({\n            type: \"text\",\n            raw: checkbox + \" \",\n            text: checkbox + \" \",\n            escaped: true\n          });\n        }\n      } else {\n        itemBody += checkbox + \" \";\n      }\n    }\n    itemBody += this.parser.parse(item.tokens, !!item.loose);\n    return `<li>${itemBody}</li>\n`;\n  }\n  checkbox({ checked }) {\n    return \"<input \" + (checked ? 'checked=\"\" ' : \"\") + 'disabled=\"\" type=\"checkbox\">';\n  }\n  paragraph({ tokens }) {\n    return `<p>${this.parser.parseInline(tokens)}</p>\n`;\n  }\n  table(token) {\n    let header = \"\";\n    let cell = \"\";\n    for (let j = 0; j < token.header.length; j++) {\n      cell += this.tablecell(token.header[j]);\n    }\n    header += this.tablerow({ text: cell });\n    let body = \"\";\n    for (let j = 0; j < token.rows.length; j++) {\n      const row = token.rows[j];\n      cell = \"\";\n      for (let k = 0; k < row.length; k++) {\n        cell += this.tablecell(row[k]);\n      }\n      body += this.tablerow({ text: cell });\n    }\n    if (body) body = `<tbody>${body}</tbody>`;\n    return \"<table>\\n<thead>\\n\" + header + \"</thead>\\n\" + body + \"</table>\\n\";\n  }\n  tablerow({ text }) {\n    return `<tr>\n${text}</tr>\n`;\n  }\n  tablecell(token) {\n    const content = this.parser.parseInline(token.tokens);\n    const type = token.header ? \"th\" : \"td\";\n    const tag2 = token.align ? `<${type} align=\"${token.align}\">` : `<${type}>`;\n    return tag2 + content + `</${type}>\n`;\n  }\n  /**\n   * span level renderer\n   */\n  strong({ tokens }) {\n    return `<strong>${this.parser.parseInline(tokens)}</strong>`;\n  }\n  em({ tokens }) {\n    return `<em>${this.parser.parseInline(tokens)}</em>`;\n  }\n  codespan({ text }) {\n    return `<code>${escape2(text, true)}</code>`;\n  }\n  br(token) {\n    return \"<br>\";\n  }\n  del({ tokens }) {\n    return `<del>${this.parser.parseInline(tokens)}</del>`;\n  }\n  link({ href, title, tokens }) {\n    const text = this.parser.parseInline(tokens);\n    const cleanHref = cleanUrl(href);\n    if (cleanHref === null) {\n      return text;\n    }\n    href = cleanHref;\n    let out = '<a href=\"' + href + '\"';\n    if (title) {\n      out += ' title=\"' + escape2(title) + '\"';\n    }\n    out += \">\" + text + \"</a>\";\n    return out;\n  }\n  image({ href, title, text, tokens }) {\n    if (tokens) {\n      text = this.parser.parseInline(tokens, this.parser.textRenderer);\n    }\n    const cleanHref = cleanUrl(href);\n    if (cleanHref === null) {\n      return escape2(text);\n    }\n    href = cleanHref;\n    let out = `<img src=\"${href}\" alt=\"${text}\"`;\n    if (title) {\n      out += ` title=\"${escape2(title)}\"`;\n    }\n    out += \">\";\n    return out;\n  }\n  text(token) {\n    return \"tokens\" in token && token.tokens ? this.parser.parseInline(token.tokens) : \"escaped\" in token && token.escaped ? token.text : escape2(token.text);\n  }\n};\n\n// src/TextRenderer.ts\nvar _TextRenderer = class {\n  // no need for block level renderers\n  strong({ text }) {\n    return text;\n  }\n  em({ text }) {\n    return text;\n  }\n  codespan({ text }) {\n    return text;\n  }\n  del({ text }) {\n    return text;\n  }\n  html({ text }) {\n    return text;\n  }\n  text({ text }) {\n    return text;\n  }\n  link({ text }) {\n    return \"\" + text;\n  }\n  image({ text }) {\n    return \"\" + text;\n  }\n  br() {\n    return \"\";\n  }\n};\n\n// src/Parser.ts\nvar _Parser = class __Parser {\n  options;\n  renderer;\n  textRenderer;\n  constructor(options2) {\n    this.options = options2 || _defaults;\n    this.options.renderer = this.options.renderer || new _Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.renderer.parser = this;\n    this.textRenderer = new _TextRenderer();\n  }\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options2) {\n    const parser2 = new __Parser(options2);\n    return parser2.parse(tokens);\n  }\n  /**\n   * Static Parse Inline Method\n   */\n  static parseInline(tokens, options2) {\n    const parser2 = new __Parser(options2);\n    return parser2.parseInline(tokens);\n  }\n  /**\n   * Parse Loop\n   */\n  parse(tokens, top = true) {\n    let out = \"\";\n    for (let i = 0; i < tokens.length; i++) {\n      const anyToken = tokens[i];\n      if (this.options.extensions?.renderers?.[anyToken.type]) {\n        const genericToken = anyToken;\n        const ret = this.options.extensions.renderers[genericToken.type].call({ parser: this }, genericToken);\n        if (ret !== false || ![\"space\", \"hr\", \"heading\", \"code\", \"table\", \"blockquote\", \"list\", \"html\", \"paragraph\", \"text\"].includes(genericToken.type)) {\n          out += ret || \"\";\n          continue;\n        }\n      }\n      const token = anyToken;\n      switch (token.type) {\n        case \"space\": {\n          out += this.renderer.space(token);\n          continue;\n        }\n        case \"hr\": {\n          out += this.renderer.hr(token);\n          continue;\n        }\n        case \"heading\": {\n          out += this.renderer.heading(token);\n          continue;\n        }\n        case \"code\": {\n          out += this.renderer.code(token);\n          continue;\n        }\n        case \"table\": {\n          out += this.renderer.table(token);\n          continue;\n        }\n        case \"blockquote\": {\n          out += this.renderer.blockquote(token);\n          continue;\n        }\n        case \"list\": {\n          out += this.renderer.list(token);\n          continue;\n        }\n        case \"html\": {\n          out += this.renderer.html(token);\n          continue;\n        }\n        case \"paragraph\": {\n          out += this.renderer.paragraph(token);\n          continue;\n        }\n        case \"text\": {\n          let textToken = token;\n          let body = this.renderer.text(textToken);\n          while (i + 1 < tokens.length && tokens[i + 1].type === \"text\") {\n            textToken = tokens[++i];\n            body += \"\\n\" + this.renderer.text(textToken);\n          }\n          if (top) {\n            out += this.renderer.paragraph({\n              type: \"paragraph\",\n              raw: body,\n              text: body,\n              tokens: [{ type: \"text\", raw: body, text: body, escaped: true }]\n            });\n          } else {\n            out += body;\n          }\n          continue;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return \"\";\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens, renderer = this.renderer) {\n    let out = \"\";\n    for (let i = 0; i < tokens.length; i++) {\n      const anyToken = tokens[i];\n      if (this.options.extensions?.renderers?.[anyToken.type]) {\n        const ret = this.options.extensions.renderers[anyToken.type].call({ parser: this }, anyToken);\n        if (ret !== false || ![\"escape\", \"html\", \"link\", \"image\", \"strong\", \"em\", \"codespan\", \"br\", \"del\", \"text\"].includes(anyToken.type)) {\n          out += ret || \"\";\n          continue;\n        }\n      }\n      const token = anyToken;\n      switch (token.type) {\n        case \"escape\": {\n          out += renderer.text(token);\n          break;\n        }\n        case \"html\": {\n          out += renderer.html(token);\n          break;\n        }\n        case \"link\": {\n          out += renderer.link(token);\n          break;\n        }\n        case \"image\": {\n          out += renderer.image(token);\n          break;\n        }\n        case \"strong\": {\n          out += renderer.strong(token);\n          break;\n        }\n        case \"em\": {\n          out += renderer.em(token);\n          break;\n        }\n        case \"codespan\": {\n          out += renderer.codespan(token);\n          break;\n        }\n        case \"br\": {\n          out += renderer.br(token);\n          break;\n        }\n        case \"del\": {\n          out += renderer.del(token);\n          break;\n        }\n        case \"text\": {\n          out += renderer.text(token);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return \"\";\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n};\n\n// src/Hooks.ts\nvar _Hooks = class {\n  options;\n  block;\n  constructor(options2) {\n    this.options = options2 || _defaults;\n  }\n  static passThroughHooks = /* @__PURE__ */ new Set([\n    \"preprocess\",\n    \"postprocess\",\n    \"processAllTokens\"\n  ]);\n  /**\n   * Process markdown before marked\n   */\n  preprocess(markdown) {\n    return markdown;\n  }\n  /**\n   * Process HTML after marked is finished\n   */\n  postprocess(html2) {\n    return html2;\n  }\n  /**\n   * Process all tokens before walk tokens\n   */\n  processAllTokens(tokens) {\n    return tokens;\n  }\n  /**\n   * Provide function to tokenize markdown\n   */\n  provideLexer() {\n    return this.block ? _Lexer.lex : _Lexer.lexInline;\n  }\n  /**\n   * Provide function to parse tokens\n   */\n  provideParser() {\n    return this.block ? _Parser.parse : _Parser.parseInline;\n  }\n};\n\n// src/Instance.ts\nvar Marked = class {\n  defaults = _getDefaults();\n  options = this.setOptions;\n  parse = this.parseMarkdown(true);\n  parseInline = this.parseMarkdown(false);\n  Parser = _Parser;\n  Renderer = _Renderer;\n  TextRenderer = _TextRenderer;\n  Lexer = _Lexer;\n  Tokenizer = _Tokenizer;\n  Hooks = _Hooks;\n  constructor(...args) {\n    this.use(...args);\n  }\n  /**\n   * Run callback for every token\n   */\n  walkTokens(tokens, callback) {\n    let values = [];\n    for (const token of tokens) {\n      values = values.concat(callback.call(this, token));\n      switch (token.type) {\n        case \"table\": {\n          const tableToken = token;\n          for (const cell of tableToken.header) {\n            values = values.concat(this.walkTokens(cell.tokens, callback));\n          }\n          for (const row of tableToken.rows) {\n            for (const cell of row) {\n              values = values.concat(this.walkTokens(cell.tokens, callback));\n            }\n          }\n          break;\n        }\n        case \"list\": {\n          const listToken = token;\n          values = values.concat(this.walkTokens(listToken.items, callback));\n          break;\n        }\n        default: {\n          const genericToken = token;\n          if (this.defaults.extensions?.childTokens?.[genericToken.type]) {\n            this.defaults.extensions.childTokens[genericToken.type].forEach((childTokens) => {\n              const tokens2 = genericToken[childTokens].flat(Infinity);\n              values = values.concat(this.walkTokens(tokens2, callback));\n            });\n          } else if (genericToken.tokens) {\n            values = values.concat(this.walkTokens(genericToken.tokens, callback));\n          }\n        }\n      }\n    }\n    return values;\n  }\n  use(...args) {\n    const extensions = this.defaults.extensions || { renderers: {}, childTokens: {} };\n    args.forEach((pack) => {\n      const opts = { ...pack };\n      opts.async = this.defaults.async || opts.async || false;\n      if (pack.extensions) {\n        pack.extensions.forEach((ext) => {\n          if (!ext.name) {\n            throw new Error(\"extension name required\");\n          }\n          if (\"renderer\" in ext) {\n            const prevRenderer = extensions.renderers[ext.name];\n            if (prevRenderer) {\n              extensions.renderers[ext.name] = function(...args2) {\n                let ret = ext.renderer.apply(this, args2);\n                if (ret === false) {\n                  ret = prevRenderer.apply(this, args2);\n                }\n                return ret;\n              };\n            } else {\n              extensions.renderers[ext.name] = ext.renderer;\n            }\n          }\n          if (\"tokenizer\" in ext) {\n            if (!ext.level || ext.level !== \"block\" && ext.level !== \"inline\") {\n              throw new Error(\"extension level must be 'block' or 'inline'\");\n            }\n            const extLevel = extensions[ext.level];\n            if (extLevel) {\n              extLevel.unshift(ext.tokenizer);\n            } else {\n              extensions[ext.level] = [ext.tokenizer];\n            }\n            if (ext.start) {\n              if (ext.level === \"block\") {\n                if (extensions.startBlock) {\n                  extensions.startBlock.push(ext.start);\n                } else {\n                  extensions.startBlock = [ext.start];\n                }\n              } else if (ext.level === \"inline\") {\n                if (extensions.startInline) {\n                  extensions.startInline.push(ext.start);\n                } else {\n                  extensions.startInline = [ext.start];\n                }\n              }\n            }\n          }\n          if (\"childTokens\" in ext && ext.childTokens) {\n            extensions.childTokens[ext.name] = ext.childTokens;\n          }\n        });\n        opts.extensions = extensions;\n      }\n      if (pack.renderer) {\n        const renderer = this.defaults.renderer || new _Renderer(this.defaults);\n        for (const prop in pack.renderer) {\n          if (!(prop in renderer)) {\n            throw new Error(`renderer '${prop}' does not exist`);\n          }\n          if ([\"options\", \"parser\"].includes(prop)) {\n            continue;\n          }\n          const rendererProp = prop;\n          const rendererFunc = pack.renderer[rendererProp];\n          const prevRenderer = renderer[rendererProp];\n          renderer[rendererProp] = (...args2) => {\n            let ret = rendererFunc.apply(renderer, args2);\n            if (ret === false) {\n              ret = prevRenderer.apply(renderer, args2);\n            }\n            return ret || \"\";\n          };\n        }\n        opts.renderer = renderer;\n      }\n      if (pack.tokenizer) {\n        const tokenizer = this.defaults.tokenizer || new _Tokenizer(this.defaults);\n        for (const prop in pack.tokenizer) {\n          if (!(prop in tokenizer)) {\n            throw new Error(`tokenizer '${prop}' does not exist`);\n          }\n          if ([\"options\", \"rules\", \"lexer\"].includes(prop)) {\n            continue;\n          }\n          const tokenizerProp = prop;\n          const tokenizerFunc = pack.tokenizer[tokenizerProp];\n          const prevTokenizer = tokenizer[tokenizerProp];\n          tokenizer[tokenizerProp] = (...args2) => {\n            let ret = tokenizerFunc.apply(tokenizer, args2);\n            if (ret === false) {\n              ret = prevTokenizer.apply(tokenizer, args2);\n            }\n            return ret;\n          };\n        }\n        opts.tokenizer = tokenizer;\n      }\n      if (pack.hooks) {\n        const hooks = this.defaults.hooks || new _Hooks();\n        for (const prop in pack.hooks) {\n          if (!(prop in hooks)) {\n            throw new Error(`hook '${prop}' does not exist`);\n          }\n          if ([\"options\", \"block\"].includes(prop)) {\n            continue;\n          }\n          const hooksProp = prop;\n          const hooksFunc = pack.hooks[hooksProp];\n          const prevHook = hooks[hooksProp];\n          if (_Hooks.passThroughHooks.has(prop)) {\n            hooks[hooksProp] = (arg) => {\n              if (this.defaults.async) {\n                return Promise.resolve(hooksFunc.call(hooks, arg)).then((ret2) => {\n                  return prevHook.call(hooks, ret2);\n                });\n              }\n              const ret = hooksFunc.call(hooks, arg);\n              return prevHook.call(hooks, ret);\n            };\n          } else {\n            hooks[hooksProp] = (...args2) => {\n              let ret = hooksFunc.apply(hooks, args2);\n              if (ret === false) {\n                ret = prevHook.apply(hooks, args2);\n              }\n              return ret;\n            };\n          }\n        }\n        opts.hooks = hooks;\n      }\n      if (pack.walkTokens) {\n        const walkTokens2 = this.defaults.walkTokens;\n        const packWalktokens = pack.walkTokens;\n        opts.walkTokens = function(token) {\n          let values = [];\n          values.push(packWalktokens.call(this, token));\n          if (walkTokens2) {\n            values = values.concat(walkTokens2.call(this, token));\n          }\n          return values;\n        };\n      }\n      this.defaults = { ...this.defaults, ...opts };\n    });\n    return this;\n  }\n  setOptions(opt) {\n    this.defaults = { ...this.defaults, ...opt };\n    return this;\n  }\n  lexer(src, options2) {\n    return _Lexer.lex(src, options2 ?? this.defaults);\n  }\n  parser(tokens, options2) {\n    return _Parser.parse(tokens, options2 ?? this.defaults);\n  }\n  parseMarkdown(blockType) {\n    const parse2 = (src, options2) => {\n      const origOpt = { ...options2 };\n      const opt = { ...this.defaults, ...origOpt };\n      const throwError = this.onError(!!opt.silent, !!opt.async);\n      if (this.defaults.async === true && origOpt.async === false) {\n        return throwError(new Error(\"marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise.\"));\n      }\n      if (typeof src === \"undefined\" || src === null) {\n        return throwError(new Error(\"marked(): input parameter is undefined or null\"));\n      }\n      if (typeof src !== \"string\") {\n        return throwError(new Error(\"marked(): input parameter is of type \" + Object.prototype.toString.call(src) + \", string expected\"));\n      }\n      if (opt.hooks) {\n        opt.hooks.options = opt;\n        opt.hooks.block = blockType;\n      }\n      const lexer2 = opt.hooks ? opt.hooks.provideLexer() : blockType ? _Lexer.lex : _Lexer.lexInline;\n      const parser2 = opt.hooks ? opt.hooks.provideParser() : blockType ? _Parser.parse : _Parser.parseInline;\n      if (opt.async) {\n        return Promise.resolve(opt.hooks ? opt.hooks.preprocess(src) : src).then((src2) => lexer2(src2, opt)).then((tokens) => opt.hooks ? opt.hooks.processAllTokens(tokens) : tokens).then((tokens) => opt.walkTokens ? Promise.all(this.walkTokens(tokens, opt.walkTokens)).then(() => tokens) : tokens).then((tokens) => parser2(tokens, opt)).then((html2) => opt.hooks ? opt.hooks.postprocess(html2) : html2).catch(throwError);\n      }\n      try {\n        if (opt.hooks) {\n          src = opt.hooks.preprocess(src);\n        }\n        let tokens = lexer2(src, opt);\n        if (opt.hooks) {\n          tokens = opt.hooks.processAllTokens(tokens);\n        }\n        if (opt.walkTokens) {\n          this.walkTokens(tokens, opt.walkTokens);\n        }\n        let html2 = parser2(tokens, opt);\n        if (opt.hooks) {\n          html2 = opt.hooks.postprocess(html2);\n        }\n        return html2;\n      } catch (e) {\n        return throwError(e);\n      }\n    };\n    return parse2;\n  }\n  onError(silent, async) {\n    return (e) => {\n      e.message += \"\\nPlease report this to https://github.com/markedjs/marked.\";\n      if (silent) {\n        const msg = \"<p>An error occurred:</p><pre>\" + escape2(e.message + \"\", true) + \"</pre>\";\n        if (async) {\n          return Promise.resolve(msg);\n        }\n        return msg;\n      }\n      if (async) {\n        return Promise.reject(e);\n      }\n      throw e;\n    };\n  }\n};\n\n// src/marked.ts\nvar markedInstance = new Marked();\nfunction marked(src, opt) {\n  return markedInstance.parse(src, opt);\n}\nmarked.options = marked.setOptions = function(options2) {\n  markedInstance.setOptions(options2);\n  marked.defaults = markedInstance.defaults;\n  changeDefaults(marked.defaults);\n  return marked;\n};\nmarked.getDefaults = _getDefaults;\nmarked.defaults = _defaults;\nmarked.use = function(...args) {\n  markedInstance.use(...args);\n  marked.defaults = markedInstance.defaults;\n  changeDefaults(marked.defaults);\n  return marked;\n};\nmarked.walkTokens = function(tokens, callback) {\n  return markedInstance.walkTokens(tokens, callback);\n};\nmarked.parseInline = markedInstance.parseInline;\nmarked.Parser = _Parser;\nmarked.parser = _Parser.parse;\nmarked.Renderer = _Renderer;\nmarked.TextRenderer = _TextRenderer;\nmarked.Lexer = _Lexer;\nmarked.lexer = _Lexer.lex;\nmarked.Tokenizer = _Tokenizer;\nmarked.Hooks = _Hooks;\nmarked.parse = marked;\nvar options = marked.options;\nvar setOptions = marked.setOptions;\nvar use = marked.use;\nvar walkTokens = marked.walkTokens;\nvar parseInline = marked.parseInline;\nvar parse = marked;\nvar parser = _Parser.parse;\nvar lexer = _Lexer.lex;\nexport {\n  _Hooks as Hooks,\n  _Lexer as Lexer,\n  Marked,\n  _Parser as Parser,\n  _Renderer as Renderer,\n  _TextRenderer as TextRenderer,\n  _Tokenizer as Tokenizer,\n  _defaults as defaults,\n  _getDefaults as getDefaults,\n  lexer,\n  marked,\n  options,\n  parse,\n  parseInline,\n  parser,\n  setOptions,\n  use,\n  walkTokens\n};\n//# sourceMappingURL=marked.esm.js.map\n","/* eslint-disable no-multi-assign */\n\nfunction deepFreeze(obj) {\n  if (obj instanceof Map) {\n    obj.clear =\n      obj.delete =\n      obj.set =\n        function () {\n          throw new Error('map is read-only');\n        };\n  } else if (obj instanceof Set) {\n    obj.add =\n      obj.clear =\n      obj.delete =\n        function () {\n          throw new Error('set is read-only');\n        };\n  }\n\n  // Freeze self\n  Object.freeze(obj);\n\n  Object.getOwnPropertyNames(obj).forEach((name) => {\n    const prop = obj[name];\n    const type = typeof prop;\n\n    // Freeze prop if it is an object or function and also not already frozen\n    if ((type === 'object' || type === 'function') && !Object.isFrozen(prop)) {\n      deepFreeze(prop);\n    }\n  });\n\n  return obj;\n}\n\n/** @typedef {import('highlight.js').CallbackResponse} CallbackResponse */\n/** @typedef {import('highlight.js').CompiledMode} CompiledMode */\n/** @implements CallbackResponse */\n\nclass Response {\n  /**\n   * @param {CompiledMode} mode\n   */\n  constructor(mode) {\n    // eslint-disable-next-line no-undefined\n    if (mode.data === undefined) mode.data = {};\n\n    this.data = mode.data;\n    this.isMatchIgnored = false;\n  }\n\n  ignoreMatch() {\n    this.isMatchIgnored = true;\n  }\n}\n\n/**\n * @param {string} value\n * @returns {string}\n */\nfunction escapeHTML(value) {\n  return value\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#x27;');\n}\n\n/**\n * performs a shallow merge of multiple objects into one\n *\n * @template T\n * @param {T} original\n * @param {Record<string,any>[]} objects\n * @returns {T} a single new object\n */\nfunction inherit$1(original, ...objects) {\n  /** @type Record<string,any> */\n  const result = Object.create(null);\n\n  for (const key in original) {\n    result[key] = original[key];\n  }\n  objects.forEach(function(obj) {\n    for (const key in obj) {\n      result[key] = obj[key];\n    }\n  });\n  return /** @type {T} */ (result);\n}\n\n/**\n * @typedef {object} Renderer\n * @property {(text: string) => void} addText\n * @property {(node: Node) => void} openNode\n * @property {(node: Node) => void} closeNode\n * @property {() => string} value\n */\n\n/** @typedef {{scope?: string, language?: string, sublanguage?: boolean}} Node */\n/** @typedef {{walk: (r: Renderer) => void}} Tree */\n/** */\n\nconst SPAN_CLOSE = '</span>';\n\n/**\n * Determines if a node needs to be wrapped in <span>\n *\n * @param {Node} node */\nconst emitsWrappingTags = (node) => {\n  // rarely we can have a sublanguage where language is undefined\n  // TODO: track down why\n  return !!node.scope;\n};\n\n/**\n *\n * @param {string} name\n * @param {{prefix:string}} options\n */\nconst scopeToCSSClass = (name, { prefix }) => {\n  // sub-language\n  if (name.startsWith(\"language:\")) {\n    return name.replace(\"language:\", \"language-\");\n  }\n  // tiered scope: comment.line\n  if (name.includes(\".\")) {\n    const pieces = name.split(\".\");\n    return [\n      `${prefix}${pieces.shift()}`,\n      ...(pieces.map((x, i) => `${x}${\"_\".repeat(i + 1)}`))\n    ].join(\" \");\n  }\n  // simple scope\n  return `${prefix}${name}`;\n};\n\n/** @type {Renderer} */\nclass HTMLRenderer {\n  /**\n   * Creates a new HTMLRenderer\n   *\n   * @param {Tree} parseTree - the parse tree (must support `walk` API)\n   * @param {{classPrefix: string}} options\n   */\n  constructor(parseTree, options) {\n    this.buffer = \"\";\n    this.classPrefix = options.classPrefix;\n    parseTree.walk(this);\n  }\n\n  /**\n   * Adds texts to the output stream\n   *\n   * @param {string} text */\n  addText(text) {\n    this.buffer += escapeHTML(text);\n  }\n\n  /**\n   * Adds a node open to the output stream (if needed)\n   *\n   * @param {Node} node */\n  openNode(node) {\n    if (!emitsWrappingTags(node)) return;\n\n    const className = scopeToCSSClass(node.scope,\n      { prefix: this.classPrefix });\n    this.span(className);\n  }\n\n  /**\n   * Adds a node close to the output stream (if needed)\n   *\n   * @param {Node} node */\n  closeNode(node) {\n    if (!emitsWrappingTags(node)) return;\n\n    this.buffer += SPAN_CLOSE;\n  }\n\n  /**\n   * returns the accumulated buffer\n  */\n  value() {\n    return this.buffer;\n  }\n\n  // helpers\n\n  /**\n   * Builds a span element\n   *\n   * @param {string} className */\n  span(className) {\n    this.buffer += `<span class=\"${className}\">`;\n  }\n}\n\n/** @typedef {{scope?: string, language?: string, children: Node[]} | string} Node */\n/** @typedef {{scope?: string, language?: string, children: Node[]} } DataNode */\n/** @typedef {import('highlight.js').Emitter} Emitter */\n/**  */\n\n/** @returns {DataNode} */\nconst newNode = (opts = {}) => {\n  /** @type DataNode */\n  const result = { children: [] };\n  Object.assign(result, opts);\n  return result;\n};\n\nclass TokenTree {\n  constructor() {\n    /** @type DataNode */\n    this.rootNode = newNode();\n    this.stack = [this.rootNode];\n  }\n\n  get top() {\n    return this.stack[this.stack.length - 1];\n  }\n\n  get root() { return this.rootNode; }\n\n  /** @param {Node} node */\n  add(node) {\n    this.top.children.push(node);\n  }\n\n  /** @param {string} scope */\n  openNode(scope) {\n    /** @type Node */\n    const node = newNode({ scope });\n    this.add(node);\n    this.stack.push(node);\n  }\n\n  closeNode() {\n    if (this.stack.length > 1) {\n      return this.stack.pop();\n    }\n    // eslint-disable-next-line no-undefined\n    return undefined;\n  }\n\n  closeAllNodes() {\n    while (this.closeNode());\n  }\n\n  toJSON() {\n    return JSON.stringify(this.rootNode, null, 4);\n  }\n\n  /**\n   * @typedef { import(\"./html_renderer\").Renderer } Renderer\n   * @param {Renderer} builder\n   */\n  walk(builder) {\n    // this does not\n    return this.constructor._walk(builder, this.rootNode);\n    // this works\n    // return TokenTree._walk(builder, this.rootNode);\n  }\n\n  /**\n   * @param {Renderer} builder\n   * @param {Node} node\n   */\n  static _walk(builder, node) {\n    if (typeof node === \"string\") {\n      builder.addText(node);\n    } else if (node.children) {\n      builder.openNode(node);\n      node.children.forEach((child) => this._walk(builder, child));\n      builder.closeNode(node);\n    }\n    return builder;\n  }\n\n  /**\n   * @param {Node} node\n   */\n  static _collapse(node) {\n    if (typeof node === \"string\") return;\n    if (!node.children) return;\n\n    if (node.children.every(el => typeof el === \"string\")) {\n      // node.text = node.children.join(\"\");\n      // delete node.children;\n      node.children = [node.children.join(\"\")];\n    } else {\n      node.children.forEach((child) => {\n        TokenTree._collapse(child);\n      });\n    }\n  }\n}\n\n/**\n  Currently this is all private API, but this is the minimal API necessary\n  that an Emitter must implement to fully support the parser.\n\n  Minimal interface:\n\n  - addText(text)\n  - __addSublanguage(emitter, subLanguageName)\n  - startScope(scope)\n  - endScope()\n  - finalize()\n  - toHTML()\n\n*/\n\n/**\n * @implements {Emitter}\n */\nclass TokenTreeEmitter extends TokenTree {\n  /**\n   * @param {*} options\n   */\n  constructor(options) {\n    super();\n    this.options = options;\n  }\n\n  /**\n   * @param {string} text\n   */\n  addText(text) {\n    if (text === \"\") { return; }\n\n    this.add(text);\n  }\n\n  /** @param {string} scope */\n  startScope(scope) {\n    this.openNode(scope);\n  }\n\n  endScope() {\n    this.closeNode();\n  }\n\n  /**\n   * @param {Emitter & {root: DataNode}} emitter\n   * @param {string} name\n   */\n  __addSublanguage(emitter, name) {\n    /** @type DataNode */\n    const node = emitter.root;\n    if (name) node.scope = `language:${name}`;\n\n    this.add(node);\n  }\n\n  toHTML() {\n    const renderer = new HTMLRenderer(this, this.options);\n    return renderer.value();\n  }\n\n  finalize() {\n    this.closeAllNodes();\n    return true;\n  }\n}\n\n/**\n * @param {string} value\n * @returns {RegExp}\n * */\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction source(re) {\n  if (!re) return null;\n  if (typeof re === \"string\") return re;\n\n  return re.source;\n}\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction lookahead(re) {\n  return concat('(?=', re, ')');\n}\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction anyNumberOfTimes(re) {\n  return concat('(?:', re, ')*');\n}\n\n/**\n * @param {RegExp | string } re\n * @returns {string}\n */\nfunction optional(re) {\n  return concat('(?:', re, ')?');\n}\n\n/**\n * @param {...(RegExp | string) } args\n * @returns {string}\n */\nfunction concat(...args) {\n  const joined = args.map((x) => source(x)).join(\"\");\n  return joined;\n}\n\n/**\n * @param { Array<string | RegExp | Object> } args\n * @returns {object}\n */\nfunction stripOptionsFromArgs(args) {\n  const opts = args[args.length - 1];\n\n  if (typeof opts === 'object' && opts.constructor === Object) {\n    args.splice(args.length - 1, 1);\n    return opts;\n  } else {\n    return {};\n  }\n}\n\n/** @typedef { {capture?: boolean} } RegexEitherOptions */\n\n/**\n * Any of the passed expresssions may match\n *\n * Creates a huge this | this | that | that match\n * @param {(RegExp | string)[] | [...(RegExp | string)[], RegexEitherOptions]} args\n * @returns {string}\n */\nfunction either(...args) {\n  /** @type { object & {capture?: boolean} }  */\n  const opts = stripOptionsFromArgs(args);\n  const joined = '('\n    + (opts.capture ? \"\" : \"?:\")\n    + args.map((x) => source(x)).join(\"|\") + \")\";\n  return joined;\n}\n\n/**\n * @param {RegExp | string} re\n * @returns {number}\n */\nfunction countMatchGroups(re) {\n  return (new RegExp(re.toString() + '|')).exec('').length - 1;\n}\n\n/**\n * Does lexeme start with a regular expression match at the beginning\n * @param {RegExp} re\n * @param {string} lexeme\n */\nfunction startsWith(re, lexeme) {\n  const match = re && re.exec(lexeme);\n  return match && match.index === 0;\n}\n\n// BACKREF_RE matches an open parenthesis or backreference. To avoid\n// an incorrect parse, it additionally matches the following:\n// - [...] elements, where the meaning of parentheses and escapes change\n// - other escape sequences, so we do not misparse escape sequences as\n//   interesting elements\n// - non-matching or lookahead parentheses, which do not capture. These\n//   follow the '(' with a '?'.\nconst BACKREF_RE = /\\[(?:[^\\\\\\]]|\\\\.)*\\]|\\(\\??|\\\\([1-9][0-9]*)|\\\\./;\n\n// **INTERNAL** Not intended for outside usage\n// join logically computes regexps.join(separator), but fixes the\n// backreferences so they continue to match.\n// it also places each individual regular expression into it's own\n// match group, keeping track of the sequencing of those match groups\n// is currently an exercise for the caller. :-)\n/**\n * @param {(string | RegExp)[]} regexps\n * @param {{joinWith: string}} opts\n * @returns {string}\n */\nfunction _rewriteBackreferences(regexps, { joinWith }) {\n  let numCaptures = 0;\n\n  return regexps.map((regex) => {\n    numCaptures += 1;\n    const offset = numCaptures;\n    let re = source(regex);\n    let out = '';\n\n    while (re.length > 0) {\n      const match = BACKREF_RE.exec(re);\n      if (!match) {\n        out += re;\n        break;\n      }\n      out += re.substring(0, match.index);\n      re = re.substring(match.index + match[0].length);\n      if (match[0][0] === '\\\\' && match[1]) {\n        // Adjust the backreference.\n        out += '\\\\' + String(Number(match[1]) + offset);\n      } else {\n        out += match[0];\n        if (match[0] === '(') {\n          numCaptures++;\n        }\n      }\n    }\n    return out;\n  }).map(re => `(${re})`).join(joinWith);\n}\n\n/** @typedef {import('highlight.js').Mode} Mode */\n/** @typedef {import('highlight.js').ModeCallback} ModeCallback */\n\n// Common regexps\nconst MATCH_NOTHING_RE = /\\b\\B/;\nconst IDENT_RE = '[a-zA-Z]\\\\w*';\nconst UNDERSCORE_IDENT_RE = '[a-zA-Z_]\\\\w*';\nconst NUMBER_RE = '\\\\b\\\\d+(\\\\.\\\\d+)?';\nconst C_NUMBER_RE = '(-?)(\\\\b0[xX][a-fA-F0-9]+|(\\\\b\\\\d+(\\\\.\\\\d*)?|\\\\.\\\\d+)([eE][-+]?\\\\d+)?)'; // 0x..., 0..., decimal, float\nconst BINARY_NUMBER_RE = '\\\\b(0b[01]+)'; // 0b...\nconst RE_STARTERS_RE = '!|!=|!==|%|%=|&|&&|&=|\\\\*|\\\\*=|\\\\+|\\\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\\\?|\\\\[|\\\\{|\\\\(|\\\\^|\\\\^=|\\\\||\\\\|=|\\\\|\\\\||~';\n\n/**\n* @param { Partial<Mode> & {binary?: string | RegExp} } opts\n*/\nconst SHEBANG = (opts = {}) => {\n  const beginShebang = /^#![ ]*\\//;\n  if (opts.binary) {\n    opts.begin = concat(\n      beginShebang,\n      /.*\\b/,\n      opts.binary,\n      /\\b.*/);\n  }\n  return inherit$1({\n    scope: 'meta',\n    begin: beginShebang,\n    end: /$/,\n    relevance: 0,\n    /** @type {ModeCallback} */\n    \"on:begin\": (m, resp) => {\n      if (m.index !== 0) resp.ignoreMatch();\n    }\n  }, opts);\n};\n\n// Common modes\nconst BACKSLASH_ESCAPE = {\n  begin: '\\\\\\\\[\\\\s\\\\S]', relevance: 0\n};\nconst APOS_STRING_MODE = {\n  scope: 'string',\n  begin: '\\'',\n  end: '\\'',\n  illegal: '\\\\n',\n  contains: [BACKSLASH_ESCAPE]\n};\nconst QUOTE_STRING_MODE = {\n  scope: 'string',\n  begin: '\"',\n  end: '\"',\n  illegal: '\\\\n',\n  contains: [BACKSLASH_ESCAPE]\n};\nconst PHRASAL_WORDS_MODE = {\n  begin: /\\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\\b/\n};\n/**\n * Creates a comment mode\n *\n * @param {string | RegExp} begin\n * @param {string | RegExp} end\n * @param {Mode | {}} [modeOptions]\n * @returns {Partial<Mode>}\n */\nconst COMMENT = function(begin, end, modeOptions = {}) {\n  const mode = inherit$1(\n    {\n      scope: 'comment',\n      begin,\n      end,\n      contains: []\n    },\n    modeOptions\n  );\n  mode.contains.push({\n    scope: 'doctag',\n    // hack to avoid the space from being included. the space is necessary to\n    // match here to prevent the plain text rule below from gobbling up doctags\n    begin: '[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)',\n    end: /(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,\n    excludeBegin: true,\n    relevance: 0\n  });\n  const ENGLISH_WORD = either(\n    // list of common 1 and 2 letter words in English\n    \"I\",\n    \"a\",\n    \"is\",\n    \"so\",\n    \"us\",\n    \"to\",\n    \"at\",\n    \"if\",\n    \"in\",\n    \"it\",\n    \"on\",\n    // note: this is not an exhaustive list of contractions, just popular ones\n    /[A-Za-z]+['](d|ve|re|ll|t|s|n)/, // contractions - can't we'd they're let's, etc\n    /[A-Za-z]+[-][a-z]+/, // `no-way`, etc.\n    /[A-Za-z][a-z]{2,}/ // allow capitalized words at beginning of sentences\n  );\n  // looking like plain text, more likely to be a comment\n  mode.contains.push(\n    {\n      // TODO: how to include \", (, ) without breaking grammars that use these for\n      // comment delimiters?\n      // begin: /[ ]+([()\"]?([A-Za-z'-]{3,}|is|a|I|so|us|[tT][oO]|at|if|in|it|on)[.]?[()\":]?([.][ ]|[ ]|\\))){3}/\n      // ---\n\n      // this tries to find sequences of 3 english words in a row (without any\n      // \"programming\" type syntax) this gives us a strong signal that we've\n      // TRULY found a comment - vs perhaps scanning with the wrong language.\n      // It's possible to find something that LOOKS like the start of the\n      // comment - but then if there is no readable text - good chance it is a\n      // false match and not a comment.\n      //\n      // for a visual example please see:\n      // https://github.com/highlightjs/highlight.js/issues/2827\n\n      begin: concat(\n        /[ ]+/, // necessary to prevent us gobbling up doctags like /* @author Bob Mcgill */\n        '(',\n        ENGLISH_WORD,\n        /[.]?[:]?([.][ ]|[ ])/,\n        '){3}') // look for 3 words in a row\n    }\n  );\n  return mode;\n};\nconst C_LINE_COMMENT_MODE = COMMENT('//', '$');\nconst C_BLOCK_COMMENT_MODE = COMMENT('/\\\\*', '\\\\*/');\nconst HASH_COMMENT_MODE = COMMENT('#', '$');\nconst NUMBER_MODE = {\n  scope: 'number',\n  begin: NUMBER_RE,\n  relevance: 0\n};\nconst C_NUMBER_MODE = {\n  scope: 'number',\n  begin: C_NUMBER_RE,\n  relevance: 0\n};\nconst BINARY_NUMBER_MODE = {\n  scope: 'number',\n  begin: BINARY_NUMBER_RE,\n  relevance: 0\n};\nconst REGEXP_MODE = {\n  scope: \"regexp\",\n  begin: /\\/(?=[^/\\n]*\\/)/,\n  end: /\\/[gimuy]*/,\n  contains: [\n    BACKSLASH_ESCAPE,\n    {\n      begin: /\\[/,\n      end: /\\]/,\n      relevance: 0,\n      contains: [BACKSLASH_ESCAPE]\n    }\n  ]\n};\nconst TITLE_MODE = {\n  scope: 'title',\n  begin: IDENT_RE,\n  relevance: 0\n};\nconst UNDERSCORE_TITLE_MODE = {\n  scope: 'title',\n  begin: UNDERSCORE_IDENT_RE,\n  relevance: 0\n};\nconst METHOD_GUARD = {\n  // excludes method names from keyword processing\n  begin: '\\\\.\\\\s*' + UNDERSCORE_IDENT_RE,\n  relevance: 0\n};\n\n/**\n * Adds end same as begin mechanics to a mode\n *\n * Your mode must include at least a single () match group as that first match\n * group is what is used for comparison\n * @param {Partial<Mode>} mode\n */\nconst END_SAME_AS_BEGIN = function(mode) {\n  return Object.assign(mode,\n    {\n      /** @type {ModeCallback} */\n      'on:begin': (m, resp) => { resp.data._beginMatch = m[1]; },\n      /** @type {ModeCallback} */\n      'on:end': (m, resp) => { if (resp.data._beginMatch !== m[1]) resp.ignoreMatch(); }\n    });\n};\n\nvar MODES = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  APOS_STRING_MODE: APOS_STRING_MODE,\n  BACKSLASH_ESCAPE: BACKSLASH_ESCAPE,\n  BINARY_NUMBER_MODE: BINARY_NUMBER_MODE,\n  BINARY_NUMBER_RE: BINARY_NUMBER_RE,\n  COMMENT: COMMENT,\n  C_BLOCK_COMMENT_MODE: C_BLOCK_COMMENT_MODE,\n  C_LINE_COMMENT_MODE: C_LINE_COMMENT_MODE,\n  C_NUMBER_MODE: C_NUMBER_MODE,\n  C_NUMBER_RE: C_NUMBER_RE,\n  END_SAME_AS_BEGIN: END_SAME_AS_BEGIN,\n  HASH_COMMENT_MODE: HASH_COMMENT_MODE,\n  IDENT_RE: IDENT_RE,\n  MATCH_NOTHING_RE: MATCH_NOTHING_RE,\n  METHOD_GUARD: METHOD_GUARD,\n  NUMBER_MODE: NUMBER_MODE,\n  NUMBER_RE: NUMBER_RE,\n  PHRASAL_WORDS_MODE: PHRASAL_WORDS_MODE,\n  QUOTE_STRING_MODE: QUOTE_STRING_MODE,\n  REGEXP_MODE: REGEXP_MODE,\n  RE_STARTERS_RE: RE_STARTERS_RE,\n  SHEBANG: SHEBANG,\n  TITLE_MODE: TITLE_MODE,\n  UNDERSCORE_IDENT_RE: UNDERSCORE_IDENT_RE,\n  UNDERSCORE_TITLE_MODE: UNDERSCORE_TITLE_MODE\n});\n\n/**\n@typedef {import('highlight.js').CallbackResponse} CallbackResponse\n@typedef {import('highlight.js').CompilerExt} CompilerExt\n*/\n\n// Grammar extensions / plugins\n// See: https://github.com/highlightjs/highlight.js/issues/2833\n\n// Grammar extensions allow \"syntactic sugar\" to be added to the grammar modes\n// without requiring any underlying changes to the compiler internals.\n\n// `compileMatch` being the perfect small example of now allowing a grammar\n// author to write `match` when they desire to match a single expression rather\n// than being forced to use `begin`.  The extension then just moves `match` into\n// `begin` when it runs.  Ie, no features have been added, but we've just made\n// the experience of writing (and reading grammars) a little bit nicer.\n\n// ------\n\n// TODO: We need negative look-behind support to do this properly\n/**\n * Skip a match if it has a preceding dot\n *\n * This is used for `beginKeywords` to prevent matching expressions such as\n * `bob.keyword.do()`. The mode compiler automatically wires this up as a\n * special _internal_ 'on:begin' callback for modes with `beginKeywords`\n * @param {RegExpMatchArray} match\n * @param {CallbackResponse} response\n */\nfunction skipIfHasPrecedingDot(match, response) {\n  const before = match.input[match.index - 1];\n  if (before === \".\") {\n    response.ignoreMatch();\n  }\n}\n\n/**\n *\n * @type {CompilerExt}\n */\nfunction scopeClassName(mode, _parent) {\n  // eslint-disable-next-line no-undefined\n  if (mode.className !== undefined) {\n    mode.scope = mode.className;\n    delete mode.className;\n  }\n}\n\n/**\n * `beginKeywords` syntactic sugar\n * @type {CompilerExt}\n */\nfunction beginKeywords(mode, parent) {\n  if (!parent) return;\n  if (!mode.beginKeywords) return;\n\n  // for languages with keywords that include non-word characters checking for\n  // a word boundary is not sufficient, so instead we check for a word boundary\n  // or whitespace - this does no harm in any case since our keyword engine\n  // doesn't allow spaces in keywords anyways and we still check for the boundary\n  // first\n  mode.begin = '\\\\b(' + mode.beginKeywords.split(' ').join('|') + ')(?!\\\\.)(?=\\\\b|\\\\s)';\n  mode.__beforeBegin = skipIfHasPrecedingDot;\n  mode.keywords = mode.keywords || mode.beginKeywords;\n  delete mode.beginKeywords;\n\n  // prevents double relevance, the keywords themselves provide\n  // relevance, the mode doesn't need to double it\n  // eslint-disable-next-line no-undefined\n  if (mode.relevance === undefined) mode.relevance = 0;\n}\n\n/**\n * Allow `illegal` to contain an array of illegal values\n * @type {CompilerExt}\n */\nfunction compileIllegal(mode, _parent) {\n  if (!Array.isArray(mode.illegal)) return;\n\n  mode.illegal = either(...mode.illegal);\n}\n\n/**\n * `match` to match a single expression for readability\n * @type {CompilerExt}\n */\nfunction compileMatch(mode, _parent) {\n  if (!mode.match) return;\n  if (mode.begin || mode.end) throw new Error(\"begin & end are not supported with match\");\n\n  mode.begin = mode.match;\n  delete mode.match;\n}\n\n/**\n * provides the default 1 relevance to all modes\n * @type {CompilerExt}\n */\nfunction compileRelevance(mode, _parent) {\n  // eslint-disable-next-line no-undefined\n  if (mode.relevance === undefined) mode.relevance = 1;\n}\n\n// allow beforeMatch to act as a \"qualifier\" for the match\n// the full match begin must be [beforeMatch][begin]\nconst beforeMatchExt = (mode, parent) => {\n  if (!mode.beforeMatch) return;\n  // starts conflicts with endsParent which we need to make sure the child\n  // rule is not matched multiple times\n  if (mode.starts) throw new Error(\"beforeMatch cannot be used with starts\");\n\n  const originalMode = Object.assign({}, mode);\n  Object.keys(mode).forEach((key) => { delete mode[key]; });\n\n  mode.keywords = originalMode.keywords;\n  mode.begin = concat(originalMode.beforeMatch, lookahead(originalMode.begin));\n  mode.starts = {\n    relevance: 0,\n    contains: [\n      Object.assign(originalMode, { endsParent: true })\n    ]\n  };\n  mode.relevance = 0;\n\n  delete originalMode.beforeMatch;\n};\n\n// keywords that should have no default relevance value\nconst COMMON_KEYWORDS = [\n  'of',\n  'and',\n  'for',\n  'in',\n  'not',\n  'or',\n  'if',\n  'then',\n  'parent', // common variable name\n  'list', // common variable name\n  'value' // common variable name\n];\n\nconst DEFAULT_KEYWORD_SCOPE = \"keyword\";\n\n/**\n * Given raw keywords from a language definition, compile them.\n *\n * @param {string | Record<string,string|string[]> | Array<string>} rawKeywords\n * @param {boolean} caseInsensitive\n */\nfunction compileKeywords(rawKeywords, caseInsensitive, scopeName = DEFAULT_KEYWORD_SCOPE) {\n  /** @type {import(\"highlight.js/private\").KeywordDict} */\n  const compiledKeywords = Object.create(null);\n\n  // input can be a string of keywords, an array of keywords, or a object with\n  // named keys representing scopeName (which can then point to a string or array)\n  if (typeof rawKeywords === 'string') {\n    compileList(scopeName, rawKeywords.split(\" \"));\n  } else if (Array.isArray(rawKeywords)) {\n    compileList(scopeName, rawKeywords);\n  } else {\n    Object.keys(rawKeywords).forEach(function(scopeName) {\n      // collapse all our objects back into the parent object\n      Object.assign(\n        compiledKeywords,\n        compileKeywords(rawKeywords[scopeName], caseInsensitive, scopeName)\n      );\n    });\n  }\n  return compiledKeywords;\n\n  // ---\n\n  /**\n   * Compiles an individual list of keywords\n   *\n   * Ex: \"for if when while|5\"\n   *\n   * @param {string} scopeName\n   * @param {Array<string>} keywordList\n   */\n  function compileList(scopeName, keywordList) {\n    if (caseInsensitive) {\n      keywordList = keywordList.map(x => x.toLowerCase());\n    }\n    keywordList.forEach(function(keyword) {\n      const pair = keyword.split('|');\n      compiledKeywords[pair[0]] = [scopeName, scoreForKeyword(pair[0], pair[1])];\n    });\n  }\n}\n\n/**\n * Returns the proper score for a given keyword\n *\n * Also takes into account comment keywords, which will be scored 0 UNLESS\n * another score has been manually assigned.\n * @param {string} keyword\n * @param {string} [providedScore]\n */\nfunction scoreForKeyword(keyword, providedScore) {\n  // manual scores always win over common keywords\n  // so you can force a score of 1 if you really insist\n  if (providedScore) {\n    return Number(providedScore);\n  }\n\n  return commonKeyword(keyword) ? 0 : 1;\n}\n\n/**\n * Determines if a given keyword is common or not\n *\n * @param {string} keyword */\nfunction commonKeyword(keyword) {\n  return COMMON_KEYWORDS.includes(keyword.toLowerCase());\n}\n\n/*\n\nFor the reasoning behind this please see:\nhttps://github.com/highlightjs/highlight.js/issues/2880#issuecomment-747275419\n\n*/\n\n/**\n * @type {Record<string, boolean>}\n */\nconst seenDeprecations = {};\n\n/**\n * @param {string} message\n */\nconst error = (message) => {\n  console.error(message);\n};\n\n/**\n * @param {string} message\n * @param {any} args\n */\nconst warn = (message, ...args) => {\n  console.log(`WARN: ${message}`, ...args);\n};\n\n/**\n * @param {string} version\n * @param {string} message\n */\nconst deprecated = (version, message) => {\n  if (seenDeprecations[`${version}/${message}`]) return;\n\n  console.log(`Deprecated as of ${version}. ${message}`);\n  seenDeprecations[`${version}/${message}`] = true;\n};\n\n/* eslint-disable no-throw-literal */\n\n/**\n@typedef {import('highlight.js').CompiledMode} CompiledMode\n*/\n\nconst MultiClassError = new Error();\n\n/**\n * Renumbers labeled scope names to account for additional inner match\n * groups that otherwise would break everything.\n *\n * Lets say we 3 match scopes:\n *\n *   { 1 => ..., 2 => ..., 3 => ... }\n *\n * So what we need is a clean match like this:\n *\n *   (a)(b)(c) => [ \"a\", \"b\", \"c\" ]\n *\n * But this falls apart with inner match groups:\n *\n * (a)(((b)))(c) => [\"a\", \"b\", \"b\", \"b\", \"c\" ]\n *\n * Our scopes are now \"out of alignment\" and we're repeating `b` 3 times.\n * What needs to happen is the numbers are remapped:\n *\n *   { 1 => ..., 2 => ..., 5 => ... }\n *\n * We also need to know that the ONLY groups that should be output\n * are 1, 2, and 5.  This function handles this behavior.\n *\n * @param {CompiledMode} mode\n * @param {Array<RegExp | string>} regexes\n * @param {{key: \"beginScope\"|\"endScope\"}} opts\n */\nfunction remapScopeNames(mode, regexes, { key }) {\n  let offset = 0;\n  const scopeNames = mode[key];\n  /** @type Record<number,boolean> */\n  const emit = {};\n  /** @type Record<number,string> */\n  const positions = {};\n\n  for (let i = 1; i <= regexes.length; i++) {\n    positions[i + offset] = scopeNames[i];\n    emit[i + offset] = true;\n    offset += countMatchGroups(regexes[i - 1]);\n  }\n  // we use _emit to keep track of which match groups are \"top-level\" to avoid double\n  // output from inside match groups\n  mode[key] = positions;\n  mode[key]._emit = emit;\n  mode[key]._multi = true;\n}\n\n/**\n * @param {CompiledMode} mode\n */\nfunction beginMultiClass(mode) {\n  if (!Array.isArray(mode.begin)) return;\n\n  if (mode.skip || mode.excludeBegin || mode.returnBegin) {\n    error(\"skip, excludeBegin, returnBegin not compatible with beginScope: {}\");\n    throw MultiClassError;\n  }\n\n  if (typeof mode.beginScope !== \"object\" || mode.beginScope === null) {\n    error(\"beginScope must be object\");\n    throw MultiClassError;\n  }\n\n  remapScopeNames(mode, mode.begin, { key: \"beginScope\" });\n  mode.begin = _rewriteBackreferences(mode.begin, { joinWith: \"\" });\n}\n\n/**\n * @param {CompiledMode} mode\n */\nfunction endMultiClass(mode) {\n  if (!Array.isArray(mode.end)) return;\n\n  if (mode.skip || mode.excludeEnd || mode.returnEnd) {\n    error(\"skip, excludeEnd, returnEnd not compatible with endScope: {}\");\n    throw MultiClassError;\n  }\n\n  if (typeof mode.endScope !== \"object\" || mode.endScope === null) {\n    error(\"endScope must be object\");\n    throw MultiClassError;\n  }\n\n  remapScopeNames(mode, mode.end, { key: \"endScope\" });\n  mode.end = _rewriteBackreferences(mode.end, { joinWith: \"\" });\n}\n\n/**\n * this exists only to allow `scope: {}` to be used beside `match:`\n * Otherwise `beginScope` would necessary and that would look weird\n\n  {\n    match: [ /def/, /\\w+/ ]\n    scope: { 1: \"keyword\" , 2: \"title\" }\n  }\n\n * @param {CompiledMode} mode\n */\nfunction scopeSugar(mode) {\n  if (mode.scope && typeof mode.scope === \"object\" && mode.scope !== null) {\n    mode.beginScope = mode.scope;\n    delete mode.scope;\n  }\n}\n\n/**\n * @param {CompiledMode} mode\n */\nfunction MultiClass(mode) {\n  scopeSugar(mode);\n\n  if (typeof mode.beginScope === \"string\") {\n    mode.beginScope = { _wrap: mode.beginScope };\n  }\n  if (typeof mode.endScope === \"string\") {\n    mode.endScope = { _wrap: mode.endScope };\n  }\n\n  beginMultiClass(mode);\n  endMultiClass(mode);\n}\n\n/**\n@typedef {import('highlight.js').Mode} Mode\n@typedef {import('highlight.js').CompiledMode} CompiledMode\n@typedef {import('highlight.js').Language} Language\n@typedef {import('highlight.js').HLJSPlugin} HLJSPlugin\n@typedef {import('highlight.js').CompiledLanguage} CompiledLanguage\n*/\n\n// compilation\n\n/**\n * Compiles a language definition result\n *\n * Given the raw result of a language definition (Language), compiles this so\n * that it is ready for highlighting code.\n * @param {Language} language\n * @returns {CompiledLanguage}\n */\nfunction compileLanguage(language) {\n  /**\n   * Builds a regex with the case sensitivity of the current language\n   *\n   * @param {RegExp | string} value\n   * @param {boolean} [global]\n   */\n  function langRe(value, global) {\n    return new RegExp(\n      source(value),\n      'm'\n      + (language.case_insensitive ? 'i' : '')\n      + (language.unicodeRegex ? 'u' : '')\n      + (global ? 'g' : '')\n    );\n  }\n\n  /**\n    Stores multiple regular expressions and allows you to quickly search for\n    them all in a string simultaneously - returning the first match.  It does\n    this by creating a huge (a|b|c) regex - each individual item wrapped with ()\n    and joined by `|` - using match groups to track position.  When a match is\n    found checking which position in the array has content allows us to figure\n    out which of the original regexes / match groups triggered the match.\n\n    The match object itself (the result of `Regex.exec`) is returned but also\n    enhanced by merging in any meta-data that was registered with the regex.\n    This is how we keep track of which mode matched, and what type of rule\n    (`illegal`, `begin`, end, etc).\n  */\n  class MultiRegex {\n    constructor() {\n      this.matchIndexes = {};\n      // @ts-ignore\n      this.regexes = [];\n      this.matchAt = 1;\n      this.position = 0;\n    }\n\n    // @ts-ignore\n    addRule(re, opts) {\n      opts.position = this.position++;\n      // @ts-ignore\n      this.matchIndexes[this.matchAt] = opts;\n      this.regexes.push([opts, re]);\n      this.matchAt += countMatchGroups(re) + 1;\n    }\n\n    compile() {\n      if (this.regexes.length === 0) {\n        // avoids the need to check length every time exec is called\n        // @ts-ignore\n        this.exec = () => null;\n      }\n      const terminators = this.regexes.map(el => el[1]);\n      this.matcherRe = langRe(_rewriteBackreferences(terminators, { joinWith: '|' }), true);\n      this.lastIndex = 0;\n    }\n\n    /** @param {string} s */\n    exec(s) {\n      this.matcherRe.lastIndex = this.lastIndex;\n      const match = this.matcherRe.exec(s);\n      if (!match) { return null; }\n\n      // eslint-disable-next-line no-undefined\n      const i = match.findIndex((el, i) => i > 0 && el !== undefined);\n      // @ts-ignore\n      const matchData = this.matchIndexes[i];\n      // trim off any earlier non-relevant match groups (ie, the other regex\n      // match groups that make up the multi-matcher)\n      match.splice(0, i);\n\n      return Object.assign(match, matchData);\n    }\n  }\n\n  /*\n    Created to solve the key deficiently with MultiRegex - there is no way to\n    test for multiple matches at a single location.  Why would we need to do\n    that?  In the future a more dynamic engine will allow certain matches to be\n    ignored.  An example: if we matched say the 3rd regex in a large group but\n    decided to ignore it - we'd need to started testing again at the 4th\n    regex... but MultiRegex itself gives us no real way to do that.\n\n    So what this class creates MultiRegexs on the fly for whatever search\n    position they are needed.\n\n    NOTE: These additional MultiRegex objects are created dynamically.  For most\n    grammars most of the time we will never actually need anything more than the\n    first MultiRegex - so this shouldn't have too much overhead.\n\n    Say this is our search group, and we match regex3, but wish to ignore it.\n\n      regex1 | regex2 | regex3 | regex4 | regex5    ' ie, startAt = 0\n\n    What we need is a new MultiRegex that only includes the remaining\n    possibilities:\n\n      regex4 | regex5                               ' ie, startAt = 3\n\n    This class wraps all that complexity up in a simple API... `startAt` decides\n    where in the array of expressions to start doing the matching. It\n    auto-increments, so if a match is found at position 2, then startAt will be\n    set to 3.  If the end is reached startAt will return to 0.\n\n    MOST of the time the parser will be setting startAt manually to 0.\n  */\n  class ResumableMultiRegex {\n    constructor() {\n      // @ts-ignore\n      this.rules = [];\n      // @ts-ignore\n      this.multiRegexes = [];\n      this.count = 0;\n\n      this.lastIndex = 0;\n      this.regexIndex = 0;\n    }\n\n    // @ts-ignore\n    getMatcher(index) {\n      if (this.multiRegexes[index]) return this.multiRegexes[index];\n\n      const matcher = new MultiRegex();\n      this.rules.slice(index).forEach(([re, opts]) => matcher.addRule(re, opts));\n      matcher.compile();\n      this.multiRegexes[index] = matcher;\n      return matcher;\n    }\n\n    resumingScanAtSamePosition() {\n      return this.regexIndex !== 0;\n    }\n\n    considerAll() {\n      this.regexIndex = 0;\n    }\n\n    // @ts-ignore\n    addRule(re, opts) {\n      this.rules.push([re, opts]);\n      if (opts.type === \"begin\") this.count++;\n    }\n\n    /** @param {string} s */\n    exec(s) {\n      const m = this.getMatcher(this.regexIndex);\n      m.lastIndex = this.lastIndex;\n      let result = m.exec(s);\n\n      // The following is because we have no easy way to say \"resume scanning at the\n      // existing position but also skip the current rule ONLY\". What happens is\n      // all prior rules are also skipped which can result in matching the wrong\n      // thing. Example of matching \"booger\":\n\n      // our matcher is [string, \"booger\", number]\n      //\n      // ....booger....\n\n      // if \"booger\" is ignored then we'd really need a regex to scan from the\n      // SAME position for only: [string, number] but ignoring \"booger\" (if it\n      // was the first match), a simple resume would scan ahead who knows how\n      // far looking only for \"number\", ignoring potential string matches (or\n      // future \"booger\" matches that might be valid.)\n\n      // So what we do: We execute two matchers, one resuming at the same\n      // position, but the second full matcher starting at the position after:\n\n      //     /--- resume first regex match here (for [number])\n      //     |/---- full match here for [string, \"booger\", number]\n      //     vv\n      // ....booger....\n\n      // Which ever results in a match first is then used. So this 3-4 step\n      // process essentially allows us to say \"match at this position, excluding\n      // a prior rule that was ignored\".\n      //\n      // 1. Match \"booger\" first, ignore. Also proves that [string] does non match.\n      // 2. Resume matching for [number]\n      // 3. Match at index + 1 for [string, \"booger\", number]\n      // 4. If #2 and #3 result in matches, which came first?\n      if (this.resumingScanAtSamePosition()) {\n        if (result && result.index === this.lastIndex) ; else { // use the second matcher result\n          const m2 = this.getMatcher(0);\n          m2.lastIndex = this.lastIndex + 1;\n          result = m2.exec(s);\n        }\n      }\n\n      if (result) {\n        this.regexIndex += result.position + 1;\n        if (this.regexIndex === this.count) {\n          // wrap-around to considering all matches again\n          this.considerAll();\n        }\n      }\n\n      return result;\n    }\n  }\n\n  /**\n   * Given a mode, builds a huge ResumableMultiRegex that can be used to walk\n   * the content and find matches.\n   *\n   * @param {CompiledMode} mode\n   * @returns {ResumableMultiRegex}\n   */\n  function buildModeRegex(mode) {\n    const mm = new ResumableMultiRegex();\n\n    mode.contains.forEach(term => mm.addRule(term.begin, { rule: term, type: \"begin\" }));\n\n    if (mode.terminatorEnd) {\n      mm.addRule(mode.terminatorEnd, { type: \"end\" });\n    }\n    if (mode.illegal) {\n      mm.addRule(mode.illegal, { type: \"illegal\" });\n    }\n\n    return mm;\n  }\n\n  /** skip vs abort vs ignore\n   *\n   * @skip   - The mode is still entered and exited normally (and contains rules apply),\n   *           but all content is held and added to the parent buffer rather than being\n   *           output when the mode ends.  Mostly used with `sublanguage` to build up\n   *           a single large buffer than can be parsed by sublanguage.\n   *\n   *             - The mode begin ands ends normally.\n   *             - Content matched is added to the parent mode buffer.\n   *             - The parser cursor is moved forward normally.\n   *\n   * @abort  - A hack placeholder until we have ignore.  Aborts the mode (as if it\n   *           never matched) but DOES NOT continue to match subsequent `contains`\n   *           modes.  Abort is bad/suboptimal because it can result in modes\n   *           farther down not getting applied because an earlier rule eats the\n   *           content but then aborts.\n   *\n   *             - The mode does not begin.\n   *             - Content matched by `begin` is added to the mode buffer.\n   *             - The parser cursor is moved forward accordingly.\n   *\n   * @ignore - Ignores the mode (as if it never matched) and continues to match any\n   *           subsequent `contains` modes.  Ignore isn't technically possible with\n   *           the current parser implementation.\n   *\n   *             - The mode does not begin.\n   *             - Content matched by `begin` is ignored.\n   *             - The parser cursor is not moved forward.\n   */\n\n  /**\n   * Compiles an individual mode\n   *\n   * This can raise an error if the mode contains certain detectable known logic\n   * issues.\n   * @param {Mode} mode\n   * @param {CompiledMode | null} [parent]\n   * @returns {CompiledMode | never}\n   */\n  function compileMode(mode, parent) {\n    const cmode = /** @type CompiledMode */ (mode);\n    if (mode.isCompiled) return cmode;\n\n    [\n      scopeClassName,\n      // do this early so compiler extensions generally don't have to worry about\n      // the distinction between match/begin\n      compileMatch,\n      MultiClass,\n      beforeMatchExt\n    ].forEach(ext => ext(mode, parent));\n\n    language.compilerExtensions.forEach(ext => ext(mode, parent));\n\n    // __beforeBegin is considered private API, internal use only\n    mode.__beforeBegin = null;\n\n    [\n      beginKeywords,\n      // do this later so compiler extensions that come earlier have access to the\n      // raw array if they wanted to perhaps manipulate it, etc.\n      compileIllegal,\n      // default to 1 relevance if not specified\n      compileRelevance\n    ].forEach(ext => ext(mode, parent));\n\n    mode.isCompiled = true;\n\n    let keywordPattern = null;\n    if (typeof mode.keywords === \"object\" && mode.keywords.$pattern) {\n      // we need a copy because keywords might be compiled multiple times\n      // so we can't go deleting $pattern from the original on the first\n      // pass\n      mode.keywords = Object.assign({}, mode.keywords);\n      keywordPattern = mode.keywords.$pattern;\n      delete mode.keywords.$pattern;\n    }\n    keywordPattern = keywordPattern || /\\w+/;\n\n    if (mode.keywords) {\n      mode.keywords = compileKeywords(mode.keywords, language.case_insensitive);\n    }\n\n    cmode.keywordPatternRe = langRe(keywordPattern, true);\n\n    if (parent) {\n      if (!mode.begin) mode.begin = /\\B|\\b/;\n      cmode.beginRe = langRe(cmode.begin);\n      if (!mode.end && !mode.endsWithParent) mode.end = /\\B|\\b/;\n      if (mode.end) cmode.endRe = langRe(cmode.end);\n      cmode.terminatorEnd = source(cmode.end) || '';\n      if (mode.endsWithParent && parent.terminatorEnd) {\n        cmode.terminatorEnd += (mode.end ? '|' : '') + parent.terminatorEnd;\n      }\n    }\n    if (mode.illegal) cmode.illegalRe = langRe(/** @type {RegExp | string} */ (mode.illegal));\n    if (!mode.contains) mode.contains = [];\n\n    mode.contains = [].concat(...mode.contains.map(function(c) {\n      return expandOrCloneMode(c === 'self' ? mode : c);\n    }));\n    mode.contains.forEach(function(c) { compileMode(/** @type Mode */ (c), cmode); });\n\n    if (mode.starts) {\n      compileMode(mode.starts, parent);\n    }\n\n    cmode.matcher = buildModeRegex(cmode);\n    return cmode;\n  }\n\n  if (!language.compilerExtensions) language.compilerExtensions = [];\n\n  // self is not valid at the top-level\n  if (language.contains && language.contains.includes('self')) {\n    throw new Error(\"ERR: contains `self` is not supported at the top-level of a language.  See documentation.\");\n  }\n\n  // we need a null object, which inherit will guarantee\n  language.classNameAliases = inherit$1(language.classNameAliases || {});\n\n  return compileMode(/** @type Mode */ (language));\n}\n\n/**\n * Determines if a mode has a dependency on it's parent or not\n *\n * If a mode does have a parent dependency then often we need to clone it if\n * it's used in multiple places so that each copy points to the correct parent,\n * where-as modes without a parent can often safely be re-used at the bottom of\n * a mode chain.\n *\n * @param {Mode | null} mode\n * @returns {boolean} - is there a dependency on the parent?\n * */\nfunction dependencyOnParent(mode) {\n  if (!mode) return false;\n\n  return mode.endsWithParent || dependencyOnParent(mode.starts);\n}\n\n/**\n * Expands a mode or clones it if necessary\n *\n * This is necessary for modes with parental dependenceis (see notes on\n * `dependencyOnParent`) and for nodes that have `variants` - which must then be\n * exploded into their own individual modes at compile time.\n *\n * @param {Mode} mode\n * @returns {Mode | Mode[]}\n * */\nfunction expandOrCloneMode(mode) {\n  if (mode.variants && !mode.cachedVariants) {\n    mode.cachedVariants = mode.variants.map(function(variant) {\n      return inherit$1(mode, { variants: null }, variant);\n    });\n  }\n\n  // EXPAND\n  // if we have variants then essentially \"replace\" the mode with the variants\n  // this happens in compileMode, where this function is called from\n  if (mode.cachedVariants) {\n    return mode.cachedVariants;\n  }\n\n  // CLONE\n  // if we have dependencies on parents then we need a unique\n  // instance of ourselves, so we can be reused with many\n  // different parents without issue\n  if (dependencyOnParent(mode)) {\n    return inherit$1(mode, { starts: mode.starts ? inherit$1(mode.starts) : null });\n  }\n\n  if (Object.isFrozen(mode)) {\n    return inherit$1(mode);\n  }\n\n  // no special dependency issues, just return ourselves\n  return mode;\n}\n\nvar version = \"11.11.1\";\n\nclass HTMLInjectionError extends Error {\n  constructor(reason, html) {\n    super(reason);\n    this.name = \"HTMLInjectionError\";\n    this.html = html;\n  }\n}\n\n/*\nSyntax highlighting with language autodetection.\nhttps://highlightjs.org/\n*/\n\n\n\n/**\n@typedef {import('highlight.js').Mode} Mode\n@typedef {import('highlight.js').CompiledMode} CompiledMode\n@typedef {import('highlight.js').CompiledScope} CompiledScope\n@typedef {import('highlight.js').Language} Language\n@typedef {import('highlight.js').HLJSApi} HLJSApi\n@typedef {import('highlight.js').HLJSPlugin} HLJSPlugin\n@typedef {import('highlight.js').PluginEvent} PluginEvent\n@typedef {import('highlight.js').HLJSOptions} HLJSOptions\n@typedef {import('highlight.js').LanguageFn} LanguageFn\n@typedef {import('highlight.js').HighlightedHTMLElement} HighlightedHTMLElement\n@typedef {import('highlight.js').BeforeHighlightContext} BeforeHighlightContext\n@typedef {import('highlight.js/private').MatchType} MatchType\n@typedef {import('highlight.js/private').KeywordData} KeywordData\n@typedef {import('highlight.js/private').EnhancedMatch} EnhancedMatch\n@typedef {import('highlight.js/private').AnnotatedError} AnnotatedError\n@typedef {import('highlight.js').AutoHighlightResult} AutoHighlightResult\n@typedef {import('highlight.js').HighlightOptions} HighlightOptions\n@typedef {import('highlight.js').HighlightResult} HighlightResult\n*/\n\n\nconst escape = escapeHTML;\nconst inherit = inherit$1;\nconst NO_MATCH = Symbol(\"nomatch\");\nconst MAX_KEYWORD_HITS = 7;\n\n/**\n * @param {any} hljs - object that is extended (legacy)\n * @returns {HLJSApi}\n */\nconst HLJS = function(hljs) {\n  // Global internal variables used within the highlight.js library.\n  /** @type {Record<string, Language>} */\n  const languages = Object.create(null);\n  /** @type {Record<string, string>} */\n  const aliases = Object.create(null);\n  /** @type {HLJSPlugin[]} */\n  const plugins = [];\n\n  // safe/production mode - swallows more errors, tries to keep running\n  // even if a single syntax or parse hits a fatal error\n  let SAFE_MODE = true;\n  const LANGUAGE_NOT_FOUND = \"Could not find the language '{}', did you forget to load/include a language module?\";\n  /** @type {Language} */\n  const PLAINTEXT_LANGUAGE = { disableAutodetect: true, name: 'Plain text', contains: [] };\n\n  // Global options used when within external APIs. This is modified when\n  // calling the `hljs.configure` function.\n  /** @type HLJSOptions */\n  let options = {\n    ignoreUnescapedHTML: false,\n    throwUnescapedHTML: false,\n    noHighlightRe: /^(no-?highlight)$/i,\n    languageDetectRe: /\\blang(?:uage)?-([\\w-]+)\\b/i,\n    classPrefix: 'hljs-',\n    cssSelector: 'pre code',\n    languages: null,\n    // beta configuration options, subject to change, welcome to discuss\n    // https://github.com/highlightjs/highlight.js/issues/1086\n    __emitter: TokenTreeEmitter\n  };\n\n  /* Utility functions */\n\n  /**\n   * Tests a language name to see if highlighting should be skipped\n   * @param {string} languageName\n   */\n  function shouldNotHighlight(languageName) {\n    return options.noHighlightRe.test(languageName);\n  }\n\n  /**\n   * @param {HighlightedHTMLElement} block - the HTML element to determine language for\n   */\n  function blockLanguage(block) {\n    let classes = block.className + ' ';\n\n    classes += block.parentNode ? block.parentNode.className : '';\n\n    // language-* takes precedence over non-prefixed class names.\n    const match = options.languageDetectRe.exec(classes);\n    if (match) {\n      const language = getLanguage(match[1]);\n      if (!language) {\n        warn(LANGUAGE_NOT_FOUND.replace(\"{}\", match[1]));\n        warn(\"Falling back to no-highlight mode for this block.\", block);\n      }\n      return language ? match[1] : 'no-highlight';\n    }\n\n    return classes\n      .split(/\\s+/)\n      .find((_class) => shouldNotHighlight(_class) || getLanguage(_class));\n  }\n\n  /**\n   * Core highlighting function.\n   *\n   * OLD API\n   * highlight(lang, code, ignoreIllegals, continuation)\n   *\n   * NEW API\n   * highlight(code, {lang, ignoreIllegals})\n   *\n   * @param {string} codeOrLanguageName - the language to use for highlighting\n   * @param {string | HighlightOptions} optionsOrCode - the code to highlight\n   * @param {boolean} [ignoreIllegals] - whether to ignore illegal matches, default is to bail\n   *\n   * @returns {HighlightResult} Result - an object that represents the result\n   * @property {string} language - the language name\n   * @property {number} relevance - the relevance score\n   * @property {string} value - the highlighted HTML code\n   * @property {string} code - the original raw code\n   * @property {CompiledMode} top - top of the current mode stack\n   * @property {boolean} illegal - indicates whether any illegal matches were found\n  */\n  function highlight(codeOrLanguageName, optionsOrCode, ignoreIllegals) {\n    let code = \"\";\n    let languageName = \"\";\n    if (typeof optionsOrCode === \"object\") {\n      code = codeOrLanguageName;\n      ignoreIllegals = optionsOrCode.ignoreIllegals;\n      languageName = optionsOrCode.language;\n    } else {\n      // old API\n      deprecated(\"10.7.0\", \"highlight(lang, code, ...args) has been deprecated.\");\n      deprecated(\"10.7.0\", \"Please use highlight(code, options) instead.\\nhttps://github.com/highlightjs/highlight.js/issues/2277\");\n      languageName = codeOrLanguageName;\n      code = optionsOrCode;\n    }\n\n    // https://github.com/highlightjs/highlight.js/issues/3149\n    // eslint-disable-next-line no-undefined\n    if (ignoreIllegals === undefined) { ignoreIllegals = true; }\n\n    /** @type {BeforeHighlightContext} */\n    const context = {\n      code,\n      language: languageName\n    };\n    // the plugin can change the desired language or the code to be highlighted\n    // just be changing the object it was passed\n    fire(\"before:highlight\", context);\n\n    // a before plugin can usurp the result completely by providing it's own\n    // in which case we don't even need to call highlight\n    const result = context.result\n      ? context.result\n      : _highlight(context.language, context.code, ignoreIllegals);\n\n    result.code = context.code;\n    // the plugin can change anything in result to suite it\n    fire(\"after:highlight\", result);\n\n    return result;\n  }\n\n  /**\n   * private highlight that's used internally and does not fire callbacks\n   *\n   * @param {string} languageName - the language to use for highlighting\n   * @param {string} codeToHighlight - the code to highlight\n   * @param {boolean?} [ignoreIllegals] - whether to ignore illegal matches, default is to bail\n   * @param {CompiledMode?} [continuation] - current continuation mode, if any\n   * @returns {HighlightResult} - result of the highlight operation\n  */\n  function _highlight(languageName, codeToHighlight, ignoreIllegals, continuation) {\n    const keywordHits = Object.create(null);\n\n    /**\n     * Return keyword data if a match is a keyword\n     * @param {CompiledMode} mode - current mode\n     * @param {string} matchText - the textual match\n     * @returns {KeywordData | false}\n     */\n    function keywordData(mode, matchText) {\n      return mode.keywords[matchText];\n    }\n\n    function processKeywords() {\n      if (!top.keywords) {\n        emitter.addText(modeBuffer);\n        return;\n      }\n\n      let lastIndex = 0;\n      top.keywordPatternRe.lastIndex = 0;\n      let match = top.keywordPatternRe.exec(modeBuffer);\n      let buf = \"\";\n\n      while (match) {\n        buf += modeBuffer.substring(lastIndex, match.index);\n        const word = language.case_insensitive ? match[0].toLowerCase() : match[0];\n        const data = keywordData(top, word);\n        if (data) {\n          const [kind, keywordRelevance] = data;\n          emitter.addText(buf);\n          buf = \"\";\n\n          keywordHits[word] = (keywordHits[word] || 0) + 1;\n          if (keywordHits[word] <= MAX_KEYWORD_HITS) relevance += keywordRelevance;\n          if (kind.startsWith(\"_\")) {\n            // _ implied for relevance only, do not highlight\n            // by applying a class name\n            buf += match[0];\n          } else {\n            const cssClass = language.classNameAliases[kind] || kind;\n            emitKeyword(match[0], cssClass);\n          }\n        } else {\n          buf += match[0];\n        }\n        lastIndex = top.keywordPatternRe.lastIndex;\n        match = top.keywordPatternRe.exec(modeBuffer);\n      }\n      buf += modeBuffer.substring(lastIndex);\n      emitter.addText(buf);\n    }\n\n    function processSubLanguage() {\n      if (modeBuffer === \"\") return;\n      /** @type HighlightResult */\n      let result = null;\n\n      if (typeof top.subLanguage === 'string') {\n        if (!languages[top.subLanguage]) {\n          emitter.addText(modeBuffer);\n          return;\n        }\n        result = _highlight(top.subLanguage, modeBuffer, true, continuations[top.subLanguage]);\n        continuations[top.subLanguage] = /** @type {CompiledMode} */ (result._top);\n      } else {\n        result = highlightAuto(modeBuffer, top.subLanguage.length ? top.subLanguage : null);\n      }\n\n      // Counting embedded language score towards the host language may be disabled\n      // with zeroing the containing mode relevance. Use case in point is Markdown that\n      // allows XML everywhere and makes every XML snippet to have a much larger Markdown\n      // score.\n      if (top.relevance > 0) {\n        relevance += result.relevance;\n      }\n      emitter.__addSublanguage(result._emitter, result.language);\n    }\n\n    function processBuffer() {\n      if (top.subLanguage != null) {\n        processSubLanguage();\n      } else {\n        processKeywords();\n      }\n      modeBuffer = '';\n    }\n\n    /**\n     * @param {string} text\n     * @param {string} scope\n     */\n    function emitKeyword(keyword, scope) {\n      if (keyword === \"\") return;\n\n      emitter.startScope(scope);\n      emitter.addText(keyword);\n      emitter.endScope();\n    }\n\n    /**\n     * @param {CompiledScope} scope\n     * @param {RegExpMatchArray} match\n     */\n    function emitMultiClass(scope, match) {\n      let i = 1;\n      const max = match.length - 1;\n      while (i <= max) {\n        if (!scope._emit[i]) { i++; continue; }\n        const klass = language.classNameAliases[scope[i]] || scope[i];\n        const text = match[i];\n        if (klass) {\n          emitKeyword(text, klass);\n        } else {\n          modeBuffer = text;\n          processKeywords();\n          modeBuffer = \"\";\n        }\n        i++;\n      }\n    }\n\n    /**\n     * @param {CompiledMode} mode - new mode to start\n     * @param {RegExpMatchArray} match\n     */\n    function startNewMode(mode, match) {\n      if (mode.scope && typeof mode.scope === \"string\") {\n        emitter.openNode(language.classNameAliases[mode.scope] || mode.scope);\n      }\n      if (mode.beginScope) {\n        // beginScope just wraps the begin match itself in a scope\n        if (mode.beginScope._wrap) {\n          emitKeyword(modeBuffer, language.classNameAliases[mode.beginScope._wrap] || mode.beginScope._wrap);\n          modeBuffer = \"\";\n        } else if (mode.beginScope._multi) {\n          // at this point modeBuffer should just be the match\n          emitMultiClass(mode.beginScope, match);\n          modeBuffer = \"\";\n        }\n      }\n\n      top = Object.create(mode, { parent: { value: top } });\n      return top;\n    }\n\n    /**\n     * @param {CompiledMode } mode - the mode to potentially end\n     * @param {RegExpMatchArray} match - the latest match\n     * @param {string} matchPlusRemainder - match plus remainder of content\n     * @returns {CompiledMode | void} - the next mode, or if void continue on in current mode\n     */\n    function endOfMode(mode, match, matchPlusRemainder) {\n      let matched = startsWith(mode.endRe, matchPlusRemainder);\n\n      if (matched) {\n        if (mode[\"on:end\"]) {\n          const resp = new Response(mode);\n          mode[\"on:end\"](match, resp);\n          if (resp.isMatchIgnored) matched = false;\n        }\n\n        if (matched) {\n          while (mode.endsParent && mode.parent) {\n            mode = mode.parent;\n          }\n          return mode;\n        }\n      }\n      // even if on:end fires an `ignore` it's still possible\n      // that we might trigger the end node because of a parent mode\n      if (mode.endsWithParent) {\n        return endOfMode(mode.parent, match, matchPlusRemainder);\n      }\n    }\n\n    /**\n     * Handle matching but then ignoring a sequence of text\n     *\n     * @param {string} lexeme - string containing full match text\n     */\n    function doIgnore(lexeme) {\n      if (top.matcher.regexIndex === 0) {\n        // no more regexes to potentially match here, so we move the cursor forward one\n        // space\n        modeBuffer += lexeme[0];\n        return 1;\n      } else {\n        // no need to move the cursor, we still have additional regexes to try and\n        // match at this very spot\n        resumeScanAtSamePosition = true;\n        return 0;\n      }\n    }\n\n    /**\n     * Handle the start of a new potential mode match\n     *\n     * @param {EnhancedMatch} match - the current match\n     * @returns {number} how far to advance the parse cursor\n     */\n    function doBeginMatch(match) {\n      const lexeme = match[0];\n      const newMode = match.rule;\n\n      const resp = new Response(newMode);\n      // first internal before callbacks, then the public ones\n      const beforeCallbacks = [newMode.__beforeBegin, newMode[\"on:begin\"]];\n      for (const cb of beforeCallbacks) {\n        if (!cb) continue;\n        cb(match, resp);\n        if (resp.isMatchIgnored) return doIgnore(lexeme);\n      }\n\n      if (newMode.skip) {\n        modeBuffer += lexeme;\n      } else {\n        if (newMode.excludeBegin) {\n          modeBuffer += lexeme;\n        }\n        processBuffer();\n        if (!newMode.returnBegin && !newMode.excludeBegin) {\n          modeBuffer = lexeme;\n        }\n      }\n      startNewMode(newMode, match);\n      return newMode.returnBegin ? 0 : lexeme.length;\n    }\n\n    /**\n     * Handle the potential end of mode\n     *\n     * @param {RegExpMatchArray} match - the current match\n     */\n    function doEndMatch(match) {\n      const lexeme = match[0];\n      const matchPlusRemainder = codeToHighlight.substring(match.index);\n\n      const endMode = endOfMode(top, match, matchPlusRemainder);\n      if (!endMode) { return NO_MATCH; }\n\n      const origin = top;\n      if (top.endScope && top.endScope._wrap) {\n        processBuffer();\n        emitKeyword(lexeme, top.endScope._wrap);\n      } else if (top.endScope && top.endScope._multi) {\n        processBuffer();\n        emitMultiClass(top.endScope, match);\n      } else if (origin.skip) {\n        modeBuffer += lexeme;\n      } else {\n        if (!(origin.returnEnd || origin.excludeEnd)) {\n          modeBuffer += lexeme;\n        }\n        processBuffer();\n        if (origin.excludeEnd) {\n          modeBuffer = lexeme;\n        }\n      }\n      do {\n        if (top.scope) {\n          emitter.closeNode();\n        }\n        if (!top.skip && !top.subLanguage) {\n          relevance += top.relevance;\n        }\n        top = top.parent;\n      } while (top !== endMode.parent);\n      if (endMode.starts) {\n        startNewMode(endMode.starts, match);\n      }\n      return origin.returnEnd ? 0 : lexeme.length;\n    }\n\n    function processContinuations() {\n      const list = [];\n      for (let current = top; current !== language; current = current.parent) {\n        if (current.scope) {\n          list.unshift(current.scope);\n        }\n      }\n      list.forEach(item => emitter.openNode(item));\n    }\n\n    /** @type {{type?: MatchType, index?: number, rule?: Mode}}} */\n    let lastMatch = {};\n\n    /**\n     *  Process an individual match\n     *\n     * @param {string} textBeforeMatch - text preceding the match (since the last match)\n     * @param {EnhancedMatch} [match] - the match itself\n     */\n    function processLexeme(textBeforeMatch, match) {\n      const lexeme = match && match[0];\n\n      // add non-matched text to the current mode buffer\n      modeBuffer += textBeforeMatch;\n\n      if (lexeme == null) {\n        processBuffer();\n        return 0;\n      }\n\n      // we've found a 0 width match and we're stuck, so we need to advance\n      // this happens when we have badly behaved rules that have optional matchers to the degree that\n      // sometimes they can end up matching nothing at all\n      // Ref: https://github.com/highlightjs/highlight.js/issues/2140\n      if (lastMatch.type === \"begin\" && match.type === \"end\" && lastMatch.index === match.index && lexeme === \"\") {\n        // spit the \"skipped\" character that our regex choked on back into the output sequence\n        modeBuffer += codeToHighlight.slice(match.index, match.index + 1);\n        if (!SAFE_MODE) {\n          /** @type {AnnotatedError} */\n          const err = new Error(`0 width match regex (${languageName})`);\n          err.languageName = languageName;\n          err.badRule = lastMatch.rule;\n          throw err;\n        }\n        return 1;\n      }\n      lastMatch = match;\n\n      if (match.type === \"begin\") {\n        return doBeginMatch(match);\n      } else if (match.type === \"illegal\" && !ignoreIllegals) {\n        // illegal match, we do not continue processing\n        /** @type {AnnotatedError} */\n        const err = new Error('Illegal lexeme \"' + lexeme + '\" for mode \"' + (top.scope || '<unnamed>') + '\"');\n        err.mode = top;\n        throw err;\n      } else if (match.type === \"end\") {\n        const processed = doEndMatch(match);\n        if (processed !== NO_MATCH) {\n          return processed;\n        }\n      }\n\n      // edge case for when illegal matches $ (end of line) which is technically\n      // a 0 width match but not a begin/end match so it's not caught by the\n      // first handler (when ignoreIllegals is true)\n      if (match.type === \"illegal\" && lexeme === \"\") {\n        // advance so we aren't stuck in an infinite loop\n        modeBuffer += \"\\n\";\n        return 1;\n      }\n\n      // infinite loops are BAD, this is a last ditch catch all. if we have a\n      // decent number of iterations yet our index (cursor position in our\n      // parsing) still 3x behind our index then something is very wrong\n      // so we bail\n      if (iterations > 100000 && iterations > match.index * 3) {\n        const err = new Error('potential infinite loop, way more iterations than matches');\n        throw err;\n      }\n\n      /*\n      Why might be find ourselves here?  An potential end match that was\n      triggered but could not be completed.  IE, `doEndMatch` returned NO_MATCH.\n      (this could be because a callback requests the match be ignored, etc)\n\n      This causes no real harm other than stopping a few times too many.\n      */\n\n      modeBuffer += lexeme;\n      return lexeme.length;\n    }\n\n    const language = getLanguage(languageName);\n    if (!language) {\n      error(LANGUAGE_NOT_FOUND.replace(\"{}\", languageName));\n      throw new Error('Unknown language: \"' + languageName + '\"');\n    }\n\n    const md = compileLanguage(language);\n    let result = '';\n    /** @type {CompiledMode} */\n    let top = continuation || md;\n    /** @type Record<string,CompiledMode> */\n    const continuations = {}; // keep continuations for sub-languages\n    const emitter = new options.__emitter(options);\n    processContinuations();\n    let modeBuffer = '';\n    let relevance = 0;\n    let index = 0;\n    let iterations = 0;\n    let resumeScanAtSamePosition = false;\n\n    try {\n      if (!language.__emitTokens) {\n        top.matcher.considerAll();\n\n        for (;;) {\n          iterations++;\n          if (resumeScanAtSamePosition) {\n            // only regexes not matched previously will now be\n            // considered for a potential match\n            resumeScanAtSamePosition = false;\n          } else {\n            top.matcher.considerAll();\n          }\n          top.matcher.lastIndex = index;\n\n          const match = top.matcher.exec(codeToHighlight);\n          // console.log(\"match\", match[0], match.rule && match.rule.begin)\n\n          if (!match) break;\n\n          const beforeMatch = codeToHighlight.substring(index, match.index);\n          const processedCount = processLexeme(beforeMatch, match);\n          index = match.index + processedCount;\n        }\n        processLexeme(codeToHighlight.substring(index));\n      } else {\n        language.__emitTokens(codeToHighlight, emitter);\n      }\n\n      emitter.finalize();\n      result = emitter.toHTML();\n\n      return {\n        language: languageName,\n        value: result,\n        relevance,\n        illegal: false,\n        _emitter: emitter,\n        _top: top\n      };\n    } catch (err) {\n      if (err.message && err.message.includes('Illegal')) {\n        return {\n          language: languageName,\n          value: escape(codeToHighlight),\n          illegal: true,\n          relevance: 0,\n          _illegalBy: {\n            message: err.message,\n            index,\n            context: codeToHighlight.slice(index - 100, index + 100),\n            mode: err.mode,\n            resultSoFar: result\n          },\n          _emitter: emitter\n        };\n      } else if (SAFE_MODE) {\n        return {\n          language: languageName,\n          value: escape(codeToHighlight),\n          illegal: false,\n          relevance: 0,\n          errorRaised: err,\n          _emitter: emitter,\n          _top: top\n        };\n      } else {\n        throw err;\n      }\n    }\n  }\n\n  /**\n   * returns a valid highlight result, without actually doing any actual work,\n   * auto highlight starts with this and it's possible for small snippets that\n   * auto-detection may not find a better match\n   * @param {string} code\n   * @returns {HighlightResult}\n   */\n  function justTextHighlightResult(code) {\n    const result = {\n      value: escape(code),\n      illegal: false,\n      relevance: 0,\n      _top: PLAINTEXT_LANGUAGE,\n      _emitter: new options.__emitter(options)\n    };\n    result._emitter.addText(code);\n    return result;\n  }\n\n  /**\n  Highlighting with language detection. Accepts a string with the code to\n  highlight. Returns an object with the following properties:\n\n  - language (detected language)\n  - relevance (int)\n  - value (an HTML string with highlighting markup)\n  - secondBest (object with the same structure for second-best heuristically\n    detected language, may be absent)\n\n    @param {string} code\n    @param {Array<string>} [languageSubset]\n    @returns {AutoHighlightResult}\n  */\n  function highlightAuto(code, languageSubset) {\n    languageSubset = languageSubset || options.languages || Object.keys(languages);\n    const plaintext = justTextHighlightResult(code);\n\n    const results = languageSubset.filter(getLanguage).filter(autoDetection).map(name =>\n      _highlight(name, code, false)\n    );\n    results.unshift(plaintext); // plaintext is always an option\n\n    const sorted = results.sort((a, b) => {\n      // sort base on relevance\n      if (a.relevance !== b.relevance) return b.relevance - a.relevance;\n\n      // always award the tie to the base language\n      // ie if C++ and Arduino are tied, it's more likely to be C++\n      if (a.language && b.language) {\n        if (getLanguage(a.language).supersetOf === b.language) {\n          return 1;\n        } else if (getLanguage(b.language).supersetOf === a.language) {\n          return -1;\n        }\n      }\n\n      // otherwise say they are equal, which has the effect of sorting on\n      // relevance while preserving the original ordering - which is how ties\n      // have historically been settled, ie the language that comes first always\n      // wins in the case of a tie\n      return 0;\n    });\n\n    const [best, secondBest] = sorted;\n\n    /** @type {AutoHighlightResult} */\n    const result = best;\n    result.secondBest = secondBest;\n\n    return result;\n  }\n\n  /**\n   * Builds new class name for block given the language name\n   *\n   * @param {HTMLElement} element\n   * @param {string} [currentLang]\n   * @param {string} [resultLang]\n   */\n  function updateClassName(element, currentLang, resultLang) {\n    const language = (currentLang && aliases[currentLang]) || resultLang;\n\n    element.classList.add(\"hljs\");\n    element.classList.add(`language-${language}`);\n  }\n\n  /**\n   * Applies highlighting to a DOM node containing code.\n   *\n   * @param {HighlightedHTMLElement} element - the HTML element to highlight\n  */\n  function highlightElement(element) {\n    /** @type HTMLElement */\n    let node = null;\n    const language = blockLanguage(element);\n\n    if (shouldNotHighlight(language)) return;\n\n    fire(\"before:highlightElement\",\n      { el: element, language });\n\n    if (element.dataset.highlighted) {\n      console.log(\"Element previously highlighted. To highlight again, first unset `dataset.highlighted`.\", element);\n      return;\n    }\n\n    // we should be all text, no child nodes (unescaped HTML) - this is possibly\n    // an HTML injection attack - it's likely too late if this is already in\n    // production (the code has likely already done its damage by the time\n    // we're seeing it)... but we yell loudly about this so that hopefully it's\n    // more likely to be caught in development before making it to production\n    if (element.children.length > 0) {\n      if (!options.ignoreUnescapedHTML) {\n        console.warn(\"One of your code blocks includes unescaped HTML. This is a potentially serious security risk.\");\n        console.warn(\"https://github.com/highlightjs/highlight.js/wiki/security\");\n        console.warn(\"The element with unescaped HTML:\");\n        console.warn(element);\n      }\n      if (options.throwUnescapedHTML) {\n        const err = new HTMLInjectionError(\n          \"One of your code blocks includes unescaped HTML.\",\n          element.innerHTML\n        );\n        throw err;\n      }\n    }\n\n    node = element;\n    const text = node.textContent;\n    const result = language ? highlight(text, { language, ignoreIllegals: true }) : highlightAuto(text);\n\n    element.innerHTML = result.value;\n    element.dataset.highlighted = \"yes\";\n    updateClassName(element, language, result.language);\n    element.result = {\n      language: result.language,\n      // TODO: remove with version 11.0\n      re: result.relevance,\n      relevance: result.relevance\n    };\n    if (result.secondBest) {\n      element.secondBest = {\n        language: result.secondBest.language,\n        relevance: result.secondBest.relevance\n      };\n    }\n\n    fire(\"after:highlightElement\", { el: element, result, text });\n  }\n\n  /**\n   * Updates highlight.js global options with the passed options\n   *\n   * @param {Partial<HLJSOptions>} userOptions\n   */\n  function configure(userOptions) {\n    options = inherit(options, userOptions);\n  }\n\n  // TODO: remove v12, deprecated\n  const initHighlighting = () => {\n    highlightAll();\n    deprecated(\"10.6.0\", \"initHighlighting() deprecated.  Use highlightAll() now.\");\n  };\n\n  // TODO: remove v12, deprecated\n  function initHighlightingOnLoad() {\n    highlightAll();\n    deprecated(\"10.6.0\", \"initHighlightingOnLoad() deprecated.  Use highlightAll() now.\");\n  }\n\n  let wantsHighlight = false;\n\n  /**\n   * auto-highlights all pre>code elements on the page\n   */\n  function highlightAll() {\n    function boot() {\n      // if a highlight was requested before DOM was loaded, do now\n      highlightAll();\n    }\n\n    // if we are called too early in the loading process\n    if (document.readyState === \"loading\") {\n      // make sure the event listener is only added once\n      if (!wantsHighlight) {\n        window.addEventListener('DOMContentLoaded', boot, false);\n      }\n      wantsHighlight = true;\n      return;\n    }\n\n    const blocks = document.querySelectorAll(options.cssSelector);\n    blocks.forEach(highlightElement);\n  }\n\n  /**\n   * Register a language grammar module\n   *\n   * @param {string} languageName\n   * @param {LanguageFn} languageDefinition\n   */\n  function registerLanguage(languageName, languageDefinition) {\n    let lang = null;\n    try {\n      lang = languageDefinition(hljs);\n    } catch (error$1) {\n      error(\"Language definition for '{}' could not be registered.\".replace(\"{}\", languageName));\n      // hard or soft error\n      if (!SAFE_MODE) { throw error$1; } else { error(error$1); }\n      // languages that have serious errors are replaced with essentially a\n      // \"plaintext\" stand-in so that the code blocks will still get normal\n      // css classes applied to them - and one bad language won't break the\n      // entire highlighter\n      lang = PLAINTEXT_LANGUAGE;\n    }\n    // give it a temporary name if it doesn't have one in the meta-data\n    if (!lang.name) lang.name = languageName;\n    languages[languageName] = lang;\n    lang.rawDefinition = languageDefinition.bind(null, hljs);\n\n    if (lang.aliases) {\n      registerAliases(lang.aliases, { languageName });\n    }\n  }\n\n  /**\n   * Remove a language grammar module\n   *\n   * @param {string} languageName\n   */\n  function unregisterLanguage(languageName) {\n    delete languages[languageName];\n    for (const alias of Object.keys(aliases)) {\n      if (aliases[alias] === languageName) {\n        delete aliases[alias];\n      }\n    }\n  }\n\n  /**\n   * @returns {string[]} List of language internal names\n   */\n  function listLanguages() {\n    return Object.keys(languages);\n  }\n\n  /**\n   * @param {string} name - name of the language to retrieve\n   * @returns {Language | undefined}\n   */\n  function getLanguage(name) {\n    name = (name || '').toLowerCase();\n    return languages[name] || languages[aliases[name]];\n  }\n\n  /**\n   *\n   * @param {string|string[]} aliasList - single alias or list of aliases\n   * @param {{languageName: string}} opts\n   */\n  function registerAliases(aliasList, { languageName }) {\n    if (typeof aliasList === 'string') {\n      aliasList = [aliasList];\n    }\n    aliasList.forEach(alias => { aliases[alias.toLowerCase()] = languageName; });\n  }\n\n  /**\n   * Determines if a given language has auto-detection enabled\n   * @param {string} name - name of the language\n   */\n  function autoDetection(name) {\n    const lang = getLanguage(name);\n    return lang && !lang.disableAutodetect;\n  }\n\n  /**\n   * Upgrades the old highlightBlock plugins to the new\n   * highlightElement API\n   * @param {HLJSPlugin} plugin\n   */\n  function upgradePluginAPI(plugin) {\n    // TODO: remove with v12\n    if (plugin[\"before:highlightBlock\"] && !plugin[\"before:highlightElement\"]) {\n      plugin[\"before:highlightElement\"] = (data) => {\n        plugin[\"before:highlightBlock\"](\n          Object.assign({ block: data.el }, data)\n        );\n      };\n    }\n    if (plugin[\"after:highlightBlock\"] && !plugin[\"after:highlightElement\"]) {\n      plugin[\"after:highlightElement\"] = (data) => {\n        plugin[\"after:highlightBlock\"](\n          Object.assign({ block: data.el }, data)\n        );\n      };\n    }\n  }\n\n  /**\n   * @param {HLJSPlugin} plugin\n   */\n  function addPlugin(plugin) {\n    upgradePluginAPI(plugin);\n    plugins.push(plugin);\n  }\n\n  /**\n   * @param {HLJSPlugin} plugin\n   */\n  function removePlugin(plugin) {\n    const index = plugins.indexOf(plugin);\n    if (index !== -1) {\n      plugins.splice(index, 1);\n    }\n  }\n\n  /**\n   *\n   * @param {PluginEvent} event\n   * @param {any} args\n   */\n  function fire(event, args) {\n    const cb = event;\n    plugins.forEach(function(plugin) {\n      if (plugin[cb]) {\n        plugin[cb](args);\n      }\n    });\n  }\n\n  /**\n   * DEPRECATED\n   * @param {HighlightedHTMLElement} el\n   */\n  function deprecateHighlightBlock(el) {\n    deprecated(\"10.7.0\", \"highlightBlock will be removed entirely in v12.0\");\n    deprecated(\"10.7.0\", \"Please use highlightElement now.\");\n\n    return highlightElement(el);\n  }\n\n  /* Interface definition */\n  Object.assign(hljs, {\n    highlight,\n    highlightAuto,\n    highlightAll,\n    highlightElement,\n    // TODO: Remove with v12 API\n    highlightBlock: deprecateHighlightBlock,\n    configure,\n    initHighlighting,\n    initHighlightingOnLoad,\n    registerLanguage,\n    unregisterLanguage,\n    listLanguages,\n    getLanguage,\n    registerAliases,\n    autoDetection,\n    inherit,\n    addPlugin,\n    removePlugin\n  });\n\n  hljs.debugMode = function() { SAFE_MODE = false; };\n  hljs.safeMode = function() { SAFE_MODE = true; };\n  hljs.versionString = version;\n\n  hljs.regex = {\n    concat: concat,\n    lookahead: lookahead,\n    either: either,\n    optional: optional,\n    anyNumberOfTimes: anyNumberOfTimes\n  };\n\n  for (const key in MODES) {\n    // @ts-ignore\n    if (typeof MODES[key] === \"object\") {\n      // @ts-ignore\n      deepFreeze(MODES[key]);\n    }\n  }\n\n  // merge all the modes/regexes into our main object\n  Object.assign(hljs, MODES);\n\n  return hljs;\n};\n\n// Other names for the variable may break build script\nconst highlight = HLJS({});\n\n// returns a new instance of the highlighter to be used for extensions\n// check https://github.com/wooorm/lowlight/issues/47\nhighlight.newInstance = () => HLJS({});\n\nmodule.exports = highlight;\nhighlight.HighlightJS = highlight;\nhighlight.default = highlight;\n","const IDENT_RE = '[A-Za-z$_][0-9A-Za-z$_]*';\nconst KEYWORDS = [\n  \"as\", // for exports\n  \"in\",\n  \"of\",\n  \"if\",\n  \"for\",\n  \"while\",\n  \"finally\",\n  \"var\",\n  \"new\",\n  \"function\",\n  \"do\",\n  \"return\",\n  \"void\",\n  \"else\",\n  \"break\",\n  \"catch\",\n  \"instanceof\",\n  \"with\",\n  \"throw\",\n  \"case\",\n  \"default\",\n  \"try\",\n  \"switch\",\n  \"continue\",\n  \"typeof\",\n  \"delete\",\n  \"let\",\n  \"yield\",\n  \"const\",\n  \"class\",\n  // JS handles these with a special rule\n  // \"get\",\n  // \"set\",\n  \"debugger\",\n  \"async\",\n  \"await\",\n  \"static\",\n  \"import\",\n  \"from\",\n  \"export\",\n  \"extends\",\n  // It's reached stage 3, which is \"recommended for implementation\":\n  \"using\"\n];\nconst LITERALS = [\n  \"true\",\n  \"false\",\n  \"null\",\n  \"undefined\",\n  \"NaN\",\n  \"Infinity\"\n];\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects\nconst TYPES = [\n  // Fundamental objects\n  \"Object\",\n  \"Function\",\n  \"Boolean\",\n  \"Symbol\",\n  // numbers and dates\n  \"Math\",\n  \"Date\",\n  \"Number\",\n  \"BigInt\",\n  // text\n  \"String\",\n  \"RegExp\",\n  // Indexed collections\n  \"Array\",\n  \"Float32Array\",\n  \"Float64Array\",\n  \"Int8Array\",\n  \"Uint8Array\",\n  \"Uint8ClampedArray\",\n  \"Int16Array\",\n  \"Int32Array\",\n  \"Uint16Array\",\n  \"Uint32Array\",\n  \"BigInt64Array\",\n  \"BigUint64Array\",\n  // Keyed collections\n  \"Set\",\n  \"Map\",\n  \"WeakSet\",\n  \"WeakMap\",\n  // Structured data\n  \"ArrayBuffer\",\n  \"SharedArrayBuffer\",\n  \"Atomics\",\n  \"DataView\",\n  \"JSON\",\n  // Control abstraction objects\n  \"Promise\",\n  \"Generator\",\n  \"GeneratorFunction\",\n  \"AsyncFunction\",\n  // Reflection\n  \"Reflect\",\n  \"Proxy\",\n  // Internationalization\n  \"Intl\",\n  // WebAssembly\n  \"WebAssembly\"\n];\n\nconst ERROR_TYPES = [\n  \"Error\",\n  \"EvalError\",\n  \"InternalError\",\n  \"RangeError\",\n  \"ReferenceError\",\n  \"SyntaxError\",\n  \"TypeError\",\n  \"URIError\"\n];\n\nconst BUILT_IN_GLOBALS = [\n  \"setInterval\",\n  \"setTimeout\",\n  \"clearInterval\",\n  \"clearTimeout\",\n\n  \"require\",\n  \"exports\",\n\n  \"eval\",\n  \"isFinite\",\n  \"isNaN\",\n  \"parseFloat\",\n  \"parseInt\",\n  \"decodeURI\",\n  \"decodeURIComponent\",\n  \"encodeURI\",\n  \"encodeURIComponent\",\n  \"escape\",\n  \"unescape\"\n];\n\nconst BUILT_IN_VARIABLES = [\n  \"arguments\",\n  \"this\",\n  \"super\",\n  \"console\",\n  \"window\",\n  \"document\",\n  \"localStorage\",\n  \"sessionStorage\",\n  \"module\",\n  \"global\" // Node.js\n];\n\nconst BUILT_INS = [].concat(\n  BUILT_IN_GLOBALS,\n  TYPES,\n  ERROR_TYPES\n);\n\n/*\nLanguage: JavaScript\nDescription: JavaScript (JS) is a lightweight, interpreted, or just-in-time compiled programming language with first-class functions.\nCategory: common, scripting, web\nWebsite: https://developer.mozilla.org/en-US/docs/Web/JavaScript\n*/\n\n\n/** @type LanguageFn */\nfunction javascript(hljs) {\n  const regex = hljs.regex;\n  /**\n   * Takes a string like \"<Booger\" and checks to see\n   * if we can find a matching \"</Booger\" later in the\n   * content.\n   * @param {RegExpMatchArray} match\n   * @param {{after:number}} param1\n   */\n  const hasClosingTag = (match, { after }) => {\n    const tag = \"</\" + match[0].slice(1);\n    const pos = match.input.indexOf(tag, after);\n    return pos !== -1;\n  };\n\n  const IDENT_RE$1 = IDENT_RE;\n  const FRAGMENT = {\n    begin: '<>',\n    end: '</>'\n  };\n  // to avoid some special cases inside isTrulyOpeningTag\n  const XML_SELF_CLOSING = /<[A-Za-z0-9\\\\._:-]+\\s*\\/>/;\n  const XML_TAG = {\n    begin: /<[A-Za-z0-9\\\\._:-]+/,\n    end: /\\/[A-Za-z0-9\\\\._:-]+>|\\/>/,\n    /**\n     * @param {RegExpMatchArray} match\n     * @param {CallbackResponse} response\n     */\n    isTrulyOpeningTag: (match, response) => {\n      const afterMatchIndex = match[0].length + match.index;\n      const nextChar = match.input[afterMatchIndex];\n      if (\n        // HTML should not include another raw `<` inside a tag\n        // nested type?\n        // `<Array<Array<number>>`, etc.\n        nextChar === \"<\" ||\n        // the , gives away that this is not HTML\n        // `<T, A extends keyof T, V>`\n        nextChar === \",\"\n        ) {\n        response.ignoreMatch();\n        return;\n      }\n\n      // `<something>`\n      // Quite possibly a tag, lets look for a matching closing tag...\n      if (nextChar === \">\") {\n        // if we cannot find a matching closing tag, then we\n        // will ignore it\n        if (!hasClosingTag(match, { after: afterMatchIndex })) {\n          response.ignoreMatch();\n        }\n      }\n\n      // `<blah />` (self-closing)\n      // handled by simpleSelfClosing rule\n\n      let m;\n      const afterMatch = match.input.substring(afterMatchIndex);\n\n      // some more template typing stuff\n      //  <T = any>(key?: string) => Modify<\n      if ((m = afterMatch.match(/^\\s*=/))) {\n        response.ignoreMatch();\n        return;\n      }\n\n      // `<From extends string>`\n      // technically this could be HTML, but it smells like a type\n      // NOTE: This is ugh, but added specifically for https://github.com/highlightjs/highlight.js/issues/3276\n      if ((m = afterMatch.match(/^\\s+extends\\s+/))) {\n        if (m.index === 0) {\n          response.ignoreMatch();\n          // eslint-disable-next-line no-useless-return\n          return;\n        }\n      }\n    }\n  };\n  const KEYWORDS$1 = {\n    $pattern: IDENT_RE,\n    keyword: KEYWORDS,\n    literal: LITERALS,\n    built_in: BUILT_INS,\n    \"variable.language\": BUILT_IN_VARIABLES\n  };\n\n  // https://tc39.es/ecma262/#sec-literals-numeric-literals\n  const decimalDigits = '[0-9](_?[0-9])*';\n  const frac = `\\\\.(${decimalDigits})`;\n  // DecimalIntegerLiteral, including Annex B NonOctalDecimalIntegerLiteral\n  // https://tc39.es/ecma262/#sec-additional-syntax-numeric-literals\n  const decimalInteger = `0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*`;\n  const NUMBER = {\n    className: 'number',\n    variants: [\n      // DecimalLiteral\n      { begin: `(\\\\b(${decimalInteger})((${frac})|\\\\.)?|(${frac}))` +\n        `[eE][+-]?(${decimalDigits})\\\\b` },\n      { begin: `\\\\b(${decimalInteger})\\\\b((${frac})\\\\b|\\\\.)?|(${frac})\\\\b` },\n\n      // DecimalBigIntegerLiteral\n      { begin: `\\\\b(0|[1-9](_?[0-9])*)n\\\\b` },\n\n      // NonDecimalIntegerLiteral\n      { begin: \"\\\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\\\b\" },\n      { begin: \"\\\\b0[bB][0-1](_?[0-1])*n?\\\\b\" },\n      { begin: \"\\\\b0[oO][0-7](_?[0-7])*n?\\\\b\" },\n\n      // LegacyOctalIntegerLiteral (does not include underscore separators)\n      // https://tc39.es/ecma262/#sec-additional-syntax-numeric-literals\n      { begin: \"\\\\b0[0-7]+n?\\\\b\" },\n    ],\n    relevance: 0\n  };\n\n  const SUBST = {\n    className: 'subst',\n    begin: '\\\\$\\\\{',\n    end: '\\\\}',\n    keywords: KEYWORDS$1,\n    contains: [] // defined later\n  };\n  const HTML_TEMPLATE = {\n    begin: '\\.?html`',\n    end: '',\n    starts: {\n      end: '`',\n      returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'xml'\n    }\n  };\n  const CSS_TEMPLATE = {\n    begin: '\\.?css`',\n    end: '',\n    starts: {\n      end: '`',\n      returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'css'\n    }\n  };\n  const GRAPHQL_TEMPLATE = {\n    begin: '\\.?gql`',\n    end: '',\n    starts: {\n      end: '`',\n      returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'graphql'\n    }\n  };\n  const TEMPLATE_STRING = {\n    className: 'string',\n    begin: '`',\n    end: '`',\n    contains: [\n      hljs.BACKSLASH_ESCAPE,\n      SUBST\n    ]\n  };\n  const JSDOC_COMMENT = hljs.COMMENT(\n    /\\/\\*\\*(?!\\/)/,\n    '\\\\*/',\n    {\n      relevance: 0,\n      contains: [\n        {\n          begin: '(?=@[A-Za-z]+)',\n          relevance: 0,\n          contains: [\n            {\n              className: 'doctag',\n              begin: '@[A-Za-z]+'\n            },\n            {\n              className: 'type',\n              begin: '\\\\{',\n              end: '\\\\}',\n              excludeEnd: true,\n              excludeBegin: true,\n              relevance: 0\n            },\n            {\n              className: 'variable',\n              begin: IDENT_RE$1 + '(?=\\\\s*(-)|$)',\n              endsParent: true,\n              relevance: 0\n            },\n            // eat spaces (not newlines) so we can find\n            // types or variables\n            {\n              begin: /(?=[^\\n])\\s/,\n              relevance: 0\n            }\n          ]\n        }\n      ]\n    }\n  );\n  const COMMENT = {\n    className: \"comment\",\n    variants: [\n      JSDOC_COMMENT,\n      hljs.C_BLOCK_COMMENT_MODE,\n      hljs.C_LINE_COMMENT_MODE\n    ]\n  };\n  const SUBST_INTERNALS = [\n    hljs.APOS_STRING_MODE,\n    hljs.QUOTE_STRING_MODE,\n    HTML_TEMPLATE,\n    CSS_TEMPLATE,\n    GRAPHQL_TEMPLATE,\n    TEMPLATE_STRING,\n    // Skip numbers when they are part of a variable name\n    { match: /\\$\\d+/ },\n    NUMBER,\n    // This is intentional:\n    // See https://github.com/highlightjs/highlight.js/issues/3288\n    // hljs.REGEXP_MODE\n  ];\n  SUBST.contains = SUBST_INTERNALS\n    .concat({\n      // we need to pair up {} inside our subst to prevent\n      // it from ending too early by matching another }\n      begin: /\\{/,\n      end: /\\}/,\n      keywords: KEYWORDS$1,\n      contains: [\n        \"self\"\n      ].concat(SUBST_INTERNALS)\n    });\n  const SUBST_AND_COMMENTS = [].concat(COMMENT, SUBST.contains);\n  const PARAMS_CONTAINS = SUBST_AND_COMMENTS.concat([\n    // eat recursive parens in sub expressions\n    {\n      begin: /(\\s*)\\(/,\n      end: /\\)/,\n      keywords: KEYWORDS$1,\n      contains: [\"self\"].concat(SUBST_AND_COMMENTS)\n    }\n  ]);\n  const PARAMS = {\n    className: 'params',\n    // convert this to negative lookbehind in v12\n    begin: /(\\s*)\\(/, // to match the parms with\n    end: /\\)/,\n    excludeBegin: true,\n    excludeEnd: true,\n    keywords: KEYWORDS$1,\n    contains: PARAMS_CONTAINS\n  };\n\n  // ES6 classes\n  const CLASS_OR_EXTENDS = {\n    variants: [\n      // class Car extends vehicle\n      {\n        match: [\n          /class/,\n          /\\s+/,\n          IDENT_RE$1,\n          /\\s+/,\n          /extends/,\n          /\\s+/,\n          regex.concat(IDENT_RE$1, \"(\", regex.concat(/\\./, IDENT_RE$1), \")*\")\n        ],\n        scope: {\n          1: \"keyword\",\n          3: \"title.class\",\n          5: \"keyword\",\n          7: \"title.class.inherited\"\n        }\n      },\n      // class Car\n      {\n        match: [\n          /class/,\n          /\\s+/,\n          IDENT_RE$1\n        ],\n        scope: {\n          1: \"keyword\",\n          3: \"title.class\"\n        }\n      },\n\n    ]\n  };\n\n  const CLASS_REFERENCE = {\n    relevance: 0,\n    match:\n    regex.either(\n      // Hard coded exceptions\n      /\\bJSON/,\n      // Float32Array, OutT\n      /\\b[A-Z][a-z]+([A-Z][a-z]*|\\d)*/,\n      // CSSFactory, CSSFactoryT\n      /\\b[A-Z]{2,}([A-Z][a-z]+|\\d)+([A-Z][a-z]*)*/,\n      // FPs, FPsT\n      /\\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\\d)*([A-Z][a-z]*)*/,\n      // P\n      // single letters are not highlighted\n      // BLAH\n      // this will be flagged as a UPPER_CASE_CONSTANT instead\n    ),\n    className: \"title.class\",\n    keywords: {\n      _: [\n        // se we still get relevance credit for JS library classes\n        ...TYPES,\n        ...ERROR_TYPES\n      ]\n    }\n  };\n\n  const USE_STRICT = {\n    label: \"use_strict\",\n    className: 'meta',\n    relevance: 10,\n    begin: /^\\s*['\"]use (strict|asm)['\"]/\n  };\n\n  const FUNCTION_DEFINITION = {\n    variants: [\n      {\n        match: [\n          /function/,\n          /\\s+/,\n          IDENT_RE$1,\n          /(?=\\s*\\()/\n        ]\n      },\n      // anonymous function\n      {\n        match: [\n          /function/,\n          /\\s*(?=\\()/\n        ]\n      }\n    ],\n    className: {\n      1: \"keyword\",\n      3: \"title.function\"\n    },\n    label: \"func.def\",\n    contains: [ PARAMS ],\n    illegal: /%/\n  };\n\n  const UPPER_CASE_CONSTANT = {\n    relevance: 0,\n    match: /\\b[A-Z][A-Z_0-9]+\\b/,\n    className: \"variable.constant\"\n  };\n\n  function noneOf(list) {\n    return regex.concat(\"(?!\", list.join(\"|\"), \")\");\n  }\n\n  const FUNCTION_CALL = {\n    match: regex.concat(\n      /\\b/,\n      noneOf([\n        ...BUILT_IN_GLOBALS,\n        \"super\",\n        \"import\"\n      ].map(x => `${x}\\\\s*\\\\(`)),\n      IDENT_RE$1, regex.lookahead(/\\s*\\(/)),\n    className: \"title.function\",\n    relevance: 0\n  };\n\n  const PROPERTY_ACCESS = {\n    begin: regex.concat(/\\./, regex.lookahead(\n      regex.concat(IDENT_RE$1, /(?![0-9A-Za-z$_(])/)\n    )),\n    end: IDENT_RE$1,\n    excludeBegin: true,\n    keywords: \"prototype\",\n    className: \"property\",\n    relevance: 0\n  };\n\n  const GETTER_OR_SETTER = {\n    match: [\n      /get|set/,\n      /\\s+/,\n      IDENT_RE$1,\n      /(?=\\()/\n    ],\n    className: {\n      1: \"keyword\",\n      3: \"title.function\"\n    },\n    contains: [\n      { // eat to avoid empty params\n        begin: /\\(\\)/\n      },\n      PARAMS\n    ]\n  };\n\n  const FUNC_LEAD_IN_RE = '(\\\\(' +\n    '[^()]*(\\\\(' +\n    '[^()]*(\\\\(' +\n    '[^()]*' +\n    '\\\\)[^()]*)*' +\n    '\\\\)[^()]*)*' +\n    '\\\\)|' + hljs.UNDERSCORE_IDENT_RE + ')\\\\s*=>';\n\n  const FUNCTION_VARIABLE = {\n    match: [\n      /const|var|let/, /\\s+/,\n      IDENT_RE$1, /\\s*/,\n      /=\\s*/,\n      /(async\\s*)?/, // async is optional\n      regex.lookahead(FUNC_LEAD_IN_RE)\n    ],\n    keywords: \"async\",\n    className: {\n      1: \"keyword\",\n      3: \"title.function\"\n    },\n    contains: [\n      PARAMS\n    ]\n  };\n\n  return {\n    name: 'JavaScript',\n    aliases: ['js', 'jsx', 'mjs', 'cjs'],\n    keywords: KEYWORDS$1,\n    // this will be extended by TypeScript\n    exports: { PARAMS_CONTAINS, CLASS_REFERENCE },\n    illegal: /#(?![$_A-z])/,\n    contains: [\n      hljs.SHEBANG({\n        label: \"shebang\",\n        binary: \"node\",\n        relevance: 5\n      }),\n      USE_STRICT,\n      hljs.APOS_STRING_MODE,\n      hljs.QUOTE_STRING_MODE,\n      HTML_TEMPLATE,\n      CSS_TEMPLATE,\n      GRAPHQL_TEMPLATE,\n      TEMPLATE_STRING,\n      COMMENT,\n      // Skip numbers when they are part of a variable name\n      { match: /\\$\\d+/ },\n      NUMBER,\n      CLASS_REFERENCE,\n      {\n        scope: 'attr',\n        match: IDENT_RE$1 + regex.lookahead(':'),\n        relevance: 0\n      },\n      FUNCTION_VARIABLE,\n      { // \"value\" container\n        begin: '(' + hljs.RE_STARTERS_RE + '|\\\\b(case|return|throw)\\\\b)\\\\s*',\n        keywords: 'return throw case',\n        relevance: 0,\n        contains: [\n          COMMENT,\n          hljs.REGEXP_MODE,\n          {\n            className: 'function',\n            // we have to count the parens to make sure we actually have the\n            // correct bounding ( ) before the =>.  There could be any number of\n            // sub-expressions inside also surrounded by parens.\n            begin: FUNC_LEAD_IN_RE,\n            returnBegin: true,\n            end: '\\\\s*=>',\n            contains: [\n              {\n                className: 'params',\n                variants: [\n                  {\n                    begin: hljs.UNDERSCORE_IDENT_RE,\n                    relevance: 0\n                  },\n                  {\n                    className: null,\n                    begin: /\\(\\s*\\)/,\n                    skip: true\n                  },\n                  {\n                    begin: /(\\s*)\\(/,\n                    end: /\\)/,\n                    excludeBegin: true,\n                    excludeEnd: true,\n                    keywords: KEYWORDS$1,\n                    contains: PARAMS_CONTAINS\n                  }\n                ]\n              }\n            ]\n          },\n          { // could be a comma delimited list of params to a function call\n            begin: /,/,\n            relevance: 0\n          },\n          {\n            match: /\\s+/,\n            relevance: 0\n          },\n          { // JSX\n            variants: [\n              { begin: FRAGMENT.begin, end: FRAGMENT.end },\n              { match: XML_SELF_CLOSING },\n              {\n                begin: XML_TAG.begin,\n                // we carefully check the opening tag to see if it truly\n                // is a tag and not a false positive\n                'on:begin': XML_TAG.isTrulyOpeningTag,\n                end: XML_TAG.end\n              }\n            ],\n            subLanguage: 'xml',\n            contains: [\n              {\n                begin: XML_TAG.begin,\n                end: XML_TAG.end,\n                skip: true,\n                contains: ['self']\n              }\n            ]\n          }\n        ],\n      },\n      FUNCTION_DEFINITION,\n      {\n        // prevent this from getting swallowed up by function\n        // since they appear \"function like\"\n        beginKeywords: \"while if switch catch for\"\n      },\n      {\n        // we have to count the parens to make sure we actually have the correct\n        // bounding ( ).  There could be any number of sub-expressions inside\n        // also surrounded by parens.\n        begin: '\\\\b(?!function)' + hljs.UNDERSCORE_IDENT_RE +\n          '\\\\(' + // first parens\n          '[^()]*(\\\\(' +\n            '[^()]*(\\\\(' +\n              '[^()]*' +\n            '\\\\)[^()]*)*' +\n          '\\\\)[^()]*)*' +\n          '\\\\)\\\\s*\\\\{', // end parens\n        returnBegin:true,\n        label: \"func.def\",\n        contains: [\n          PARAMS,\n          hljs.inherit(hljs.TITLE_MODE, { begin: IDENT_RE$1, className: \"title.function\" })\n        ]\n      },\n      // catch ... so it won't trigger the property rule below\n      {\n        match: /\\.\\.\\./,\n        relevance: 0\n      },\n      PROPERTY_ACCESS,\n      // hack: prevents detection of keywords in some circumstances\n      // .keyword()\n      // $keyword = x\n      {\n        match: '\\\\$' + IDENT_RE$1,\n        relevance: 0\n      },\n      {\n        match: [ /\\bconstructor(?=\\s*\\()/ ],\n        className: { 1: \"title.function\" },\n        contains: [ PARAMS ]\n      },\n      FUNCTION_CALL,\n      UPPER_CASE_CONSTANT,\n      CLASS_OR_EXTENDS,\n      GETTER_OR_SETTER,\n      {\n        match: /\\$[(.]/ // relevance booster for a pattern common to JS libs: `$(something)` and `$.something`\n      }\n    ]\n  };\n}\n\nexport { javascript as default };\n","/*\nLanguage: Python\nDescription: Python is an interpreted, object-oriented, high-level programming language with dynamic semantics.\nWebsite: https://www.python.org\nCategory: common\n*/\n\nfunction python(hljs) {\n  const regex = hljs.regex;\n  const IDENT_RE = /[\\p{XID_Start}_]\\p{XID_Continue}*/u;\n  const RESERVED_WORDS = [\n    'and',\n    'as',\n    'assert',\n    'async',\n    'await',\n    'break',\n    'case',\n    'class',\n    'continue',\n    'def',\n    'del',\n    'elif',\n    'else',\n    'except',\n    'finally',\n    'for',\n    'from',\n    'global',\n    'if',\n    'import',\n    'in',\n    'is',\n    'lambda',\n    'match',\n    'nonlocal|10',\n    'not',\n    'or',\n    'pass',\n    'raise',\n    'return',\n    'try',\n    'while',\n    'with',\n    'yield'\n  ];\n\n  const BUILT_INS = [\n    '__import__',\n    'abs',\n    'all',\n    'any',\n    'ascii',\n    'bin',\n    'bool',\n    'breakpoint',\n    'bytearray',\n    'bytes',\n    'callable',\n    'chr',\n    'classmethod',\n    'compile',\n    'complex',\n    'delattr',\n    'dict',\n    'dir',\n    'divmod',\n    'enumerate',\n    'eval',\n    'exec',\n    'filter',\n    'float',\n    'format',\n    'frozenset',\n    'getattr',\n    'globals',\n    'hasattr',\n    'hash',\n    'help',\n    'hex',\n    'id',\n    'input',\n    'int',\n    'isinstance',\n    'issubclass',\n    'iter',\n    'len',\n    'list',\n    'locals',\n    'map',\n    'max',\n    'memoryview',\n    'min',\n    'next',\n    'object',\n    'oct',\n    'open',\n    'ord',\n    'pow',\n    'print',\n    'property',\n    'range',\n    'repr',\n    'reversed',\n    'round',\n    'set',\n    'setattr',\n    'slice',\n    'sorted',\n    'staticmethod',\n    'str',\n    'sum',\n    'super',\n    'tuple',\n    'type',\n    'vars',\n    'zip'\n  ];\n\n  const LITERALS = [\n    '__debug__',\n    'Ellipsis',\n    'False',\n    'None',\n    'NotImplemented',\n    'True'\n  ];\n\n  // https://docs.python.org/3/library/typing.html\n  // TODO: Could these be supplemented by a CamelCase matcher in certain\n  // contexts, leaving these remaining only for relevance hinting?\n  const TYPES = [\n    \"Any\",\n    \"Callable\",\n    \"Coroutine\",\n    \"Dict\",\n    \"List\",\n    \"Literal\",\n    \"Generic\",\n    \"Optional\",\n    \"Sequence\",\n    \"Set\",\n    \"Tuple\",\n    \"Type\",\n    \"Union\"\n  ];\n\n  const KEYWORDS = {\n    $pattern: /[A-Za-z]\\w+|__\\w+__/,\n    keyword: RESERVED_WORDS,\n    built_in: BUILT_INS,\n    literal: LITERALS,\n    type: TYPES\n  };\n\n  const PROMPT = {\n    className: 'meta',\n    begin: /^(>>>|\\.\\.\\.) /\n  };\n\n  const SUBST = {\n    className: 'subst',\n    begin: /\\{/,\n    end: /\\}/,\n    keywords: KEYWORDS,\n    illegal: /#/\n  };\n\n  const LITERAL_BRACKET = {\n    begin: /\\{\\{/,\n    relevance: 0\n  };\n\n  const STRING = {\n    className: 'string',\n    contains: [ hljs.BACKSLASH_ESCAPE ],\n    variants: [\n      {\n        begin: /([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,\n        end: /'''/,\n        contains: [\n          hljs.BACKSLASH_ESCAPE,\n          PROMPT\n        ],\n        relevance: 10\n      },\n      {\n        begin: /([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?\"\"\"/,\n        end: /\"\"\"/,\n        contains: [\n          hljs.BACKSLASH_ESCAPE,\n          PROMPT\n        ],\n        relevance: 10\n      },\n      {\n        begin: /([fF][rR]|[rR][fF]|[fF])'''/,\n        end: /'''/,\n        contains: [\n          hljs.BACKSLASH_ESCAPE,\n          PROMPT,\n          LITERAL_BRACKET,\n          SUBST\n        ]\n      },\n      {\n        begin: /([fF][rR]|[rR][fF]|[fF])\"\"\"/,\n        end: /\"\"\"/,\n        contains: [\n          hljs.BACKSLASH_ESCAPE,\n          PROMPT,\n          LITERAL_BRACKET,\n          SUBST\n        ]\n      },\n      {\n        begin: /([uU]|[rR])'/,\n        end: /'/,\n        relevance: 10\n      },\n      {\n        begin: /([uU]|[rR])\"/,\n        end: /\"/,\n        relevance: 10\n      },\n      {\n        begin: /([bB]|[bB][rR]|[rR][bB])'/,\n        end: /'/\n      },\n      {\n        begin: /([bB]|[bB][rR]|[rR][bB])\"/,\n        end: /\"/\n      },\n      {\n        begin: /([fF][rR]|[rR][fF]|[fF])'/,\n        end: /'/,\n        contains: [\n          hljs.BACKSLASH_ESCAPE,\n          LITERAL_BRACKET,\n          SUBST\n        ]\n      },\n      {\n        begin: /([fF][rR]|[rR][fF]|[fF])\"/,\n        end: /\"/,\n        contains: [\n          hljs.BACKSLASH_ESCAPE,\n          LITERAL_BRACKET,\n          SUBST\n        ]\n      },\n      hljs.APOS_STRING_MODE,\n      hljs.QUOTE_STRING_MODE\n    ]\n  };\n\n  // https://docs.python.org/3.9/reference/lexical_analysis.html#numeric-literals\n  const digitpart = '[0-9](_?[0-9])*';\n  const pointfloat = `(\\\\b(${digitpart}))?\\\\.(${digitpart})|\\\\b(${digitpart})\\\\.`;\n  // Whitespace after a number (or any lexical token) is needed only if its absence\n  // would change the tokenization\n  // https://docs.python.org/3.9/reference/lexical_analysis.html#whitespace-between-tokens\n  // We deviate slightly, requiring a word boundary or a keyword\n  // to avoid accidentally recognizing *prefixes* (e.g., `0` in `0x41` or `08` or `0__1`)\n  const lookahead = `\\\\b|${RESERVED_WORDS.join('|')}`;\n  const NUMBER = {\n    className: 'number',\n    relevance: 0,\n    variants: [\n      // exponentfloat, pointfloat\n      // https://docs.python.org/3.9/reference/lexical_analysis.html#floating-point-literals\n      // optionally imaginary\n      // https://docs.python.org/3.9/reference/lexical_analysis.html#imaginary-literals\n      // Note: no leading \\b because floats can start with a decimal point\n      // and we don't want to mishandle e.g. `fn(.5)`,\n      // no trailing \\b for pointfloat because it can end with a decimal point\n      // and we don't want to mishandle e.g. `0..hex()`; this should be safe\n      // because both MUST contain a decimal point and so cannot be confused with\n      // the interior part of an identifier\n      {\n        begin: `(\\\\b(${digitpart})|(${pointfloat}))[eE][+-]?(${digitpart})[jJ]?(?=${lookahead})`\n      },\n      {\n        begin: `(${pointfloat})[jJ]?`\n      },\n\n      // decinteger, bininteger, octinteger, hexinteger\n      // https://docs.python.org/3.9/reference/lexical_analysis.html#integer-literals\n      // optionally \"long\" in Python 2\n      // https://docs.python.org/2.7/reference/lexical_analysis.html#integer-and-long-integer-literals\n      // decinteger is optionally imaginary\n      // https://docs.python.org/3.9/reference/lexical_analysis.html#imaginary-literals\n      {\n        begin: `\\\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${lookahead})`\n      },\n      {\n        begin: `\\\\b0[bB](_?[01])+[lL]?(?=${lookahead})`\n      },\n      {\n        begin: `\\\\b0[oO](_?[0-7])+[lL]?(?=${lookahead})`\n      },\n      {\n        begin: `\\\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${lookahead})`\n      },\n\n      // imagnumber (digitpart-based)\n      // https://docs.python.org/3.9/reference/lexical_analysis.html#imaginary-literals\n      {\n        begin: `\\\\b(${digitpart})[jJ](?=${lookahead})`\n      }\n    ]\n  };\n  const COMMENT_TYPE = {\n    className: \"comment\",\n    begin: regex.lookahead(/# type:/),\n    end: /$/,\n    keywords: KEYWORDS,\n    contains: [\n      { // prevent keywords from coloring `type`\n        begin: /# type:/\n      },\n      // comment within a datatype comment includes no keywords\n      {\n        begin: /#/,\n        end: /\\b\\B/,\n        endsWithParent: true\n      }\n    ]\n  };\n  const PARAMS = {\n    className: 'params',\n    variants: [\n      // Exclude params in functions without params\n      {\n        className: \"\",\n        begin: /\\(\\s*\\)/,\n        skip: true\n      },\n      {\n        begin: /\\(/,\n        end: /\\)/,\n        excludeBegin: true,\n        excludeEnd: true,\n        keywords: KEYWORDS,\n        contains: [\n          'self',\n          PROMPT,\n          NUMBER,\n          STRING,\n          hljs.HASH_COMMENT_MODE\n        ]\n      }\n    ]\n  };\n  SUBST.contains = [\n    STRING,\n    NUMBER,\n    PROMPT\n  ];\n\n  return {\n    name: 'Python',\n    aliases: [\n      'py',\n      'gyp',\n      'ipython'\n    ],\n    unicodeRegex: true,\n    keywords: KEYWORDS,\n    illegal: /(<\\/|\\?)|=>/,\n    contains: [\n      PROMPT,\n      NUMBER,\n      {\n        // very common convention\n        scope: 'variable.language',\n        match: /\\bself\\b/\n      },\n      {\n        // eat \"if\" prior to string so that it won't accidentally be\n        // labeled as an f-string\n        beginKeywords: \"if\",\n        relevance: 0\n      },\n      { match: /\\bor\\b/, scope: \"keyword\" },\n      STRING,\n      COMMENT_TYPE,\n      hljs.HASH_COMMENT_MODE,\n      {\n        match: [\n          /\\bdef/, /\\s+/,\n          IDENT_RE,\n        ],\n        scope: {\n          1: \"keyword\",\n          3: \"title.function\"\n        },\n        contains: [ PARAMS ]\n      },\n      {\n        variants: [\n          {\n            match: [\n              /\\bclass/, /\\s+/,\n              IDENT_RE, /\\s*/,\n              /\\(\\s*/, IDENT_RE,/\\s*\\)/\n            ],\n          },\n          {\n            match: [\n              /\\bclass/, /\\s+/,\n              IDENT_RE\n            ],\n          }\n        ],\n        scope: {\n          1: \"keyword\",\n          3: \"title.class\",\n          6: \"title.class.inherited\",\n        }\n      },\n      {\n        className: 'meta',\n        begin: /^[\\t ]*@/,\n        end: /(?=#)|$/,\n        contains: [\n          NUMBER,\n          PARAMS,\n          STRING\n        ]\n      }\n    ]\n  };\n}\n\nexport { python as default };\n","const IDENT_RE = '[A-Za-z$_][0-9A-Za-z$_]*';\nconst KEYWORDS = [\n  \"as\", // for exports\n  \"in\",\n  \"of\",\n  \"if\",\n  \"for\",\n  \"while\",\n  \"finally\",\n  \"var\",\n  \"new\",\n  \"function\",\n  \"do\",\n  \"return\",\n  \"void\",\n  \"else\",\n  \"break\",\n  \"catch\",\n  \"instanceof\",\n  \"with\",\n  \"throw\",\n  \"case\",\n  \"default\",\n  \"try\",\n  \"switch\",\n  \"continue\",\n  \"typeof\",\n  \"delete\",\n  \"let\",\n  \"yield\",\n  \"const\",\n  \"class\",\n  // JS handles these with a special rule\n  // \"get\",\n  // \"set\",\n  \"debugger\",\n  \"async\",\n  \"await\",\n  \"static\",\n  \"import\",\n  \"from\",\n  \"export\",\n  \"extends\",\n  // It's reached stage 3, which is \"recommended for implementation\":\n  \"using\"\n];\nconst LITERALS = [\n  \"true\",\n  \"false\",\n  \"null\",\n  \"undefined\",\n  \"NaN\",\n  \"Infinity\"\n];\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects\nconst TYPES = [\n  // Fundamental objects\n  \"Object\",\n  \"Function\",\n  \"Boolean\",\n  \"Symbol\",\n  // numbers and dates\n  \"Math\",\n  \"Date\",\n  \"Number\",\n  \"BigInt\",\n  // text\n  \"String\",\n  \"RegExp\",\n  // Indexed collections\n  \"Array\",\n  \"Float32Array\",\n  \"Float64Array\",\n  \"Int8Array\",\n  \"Uint8Array\",\n  \"Uint8ClampedArray\",\n  \"Int16Array\",\n  \"Int32Array\",\n  \"Uint16Array\",\n  \"Uint32Array\",\n  \"BigInt64Array\",\n  \"BigUint64Array\",\n  // Keyed collections\n  \"Set\",\n  \"Map\",\n  \"WeakSet\",\n  \"WeakMap\",\n  // Structured data\n  \"ArrayBuffer\",\n  \"SharedArrayBuffer\",\n  \"Atomics\",\n  \"DataView\",\n  \"JSON\",\n  // Control abstraction objects\n  \"Promise\",\n  \"Generator\",\n  \"GeneratorFunction\",\n  \"AsyncFunction\",\n  // Reflection\n  \"Reflect\",\n  \"Proxy\",\n  // Internationalization\n  \"Intl\",\n  // WebAssembly\n  \"WebAssembly\"\n];\n\nconst ERROR_TYPES = [\n  \"Error\",\n  \"EvalError\",\n  \"InternalError\",\n  \"RangeError\",\n  \"ReferenceError\",\n  \"SyntaxError\",\n  \"TypeError\",\n  \"URIError\"\n];\n\nconst BUILT_IN_GLOBALS = [\n  \"setInterval\",\n  \"setTimeout\",\n  \"clearInterval\",\n  \"clearTimeout\",\n\n  \"require\",\n  \"exports\",\n\n  \"eval\",\n  \"isFinite\",\n  \"isNaN\",\n  \"parseFloat\",\n  \"parseInt\",\n  \"decodeURI\",\n  \"decodeURIComponent\",\n  \"encodeURI\",\n  \"encodeURIComponent\",\n  \"escape\",\n  \"unescape\"\n];\n\nconst BUILT_IN_VARIABLES = [\n  \"arguments\",\n  \"this\",\n  \"super\",\n  \"console\",\n  \"window\",\n  \"document\",\n  \"localStorage\",\n  \"sessionStorage\",\n  \"module\",\n  \"global\" // Node.js\n];\n\nconst BUILT_INS = [].concat(\n  BUILT_IN_GLOBALS,\n  TYPES,\n  ERROR_TYPES\n);\n\n/*\nLanguage: JavaScript\nDescription: JavaScript (JS) is a lightweight, interpreted, or just-in-time compiled programming language with first-class functions.\nCategory: common, scripting, web\nWebsite: https://developer.mozilla.org/en-US/docs/Web/JavaScript\n*/\n\n\n/** @type LanguageFn */\nfunction javascript(hljs) {\n  const regex = hljs.regex;\n  /**\n   * Takes a string like \"<Booger\" and checks to see\n   * if we can find a matching \"</Booger\" later in the\n   * content.\n   * @param {RegExpMatchArray} match\n   * @param {{after:number}} param1\n   */\n  const hasClosingTag = (match, { after }) => {\n    const tag = \"</\" + match[0].slice(1);\n    const pos = match.input.indexOf(tag, after);\n    return pos !== -1;\n  };\n\n  const IDENT_RE$1 = IDENT_RE;\n  const FRAGMENT = {\n    begin: '<>',\n    end: '</>'\n  };\n  // to avoid some special cases inside isTrulyOpeningTag\n  const XML_SELF_CLOSING = /<[A-Za-z0-9\\\\._:-]+\\s*\\/>/;\n  const XML_TAG = {\n    begin: /<[A-Za-z0-9\\\\._:-]+/,\n    end: /\\/[A-Za-z0-9\\\\._:-]+>|\\/>/,\n    /**\n     * @param {RegExpMatchArray} match\n     * @param {CallbackResponse} response\n     */\n    isTrulyOpeningTag: (match, response) => {\n      const afterMatchIndex = match[0].length + match.index;\n      const nextChar = match.input[afterMatchIndex];\n      if (\n        // HTML should not include another raw `<` inside a tag\n        // nested type?\n        // `<Array<Array<number>>`, etc.\n        nextChar === \"<\" ||\n        // the , gives away that this is not HTML\n        // `<T, A extends keyof T, V>`\n        nextChar === \",\"\n        ) {\n        response.ignoreMatch();\n        return;\n      }\n\n      // `<something>`\n      // Quite possibly a tag, lets look for a matching closing tag...\n      if (nextChar === \">\") {\n        // if we cannot find a matching closing tag, then we\n        // will ignore it\n        if (!hasClosingTag(match, { after: afterMatchIndex })) {\n          response.ignoreMatch();\n        }\n      }\n\n      // `<blah />` (self-closing)\n      // handled by simpleSelfClosing rule\n\n      let m;\n      const afterMatch = match.input.substring(afterMatchIndex);\n\n      // some more template typing stuff\n      //  <T = any>(key?: string) => Modify<\n      if ((m = afterMatch.match(/^\\s*=/))) {\n        response.ignoreMatch();\n        return;\n      }\n\n      // `<From extends string>`\n      // technically this could be HTML, but it smells like a type\n      // NOTE: This is ugh, but added specifically for https://github.com/highlightjs/highlight.js/issues/3276\n      if ((m = afterMatch.match(/^\\s+extends\\s+/))) {\n        if (m.index === 0) {\n          response.ignoreMatch();\n          // eslint-disable-next-line no-useless-return\n          return;\n        }\n      }\n    }\n  };\n  const KEYWORDS$1 = {\n    $pattern: IDENT_RE,\n    keyword: KEYWORDS,\n    literal: LITERALS,\n    built_in: BUILT_INS,\n    \"variable.language\": BUILT_IN_VARIABLES\n  };\n\n  // https://tc39.es/ecma262/#sec-literals-numeric-literals\n  const decimalDigits = '[0-9](_?[0-9])*';\n  const frac = `\\\\.(${decimalDigits})`;\n  // DecimalIntegerLiteral, including Annex B NonOctalDecimalIntegerLiteral\n  // https://tc39.es/ecma262/#sec-additional-syntax-numeric-literals\n  const decimalInteger = `0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*`;\n  const NUMBER = {\n    className: 'number',\n    variants: [\n      // DecimalLiteral\n      { begin: `(\\\\b(${decimalInteger})((${frac})|\\\\.)?|(${frac}))` +\n        `[eE][+-]?(${decimalDigits})\\\\b` },\n      { begin: `\\\\b(${decimalInteger})\\\\b((${frac})\\\\b|\\\\.)?|(${frac})\\\\b` },\n\n      // DecimalBigIntegerLiteral\n      { begin: `\\\\b(0|[1-9](_?[0-9])*)n\\\\b` },\n\n      // NonDecimalIntegerLiteral\n      { begin: \"\\\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\\\b\" },\n      { begin: \"\\\\b0[bB][0-1](_?[0-1])*n?\\\\b\" },\n      { begin: \"\\\\b0[oO][0-7](_?[0-7])*n?\\\\b\" },\n\n      // LegacyOctalIntegerLiteral (does not include underscore separators)\n      // https://tc39.es/ecma262/#sec-additional-syntax-numeric-literals\n      { begin: \"\\\\b0[0-7]+n?\\\\b\" },\n    ],\n    relevance: 0\n  };\n\n  const SUBST = {\n    className: 'subst',\n    begin: '\\\\$\\\\{',\n    end: '\\\\}',\n    keywords: KEYWORDS$1,\n    contains: [] // defined later\n  };\n  const HTML_TEMPLATE = {\n    begin: '\\.?html`',\n    end: '',\n    starts: {\n      end: '`',\n      returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'xml'\n    }\n  };\n  const CSS_TEMPLATE = {\n    begin: '\\.?css`',\n    end: '',\n    starts: {\n      end: '`',\n      returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'css'\n    }\n  };\n  const GRAPHQL_TEMPLATE = {\n    begin: '\\.?gql`',\n    end: '',\n    starts: {\n      end: '`',\n      returnEnd: false,\n      contains: [\n        hljs.BACKSLASH_ESCAPE,\n        SUBST\n      ],\n      subLanguage: 'graphql'\n    }\n  };\n  const TEMPLATE_STRING = {\n    className: 'string',\n    begin: '`',\n    end: '`',\n    contains: [\n      hljs.BACKSLASH_ESCAPE,\n      SUBST\n    ]\n  };\n  const JSDOC_COMMENT = hljs.COMMENT(\n    /\\/\\*\\*(?!\\/)/,\n    '\\\\*/',\n    {\n      relevance: 0,\n      contains: [\n        {\n          begin: '(?=@[A-Za-z]+)',\n          relevance: 0,\n          contains: [\n            {\n              className: 'doctag',\n              begin: '@[A-Za-z]+'\n            },\n            {\n              className: 'type',\n              begin: '\\\\{',\n              end: '\\\\}',\n              excludeEnd: true,\n              excludeBegin: true,\n              relevance: 0\n            },\n            {\n              className: 'variable',\n              begin: IDENT_RE$1 + '(?=\\\\s*(-)|$)',\n              endsParent: true,\n              relevance: 0\n            },\n            // eat spaces (not newlines) so we can find\n            // types or variables\n            {\n              begin: /(?=[^\\n])\\s/,\n              relevance: 0\n            }\n          ]\n        }\n      ]\n    }\n  );\n  const COMMENT = {\n    className: \"comment\",\n    variants: [\n      JSDOC_COMMENT,\n      hljs.C_BLOCK_COMMENT_MODE,\n      hljs.C_LINE_COMMENT_MODE\n    ]\n  };\n  const SUBST_INTERNALS = [\n    hljs.APOS_STRING_MODE,\n    hljs.QUOTE_STRING_MODE,\n    HTML_TEMPLATE,\n    CSS_TEMPLATE,\n    GRAPHQL_TEMPLATE,\n    TEMPLATE_STRING,\n    // Skip numbers when they are part of a variable name\n    { match: /\\$\\d+/ },\n    NUMBER,\n    // This is intentional:\n    // See https://github.com/highlightjs/highlight.js/issues/3288\n    // hljs.REGEXP_MODE\n  ];\n  SUBST.contains = SUBST_INTERNALS\n    .concat({\n      // we need to pair up {} inside our subst to prevent\n      // it from ending too early by matching another }\n      begin: /\\{/,\n      end: /\\}/,\n      keywords: KEYWORDS$1,\n      contains: [\n        \"self\"\n      ].concat(SUBST_INTERNALS)\n    });\n  const SUBST_AND_COMMENTS = [].concat(COMMENT, SUBST.contains);\n  const PARAMS_CONTAINS = SUBST_AND_COMMENTS.concat([\n    // eat recursive parens in sub expressions\n    {\n      begin: /(\\s*)\\(/,\n      end: /\\)/,\n      keywords: KEYWORDS$1,\n      contains: [\"self\"].concat(SUBST_AND_COMMENTS)\n    }\n  ]);\n  const PARAMS = {\n    className: 'params',\n    // convert this to negative lookbehind in v12\n    begin: /(\\s*)\\(/, // to match the parms with\n    end: /\\)/,\n    excludeBegin: true,\n    excludeEnd: true,\n    keywords: KEYWORDS$1,\n    contains: PARAMS_CONTAINS\n  };\n\n  // ES6 classes\n  const CLASS_OR_EXTENDS = {\n    variants: [\n      // class Car extends vehicle\n      {\n        match: [\n          /class/,\n          /\\s+/,\n          IDENT_RE$1,\n          /\\s+/,\n          /extends/,\n          /\\s+/,\n          regex.concat(IDENT_RE$1, \"(\", regex.concat(/\\./, IDENT_RE$1), \")*\")\n        ],\n        scope: {\n          1: \"keyword\",\n          3: \"title.class\",\n          5: \"keyword\",\n          7: \"title.class.inherited\"\n        }\n      },\n      // class Car\n      {\n        match: [\n          /class/,\n          /\\s+/,\n          IDENT_RE$1\n        ],\n        scope: {\n          1: \"keyword\",\n          3: \"title.class\"\n        }\n      },\n\n    ]\n  };\n\n  const CLASS_REFERENCE = {\n    relevance: 0,\n    match:\n    regex.either(\n      // Hard coded exceptions\n      /\\bJSON/,\n      // Float32Array, OutT\n      /\\b[A-Z][a-z]+([A-Z][a-z]*|\\d)*/,\n      // CSSFactory, CSSFactoryT\n      /\\b[A-Z]{2,}([A-Z][a-z]+|\\d)+([A-Z][a-z]*)*/,\n      // FPs, FPsT\n      /\\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\\d)*([A-Z][a-z]*)*/,\n      // P\n      // single letters are not highlighted\n      // BLAH\n      // this will be flagged as a UPPER_CASE_CONSTANT instead\n    ),\n    className: \"title.class\",\n    keywords: {\n      _: [\n        // se we still get relevance credit for JS library classes\n        ...TYPES,\n        ...ERROR_TYPES\n      ]\n    }\n  };\n\n  const USE_STRICT = {\n    label: \"use_strict\",\n    className: 'meta',\n    relevance: 10,\n    begin: /^\\s*['\"]use (strict|asm)['\"]/\n  };\n\n  const FUNCTION_DEFINITION = {\n    variants: [\n      {\n        match: [\n          /function/,\n          /\\s+/,\n          IDENT_RE$1,\n          /(?=\\s*\\()/\n        ]\n      },\n      // anonymous function\n      {\n        match: [\n          /function/,\n          /\\s*(?=\\()/\n        ]\n      }\n    ],\n    className: {\n      1: \"keyword\",\n      3: \"title.function\"\n    },\n    label: \"func.def\",\n    contains: [ PARAMS ],\n    illegal: /%/\n  };\n\n  const UPPER_CASE_CONSTANT = {\n    relevance: 0,\n    match: /\\b[A-Z][A-Z_0-9]+\\b/,\n    className: \"variable.constant\"\n  };\n\n  function noneOf(list) {\n    return regex.concat(\"(?!\", list.join(\"|\"), \")\");\n  }\n\n  const FUNCTION_CALL = {\n    match: regex.concat(\n      /\\b/,\n      noneOf([\n        ...BUILT_IN_GLOBALS,\n        \"super\",\n        \"import\"\n      ].map(x => `${x}\\\\s*\\\\(`)),\n      IDENT_RE$1, regex.lookahead(/\\s*\\(/)),\n    className: \"title.function\",\n    relevance: 0\n  };\n\n  const PROPERTY_ACCESS = {\n    begin: regex.concat(/\\./, regex.lookahead(\n      regex.concat(IDENT_RE$1, /(?![0-9A-Za-z$_(])/)\n    )),\n    end: IDENT_RE$1,\n    excludeBegin: true,\n    keywords: \"prototype\",\n    className: \"property\",\n    relevance: 0\n  };\n\n  const GETTER_OR_SETTER = {\n    match: [\n      /get|set/,\n      /\\s+/,\n      IDENT_RE$1,\n      /(?=\\()/\n    ],\n    className: {\n      1: \"keyword\",\n      3: \"title.function\"\n    },\n    contains: [\n      { // eat to avoid empty params\n        begin: /\\(\\)/\n      },\n      PARAMS\n    ]\n  };\n\n  const FUNC_LEAD_IN_RE = '(\\\\(' +\n    '[^()]*(\\\\(' +\n    '[^()]*(\\\\(' +\n    '[^()]*' +\n    '\\\\)[^()]*)*' +\n    '\\\\)[^()]*)*' +\n    '\\\\)|' + hljs.UNDERSCORE_IDENT_RE + ')\\\\s*=>';\n\n  const FUNCTION_VARIABLE = {\n    match: [\n      /const|var|let/, /\\s+/,\n      IDENT_RE$1, /\\s*/,\n      /=\\s*/,\n      /(async\\s*)?/, // async is optional\n      regex.lookahead(FUNC_LEAD_IN_RE)\n    ],\n    keywords: \"async\",\n    className: {\n      1: \"keyword\",\n      3: \"title.function\"\n    },\n    contains: [\n      PARAMS\n    ]\n  };\n\n  return {\n    name: 'JavaScript',\n    aliases: ['js', 'jsx', 'mjs', 'cjs'],\n    keywords: KEYWORDS$1,\n    // this will be extended by TypeScript\n    exports: { PARAMS_CONTAINS, CLASS_REFERENCE },\n    illegal: /#(?![$_A-z])/,\n    contains: [\n      hljs.SHEBANG({\n        label: \"shebang\",\n        binary: \"node\",\n        relevance: 5\n      }),\n      USE_STRICT,\n      hljs.APOS_STRING_MODE,\n      hljs.QUOTE_STRING_MODE,\n      HTML_TEMPLATE,\n      CSS_TEMPLATE,\n      GRAPHQL_TEMPLATE,\n      TEMPLATE_STRING,\n      COMMENT,\n      // Skip numbers when they are part of a variable name\n      { match: /\\$\\d+/ },\n      NUMBER,\n      CLASS_REFERENCE,\n      {\n        scope: 'attr',\n        match: IDENT_RE$1 + regex.lookahead(':'),\n        relevance: 0\n      },\n      FUNCTION_VARIABLE,\n      { // \"value\" container\n        begin: '(' + hljs.RE_STARTERS_RE + '|\\\\b(case|return|throw)\\\\b)\\\\s*',\n        keywords: 'return throw case',\n        relevance: 0,\n        contains: [\n          COMMENT,\n          hljs.REGEXP_MODE,\n          {\n            className: 'function',\n            // we have to count the parens to make sure we actually have the\n            // correct bounding ( ) before the =>.  There could be any number of\n            // sub-expressions inside also surrounded by parens.\n            begin: FUNC_LEAD_IN_RE,\n            returnBegin: true,\n            end: '\\\\s*=>',\n            contains: [\n              {\n                className: 'params',\n                variants: [\n                  {\n                    begin: hljs.UNDERSCORE_IDENT_RE,\n                    relevance: 0\n                  },\n                  {\n                    className: null,\n                    begin: /\\(\\s*\\)/,\n                    skip: true\n                  },\n                  {\n                    begin: /(\\s*)\\(/,\n                    end: /\\)/,\n                    excludeBegin: true,\n                    excludeEnd: true,\n                    keywords: KEYWORDS$1,\n                    contains: PARAMS_CONTAINS\n                  }\n                ]\n              }\n            ]\n          },\n          { // could be a comma delimited list of params to a function call\n            begin: /,/,\n            relevance: 0\n          },\n          {\n            match: /\\s+/,\n            relevance: 0\n          },\n          { // JSX\n            variants: [\n              { begin: FRAGMENT.begin, end: FRAGMENT.end },\n              { match: XML_SELF_CLOSING },\n              {\n                begin: XML_TAG.begin,\n                // we carefully check the opening tag to see if it truly\n                // is a tag and not a false positive\n                'on:begin': XML_TAG.isTrulyOpeningTag,\n                end: XML_TAG.end\n              }\n            ],\n            subLanguage: 'xml',\n            contains: [\n              {\n                begin: XML_TAG.begin,\n                end: XML_TAG.end,\n                skip: true,\n                contains: ['self']\n              }\n            ]\n          }\n        ],\n      },\n      FUNCTION_DEFINITION,\n      {\n        // prevent this from getting swallowed up by function\n        // since they appear \"function like\"\n        beginKeywords: \"while if switch catch for\"\n      },\n      {\n        // we have to count the parens to make sure we actually have the correct\n        // bounding ( ).  There could be any number of sub-expressions inside\n        // also surrounded by parens.\n        begin: '\\\\b(?!function)' + hljs.UNDERSCORE_IDENT_RE +\n          '\\\\(' + // first parens\n          '[^()]*(\\\\(' +\n            '[^()]*(\\\\(' +\n              '[^()]*' +\n            '\\\\)[^()]*)*' +\n          '\\\\)[^()]*)*' +\n          '\\\\)\\\\s*\\\\{', // end parens\n        returnBegin:true,\n        label: \"func.def\",\n        contains: [\n          PARAMS,\n          hljs.inherit(hljs.TITLE_MODE, { begin: IDENT_RE$1, className: \"title.function\" })\n        ]\n      },\n      // catch ... so it won't trigger the property rule below\n      {\n        match: /\\.\\.\\./,\n        relevance: 0\n      },\n      PROPERTY_ACCESS,\n      // hack: prevents detection of keywords in some circumstances\n      // .keyword()\n      // $keyword = x\n      {\n        match: '\\\\$' + IDENT_RE$1,\n        relevance: 0\n      },\n      {\n        match: [ /\\bconstructor(?=\\s*\\()/ ],\n        className: { 1: \"title.function\" },\n        contains: [ PARAMS ]\n      },\n      FUNCTION_CALL,\n      UPPER_CASE_CONSTANT,\n      CLASS_OR_EXTENDS,\n      GETTER_OR_SETTER,\n      {\n        match: /\\$[(.]/ // relevance booster for a pattern common to JS libs: `$(something)` and `$.something`\n      }\n    ]\n  };\n}\n\n/*\nLanguage: TypeScript\nAuthor: Panu Horsmalahti <panu.horsmalahti@iki.fi>\nContributors: Ike Ku <dempfi@yahoo.com>\nDescription: TypeScript is a strict superset of JavaScript\nWebsite: https://www.typescriptlang.org\nCategory: common, scripting\n*/\n\n\n/** @type LanguageFn */\nfunction typescript(hljs) {\n  const regex = hljs.regex;\n  const tsLanguage = javascript(hljs);\n\n  const IDENT_RE$1 = IDENT_RE;\n  const TYPES = [\n    \"any\",\n    \"void\",\n    \"number\",\n    \"boolean\",\n    \"string\",\n    \"object\",\n    \"never\",\n    \"symbol\",\n    \"bigint\",\n    \"unknown\"\n  ];\n  const NAMESPACE = {\n    begin: [\n      /namespace/,\n      /\\s+/,\n      hljs.IDENT_RE\n    ],\n    beginScope: {\n      1: \"keyword\",\n      3: \"title.class\"\n    }\n  };\n  const INTERFACE = {\n    beginKeywords: 'interface',\n    end: /\\{/,\n    excludeEnd: true,\n    keywords: {\n      keyword: 'interface extends',\n      built_in: TYPES\n    },\n    contains: [ tsLanguage.exports.CLASS_REFERENCE ]\n  };\n  const USE_STRICT = {\n    className: 'meta',\n    relevance: 10,\n    begin: /^\\s*['\"]use strict['\"]/\n  };\n  const TS_SPECIFIC_KEYWORDS = [\n    \"type\",\n    // \"namespace\",\n    \"interface\",\n    \"public\",\n    \"private\",\n    \"protected\",\n    \"implements\",\n    \"declare\",\n    \"abstract\",\n    \"readonly\",\n    \"enum\",\n    \"override\",\n    \"satisfies\"\n  ];\n  /*\n    namespace is a TS keyword but it's fine to use it as a variable name too.\n    const message = 'foo';\n    const namespace = 'bar';\n  */\n  const KEYWORDS$1 = {\n    $pattern: IDENT_RE,\n    keyword: KEYWORDS.concat(TS_SPECIFIC_KEYWORDS),\n    literal: LITERALS,\n    built_in: BUILT_INS.concat(TYPES),\n    \"variable.language\": BUILT_IN_VARIABLES\n  };\n\n  const DECORATOR = {\n    className: 'meta',\n    begin: '@' + IDENT_RE$1,\n  };\n\n  const swapMode = (mode, label, replacement) => {\n    const indx = mode.contains.findIndex(m => m.label === label);\n    if (indx === -1) { throw new Error(\"can not find mode to replace\"); }\n\n    mode.contains.splice(indx, 1, replacement);\n  };\n\n\n  // this should update anywhere keywords is used since\n  // it will be the same actual JS object\n  Object.assign(tsLanguage.keywords, KEYWORDS$1);\n\n  tsLanguage.exports.PARAMS_CONTAINS.push(DECORATOR);\n\n  // highlight the function params\n  const ATTRIBUTE_HIGHLIGHT = tsLanguage.contains.find(c => c.scope === \"attr\");\n\n  // take default attr rule and extend it to support optionals\n  const OPTIONAL_KEY_OR_ARGUMENT = Object.assign({},\n    ATTRIBUTE_HIGHLIGHT,\n    { match: regex.concat(IDENT_RE$1, regex.lookahead(/\\s*\\?:/)) }\n  );\n  tsLanguage.exports.PARAMS_CONTAINS.push([\n    tsLanguage.exports.CLASS_REFERENCE, // class reference for highlighting the params types\n    ATTRIBUTE_HIGHLIGHT, // highlight the params key\n    OPTIONAL_KEY_OR_ARGUMENT, // Added for optional property assignment highlighting\n  ]);\n\n  // Add the optional property assignment highlighting for objects or classes\n  tsLanguage.contains = tsLanguage.contains.concat([\n    DECORATOR,\n    NAMESPACE,\n    INTERFACE,\n    OPTIONAL_KEY_OR_ARGUMENT, // Added for optional property assignment highlighting\n  ]);\n\n  // TS gets a simpler shebang rule than JS\n  swapMode(tsLanguage, \"shebang\", hljs.SHEBANG());\n  // JS use strict rule purposely excludes `asm` which makes no sense\n  swapMode(tsLanguage, \"use_strict\", USE_STRICT);\n\n  const functionDeclaration = tsLanguage.contains.find(m => m.label === \"func.def\");\n  functionDeclaration.relevance = 0; // () => {} is more typical in TypeScript\n\n  Object.assign(tsLanguage, {\n    name: 'TypeScript',\n    aliases: [\n      'ts',\n      'tsx',\n      'mts',\n      'cts'\n    ]\n  });\n\n  return tsLanguage;\n}\n\nexport { typescript as default };\n","/*\nLanguage: JSON\nDescription: JSON (JavaScript Object Notation) is a lightweight data-interchange format.\nAuthor: Ivan Sagalaev <maniac@softwaremaniacs.org>\nWebsite: http://www.json.org\nCategory: common, protocols, web\n*/\n\nfunction json(hljs) {\n  const ATTRIBUTE = {\n    className: 'attr',\n    begin: /\"(\\\\.|[^\\\\\"\\r\\n])*\"(?=\\s*:)/,\n    relevance: 1.01\n  };\n  const PUNCTUATION = {\n    match: /[{}[\\],:]/,\n    className: \"punctuation\",\n    relevance: 0\n  };\n  const LITERALS = [\n    \"true\",\n    \"false\",\n    \"null\"\n  ];\n  // NOTE: normally we would rely on `keywords` for this but using a mode here allows us\n  // - to use the very tight `illegal: \\S` rule later to flag any other character\n  // - as illegal indicating that despite looking like JSON we do not truly have\n  // - JSON and thus improve false-positively greatly since JSON will try and claim\n  // - all sorts of JSON looking stuff\n  const LITERALS_MODE = {\n    scope: \"literal\",\n    beginKeywords: LITERALS.join(\" \"),\n  };\n\n  return {\n    name: 'JSON',\n    aliases: ['jsonc'],\n    keywords:{\n      literal: LITERALS,\n    },\n    contains: [\n      ATTRIBUTE,\n      PUNCTUATION,\n      hljs.QUOTE_STRING_MODE,\n      LITERALS_MODE,\n      hljs.C_NUMBER_MODE,\n      hljs.C_LINE_COMMENT_MODE,\n      hljs.C_BLOCK_COMMENT_MODE\n    ],\n    illegal: '\\\\S'\n  };\n}\n\nexport { json as default };\n","/*\nLanguage: Bash\nAuthor: vah <vahtenberg@gmail.com>\nContributrors: Benjamin Pannell <contact@sierrasoftworks.com>\nWebsite: https://www.gnu.org/software/bash/\nCategory: common, scripting\n*/\n\n/** @type LanguageFn */\nfunction bash(hljs) {\n  const regex = hljs.regex;\n  const VAR = {};\n  const BRACED_VAR = {\n    begin: /\\$\\{/,\n    end: /\\}/,\n    contains: [\n      \"self\",\n      {\n        begin: /:-/,\n        contains: [ VAR ]\n      } // default values\n    ]\n  };\n  Object.assign(VAR, {\n    className: 'variable',\n    variants: [\n      { begin: regex.concat(/\\$[\\w\\d#@][\\w\\d_]*/,\n        // negative look-ahead tries to avoid matching patterns that are not\n        // Perl at all like $ident$, @ident@, etc.\n        `(?![\\\\w\\\\d])(?![$])`) },\n      BRACED_VAR\n    ]\n  });\n\n  const SUBST = {\n    className: 'subst',\n    begin: /\\$\\(/,\n    end: /\\)/,\n    contains: [ hljs.BACKSLASH_ESCAPE ]\n  };\n  const COMMENT = hljs.inherit(\n    hljs.COMMENT(),\n    {\n      match: [\n        /(^|\\s)/,\n        /#.*$/\n      ],\n      scope: {\n        2: 'comment'\n      }\n    }\n  );\n  const HERE_DOC = {\n    begin: /<<-?\\s*(?=\\w+)/,\n    starts: { contains: [\n      hljs.END_SAME_AS_BEGIN({\n        begin: /(\\w+)/,\n        end: /(\\w+)/,\n        className: 'string'\n      })\n    ] }\n  };\n  const QUOTE_STRING = {\n    className: 'string',\n    begin: /\"/,\n    end: /\"/,\n    contains: [\n      hljs.BACKSLASH_ESCAPE,\n      VAR,\n      SUBST\n    ]\n  };\n  SUBST.contains.push(QUOTE_STRING);\n  const ESCAPED_QUOTE = {\n    match: /\\\\\"/\n  };\n  const APOS_STRING = {\n    className: 'string',\n    begin: /'/,\n    end: /'/\n  };\n  const ESCAPED_APOS = {\n    match: /\\\\'/\n  };\n  const ARITHMETIC = {\n    begin: /\\$?\\(\\(/,\n    end: /\\)\\)/,\n    contains: [\n      {\n        begin: /\\d+#[0-9a-f]+/,\n        className: \"number\"\n      },\n      hljs.NUMBER_MODE,\n      VAR\n    ]\n  };\n  const SH_LIKE_SHELLS = [\n    \"fish\",\n    \"bash\",\n    \"zsh\",\n    \"sh\",\n    \"csh\",\n    \"ksh\",\n    \"tcsh\",\n    \"dash\",\n    \"scsh\",\n  ];\n  const KNOWN_SHEBANG = hljs.SHEBANG({\n    binary: `(${SH_LIKE_SHELLS.join(\"|\")})`,\n    relevance: 10\n  });\n  const FUNCTION = {\n    className: 'function',\n    begin: /\\w[\\w\\d_]*\\s*\\(\\s*\\)\\s*\\{/,\n    returnBegin: true,\n    contains: [ hljs.inherit(hljs.TITLE_MODE, { begin: /\\w[\\w\\d_]*/ }) ],\n    relevance: 0\n  };\n\n  const KEYWORDS = [\n    \"if\",\n    \"then\",\n    \"else\",\n    \"elif\",\n    \"fi\",\n    \"time\",\n    \"for\",\n    \"while\",\n    \"until\",\n    \"in\",\n    \"do\",\n    \"done\",\n    \"case\",\n    \"esac\",\n    \"coproc\",\n    \"function\",\n    \"select\"\n  ];\n\n  const LITERALS = [\n    \"true\",\n    \"false\"\n  ];\n\n  // to consume paths to prevent keyword matches inside them\n  const PATH_MODE = { match: /(\\/[a-z._-]+)+/ };\n\n  // http://www.gnu.org/software/bash/manual/html_node/Shell-Builtin-Commands.html\n  const SHELL_BUILT_INS = [\n    \"break\",\n    \"cd\",\n    \"continue\",\n    \"eval\",\n    \"exec\",\n    \"exit\",\n    \"export\",\n    \"getopts\",\n    \"hash\",\n    \"pwd\",\n    \"readonly\",\n    \"return\",\n    \"shift\",\n    \"test\",\n    \"times\",\n    \"trap\",\n    \"umask\",\n    \"unset\"\n  ];\n\n  const BASH_BUILT_INS = [\n    \"alias\",\n    \"bind\",\n    \"builtin\",\n    \"caller\",\n    \"command\",\n    \"declare\",\n    \"echo\",\n    \"enable\",\n    \"help\",\n    \"let\",\n    \"local\",\n    \"logout\",\n    \"mapfile\",\n    \"printf\",\n    \"read\",\n    \"readarray\",\n    \"source\",\n    \"sudo\",\n    \"type\",\n    \"typeset\",\n    \"ulimit\",\n    \"unalias\"\n  ];\n\n  const ZSH_BUILT_INS = [\n    \"autoload\",\n    \"bg\",\n    \"bindkey\",\n    \"bye\",\n    \"cap\",\n    \"chdir\",\n    \"clone\",\n    \"comparguments\",\n    \"compcall\",\n    \"compctl\",\n    \"compdescribe\",\n    \"compfiles\",\n    \"compgroups\",\n    \"compquote\",\n    \"comptags\",\n    \"comptry\",\n    \"compvalues\",\n    \"dirs\",\n    \"disable\",\n    \"disown\",\n    \"echotc\",\n    \"echoti\",\n    \"emulate\",\n    \"fc\",\n    \"fg\",\n    \"float\",\n    \"functions\",\n    \"getcap\",\n    \"getln\",\n    \"history\",\n    \"integer\",\n    \"jobs\",\n    \"kill\",\n    \"limit\",\n    \"log\",\n    \"noglob\",\n    \"popd\",\n    \"print\",\n    \"pushd\",\n    \"pushln\",\n    \"rehash\",\n    \"sched\",\n    \"setcap\",\n    \"setopt\",\n    \"stat\",\n    \"suspend\",\n    \"ttyctl\",\n    \"unfunction\",\n    \"unhash\",\n    \"unlimit\",\n    \"unsetopt\",\n    \"vared\",\n    \"wait\",\n    \"whence\",\n    \"where\",\n    \"which\",\n    \"zcompile\",\n    \"zformat\",\n    \"zftp\",\n    \"zle\",\n    \"zmodload\",\n    \"zparseopts\",\n    \"zprof\",\n    \"zpty\",\n    \"zregexparse\",\n    \"zsocket\",\n    \"zstyle\",\n    \"ztcp\"\n  ];\n\n  const GNU_CORE_UTILS = [\n    \"chcon\",\n    \"chgrp\",\n    \"chown\",\n    \"chmod\",\n    \"cp\",\n    \"dd\",\n    \"df\",\n    \"dir\",\n    \"dircolors\",\n    \"ln\",\n    \"ls\",\n    \"mkdir\",\n    \"mkfifo\",\n    \"mknod\",\n    \"mktemp\",\n    \"mv\",\n    \"realpath\",\n    \"rm\",\n    \"rmdir\",\n    \"shred\",\n    \"sync\",\n    \"touch\",\n    \"truncate\",\n    \"vdir\",\n    \"b2sum\",\n    \"base32\",\n    \"base64\",\n    \"cat\",\n    \"cksum\",\n    \"comm\",\n    \"csplit\",\n    \"cut\",\n    \"expand\",\n    \"fmt\",\n    \"fold\",\n    \"head\",\n    \"join\",\n    \"md5sum\",\n    \"nl\",\n    \"numfmt\",\n    \"od\",\n    \"paste\",\n    \"ptx\",\n    \"pr\",\n    \"sha1sum\",\n    \"sha224sum\",\n    \"sha256sum\",\n    \"sha384sum\",\n    \"sha512sum\",\n    \"shuf\",\n    \"sort\",\n    \"split\",\n    \"sum\",\n    \"tac\",\n    \"tail\",\n    \"tr\",\n    \"tsort\",\n    \"unexpand\",\n    \"uniq\",\n    \"wc\",\n    \"arch\",\n    \"basename\",\n    \"chroot\",\n    \"date\",\n    \"dirname\",\n    \"du\",\n    \"echo\",\n    \"env\",\n    \"expr\",\n    \"factor\",\n    // \"false\", // keyword literal already\n    \"groups\",\n    \"hostid\",\n    \"id\",\n    \"link\",\n    \"logname\",\n    \"nice\",\n    \"nohup\",\n    \"nproc\",\n    \"pathchk\",\n    \"pinky\",\n    \"printenv\",\n    \"printf\",\n    \"pwd\",\n    \"readlink\",\n    \"runcon\",\n    \"seq\",\n    \"sleep\",\n    \"stat\",\n    \"stdbuf\",\n    \"stty\",\n    \"tee\",\n    \"test\",\n    \"timeout\",\n    // \"true\", // keyword literal already\n    \"tty\",\n    \"uname\",\n    \"unlink\",\n    \"uptime\",\n    \"users\",\n    \"who\",\n    \"whoami\",\n    \"yes\"\n  ];\n\n  return {\n    name: 'Bash',\n    aliases: [\n      'sh',\n      'zsh'\n    ],\n    keywords: {\n      $pattern: /\\b[a-z][a-z0-9._-]+\\b/,\n      keyword: KEYWORDS,\n      literal: LITERALS,\n      built_in: [\n        ...SHELL_BUILT_INS,\n        ...BASH_BUILT_INS,\n        // Shell modifiers\n        \"set\",\n        \"shopt\",\n        ...ZSH_BUILT_INS,\n        ...GNU_CORE_UTILS\n      ]\n    },\n    contains: [\n      KNOWN_SHEBANG, // to catch known shells and boost relevancy\n      hljs.SHEBANG(), // to catch unknown shells but still highlight the shebang\n      FUNCTION,\n      ARITHMETIC,\n      COMMENT,\n      HERE_DOC,\n      PATH_MODE,\n      QUOTE_STRING,\n      ESCAPED_QUOTE,\n      APOS_STRING,\n      ESCAPED_APOS,\n      VAR\n    ]\n  };\n}\n\nexport { bash as default };\n","const MODES = (hljs) => {\n  return {\n    IMPORTANT: {\n      scope: 'meta',\n      begin: '!important'\n    },\n    BLOCK_COMMENT: hljs.C_BLOCK_COMMENT_MODE,\n    HEXCOLOR: {\n      scope: 'number',\n      begin: /#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\\b/\n    },\n    FUNCTION_DISPATCH: {\n      className: \"built_in\",\n      begin: /[\\w-]+(?=\\()/\n    },\n    ATTRIBUTE_SELECTOR_MODE: {\n      scope: 'selector-attr',\n      begin: /\\[/,\n      end: /\\]/,\n      illegal: '$',\n      contains: [\n        hljs.APOS_STRING_MODE,\n        hljs.QUOTE_STRING_MODE\n      ]\n    },\n    CSS_NUMBER_MODE: {\n      scope: 'number',\n      begin: hljs.NUMBER_RE + '(' +\n        '%|em|ex|ch|rem' +\n        '|vw|vh|vmin|vmax' +\n        '|cm|mm|in|pt|pc|px' +\n        '|deg|grad|rad|turn' +\n        '|s|ms' +\n        '|Hz|kHz' +\n        '|dpi|dpcm|dppx' +\n        ')?',\n      relevance: 0\n    },\n    CSS_VARIABLE: {\n      className: \"attr\",\n      begin: /--[A-Za-z_][A-Za-z0-9_-]*/\n    }\n  };\n};\n\nconst HTML_TAGS = [\n  'a',\n  'abbr',\n  'address',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'blockquote',\n  'body',\n  'button',\n  'canvas',\n  'caption',\n  'cite',\n  'code',\n  'dd',\n  'del',\n  'details',\n  'dfn',\n  'div',\n  'dl',\n  'dt',\n  'em',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'header',\n  'hgroup',\n  'html',\n  'i',\n  'iframe',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'mark',\n  'menu',\n  'nav',\n  'object',\n  'ol',\n  'optgroup',\n  'option',\n  'p',\n  'picture',\n  'q',\n  'quote',\n  'samp',\n  'section',\n  'select',\n  'source',\n  'span',\n  'strong',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'ul',\n  'var',\n  'video'\n];\n\nconst SVG_TAGS = [\n  'defs',\n  'g',\n  'marker',\n  'mask',\n  'pattern',\n  'svg',\n  'switch',\n  'symbol',\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feFlood',\n  'feGaussianBlur',\n  'feImage',\n  'feMerge',\n  'feMorphology',\n  'feOffset',\n  'feSpecularLighting',\n  'feTile',\n  'feTurbulence',\n  'linearGradient',\n  'radialGradient',\n  'stop',\n  'circle',\n  'ellipse',\n  'image',\n  'line',\n  'path',\n  'polygon',\n  'polyline',\n  'rect',\n  'text',\n  'use',\n  'textPath',\n  'tspan',\n  'foreignObject',\n  'clipPath'\n];\n\nconst TAGS = [\n  ...HTML_TAGS,\n  ...SVG_TAGS,\n];\n\n// Sorting, then reversing makes sure longer attributes/elements like\n// `font-weight` are matched fully instead of getting false positives on say `font`\n\nconst MEDIA_FEATURES = [\n  'any-hover',\n  'any-pointer',\n  'aspect-ratio',\n  'color',\n  'color-gamut',\n  'color-index',\n  'device-aspect-ratio',\n  'device-height',\n  'device-width',\n  'display-mode',\n  'forced-colors',\n  'grid',\n  'height',\n  'hover',\n  'inverted-colors',\n  'monochrome',\n  'orientation',\n  'overflow-block',\n  'overflow-inline',\n  'pointer',\n  'prefers-color-scheme',\n  'prefers-contrast',\n  'prefers-reduced-motion',\n  'prefers-reduced-transparency',\n  'resolution',\n  'scan',\n  'scripting',\n  'update',\n  'width',\n  // TODO: find a better solution?\n  'min-width',\n  'max-width',\n  'min-height',\n  'max-height'\n].sort().reverse();\n\n// https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-classes\nconst PSEUDO_CLASSES = [\n  'active',\n  'any-link',\n  'blank',\n  'checked',\n  'current',\n  'default',\n  'defined',\n  'dir', // dir()\n  'disabled',\n  'drop',\n  'empty',\n  'enabled',\n  'first',\n  'first-child',\n  'first-of-type',\n  'fullscreen',\n  'future',\n  'focus',\n  'focus-visible',\n  'focus-within',\n  'has', // has()\n  'host', // host or host()\n  'host-context', // host-context()\n  'hover',\n  'indeterminate',\n  'in-range',\n  'invalid',\n  'is', // is()\n  'lang', // lang()\n  'last-child',\n  'last-of-type',\n  'left',\n  'link',\n  'local-link',\n  'not', // not()\n  'nth-child', // nth-child()\n  'nth-col', // nth-col()\n  'nth-last-child', // nth-last-child()\n  'nth-last-col', // nth-last-col()\n  'nth-last-of-type', //nth-last-of-type()\n  'nth-of-type', //nth-of-type()\n  'only-child',\n  'only-of-type',\n  'optional',\n  'out-of-range',\n  'past',\n  'placeholder-shown',\n  'read-only',\n  'read-write',\n  'required',\n  'right',\n  'root',\n  'scope',\n  'target',\n  'target-within',\n  'user-invalid',\n  'valid',\n  'visited',\n  'where' // where()\n].sort().reverse();\n\n// https://developer.mozilla.org/en-US/docs/Web/CSS/Pseudo-elements\nconst PSEUDO_ELEMENTS = [\n  'after',\n  'backdrop',\n  'before',\n  'cue',\n  'cue-region',\n  'first-letter',\n  'first-line',\n  'grammar-error',\n  'marker',\n  'part',\n  'placeholder',\n  'selection',\n  'slotted',\n  'spelling-error'\n].sort().reverse();\n\nconst ATTRIBUTES = [\n  'accent-color',\n  'align-content',\n  'align-items',\n  'align-self',\n  'alignment-baseline',\n  'all',\n  'anchor-name',\n  'animation',\n  'animation-composition',\n  'animation-delay',\n  'animation-direction',\n  'animation-duration',\n  'animation-fill-mode',\n  'animation-iteration-count',\n  'animation-name',\n  'animation-play-state',\n  'animation-range',\n  'animation-range-end',\n  'animation-range-start',\n  'animation-timeline',\n  'animation-timing-function',\n  'appearance',\n  'aspect-ratio',\n  'backdrop-filter',\n  'backface-visibility',\n  'background',\n  'background-attachment',\n  'background-blend-mode',\n  'background-clip',\n  'background-color',\n  'background-image',\n  'background-origin',\n  'background-position',\n  'background-position-x',\n  'background-position-y',\n  'background-repeat',\n  'background-size',\n  'baseline-shift',\n  'block-size',\n  'border',\n  'border-block',\n  'border-block-color',\n  'border-block-end',\n  'border-block-end-color',\n  'border-block-end-style',\n  'border-block-end-width',\n  'border-block-start',\n  'border-block-start-color',\n  'border-block-start-style',\n  'border-block-start-width',\n  'border-block-style',\n  'border-block-width',\n  'border-bottom',\n  'border-bottom-color',\n  'border-bottom-left-radius',\n  'border-bottom-right-radius',\n  'border-bottom-style',\n  'border-bottom-width',\n  'border-collapse',\n  'border-color',\n  'border-end-end-radius',\n  'border-end-start-radius',\n  'border-image',\n  'border-image-outset',\n  'border-image-repeat',\n  'border-image-slice',\n  'border-image-source',\n  'border-image-width',\n  'border-inline',\n  'border-inline-color',\n  'border-inline-end',\n  'border-inline-end-color',\n  'border-inline-end-style',\n  'border-inline-end-width',\n  'border-inline-start',\n  'border-inline-start-color',\n  'border-inline-start-style',\n  'border-inline-start-width',\n  'border-inline-style',\n  'border-inline-width',\n  'border-left',\n  'border-left-color',\n  'border-left-style',\n  'border-left-width',\n  'border-radius',\n  'border-right',\n  'border-right-color',\n  'border-right-style',\n  'border-right-width',\n  'border-spacing',\n  'border-start-end-radius',\n  'border-start-start-radius',\n  'border-style',\n  'border-top',\n  'border-top-color',\n  'border-top-left-radius',\n  'border-top-right-radius',\n  'border-top-style',\n  'border-top-width',\n  'border-width',\n  'bottom',\n  'box-align',\n  'box-decoration-break',\n  'box-direction',\n  'box-flex',\n  'box-flex-group',\n  'box-lines',\n  'box-ordinal-group',\n  'box-orient',\n  'box-pack',\n  'box-shadow',\n  'box-sizing',\n  'break-after',\n  'break-before',\n  'break-inside',\n  'caption-side',\n  'caret-color',\n  'clear',\n  'clip',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'color-scheme',\n  'column-count',\n  'column-fill',\n  'column-gap',\n  'column-rule',\n  'column-rule-color',\n  'column-rule-style',\n  'column-rule-width',\n  'column-span',\n  'column-width',\n  'columns',\n  'contain',\n  'contain-intrinsic-block-size',\n  'contain-intrinsic-height',\n  'contain-intrinsic-inline-size',\n  'contain-intrinsic-size',\n  'contain-intrinsic-width',\n  'container',\n  'container-name',\n  'container-type',\n  'content',\n  'content-visibility',\n  'counter-increment',\n  'counter-reset',\n  'counter-set',\n  'cue',\n  'cue-after',\n  'cue-before',\n  'cursor',\n  'cx',\n  'cy',\n  'direction',\n  'display',\n  'dominant-baseline',\n  'empty-cells',\n  'enable-background',\n  'field-sizing',\n  'fill',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'flex',\n  'flex-basis',\n  'flex-direction',\n  'flex-flow',\n  'flex-grow',\n  'flex-shrink',\n  'flex-wrap',\n  'float',\n  'flood-color',\n  'flood-opacity',\n  'flow',\n  'font',\n  'font-display',\n  'font-family',\n  'font-feature-settings',\n  'font-kerning',\n  'font-language-override',\n  'font-optical-sizing',\n  'font-palette',\n  'font-size',\n  'font-size-adjust',\n  'font-smooth',\n  'font-smoothing',\n  'font-stretch',\n  'font-style',\n  'font-synthesis',\n  'font-synthesis-position',\n  'font-synthesis-small-caps',\n  'font-synthesis-style',\n  'font-synthesis-weight',\n  'font-variant',\n  'font-variant-alternates',\n  'font-variant-caps',\n  'font-variant-east-asian',\n  'font-variant-emoji',\n  'font-variant-ligatures',\n  'font-variant-numeric',\n  'font-variant-position',\n  'font-variation-settings',\n  'font-weight',\n  'forced-color-adjust',\n  'gap',\n  'glyph-orientation-horizontal',\n  'glyph-orientation-vertical',\n  'grid',\n  'grid-area',\n  'grid-auto-columns',\n  'grid-auto-flow',\n  'grid-auto-rows',\n  'grid-column',\n  'grid-column-end',\n  'grid-column-start',\n  'grid-gap',\n  'grid-row',\n  'grid-row-end',\n  'grid-row-start',\n  'grid-template',\n  'grid-template-areas',\n  'grid-template-columns',\n  'grid-template-rows',\n  'hanging-punctuation',\n  'height',\n  'hyphenate-character',\n  'hyphenate-limit-chars',\n  'hyphens',\n  'icon',\n  'image-orientation',\n  'image-rendering',\n  'image-resolution',\n  'ime-mode',\n  'initial-letter',\n  'initial-letter-align',\n  'inline-size',\n  'inset',\n  'inset-area',\n  'inset-block',\n  'inset-block-end',\n  'inset-block-start',\n  'inset-inline',\n  'inset-inline-end',\n  'inset-inline-start',\n  'isolation',\n  'justify-content',\n  'justify-items',\n  'justify-self',\n  'kerning',\n  'left',\n  'letter-spacing',\n  'lighting-color',\n  'line-break',\n  'line-height',\n  'line-height-step',\n  'list-style',\n  'list-style-image',\n  'list-style-position',\n  'list-style-type',\n  'margin',\n  'margin-block',\n  'margin-block-end',\n  'margin-block-start',\n  'margin-bottom',\n  'margin-inline',\n  'margin-inline-end',\n  'margin-inline-start',\n  'margin-left',\n  'margin-right',\n  'margin-top',\n  'margin-trim',\n  'marker',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'marks',\n  'mask',\n  'mask-border',\n  'mask-border-mode',\n  'mask-border-outset',\n  'mask-border-repeat',\n  'mask-border-slice',\n  'mask-border-source',\n  'mask-border-width',\n  'mask-clip',\n  'mask-composite',\n  'mask-image',\n  'mask-mode',\n  'mask-origin',\n  'mask-position',\n  'mask-repeat',\n  'mask-size',\n  'mask-type',\n  'masonry-auto-flow',\n  'math-depth',\n  'math-shift',\n  'math-style',\n  'max-block-size',\n  'max-height',\n  'max-inline-size',\n  'max-width',\n  'min-block-size',\n  'min-height',\n  'min-inline-size',\n  'min-width',\n  'mix-blend-mode',\n  'nav-down',\n  'nav-index',\n  'nav-left',\n  'nav-right',\n  'nav-up',\n  'none',\n  'normal',\n  'object-fit',\n  'object-position',\n  'offset',\n  'offset-anchor',\n  'offset-distance',\n  'offset-path',\n  'offset-position',\n  'offset-rotate',\n  'opacity',\n  'order',\n  'orphans',\n  'outline',\n  'outline-color',\n  'outline-offset',\n  'outline-style',\n  'outline-width',\n  'overflow',\n  'overflow-anchor',\n  'overflow-block',\n  'overflow-clip-margin',\n  'overflow-inline',\n  'overflow-wrap',\n  'overflow-x',\n  'overflow-y',\n  'overlay',\n  'overscroll-behavior',\n  'overscroll-behavior-block',\n  'overscroll-behavior-inline',\n  'overscroll-behavior-x',\n  'overscroll-behavior-y',\n  'padding',\n  'padding-block',\n  'padding-block-end',\n  'padding-block-start',\n  'padding-bottom',\n  'padding-inline',\n  'padding-inline-end',\n  'padding-inline-start',\n  'padding-left',\n  'padding-right',\n  'padding-top',\n  'page',\n  'page-break-after',\n  'page-break-before',\n  'page-break-inside',\n  'paint-order',\n  'pause',\n  'pause-after',\n  'pause-before',\n  'perspective',\n  'perspective-origin',\n  'place-content',\n  'place-items',\n  'place-self',\n  'pointer-events',\n  'position',\n  'position-anchor',\n  'position-visibility',\n  'print-color-adjust',\n  'quotes',\n  'r',\n  'resize',\n  'rest',\n  'rest-after',\n  'rest-before',\n  'right',\n  'rotate',\n  'row-gap',\n  'ruby-align',\n  'ruby-position',\n  'scale',\n  'scroll-behavior',\n  'scroll-margin',\n  'scroll-margin-block',\n  'scroll-margin-block-end',\n  'scroll-margin-block-start',\n  'scroll-margin-bottom',\n  'scroll-margin-inline',\n  'scroll-margin-inline-end',\n  'scroll-margin-inline-start',\n  'scroll-margin-left',\n  'scroll-margin-right',\n  'scroll-margin-top',\n  'scroll-padding',\n  'scroll-padding-block',\n  'scroll-padding-block-end',\n  'scroll-padding-block-start',\n  'scroll-padding-bottom',\n  'scroll-padding-inline',\n  'scroll-padding-inline-end',\n  'scroll-padding-inline-start',\n  'scroll-padding-left',\n  'scroll-padding-right',\n  'scroll-padding-top',\n  'scroll-snap-align',\n  'scroll-snap-stop',\n  'scroll-snap-type',\n  'scroll-timeline',\n  'scroll-timeline-axis',\n  'scroll-timeline-name',\n  'scrollbar-color',\n  'scrollbar-gutter',\n  'scrollbar-width',\n  'shape-image-threshold',\n  'shape-margin',\n  'shape-outside',\n  'shape-rendering',\n  'speak',\n  'speak-as',\n  'src', // @font-face\n  'stop-color',\n  'stop-opacity',\n  'stroke',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke-width',\n  'tab-size',\n  'table-layout',\n  'text-align',\n  'text-align-all',\n  'text-align-last',\n  'text-anchor',\n  'text-combine-upright',\n  'text-decoration',\n  'text-decoration-color',\n  'text-decoration-line',\n  'text-decoration-skip',\n  'text-decoration-skip-ink',\n  'text-decoration-style',\n  'text-decoration-thickness',\n  'text-emphasis',\n  'text-emphasis-color',\n  'text-emphasis-position',\n  'text-emphasis-style',\n  'text-indent',\n  'text-justify',\n  'text-orientation',\n  'text-overflow',\n  'text-rendering',\n  'text-shadow',\n  'text-size-adjust',\n  'text-transform',\n  'text-underline-offset',\n  'text-underline-position',\n  'text-wrap',\n  'text-wrap-mode',\n  'text-wrap-style',\n  'timeline-scope',\n  'top',\n  'touch-action',\n  'transform',\n  'transform-box',\n  'transform-origin',\n  'transform-style',\n  'transition',\n  'transition-behavior',\n  'transition-delay',\n  'transition-duration',\n  'transition-property',\n  'transition-timing-function',\n  'translate',\n  'unicode-bidi',\n  'user-modify',\n  'user-select',\n  'vector-effect',\n  'vertical-align',\n  'view-timeline',\n  'view-timeline-axis',\n  'view-timeline-inset',\n  'view-timeline-name',\n  'view-transition-name',\n  'visibility',\n  'voice-balance',\n  'voice-duration',\n  'voice-family',\n  'voice-pitch',\n  'voice-range',\n  'voice-rate',\n  'voice-stress',\n  'voice-volume',\n  'white-space',\n  'white-space-collapse',\n  'widows',\n  'width',\n  'will-change',\n  'word-break',\n  'word-spacing',\n  'word-wrap',\n  'writing-mode',\n  'x',\n  'y',\n  'z-index',\n  'zoom'\n].sort().reverse();\n\n/*\nLanguage: CSS\nCategory: common, css, web\nWebsite: https://developer.mozilla.org/en-US/docs/Web/CSS\n*/\n\n\n/** @type LanguageFn */\nfunction css(hljs) {\n  const regex = hljs.regex;\n  const modes = MODES(hljs);\n  const VENDOR_PREFIX = { begin: /-(webkit|moz|ms|o)-(?=[a-z])/ };\n  const AT_MODIFIERS = \"and or not only\";\n  const AT_PROPERTY_RE = /@-?\\w[\\w]*(-\\w+)*/; // @-webkit-keyframes\n  const IDENT_RE = '[a-zA-Z-][a-zA-Z0-9_-]*';\n  const STRINGS = [\n    hljs.APOS_STRING_MODE,\n    hljs.QUOTE_STRING_MODE\n  ];\n\n  return {\n    name: 'CSS',\n    case_insensitive: true,\n    illegal: /[=|'\\$]/,\n    keywords: { keyframePosition: \"from to\" },\n    classNameAliases: {\n      // for visual continuity with `tag {}` and because we\n      // don't have a great class for this?\n      keyframePosition: \"selector-tag\" },\n    contains: [\n      modes.BLOCK_COMMENT,\n      VENDOR_PREFIX,\n      // to recognize keyframe 40% etc which are outside the scope of our\n      // attribute value mode\n      modes.CSS_NUMBER_MODE,\n      {\n        className: 'selector-id',\n        begin: /#[A-Za-z0-9_-]+/,\n        relevance: 0\n      },\n      {\n        className: 'selector-class',\n        begin: '\\\\.' + IDENT_RE,\n        relevance: 0\n      },\n      modes.ATTRIBUTE_SELECTOR_MODE,\n      {\n        className: 'selector-pseudo',\n        variants: [\n          { begin: ':(' + PSEUDO_CLASSES.join('|') + ')' },\n          { begin: ':(:)?(' + PSEUDO_ELEMENTS.join('|') + ')' }\n        ]\n      },\n      // we may actually need this (12/2020)\n      // { // pseudo-selector params\n      //   begin: /\\(/,\n      //   end: /\\)/,\n      //   contains: [ hljs.CSS_NUMBER_MODE ]\n      // },\n      modes.CSS_VARIABLE,\n      {\n        className: 'attribute',\n        begin: '\\\\b(' + ATTRIBUTES.join('|') + ')\\\\b'\n      },\n      // attribute values\n      {\n        begin: /:/,\n        end: /[;}{]/,\n        contains: [\n          modes.BLOCK_COMMENT,\n          modes.HEXCOLOR,\n          modes.IMPORTANT,\n          modes.CSS_NUMBER_MODE,\n          ...STRINGS,\n          // needed to highlight these as strings and to avoid issues with\n          // illegal characters that might be inside urls that would tigger the\n          // languages illegal stack\n          {\n            begin: /(url|data-uri)\\(/,\n            end: /\\)/,\n            relevance: 0, // from keywords\n            keywords: { built_in: \"url data-uri\" },\n            contains: [\n              ...STRINGS,\n              {\n                className: \"string\",\n                // any character other than `)` as in `url()` will be the start\n                // of a string, which ends with `)` (from the parent mode)\n                begin: /[^)]/,\n                endsWithParent: true,\n                excludeEnd: true\n              }\n            ]\n          },\n          modes.FUNCTION_DISPATCH\n        ]\n      },\n      {\n        begin: regex.lookahead(/@/),\n        end: '[{;]',\n        relevance: 0,\n        illegal: /:/, // break on Less variables @var: ...\n        contains: [\n          {\n            className: 'keyword',\n            begin: AT_PROPERTY_RE\n          },\n          {\n            begin: /\\s/,\n            endsWithParent: true,\n            excludeEnd: true,\n            relevance: 0,\n            keywords: {\n              $pattern: /[a-z-]+/,\n              keyword: AT_MODIFIERS,\n              attribute: MEDIA_FEATURES.join(\" \")\n            },\n            contains: [\n              {\n                begin: /[a-z-]+(?=:)/,\n                className: \"attribute\"\n              },\n              ...STRINGS,\n              modes.CSS_NUMBER_MODE\n            ]\n          }\n        ]\n      },\n      {\n        className: 'selector-tag',\n        begin: '\\\\b(' + TAGS.join('|') + ')\\\\b'\n      }\n    ]\n  };\n}\n\nexport { css as default };\n","/*\nLanguage: HTML, XML\nWebsite: https://www.w3.org/XML/\nCategory: common, web\nAudit: 2020\n*/\n\n/** @type LanguageFn */\nfunction xml(hljs) {\n  const regex = hljs.regex;\n  // XML names can have the following additional letters: https://www.w3.org/TR/xml/#NT-NameChar\n  // OTHER_NAME_CHARS = /[:\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]/;\n  // Element names start with NAME_START_CHAR followed by optional other Unicode letters, ASCII digits, hyphens, underscores, and periods\n  // const TAG_NAME_RE = regex.concat(/[A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/, regex.optional(/[A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*:/), /[A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*/);;\n  // const XML_IDENT_RE = /[A-Z_a-z:\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]+/;\n  // const TAG_NAME_RE = regex.concat(/[A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/, regex.optional(/[A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*:/), /[A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*/);\n  // however, to cater for performance and more Unicode support rely simply on the Unicode letter class\n  const TAG_NAME_RE = regex.concat(/[\\p{L}_]/u, regex.optional(/[\\p{L}0-9_.-]*:/u), /[\\p{L}0-9_.-]*/u);\n  const XML_IDENT_RE = /[\\p{L}0-9._:-]+/u;\n  const XML_ENTITIES = {\n    className: 'symbol',\n    begin: /&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/\n  };\n  const XML_META_KEYWORDS = {\n    begin: /\\s/,\n    contains: [\n      {\n        className: 'keyword',\n        begin: /#?[a-z_][a-z1-9_-]+/,\n        illegal: /\\n/\n      }\n    ]\n  };\n  const XML_META_PAR_KEYWORDS = hljs.inherit(XML_META_KEYWORDS, {\n    begin: /\\(/,\n    end: /\\)/\n  });\n  const APOS_META_STRING_MODE = hljs.inherit(hljs.APOS_STRING_MODE, { className: 'string' });\n  const QUOTE_META_STRING_MODE = hljs.inherit(hljs.QUOTE_STRING_MODE, { className: 'string' });\n  const TAG_INTERNALS = {\n    endsWithParent: true,\n    illegal: /</,\n    relevance: 0,\n    contains: [\n      {\n        className: 'attr',\n        begin: XML_IDENT_RE,\n        relevance: 0\n      },\n      {\n        begin: /=\\s*/,\n        relevance: 0,\n        contains: [\n          {\n            className: 'string',\n            endsParent: true,\n            variants: [\n              {\n                begin: /\"/,\n                end: /\"/,\n                contains: [ XML_ENTITIES ]\n              },\n              {\n                begin: /'/,\n                end: /'/,\n                contains: [ XML_ENTITIES ]\n              },\n              { begin: /[^\\s\"'=<>`]+/ }\n            ]\n          }\n        ]\n      }\n    ]\n  };\n  return {\n    name: 'HTML, XML',\n    aliases: [\n      'html',\n      'xhtml',\n      'rss',\n      'atom',\n      'xjb',\n      'xsd',\n      'xsl',\n      'plist',\n      'wsf',\n      'svg'\n    ],\n    case_insensitive: true,\n    unicodeRegex: true,\n    contains: [\n      {\n        className: 'meta',\n        begin: /<![a-z]/,\n        end: />/,\n        relevance: 10,\n        contains: [\n          XML_META_KEYWORDS,\n          QUOTE_META_STRING_MODE,\n          APOS_META_STRING_MODE,\n          XML_META_PAR_KEYWORDS,\n          {\n            begin: /\\[/,\n            end: /\\]/,\n            contains: [\n              {\n                className: 'meta',\n                begin: /<![a-z]/,\n                end: />/,\n                contains: [\n                  XML_META_KEYWORDS,\n                  XML_META_PAR_KEYWORDS,\n                  QUOTE_META_STRING_MODE,\n                  APOS_META_STRING_MODE\n                ]\n              }\n            ]\n          }\n        ]\n      },\n      hljs.COMMENT(\n        /<!--/,\n        /-->/,\n        { relevance: 10 }\n      ),\n      {\n        begin: /<!\\[CDATA\\[/,\n        end: /\\]\\]>/,\n        relevance: 10\n      },\n      XML_ENTITIES,\n      // xml processing instructions\n      {\n        className: 'meta',\n        end: /\\?>/,\n        variants: [\n          {\n            begin: /<\\?xml/,\n            relevance: 10,\n            contains: [\n              QUOTE_META_STRING_MODE\n            ]\n          },\n          {\n            begin: /<\\?[a-z][a-z0-9]+/,\n          }\n        ]\n\n      },\n      {\n        className: 'tag',\n        /*\n        The lookahead pattern (?=...) ensures that 'begin' only matches\n        '<style' as a single word, followed by a whitespace or an\n        ending bracket.\n        */\n        begin: /<style(?=\\s|>)/,\n        end: />/,\n        keywords: { name: 'style' },\n        contains: [ TAG_INTERNALS ],\n        starts: {\n          end: /<\\/style>/,\n          returnEnd: true,\n          subLanguage: [\n            'css',\n            'xml'\n          ]\n        }\n      },\n      {\n        className: 'tag',\n        // See the comment in the <style tag about the lookahead pattern\n        begin: /<script(?=\\s|>)/,\n        end: />/,\n        keywords: { name: 'script' },\n        contains: [ TAG_INTERNALS ],\n        starts: {\n          end: /<\\/script>/,\n          returnEnd: true,\n          subLanguage: [\n            'javascript',\n            'handlebars',\n            'xml'\n          ]\n        }\n      },\n      // we need this for now for jSX\n      {\n        className: 'tag',\n        begin: /<>|<\\/>/\n      },\n      // open tag\n      {\n        className: 'tag',\n        begin: regex.concat(\n          /</,\n          regex.lookahead(regex.concat(\n            TAG_NAME_RE,\n            // <tag/>\n            // <tag>\n            // <tag ...\n            regex.either(/\\/>/, />/, /\\s/)\n          ))\n        ),\n        end: /\\/?>/,\n        contains: [\n          {\n            className: 'name',\n            begin: TAG_NAME_RE,\n            relevance: 0,\n            starts: TAG_INTERNALS\n          }\n        ]\n      },\n      // close tag\n      {\n        className: 'tag',\n        begin: regex.concat(\n          /<\\//,\n          regex.lookahead(regex.concat(\n            TAG_NAME_RE, />/\n          ))\n        ),\n        contains: [\n          {\n            className: 'name',\n            begin: TAG_NAME_RE,\n            relevance: 0\n          },\n          {\n            begin: />/,\n            relevance: 0,\n            endsParent: true\n          }\n        ]\n      }\n    ]\n  };\n}\n\nexport { xml as default };\n","/*\nLanguage: YAML\nDescription: Yet Another Markdown Language\nAuthor: Stefan Wienert <stwienert@gmail.com>\nContributors: Carl Baxter <carl@cbax.tech>\nRequires: ruby.js\nWebsite: https://yaml.org\nCategory: common, config\n*/\nfunction yaml(hljs) {\n  const LITERALS = 'true false yes no null';\n\n  // YAML spec allows non-reserved URI characters in tags.\n  const URI_CHARACTERS = '[\\\\w#;/?:@&=+$,.~*\\'()[\\\\]]+';\n\n  // Define keys as starting with a word character\n  // ...containing word chars, spaces, colons, forward-slashes, hyphens and periods\n  // ...and ending with a colon followed immediately by a space, tab or newline.\n  // The YAML spec allows for much more than this, but this covers most use-cases.\n  const KEY = {\n    className: 'attr',\n    variants: [\n      // added brackets support and special char support\n      { begin: /[\\w*@][\\w*@ :()\\./-]*:(?=[ \\t]|$)/ },\n      { // double quoted keys - with brackets and special char support\n        begin: /\"[\\w*@][\\w*@ :()\\./-]*\":(?=[ \\t]|$)/ },\n      { // single quoted keys - with brackets and special char support\n        begin: /'[\\w*@][\\w*@ :()\\./-]*':(?=[ \\t]|$)/ },\n    ]\n  };\n  \n  const TEMPLATE_VARIABLES = {\n    className: 'template-variable',\n    variants: [\n      { // jinja templates Ansible\n        begin: /\\{\\{/,\n        end: /\\}\\}/\n      },\n      { // Ruby i18n\n        begin: /%\\{/,\n        end: /\\}/\n      }\n    ]\n  };\n\n  const SINGLE_QUOTE_STRING = {\n    className: 'string',\n    relevance: 0,\n    begin: /'/,\n    end: /'/,\n    contains: [\n      {\n        match: /''/,\n        scope: 'char.escape',\n        relevance: 0\n      }\n    ]\n  };\n\n  const STRING = {\n    className: 'string',\n    relevance: 0,\n    variants: [\n      {\n        begin: /\"/,\n        end: /\"/\n      },\n      { begin: /\\S+/ }\n    ],\n    contains: [\n      hljs.BACKSLASH_ESCAPE,\n      TEMPLATE_VARIABLES\n    ]\n  };\n\n  // Strings inside of value containers (objects) can't contain braces,\n  // brackets, or commas\n  const CONTAINER_STRING = hljs.inherit(STRING, { variants: [\n    {\n      begin: /'/,\n      end: /'/,\n      contains: [\n        {\n          begin: /''/,\n          relevance: 0\n        }\n      ]\n    },\n    {\n      begin: /\"/,\n      end: /\"/\n    },\n    { begin: /[^\\s,{}[\\]]+/ }\n  ] });\n\n  const DATE_RE = '[0-9]{4}(-[0-9][0-9]){0,2}';\n  const TIME_RE = '([Tt \\\\t][0-9][0-9]?(:[0-9][0-9]){2})?';\n  const FRACTION_RE = '(\\\\.[0-9]*)?';\n  const ZONE_RE = '([ \\\\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?';\n  const TIMESTAMP = {\n    className: 'number',\n    begin: '\\\\b' + DATE_RE + TIME_RE + FRACTION_RE + ZONE_RE + '\\\\b'\n  };\n\n  const VALUE_CONTAINER = {\n    end: ',',\n    endsWithParent: true,\n    excludeEnd: true,\n    keywords: LITERALS,\n    relevance: 0\n  };\n  const OBJECT = {\n    begin: /\\{/,\n    end: /\\}/,\n    contains: [ VALUE_CONTAINER ],\n    illegal: '\\\\n',\n    relevance: 0\n  };\n  const ARRAY = {\n    begin: '\\\\[',\n    end: '\\\\]',\n    contains: [ VALUE_CONTAINER ],\n    illegal: '\\\\n',\n    relevance: 0\n  };\n\n  const MODES = [\n    KEY,\n    {\n      className: 'meta',\n      begin: '^---\\\\s*$',\n      relevance: 10\n    },\n    { // multi line string\n      // Blocks start with a | or > followed by a newline\n      //\n      // Indentation of subsequent lines must be the same to\n      // be considered part of the block\n      className: 'string',\n      begin: '[\\\\|>]([1-9]?[+-])?[ ]*\\\\n( +)[^ ][^\\\\n]*\\\\n(\\\\2[^\\\\n]+\\\\n?)*'\n    },\n    { // Ruby/Rails erb\n      begin: '<%[%=-]?',\n      end: '[%-]?%>',\n      subLanguage: 'ruby',\n      excludeBegin: true,\n      excludeEnd: true,\n      relevance: 0\n    },\n    { // named tags\n      className: 'type',\n      begin: '!\\\\w+!' + URI_CHARACTERS\n    },\n    // https://yaml.org/spec/1.2/spec.html#id2784064\n    { // verbatim tags\n      className: 'type',\n      begin: '!<' + URI_CHARACTERS + \">\"\n    },\n    { // primary tags\n      className: 'type',\n      begin: '!' + URI_CHARACTERS\n    },\n    { // secondary tags\n      className: 'type',\n      begin: '!!' + URI_CHARACTERS\n    },\n    { // fragment id &ref\n      className: 'meta',\n      begin: '&' + hljs.UNDERSCORE_IDENT_RE + '$'\n    },\n    { // fragment reference *ref\n      className: 'meta',\n      begin: '\\\\*' + hljs.UNDERSCORE_IDENT_RE + '$'\n    },\n    { // array listing\n      className: 'bullet',\n      // TODO: remove |$ hack when we have proper look-ahead support\n      begin: '-(?=[ ]|$)',\n      relevance: 0\n    },\n    hljs.HASH_COMMENT_MODE,\n    {\n      beginKeywords: LITERALS,\n      keywords: { literal: LITERALS }\n    },\n    TIMESTAMP,\n    // numbers are any valid C-style number that\n    // sit isolated from other words\n    {\n      className: 'number',\n      begin: hljs.C_NUMBER_RE + '\\\\b',\n      relevance: 0\n    },\n    OBJECT,\n    ARRAY,\n    SINGLE_QUOTE_STRING,\n    STRING\n  ];\n\n  const VALUE_MODES = [ ...MODES ];\n  VALUE_MODES.pop();\n  VALUE_MODES.push(CONTAINER_STRING);\n  VALUE_CONTAINER.contains = VALUE_MODES;\n\n  return {\n    name: 'YAML',\n    case_insensitive: true,\n    aliases: [ 'yml' ],\n    contains: MODES\n  };\n}\n\nexport { yaml as default };\n","/*\nLanguage: C\nCategory: common, system\nWebsite: https://en.wikipedia.org/wiki/C_(programming_language)\n*/\n\n/** @type LanguageFn */\nfunction c(hljs) {\n  const regex = hljs.regex;\n  // added for historic reasons because `hljs.C_LINE_COMMENT_MODE` does\n  // not include such support nor can we be sure all the grammars depending\n  // on it would desire this behavior\n  const C_LINE_COMMENT_MODE = hljs.COMMENT('//', '$', { contains: [ { begin: /\\\\\\n/ } ] });\n  const DECLTYPE_AUTO_RE = 'decltype\\\\(auto\\\\)';\n  const NAMESPACE_RE = '[a-zA-Z_]\\\\w*::';\n  const TEMPLATE_ARGUMENT_RE = '<[^<>]+>';\n  const FUNCTION_TYPE_RE = '('\n    + DECLTYPE_AUTO_RE + '|'\n    + regex.optional(NAMESPACE_RE)\n    + '[a-zA-Z_]\\\\w*' + regex.optional(TEMPLATE_ARGUMENT_RE)\n  + ')';\n\n\n  const TYPES = {\n    className: 'type',\n    variants: [\n      { begin: '\\\\b[a-z\\\\d_]*_t\\\\b' },\n      { match: /\\batomic_[a-z]{3,6}\\b/ }\n    ]\n\n  };\n\n  // https://en.cppreference.com/w/cpp/language/escape\n  // \\\\ \\x \\xFF \\u2837 \\u00323747 \\374\n  const CHARACTER_ESCAPES = '\\\\\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\\\S)';\n  const STRINGS = {\n    className: 'string',\n    variants: [\n      {\n        begin: '(u8?|U|L)?\"',\n        end: '\"',\n        illegal: '\\\\n',\n        contains: [ hljs.BACKSLASH_ESCAPE ]\n      },\n      {\n        begin: '(u8?|U|L)?\\'(' + CHARACTER_ESCAPES + \"|.)\",\n        end: '\\'',\n        illegal: '.'\n      },\n      hljs.END_SAME_AS_BEGIN({\n        begin: /(?:u8?|U|L)?R\"([^()\\\\ ]{0,16})\\(/,\n        end: /\\)([^()\\\\ ]{0,16})\"/\n      })\n    ]\n  };\n\n  const NUMBERS = {\n    className: 'number',\n    variants: [\n      { match: /\\b(0b[01']+)/ },  \n      { match: /(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/ },  \n      { match: /(-?)\\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/ },  \n      { match: /(-?)\\b\\d+(?:'\\d+)*(?:\\.\\d*(?:'\\d*)*)?(?:[eE][-+]?\\d+)?/ }  \n  ],\n    relevance: 0\n  };  \n  \n  const PREPROCESSOR = {\n    className: 'meta',\n    begin: /#\\s*[a-z]+\\b/,\n    end: /$/,\n    keywords: { keyword:\n        'if else elif endif define undef warning error line '\n        + 'pragma _Pragma ifdef ifndef elifdef elifndef include' },\n    contains: [\n      {\n        begin: /\\\\\\n/,\n        relevance: 0\n      },\n      hljs.inherit(STRINGS, { className: 'string' }),\n      {\n        className: 'string',\n        begin: /<.*?>/\n      },\n      C_LINE_COMMENT_MODE,\n      hljs.C_BLOCK_COMMENT_MODE\n    ]\n  };\n\n  const TITLE_MODE = {\n    className: 'title',\n    begin: regex.optional(NAMESPACE_RE) + hljs.IDENT_RE,\n    relevance: 0\n  };\n\n  const FUNCTION_TITLE = regex.optional(NAMESPACE_RE) + hljs.IDENT_RE + '\\\\s*\\\\(';\n\n  const C_KEYWORDS = [\n    \"asm\",\n    \"auto\",\n    \"break\",\n    \"case\",\n    \"continue\",\n    \"default\",\n    \"do\",\n    \"else\",\n    \"enum\",\n    \"extern\",\n    \"for\",\n    \"fortran\",\n    \"goto\",\n    \"if\",\n    \"inline\",\n    \"register\",\n    \"restrict\",\n    \"return\",\n    \"sizeof\",\n    \"typeof\",\n    \"typeof_unqual\",\n    \"struct\",\n    \"switch\",\n    \"typedef\",\n    \"union\",\n    \"volatile\",\n    \"while\",\n    \"_Alignas\",\n    \"_Alignof\",\n    \"_Atomic\",\n    \"_Generic\",\n    \"_Noreturn\",\n    \"_Static_assert\",\n    \"_Thread_local\",\n    // aliases\n    \"alignas\",\n    \"alignof\",\n    \"noreturn\",\n    \"static_assert\",\n    \"thread_local\",\n    // not a C keyword but is, for all intents and purposes, treated exactly like one.\n    \"_Pragma\"\n  ];\n\n  const C_TYPES = [\n    \"float\",\n    \"double\",\n    \"signed\",\n    \"unsigned\",\n    \"int\",\n    \"short\",\n    \"long\",\n    \"char\",\n    \"void\",\n    \"_Bool\",\n    \"_BitInt\",\n    \"_Complex\",\n    \"_Imaginary\",\n    \"_Decimal32\",\n    \"_Decimal64\",\n    \"_Decimal96\",\n    \"_Decimal128\",\n    \"_Decimal64x\",\n    \"_Decimal128x\",\n    \"_Float16\",\n    \"_Float32\",\n    \"_Float64\",\n    \"_Float128\",\n    \"_Float32x\",\n    \"_Float64x\",\n    \"_Float128x\",\n    // modifiers\n    \"const\",\n    \"static\",\n    \"constexpr\",\n    // aliases\n    \"complex\",\n    \"bool\",\n    \"imaginary\"\n  ];\n\n  const KEYWORDS = {\n    keyword: C_KEYWORDS,\n    type: C_TYPES,\n    literal: 'true false NULL',\n    // TODO: apply hinting work similar to what was done in cpp.js\n    built_in: 'std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream '\n      + 'auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set '\n      + 'unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos '\n      + 'asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp '\n      + 'fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper '\n      + 'isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow '\n      + 'printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp '\n      + 'strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan '\n      + 'vfprintf vprintf vsprintf endl initializer_list unique_ptr',\n  };\n\n  const EXPRESSION_CONTAINS = [\n    PREPROCESSOR,\n    TYPES,\n    C_LINE_COMMENT_MODE,\n    hljs.C_BLOCK_COMMENT_MODE,\n    NUMBERS,\n    STRINGS\n  ];\n\n  const EXPRESSION_CONTEXT = {\n    // This mode covers expression context where we can't expect a function\n    // definition and shouldn't highlight anything that looks like one:\n    // `return some()`, `else if()`, `(x*sum(1, 2))`\n    variants: [\n      {\n        begin: /=/,\n        end: /;/\n      },\n      {\n        begin: /\\(/,\n        end: /\\)/\n      },\n      {\n        beginKeywords: 'new throw return else',\n        end: /;/\n      }\n    ],\n    keywords: KEYWORDS,\n    contains: EXPRESSION_CONTAINS.concat([\n      {\n        begin: /\\(/,\n        end: /\\)/,\n        keywords: KEYWORDS,\n        contains: EXPRESSION_CONTAINS.concat([ 'self' ]),\n        relevance: 0\n      }\n    ]),\n    relevance: 0\n  };\n\n  const FUNCTION_DECLARATION = {\n    begin: '(' + FUNCTION_TYPE_RE + '[\\\\*&\\\\s]+)+' + FUNCTION_TITLE,\n    returnBegin: true,\n    end: /[{;=]/,\n    excludeEnd: true,\n    keywords: KEYWORDS,\n    illegal: /[^\\w\\s\\*&:<>.]/,\n    contains: [\n      { // to prevent it from being confused as the function title\n        begin: DECLTYPE_AUTO_RE,\n        keywords: KEYWORDS,\n        relevance: 0\n      },\n      {\n        begin: FUNCTION_TITLE,\n        returnBegin: true,\n        contains: [ hljs.inherit(TITLE_MODE, { className: \"title.function\" }) ],\n        relevance: 0\n      },\n      // allow for multiple declarations, e.g.:\n      // extern void f(int), g(char);\n      {\n        relevance: 0,\n        match: /,/\n      },\n      {\n        className: 'params',\n        begin: /\\(/,\n        end: /\\)/,\n        keywords: KEYWORDS,\n        relevance: 0,\n        contains: [\n          C_LINE_COMMENT_MODE,\n          hljs.C_BLOCK_COMMENT_MODE,\n          STRINGS,\n          NUMBERS,\n          TYPES,\n          // Count matching parentheses.\n          {\n            begin: /\\(/,\n            end: /\\)/,\n            keywords: KEYWORDS,\n            relevance: 0,\n            contains: [\n              'self',\n              C_LINE_COMMENT_MODE,\n              hljs.C_BLOCK_COMMENT_MODE,\n              STRINGS,\n              NUMBERS,\n              TYPES\n            ]\n          }\n        ]\n      },\n      TYPES,\n      C_LINE_COMMENT_MODE,\n      hljs.C_BLOCK_COMMENT_MODE,\n      PREPROCESSOR\n    ]\n  };\n\n  return {\n    name: \"C\",\n    aliases: [ 'h' ],\n    keywords: KEYWORDS,\n    // Until differentiations are added between `c` and `cpp`, `c` will\n    // not be auto-detected to avoid auto-detect conflicts between C and C++\n    disableAutodetect: true,\n    illegal: '</',\n    contains: [].concat(\n      EXPRESSION_CONTEXT,\n      FUNCTION_DECLARATION,\n      EXPRESSION_CONTAINS,\n      [\n        PREPROCESSOR,\n        {\n          begin: hljs.IDENT_RE + '::',\n          keywords: KEYWORDS\n        },\n        {\n          className: 'class',\n          beginKeywords: 'enum class struct union',\n          end: /[{;:<>=]/,\n          contains: [\n            { beginKeywords: \"final class struct\" },\n            hljs.TITLE_MODE\n          ]\n        }\n      ]),\n    exports: {\n      preprocessor: PREPROCESSOR,\n      strings: STRINGS,\n      keywords: KEYWORDS\n    }\n  };\n}\n\nexport { c as default };\n","/*\nLanguage: C++\nCategory: common, system\nWebsite: https://isocpp.org\n*/\n\n/** @type LanguageFn */\nfunction cpp(hljs) {\n  const regex = hljs.regex;\n  // added for historic reasons because `hljs.C_LINE_COMMENT_MODE` does\n  // not include such support nor can we be sure all the grammars depending\n  // on it would desire this behavior\n  const C_LINE_COMMENT_MODE = hljs.COMMENT('//', '$', { contains: [ { begin: /\\\\\\n/ } ] });\n  const DECLTYPE_AUTO_RE = 'decltype\\\\(auto\\\\)';\n  const NAMESPACE_RE = '[a-zA-Z_]\\\\w*::';\n  const TEMPLATE_ARGUMENT_RE = '<[^<>]+>';\n  const FUNCTION_TYPE_RE = '(?!struct)('\n    + DECLTYPE_AUTO_RE + '|'\n    + regex.optional(NAMESPACE_RE)\n    + '[a-zA-Z_]\\\\w*' + regex.optional(TEMPLATE_ARGUMENT_RE)\n  + ')';\n\n  const CPP_PRIMITIVE_TYPES = {\n    className: 'type',\n    begin: '\\\\b[a-z\\\\d_]*_t\\\\b'\n  };\n\n  // https://en.cppreference.com/w/cpp/language/escape\n  // \\\\ \\x \\xFF \\u2837 \\u00323747 \\374\n  const CHARACTER_ESCAPES = '\\\\\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\\\S)';\n  const STRINGS = {\n    className: 'string',\n    variants: [\n      {\n        begin: '(u8?|U|L)?\"',\n        end: '\"',\n        illegal: '\\\\n',\n        contains: [ hljs.BACKSLASH_ESCAPE ]\n      },\n      {\n        begin: '(u8?|U|L)?\\'(' + CHARACTER_ESCAPES + '|.)',\n        end: '\\'',\n        illegal: '.'\n      },\n      hljs.END_SAME_AS_BEGIN({\n        begin: /(?:u8?|U|L)?R\"([^()\\\\ ]{0,16})\\(/,\n        end: /\\)([^()\\\\ ]{0,16})\"/\n      })\n    ]\n  };\n\n  const NUMBERS = {\n    className: 'number',\n    variants: [\n      // Floating-point literal.\n      { begin:\n        \"[+-]?(?:\" // Leading sign.\n          // Decimal.\n          + \"(?:\"\n            +\"[0-9](?:'?[0-9])*\\\\.(?:[0-9](?:'?[0-9])*)?\"\n            + \"|\\\\.[0-9](?:'?[0-9])*\"\n          + \")(?:[Ee][+-]?[0-9](?:'?[0-9])*)?\"\n          + \"|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*\"\n          // Hexadecimal.\n          + \"|0[Xx](?:\"\n            +\"[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?\"\n            + \"|\\\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*\"\n          + \")[Pp][+-]?[0-9](?:'?[0-9])*\"\n        + \")(?:\" // Literal suffixes.\n          + \"[Ff](?:16|32|64|128)?\"\n          + \"|(BF|bf)16\"\n          + \"|[Ll]\"\n          + \"|\" // Literal suffix is optional.\n        + \")\"\n      },\n      // Integer literal.\n      { begin:\n        \"[+-]?\\\\b(?:\" // Leading sign.\n          + \"0[Bb][01](?:'?[01])*\" // Binary.\n          + \"|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*\" // Hexadecimal.\n          + \"|0(?:'?[0-7])*\" // Octal or just a lone zero.\n          + \"|[1-9](?:'?[0-9])*\" // Decimal.\n        + \")(?:\" // Literal suffixes.\n          + \"[Uu](?:LL?|ll?)\"\n          + \"|[Uu][Zz]?\"\n          + \"|(?:LL?|ll?)[Uu]?\"\n          + \"|[Zz][Uu]\"\n          + \"|\" // Literal suffix is optional.\n        + \")\"\n        // Note: there are user-defined literal suffixes too, but perhaps having the custom suffix not part of the\n        // literal highlight actually makes it stand out more.\n      }\n    ],\n    relevance: 0\n  };\n\n  const PREPROCESSOR = {\n    className: 'meta',\n    begin: /#\\s*[a-z]+\\b/,\n    end: /$/,\n    keywords: { keyword:\n        'if else elif endif define undef warning error line '\n        + 'pragma _Pragma ifdef ifndef include' },\n    contains: [\n      {\n        begin: /\\\\\\n/,\n        relevance: 0\n      },\n      hljs.inherit(STRINGS, { className: 'string' }),\n      {\n        className: 'string',\n        begin: /<.*?>/\n      },\n      C_LINE_COMMENT_MODE,\n      hljs.C_BLOCK_COMMENT_MODE\n    ]\n  };\n\n  const TITLE_MODE = {\n    className: 'title',\n    begin: regex.optional(NAMESPACE_RE) + hljs.IDENT_RE,\n    relevance: 0\n  };\n\n  const FUNCTION_TITLE = regex.optional(NAMESPACE_RE) + hljs.IDENT_RE + '\\\\s*\\\\(';\n\n  // https://en.cppreference.com/w/cpp/keyword\n  const RESERVED_KEYWORDS = [\n    'alignas',\n    'alignof',\n    'and',\n    'and_eq',\n    'asm',\n    'atomic_cancel',\n    'atomic_commit',\n    'atomic_noexcept',\n    'auto',\n    'bitand',\n    'bitor',\n    'break',\n    'case',\n    'catch',\n    'class',\n    'co_await',\n    'co_return',\n    'co_yield',\n    'compl',\n    'concept',\n    'const_cast|10',\n    'consteval',\n    'constexpr',\n    'constinit',\n    'continue',\n    'decltype',\n    'default',\n    'delete',\n    'do',\n    'dynamic_cast|10',\n    'else',\n    'enum',\n    'explicit',\n    'export',\n    'extern',\n    'false',\n    'final',\n    'for',\n    'friend',\n    'goto',\n    'if',\n    'import',\n    'inline',\n    'module',\n    'mutable',\n    'namespace',\n    'new',\n    'noexcept',\n    'not',\n    'not_eq',\n    'nullptr',\n    'operator',\n    'or',\n    'or_eq',\n    'override',\n    'private',\n    'protected',\n    'public',\n    'reflexpr',\n    'register',\n    'reinterpret_cast|10',\n    'requires',\n    'return',\n    'sizeof',\n    'static_assert',\n    'static_cast|10',\n    'struct',\n    'switch',\n    'synchronized',\n    'template',\n    'this',\n    'thread_local',\n    'throw',\n    'transaction_safe',\n    'transaction_safe_dynamic',\n    'true',\n    'try',\n    'typedef',\n    'typeid',\n    'typename',\n    'union',\n    'using',\n    'virtual',\n    'volatile',\n    'while',\n    'xor',\n    'xor_eq'\n  ];\n\n  // https://en.cppreference.com/w/cpp/keyword\n  const RESERVED_TYPES = [\n    'bool',\n    'char',\n    'char16_t',\n    'char32_t',\n    'char8_t',\n    'double',\n    'float',\n    'int',\n    'long',\n    'short',\n    'void',\n    'wchar_t',\n    'unsigned',\n    'signed',\n    'const',\n    'static'\n  ];\n\n  const TYPE_HINTS = [\n    'any',\n    'auto_ptr',\n    'barrier',\n    'binary_semaphore',\n    'bitset',\n    'complex',\n    'condition_variable',\n    'condition_variable_any',\n    'counting_semaphore',\n    'deque',\n    'false_type',\n    'flat_map',\n    'flat_set',\n    'future',\n    'imaginary',\n    'initializer_list',\n    'istringstream',\n    'jthread',\n    'latch',\n    'lock_guard',\n    'multimap',\n    'multiset',\n    'mutex',\n    'optional',\n    'ostringstream',\n    'packaged_task',\n    'pair',\n    'promise',\n    'priority_queue',\n    'queue',\n    'recursive_mutex',\n    'recursive_timed_mutex',\n    'scoped_lock',\n    'set',\n    'shared_future',\n    'shared_lock',\n    'shared_mutex',\n    'shared_timed_mutex',\n    'shared_ptr',\n    'stack',\n    'string_view',\n    'stringstream',\n    'timed_mutex',\n    'thread',\n    'true_type',\n    'tuple',\n    'unique_lock',\n    'unique_ptr',\n    'unordered_map',\n    'unordered_multimap',\n    'unordered_multiset',\n    'unordered_set',\n    'variant',\n    'vector',\n    'weak_ptr',\n    'wstring',\n    'wstring_view'\n  ];\n\n  const FUNCTION_HINTS = [\n    'abort',\n    'abs',\n    'acos',\n    'apply',\n    'as_const',\n    'asin',\n    'atan',\n    'atan2',\n    'calloc',\n    'ceil',\n    'cerr',\n    'cin',\n    'clog',\n    'cos',\n    'cosh',\n    'cout',\n    'declval',\n    'endl',\n    'exchange',\n    'exit',\n    'exp',\n    'fabs',\n    'floor',\n    'fmod',\n    'forward',\n    'fprintf',\n    'fputs',\n    'free',\n    'frexp',\n    'fscanf',\n    'future',\n    'invoke',\n    'isalnum',\n    'isalpha',\n    'iscntrl',\n    'isdigit',\n    'isgraph',\n    'islower',\n    'isprint',\n    'ispunct',\n    'isspace',\n    'isupper',\n    'isxdigit',\n    'labs',\n    'launder',\n    'ldexp',\n    'log',\n    'log10',\n    'make_pair',\n    'make_shared',\n    'make_shared_for_overwrite',\n    'make_tuple',\n    'make_unique',\n    'malloc',\n    'memchr',\n    'memcmp',\n    'memcpy',\n    'memset',\n    'modf',\n    'move',\n    'pow',\n    'printf',\n    'putchar',\n    'puts',\n    'realloc',\n    'scanf',\n    'sin',\n    'sinh',\n    'snprintf',\n    'sprintf',\n    'sqrt',\n    'sscanf',\n    'std',\n    'stderr',\n    'stdin',\n    'stdout',\n    'strcat',\n    'strchr',\n    'strcmp',\n    'strcpy',\n    'strcspn',\n    'strlen',\n    'strncat',\n    'strncmp',\n    'strncpy',\n    'strpbrk',\n    'strrchr',\n    'strspn',\n    'strstr',\n    'swap',\n    'tan',\n    'tanh',\n    'terminate',\n    'to_underlying',\n    'tolower',\n    'toupper',\n    'vfprintf',\n    'visit',\n    'vprintf',\n    'vsprintf'\n  ];\n\n  const LITERALS = [\n    'NULL',\n    'false',\n    'nullopt',\n    'nullptr',\n    'true'\n  ];\n\n  // https://en.cppreference.com/w/cpp/keyword\n  const BUILT_IN = [ '_Pragma' ];\n\n  const CPP_KEYWORDS = {\n    type: RESERVED_TYPES,\n    keyword: RESERVED_KEYWORDS,\n    literal: LITERALS,\n    built_in: BUILT_IN,\n    _type_hints: TYPE_HINTS\n  };\n\n  const FUNCTION_DISPATCH = {\n    className: 'function.dispatch',\n    relevance: 0,\n    keywords: {\n      // Only for relevance, not highlighting.\n      _hint: FUNCTION_HINTS },\n    begin: regex.concat(\n      /\\b/,\n      /(?!decltype)/,\n      /(?!if)/,\n      /(?!for)/,\n      /(?!switch)/,\n      /(?!while)/,\n      hljs.IDENT_RE,\n      regex.lookahead(/(<[^<>]+>|)\\s*\\(/))\n  };\n\n  const EXPRESSION_CONTAINS = [\n    FUNCTION_DISPATCH,\n    PREPROCESSOR,\n    CPP_PRIMITIVE_TYPES,\n    C_LINE_COMMENT_MODE,\n    hljs.C_BLOCK_COMMENT_MODE,\n    NUMBERS,\n    STRINGS\n  ];\n\n  const EXPRESSION_CONTEXT = {\n    // This mode covers expression context where we can't expect a function\n    // definition and shouldn't highlight anything that looks like one:\n    // `return some()`, `else if()`, `(x*sum(1, 2))`\n    variants: [\n      {\n        begin: /=/,\n        end: /;/\n      },\n      {\n        begin: /\\(/,\n        end: /\\)/\n      },\n      {\n        beginKeywords: 'new throw return else',\n        end: /;/\n      }\n    ],\n    keywords: CPP_KEYWORDS,\n    contains: EXPRESSION_CONTAINS.concat([\n      {\n        begin: /\\(/,\n        end: /\\)/,\n        keywords: CPP_KEYWORDS,\n        contains: EXPRESSION_CONTAINS.concat([ 'self' ]),\n        relevance: 0\n      }\n    ]),\n    relevance: 0\n  };\n\n  const FUNCTION_DECLARATION = {\n    className: 'function',\n    begin: '(' + FUNCTION_TYPE_RE + '[\\\\*&\\\\s]+)+' + FUNCTION_TITLE,\n    returnBegin: true,\n    end: /[{;=]/,\n    excludeEnd: true,\n    keywords: CPP_KEYWORDS,\n    illegal: /[^\\w\\s\\*&:<>.]/,\n    contains: [\n      { // to prevent it from being confused as the function title\n        begin: DECLTYPE_AUTO_RE,\n        keywords: CPP_KEYWORDS,\n        relevance: 0\n      },\n      {\n        begin: FUNCTION_TITLE,\n        returnBegin: true,\n        contains: [ TITLE_MODE ],\n        relevance: 0\n      },\n      // needed because we do not have look-behind on the below rule\n      // to prevent it from grabbing the final : in a :: pair\n      {\n        begin: /::/,\n        relevance: 0\n      },\n      // initializers\n      {\n        begin: /:/,\n        endsWithParent: true,\n        contains: [\n          STRINGS,\n          NUMBERS\n        ]\n      },\n      // allow for multiple declarations, e.g.:\n      // extern void f(int), g(char);\n      {\n        relevance: 0,\n        match: /,/\n      },\n      {\n        className: 'params',\n        begin: /\\(/,\n        end: /\\)/,\n        keywords: CPP_KEYWORDS,\n        relevance: 0,\n        contains: [\n          C_LINE_COMMENT_MODE,\n          hljs.C_BLOCK_COMMENT_MODE,\n          STRINGS,\n          NUMBERS,\n          CPP_PRIMITIVE_TYPES,\n          // Count matching parentheses.\n          {\n            begin: /\\(/,\n            end: /\\)/,\n            keywords: CPP_KEYWORDS,\n            relevance: 0,\n            contains: [\n              'self',\n              C_LINE_COMMENT_MODE,\n              hljs.C_BLOCK_COMMENT_MODE,\n              STRINGS,\n              NUMBERS,\n              CPP_PRIMITIVE_TYPES\n            ]\n          }\n        ]\n      },\n      CPP_PRIMITIVE_TYPES,\n      C_LINE_COMMENT_MODE,\n      hljs.C_BLOCK_COMMENT_MODE,\n      PREPROCESSOR\n    ]\n  };\n\n  return {\n    name: 'C++',\n    aliases: [\n      'cc',\n      'c++',\n      'h++',\n      'hpp',\n      'hh',\n      'hxx',\n      'cxx'\n    ],\n    keywords: CPP_KEYWORDS,\n    illegal: '</',\n    classNameAliases: { 'function.dispatch': 'built_in' },\n    contains: [].concat(\n      EXPRESSION_CONTEXT,\n      FUNCTION_DECLARATION,\n      FUNCTION_DISPATCH,\n      EXPRESSION_CONTAINS,\n      [\n        PREPROCESSOR,\n        { // containers: ie, `vector <int> rooms (9);`\n          begin: '\\\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\\\s*<(?!<)',\n          end: '>',\n          keywords: CPP_KEYWORDS,\n          contains: [\n            'self',\n            CPP_PRIMITIVE_TYPES\n          ]\n        },\n        {\n          begin: hljs.IDENT_RE + '::',\n          keywords: CPP_KEYWORDS\n        },\n        {\n          match: [\n            // extra complexity to deal with `enum class` and `enum struct`\n            /\\b(?:enum(?:\\s+(?:class|struct))?|class|struct|union)/,\n            /\\s+/,\n            /\\w+/\n          ],\n          className: {\n            1: 'keyword',\n            3: 'title.class'\n          }\n        }\n      ])\n  };\n}\n\nexport { cpp as default };\n","/*\nLanguage: Diff\nDescription: Unified and context diff\nAuthor: Vasily Polovnyov <vast@whiteants.net>\nWebsite: https://www.gnu.org/software/diffutils/\nCategory: common\n*/\n\n/** @type LanguageFn */\nfunction diff(hljs) {\n  const regex = hljs.regex;\n  return {\n    name: 'Diff',\n    aliases: [ 'patch' ],\n    contains: [\n      {\n        className: 'meta',\n        relevance: 10,\n        match: regex.either(\n          /^@@ +-\\d+,\\d+ +\\+\\d+,\\d+ +@@/,\n          /^\\*\\*\\* +\\d+,\\d+ +\\*\\*\\*\\*$/,\n          /^--- +\\d+,\\d+ +----$/\n        )\n      },\n      {\n        className: 'comment',\n        variants: [\n          {\n            begin: regex.either(\n              /Index: /,\n              /^index/,\n              /={3,}/,\n              /^-{3}/,\n              /^\\*{3} /,\n              /^\\+{3}/,\n              /^diff --git/\n            ),\n            end: /$/\n          },\n          { match: /^\\*{15}$/ }\n        ]\n      },\n      {\n        className: 'addition',\n        begin: /^\\+/,\n        end: /$/\n      },\n      {\n        className: 'deletion',\n        begin: /^-/,\n        end: /$/\n      },\n      {\n        className: 'addition',\n        begin: /^!/,\n        end: /$/\n      }\n    ]\n  };\n}\n\nexport { diff as default };\n","/*\nLanguage: Markdown\nRequires: xml.js\nAuthor: John Crepezzi <john.crepezzi@gmail.com>\nWebsite: https://daringfireball.net/projects/markdown/\nCategory: common, markup\n*/\n\nfunction markdown(hljs) {\n  const regex = hljs.regex;\n  const INLINE_HTML = {\n    begin: /<\\/?[A-Za-z_]/,\n    end: '>',\n    subLanguage: 'xml',\n    relevance: 0\n  };\n  const HORIZONTAL_RULE = {\n    begin: '^[-\\\\*]{3,}',\n    end: '$'\n  };\n  const CODE = {\n    className: 'code',\n    variants: [\n      // TODO: fix to allow these to work with sublanguage also\n      { begin: '(`{3,})[^`](.|\\\\n)*?\\\\1`*[ ]*' },\n      { begin: '(~{3,})[^~](.|\\\\n)*?\\\\1~*[ ]*' },\n      // needed to allow markdown as a sublanguage to work\n      {\n        begin: '```',\n        end: '```+[ ]*$'\n      },\n      {\n        begin: '~~~',\n        end: '~~~+[ ]*$'\n      },\n      { begin: '`.+?`' },\n      {\n        begin: '(?=^( {4}|\\\\t))',\n        // use contains to gobble up multiple lines to allow the block to be whatever size\n        // but only have a single open/close tag vs one per line\n        contains: [\n          {\n            begin: '^( {4}|\\\\t)',\n            end: '(\\\\n)$'\n          }\n        ],\n        relevance: 0\n      }\n    ]\n  };\n  const LIST = {\n    className: 'bullet',\n    begin: '^[ \\t]*([*+-]|(\\\\d+\\\\.))(?=\\\\s+)',\n    end: '\\\\s+',\n    excludeEnd: true\n  };\n  const LINK_REFERENCE = {\n    begin: /^\\[[^\\n]+\\]:/,\n    returnBegin: true,\n    contains: [\n      {\n        className: 'symbol',\n        begin: /\\[/,\n        end: /\\]/,\n        excludeBegin: true,\n        excludeEnd: true\n      },\n      {\n        className: 'link',\n        begin: /:\\s*/,\n        end: /$/,\n        excludeBegin: true\n      }\n    ]\n  };\n  const URL_SCHEME = /[A-Za-z][A-Za-z0-9+.-]*/;\n  const LINK = {\n    variants: [\n      // too much like nested array access in so many languages\n      // to have any real relevance\n      {\n        begin: /\\[.+?\\]\\[.*?\\]/,\n        relevance: 0\n      },\n      // popular internet URLs\n      {\n        begin: /\\[.+?\\]\\(((data|javascript|mailto):|(?:http|ftp)s?:\\/\\/).*?\\)/,\n        relevance: 2\n      },\n      {\n        begin: regex.concat(/\\[.+?\\]\\(/, URL_SCHEME, /:\\/\\/.*?\\)/),\n        relevance: 2\n      },\n      // relative urls\n      {\n        begin: /\\[.+?\\]\\([./?&#].*?\\)/,\n        relevance: 1\n      },\n      // whatever else, lower relevance (might not be a link at all)\n      {\n        begin: /\\[.*?\\]\\(.*?\\)/,\n        relevance: 0\n      }\n    ],\n    returnBegin: true,\n    contains: [\n      {\n        // empty strings for alt or link text\n        match: /\\[(?=\\])/ },\n      {\n        className: 'string',\n        relevance: 0,\n        begin: '\\\\[',\n        end: '\\\\]',\n        excludeBegin: true,\n        returnEnd: true\n      },\n      {\n        className: 'link',\n        relevance: 0,\n        begin: '\\\\]\\\\(',\n        end: '\\\\)',\n        excludeBegin: true,\n        excludeEnd: true\n      },\n      {\n        className: 'symbol',\n        relevance: 0,\n        begin: '\\\\]\\\\[',\n        end: '\\\\]',\n        excludeBegin: true,\n        excludeEnd: true\n      }\n    ]\n  };\n  const BOLD = {\n    className: 'strong',\n    contains: [], // defined later\n    variants: [\n      {\n        begin: /_{2}(?!\\s)/,\n        end: /_{2}/\n      },\n      {\n        begin: /\\*{2}(?!\\s)/,\n        end: /\\*{2}/\n      }\n    ]\n  };\n  const ITALIC = {\n    className: 'emphasis',\n    contains: [], // defined later\n    variants: [\n      {\n        begin: /\\*(?![*\\s])/,\n        end: /\\*/\n      },\n      {\n        begin: /_(?![_\\s])/,\n        end: /_/,\n        relevance: 0\n      }\n    ]\n  };\n\n  // 3 level deep nesting is not allowed because it would create confusion\n  // in cases like `***testing***` because where we don't know if the last\n  // `***` is starting a new bold/italic or finishing the last one\n  const BOLD_WITHOUT_ITALIC = hljs.inherit(BOLD, { contains: [] });\n  const ITALIC_WITHOUT_BOLD = hljs.inherit(ITALIC, { contains: [] });\n  BOLD.contains.push(ITALIC_WITHOUT_BOLD);\n  ITALIC.contains.push(BOLD_WITHOUT_ITALIC);\n\n  let CONTAINABLE = [\n    INLINE_HTML,\n    LINK\n  ];\n\n  [\n    BOLD,\n    ITALIC,\n    BOLD_WITHOUT_ITALIC,\n    ITALIC_WITHOUT_BOLD\n  ].forEach(m => {\n    m.contains = m.contains.concat(CONTAINABLE);\n  });\n\n  CONTAINABLE = CONTAINABLE.concat(BOLD, ITALIC);\n\n  const HEADER = {\n    className: 'section',\n    variants: [\n      {\n        begin: '^#{1,6}',\n        end: '$',\n        contains: CONTAINABLE\n      },\n      {\n        begin: '(?=^.+?\\\\n[=-]{2,}$)',\n        contains: [\n          { begin: '^[=-]*$' },\n          {\n            begin: '^',\n            end: \"\\\\n\",\n            contains: CONTAINABLE\n          }\n        ]\n      }\n    ]\n  };\n\n  const BLOCKQUOTE = {\n    className: 'quote',\n    begin: '^>\\\\s+',\n    contains: CONTAINABLE,\n    end: '$'\n  };\n\n  const ENTITY = {\n    //https://spec.commonmark.org/0.31.2/#entity-references\n    scope: 'literal',\n    match: /&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/\n  };\n\n  return {\n    name: 'Markdown',\n    aliases: [\n      'md',\n      'mkdown',\n      'mkd'\n    ],\n    contains: [\n      HEADER,\n      INLINE_HTML,\n      LIST,\n      BOLD,\n      ITALIC,\n      BLOCKQUOTE,\n      CODE,\n      HORIZONTAL_RULE,\n      LINK,\n      LINK_REFERENCE,\n      ENTITY\n    ]\n  };\n}\n\nexport { markdown as default };\n","/**\n * Markdown rendering with syntax highlighting.\n * Wraps 'marked' with highlight.js for code blocks.\n */\nimport { Marked } from 'marked';\nimport hljs from 'highlight.js/lib/core';\n\n// Register commonly needed languages\nimport javascript from 'highlight.js/lib/languages/javascript';\nimport python from 'highlight.js/lib/languages/python';\nimport typescript from 'highlight.js/lib/languages/typescript';\nimport json from 'highlight.js/lib/languages/json';\nimport bash from 'highlight.js/lib/languages/bash';\nimport css from 'highlight.js/lib/languages/css';\nimport xml from 'highlight.js/lib/languages/xml';\nimport yaml from 'highlight.js/lib/languages/yaml';\nimport c from 'highlight.js/lib/languages/c';\nimport cpp from 'highlight.js/lib/languages/cpp';\nimport diff from 'highlight.js/lib/languages/diff';\nimport markdown from 'highlight.js/lib/languages/markdown';\n\nhljs.registerLanguage('javascript', javascript);\nhljs.registerLanguage('js', javascript);\nhljs.registerLanguage('python', python);\nhljs.registerLanguage('py', python);\nhljs.registerLanguage('typescript', typescript);\nhljs.registerLanguage('ts', typescript);\nhljs.registerLanguage('json', json);\nhljs.registerLanguage('bash', bash);\nhljs.registerLanguage('sh', bash);\nhljs.registerLanguage('shell', bash);\nhljs.registerLanguage('css', css);\nhljs.registerLanguage('html', xml);\nhljs.registerLanguage('xml', xml);\nhljs.registerLanguage('yaml', yaml);\nhljs.registerLanguage('yml', yaml);\nhljs.registerLanguage('c', c);\nhljs.registerLanguage('cpp', cpp);\nhljs.registerLanguage('diff', diff);\nhljs.registerLanguage('markdown', markdown);\nhljs.registerLanguage('md', markdown);\n\nconst marked = new Marked({\n  gfm: true,\n  breaks: false,\n  renderer: {\n    code({ text, lang }) {\n      const language = lang && hljs.getLanguage(lang) ? lang : null;\n      let highlighted;\n      if (language) {\n        try {\n          highlighted = hljs.highlight(text, { language }).value;\n        } catch (_) {\n          highlighted = escapeHtml(text);\n        }\n      } else {\n        highlighted = escapeHtml(text);\n      }\n      const langLabel = language ? `<span class=\"code-lang\">${language}</span>` : '';\n      const copyBtn = `<button class=\"code-copy-btn\" title=\"Copy code\"></button>`;\n      return `<pre class=\"code-block\">${langLabel}${copyBtn}<code class=\"hljs${language ? ` language-${language}` : ''}\">${highlighted}</code></pre>`;\n    },\n  },\n});\n\nfunction escapeHtml(str) {\n  return str\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;');\n}\n\n/**\n * Render markdown to HTML string.\n * Safe for LLM output  no raw HTML passthrough.\n */\nexport function renderMarkdown(text) {\n  if (!text) return '';\n  try {\n    return marked.parse(text);\n  } catch (e) {\n    console.warn('Markdown parse error:', e);\n    return `<pre>${escapeHtml(text)}</pre>`;\n  }\n}","function Diff() {}\nDiff.prototype = {\n  diff: function diff(oldString, newString) {\n    var _options$timeout;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var callback = options.callback;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    var self = this;\n    function done(value) {\n      value = self.postProcess(value, options);\n      if (callback) {\n        setTimeout(function () {\n          callback(value);\n        }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    }\n\n    // Allow subclasses to massage the input prior to running\n    oldString = this.castInput(oldString, options);\n    newString = this.castInput(newString, options);\n    oldString = this.removeEmpty(this.tokenize(oldString, options));\n    newString = this.removeEmpty(this.tokenize(newString, options));\n    var newLen = newString.length,\n      oldLen = oldString.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n    if (options.maxEditLength != null) {\n      maxEditLength = Math.min(maxEditLength, options.maxEditLength);\n    }\n    var maxExecutionTime = (_options$timeout = options.timeout) !== null && _options$timeout !== void 0 ? _options$timeout : Infinity;\n    var abortAfterTimestamp = Date.now() + maxExecutionTime;\n    var bestPath = [{\n      oldPos: -1,\n      lastComponent: undefined\n    }];\n\n    // Seed editLength = 0, i.e. the content starts with the same values\n    var newPos = this.extractCommon(bestPath[0], newString, oldString, 0, options);\n    if (bestPath[0].oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n      // Identity per the equality and tokenizer\n      return done(buildValues(self, bestPath[0].lastComponent, newString, oldString, self.useLongestToken));\n    }\n\n    // Once we hit the right edge of the edit graph on some diagonal k, we can\n    // definitely reach the end of the edit graph in no more than k edits, so\n    // there's no point in considering any moves to diagonal k+1 any more (from\n    // which we're guaranteed to need at least k+1 more edits).\n    // Similarly, once we've reached the bottom of the edit graph, there's no\n    // point considering moves to lower diagonals.\n    // We record this fact by setting minDiagonalToConsider and\n    // maxDiagonalToConsider to some finite value once we've hit the edge of\n    // the edit graph.\n    // This optimization is not faithful to the original algorithm presented in\n    // Myers's paper, which instead pointlessly extends D-paths off the end of\n    // the edit graph - see page 7 of Myers's paper which notes this point\n    // explicitly and illustrates it with a diagram. This has major performance\n    // implications for some common scenarios. For instance, to compute a diff\n    // where the new text simply appends d characters on the end of the\n    // original text of length n, the true Myers algorithm will take O(n+d^2)\n    // time while this optimization needs only O(n+d) time.\n    var minDiagonalToConsider = -Infinity,\n      maxDiagonalToConsider = Infinity;\n\n    // Main worker method. checks all permutations of a given edit length for acceptance.\n    function execEditLength() {\n      for (var diagonalPath = Math.max(minDiagonalToConsider, -editLength); diagonalPath <= Math.min(maxDiagonalToConsider, editLength); diagonalPath += 2) {\n        var basePath = void 0;\n        var removePath = bestPath[diagonalPath - 1],\n          addPath = bestPath[diagonalPath + 1];\n        if (removePath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n        var canAdd = false;\n        if (addPath) {\n          // what newPos will be after we do an insertion:\n          var addPathNewPos = addPath.oldPos - diagonalPath;\n          canAdd = addPath && 0 <= addPathNewPos && addPathNewPos < newLen;\n        }\n        var canRemove = removePath && removePath.oldPos + 1 < oldLen;\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        }\n\n        // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the old string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n        if (!canRemove || canAdd && removePath.oldPos < addPath.oldPos) {\n          basePath = self.addToPath(addPath, true, false, 0, options);\n        } else {\n          basePath = self.addToPath(removePath, false, true, 1, options);\n        }\n        newPos = self.extractCommon(basePath, newString, oldString, diagonalPath, options);\n        if (basePath.oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n          // If we have hit the end of both strings, then we are done\n          return done(buildValues(self, basePath.lastComponent, newString, oldString, self.useLongestToken));\n        } else {\n          bestPath[diagonalPath] = basePath;\n          if (basePath.oldPos + 1 >= oldLen) {\n            maxDiagonalToConsider = Math.min(maxDiagonalToConsider, diagonalPath - 1);\n          }\n          if (newPos + 1 >= newLen) {\n            minDiagonalToConsider = Math.max(minDiagonalToConsider, diagonalPath + 1);\n          }\n        }\n      }\n      editLength++;\n    }\n\n    // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced, or until the edit length exceeds options.maxEditLength (if given),\n    // in which case it will return undefined.\n    if (callback) {\n      (function exec() {\n        setTimeout(function () {\n          if (editLength > maxEditLength || Date.now() > abortAfterTimestamp) {\n            return callback();\n          }\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      })();\n    } else {\n      while (editLength <= maxEditLength && Date.now() <= abortAfterTimestamp) {\n        var ret = execEditLength();\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n  addToPath: function addToPath(path, added, removed, oldPosInc, options) {\n    var last = path.lastComponent;\n    if (last && !options.oneChangePerToken && last.added === added && last.removed === removed) {\n      return {\n        oldPos: path.oldPos + oldPosInc,\n        lastComponent: {\n          count: last.count + 1,\n          added: added,\n          removed: removed,\n          previousComponent: last.previousComponent\n        }\n      };\n    } else {\n      return {\n        oldPos: path.oldPos + oldPosInc,\n        lastComponent: {\n          count: 1,\n          added: added,\n          removed: removed,\n          previousComponent: last\n        }\n      };\n    }\n  },\n  extractCommon: function extractCommon(basePath, newString, oldString, diagonalPath, options) {\n    var newLen = newString.length,\n      oldLen = oldString.length,\n      oldPos = basePath.oldPos,\n      newPos = oldPos - diagonalPath,\n      commonCount = 0;\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(oldString[oldPos + 1], newString[newPos + 1], options)) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n      if (options.oneChangePerToken) {\n        basePath.lastComponent = {\n          count: 1,\n          previousComponent: basePath.lastComponent,\n          added: false,\n          removed: false\n        };\n      }\n    }\n    if (commonCount && !options.oneChangePerToken) {\n      basePath.lastComponent = {\n        count: commonCount,\n        previousComponent: basePath.lastComponent,\n        added: false,\n        removed: false\n      };\n    }\n    basePath.oldPos = oldPos;\n    return newPos;\n  },\n  equals: function equals(left, right, options) {\n    if (options.comparator) {\n      return options.comparator(left, right);\n    } else {\n      return left === right || options.ignoreCase && left.toLowerCase() === right.toLowerCase();\n    }\n  },\n  removeEmpty: function removeEmpty(array) {\n    var ret = [];\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n    return ret;\n  },\n  castInput: function castInput(value) {\n    return value;\n  },\n  tokenize: function tokenize(value) {\n    return Array.from(value);\n  },\n  join: function join(chars) {\n    return chars.join('');\n  },\n  postProcess: function postProcess(changeObjects) {\n    return changeObjects;\n  }\n};\nfunction buildValues(diff, lastComponent, newString, oldString, useLongestToken) {\n  // First we convert our linked list of components in reverse order to an\n  // array in the right order:\n  var components = [];\n  var nextComponent;\n  while (lastComponent) {\n    components.push(lastComponent);\n    nextComponent = lastComponent.previousComponent;\n    delete lastComponent.previousComponent;\n    lastComponent = nextComponent;\n  }\n  components.reverse();\n  var componentPos = 0,\n    componentLen = components.length,\n    newPos = 0,\n    oldPos = 0;\n  for (; componentPos < componentLen; componentPos++) {\n    var component = components[componentPos];\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        var value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function (value, i) {\n          var oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n      newPos += component.count;\n\n      // Common case\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count;\n    }\n  }\n  return components;\n}\n\nvar characterDiff = new Diff();\nfunction diffChars(oldStr, newStr, options) {\n  return characterDiff.diff(oldStr, newStr, options);\n}\n\nfunction longestCommonPrefix(str1, str2) {\n  var i;\n  for (i = 0; i < str1.length && i < str2.length; i++) {\n    if (str1[i] != str2[i]) {\n      return str1.slice(0, i);\n    }\n  }\n  return str1.slice(0, i);\n}\nfunction longestCommonSuffix(str1, str2) {\n  var i;\n\n  // Unlike longestCommonPrefix, we need a special case to handle all scenarios\n  // where we return the empty string since str1.slice(-0) will return the\n  // entire string.\n  if (!str1 || !str2 || str1[str1.length - 1] != str2[str2.length - 1]) {\n    return '';\n  }\n  for (i = 0; i < str1.length && i < str2.length; i++) {\n    if (str1[str1.length - (i + 1)] != str2[str2.length - (i + 1)]) {\n      return str1.slice(-i);\n    }\n  }\n  return str1.slice(-i);\n}\nfunction replacePrefix(string, oldPrefix, newPrefix) {\n  if (string.slice(0, oldPrefix.length) != oldPrefix) {\n    throw Error(\"string \".concat(JSON.stringify(string), \" doesn't start with prefix \").concat(JSON.stringify(oldPrefix), \"; this is a bug\"));\n  }\n  return newPrefix + string.slice(oldPrefix.length);\n}\nfunction replaceSuffix(string, oldSuffix, newSuffix) {\n  if (!oldSuffix) {\n    return string + newSuffix;\n  }\n  if (string.slice(-oldSuffix.length) != oldSuffix) {\n    throw Error(\"string \".concat(JSON.stringify(string), \" doesn't end with suffix \").concat(JSON.stringify(oldSuffix), \"; this is a bug\"));\n  }\n  return string.slice(0, -oldSuffix.length) + newSuffix;\n}\nfunction removePrefix(string, oldPrefix) {\n  return replacePrefix(string, oldPrefix, '');\n}\nfunction removeSuffix(string, oldSuffix) {\n  return replaceSuffix(string, oldSuffix, '');\n}\nfunction maximumOverlap(string1, string2) {\n  return string2.slice(0, overlapCount(string1, string2));\n}\n\n// Nicked from https://stackoverflow.com/a/60422853/1709587\nfunction overlapCount(a, b) {\n  // Deal with cases where the strings differ in length\n  var startA = 0;\n  if (a.length > b.length) {\n    startA = a.length - b.length;\n  }\n  var endB = b.length;\n  if (a.length < b.length) {\n    endB = a.length;\n  }\n  // Create a back-reference for each index\n  //   that should be followed in case of a mismatch.\n  //   We only need B to make these references:\n  var map = Array(endB);\n  var k = 0; // Index that lags behind j\n  map[0] = 0;\n  for (var j = 1; j < endB; j++) {\n    if (b[j] == b[k]) {\n      map[j] = map[k]; // skip over the same character (optional optimisation)\n    } else {\n      map[j] = k;\n    }\n    while (k > 0 && b[j] != b[k]) {\n      k = map[k];\n    }\n    if (b[j] == b[k]) {\n      k++;\n    }\n  }\n  // Phase 2: use these references while iterating over A\n  k = 0;\n  for (var i = startA; i < a.length; i++) {\n    while (k > 0 && a[i] != b[k]) {\n      k = map[k];\n    }\n    if (a[i] == b[k]) {\n      k++;\n    }\n  }\n  return k;\n}\n\n/**\n * Returns true if the string consistently uses Windows line endings.\n */\nfunction hasOnlyWinLineEndings(string) {\n  return string.includes('\\r\\n') && !string.startsWith('\\n') && !string.match(/[^\\r]\\n/);\n}\n\n/**\n * Returns true if the string consistently uses Unix line endings.\n */\nfunction hasOnlyUnixLineEndings(string) {\n  return !string.includes('\\r\\n') && string.includes('\\n');\n}\n\n// Based on https://en.wikipedia.org/wiki/Latin_script_in_Unicode\n//\n// Ranges and exceptions:\n// Latin-1 Supplement, 008000FF\n//  - U+00D7   Multiplication sign\n//  - U+00F7   Division sign\n// Latin Extended-A, 0100017F\n// Latin Extended-B, 0180024F\n// IPA Extensions, 025002AF\n// Spacing Modifier Letters, 02B002FF\n//  - U+02C7   &#711;  Caron\n//  - U+02D8   &#728;  Breve\n//  - U+02D9   &#729;  Dot Above\n//  - U+02DA   &#730;  Ring Above\n//  - U+02DB   &#731;  Ogonek\n//  - U+02DC   &#732;  Small Tilde\n//  - U+02DD   &#733;  Double Acute Accent\n// Latin Extended Additional, 1E001EFF\nvar extendedWordChars = \"a-zA-Z0-9_\\\\u{C0}-\\\\u{FF}\\\\u{D8}-\\\\u{F6}\\\\u{F8}-\\\\u{2C6}\\\\u{2C8}-\\\\u{2D7}\\\\u{2DE}-\\\\u{2FF}\\\\u{1E00}-\\\\u{1EFF}\";\n\n// Each token is one of the following:\n// - A punctuation mark plus the surrounding whitespace\n// - A word plus the surrounding whitespace\n// - Pure whitespace (but only in the special case where this the entire text\n//   is just whitespace)\n//\n// We have to include surrounding whitespace in the tokens because the two\n// alternative approaches produce horribly broken results:\n// * If we just discard the whitespace, we can't fully reproduce the original\n//   text from the sequence of tokens and any attempt to render the diff will\n//   get the whitespace wrong.\n// * If we have separate tokens for whitespace, then in a typical text every\n//   second token will be a single space character. But this often results in\n//   the optimal diff between two texts being a perverse one that preserves\n//   the spaces between words but deletes and reinserts actual common words.\n//   See https://github.com/kpdecker/jsdiff/issues/160#issuecomment-1866099640\n//   for an example.\n//\n// Keeping the surrounding whitespace of course has implications for .equals\n// and .join, not just .tokenize.\n\n// This regex does NOT fully implement the tokenization rules described above.\n// Instead, it gives runs of whitespace their own \"token\". The tokenize method\n// then handles stitching whitespace tokens onto adjacent word or punctuation\n// tokens.\nvar tokenizeIncludingWhitespace = new RegExp(\"[\".concat(extendedWordChars, \"]+|\\\\s+|[^\").concat(extendedWordChars, \"]\"), 'ug');\nvar wordDiff = new Diff();\nwordDiff.equals = function (left, right, options) {\n  if (options.ignoreCase) {\n    left = left.toLowerCase();\n    right = right.toLowerCase();\n  }\n  return left.trim() === right.trim();\n};\nwordDiff.tokenize = function (value) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var parts;\n  if (options.intlSegmenter) {\n    if (options.intlSegmenter.resolvedOptions().granularity != 'word') {\n      throw new Error('The segmenter passed must have a granularity of \"word\"');\n    }\n    parts = Array.from(options.intlSegmenter.segment(value), function (segment) {\n      return segment.segment;\n    });\n  } else {\n    parts = value.match(tokenizeIncludingWhitespace) || [];\n  }\n  var tokens = [];\n  var prevPart = null;\n  parts.forEach(function (part) {\n    if (/\\s/.test(part)) {\n      if (prevPart == null) {\n        tokens.push(part);\n      } else {\n        tokens.push(tokens.pop() + part);\n      }\n    } else if (/\\s/.test(prevPart)) {\n      if (tokens[tokens.length - 1] == prevPart) {\n        tokens.push(tokens.pop() + part);\n      } else {\n        tokens.push(prevPart + part);\n      }\n    } else {\n      tokens.push(part);\n    }\n    prevPart = part;\n  });\n  return tokens;\n};\nwordDiff.join = function (tokens) {\n  // Tokens being joined here will always have appeared consecutively in the\n  // same text, so we can simply strip off the leading whitespace from all the\n  // tokens except the first (and except any whitespace-only tokens - but such\n  // a token will always be the first and only token anyway) and then join them\n  // and the whitespace around words and punctuation will end up correct.\n  return tokens.map(function (token, i) {\n    if (i == 0) {\n      return token;\n    } else {\n      return token.replace(/^\\s+/, '');\n    }\n  }).join('');\n};\nwordDiff.postProcess = function (changes, options) {\n  if (!changes || options.oneChangePerToken) {\n    return changes;\n  }\n  var lastKeep = null;\n  // Change objects representing any insertion or deletion since the last\n  // \"keep\" change object. There can be at most one of each.\n  var insertion = null;\n  var deletion = null;\n  changes.forEach(function (change) {\n    if (change.added) {\n      insertion = change;\n    } else if (change.removed) {\n      deletion = change;\n    } else {\n      if (insertion || deletion) {\n        // May be false at start of text\n        dedupeWhitespaceInChangeObjects(lastKeep, deletion, insertion, change);\n      }\n      lastKeep = change;\n      insertion = null;\n      deletion = null;\n    }\n  });\n  if (insertion || deletion) {\n    dedupeWhitespaceInChangeObjects(lastKeep, deletion, insertion, null);\n  }\n  return changes;\n};\nfunction diffWords(oldStr, newStr, options) {\n  // This option has never been documented and never will be (it's clearer to\n  // just call `diffWordsWithSpace` directly if you need that behavior), but\n  // has existed in jsdiff for a long time, so we retain support for it here\n  // for the sake of backwards compatibility.\n  if ((options === null || options === void 0 ? void 0 : options.ignoreWhitespace) != null && !options.ignoreWhitespace) {\n    return diffWordsWithSpace(oldStr, newStr, options);\n  }\n  return wordDiff.diff(oldStr, newStr, options);\n}\nfunction dedupeWhitespaceInChangeObjects(startKeep, deletion, insertion, endKeep) {\n  // Before returning, we tidy up the leading and trailing whitespace of the\n  // change objects to eliminate cases where trailing whitespace in one object\n  // is repeated as leading whitespace in the next.\n  // Below are examples of the outcomes we want here to explain the code.\n  // I=insert, K=keep, D=delete\n  // 1. diffing 'foo bar baz' vs 'foo baz'\n  //    Prior to cleanup, we have K:'foo ' D:' bar ' K:' baz'\n  //    After cleanup, we want:   K:'foo ' D:'bar ' K:'baz'\n  //\n  // 2. Diffing 'foo bar baz' vs 'foo qux baz'\n  //    Prior to cleanup, we have K:'foo ' D:' bar ' I:' qux ' K:' baz'\n  //    After cleanup, we want K:'foo ' D:'bar' I:'qux' K:' baz'\n  //\n  // 3. Diffing 'foo\\nbar baz' vs 'foo baz'\n  //    Prior to cleanup, we have K:'foo ' D:'\\nbar ' K:' baz'\n  //    After cleanup, we want K'foo' D:'\\nbar' K:' baz'\n  //\n  // 4. Diffing 'foo baz' vs 'foo\\nbar baz'\n  //    Prior to cleanup, we have K:'foo\\n' I:'\\nbar ' K:' baz'\n  //    After cleanup, we ideally want K'foo' I:'\\nbar' K:' baz'\n  //    but don't actually manage this currently (the pre-cleanup change\n  //    objects don't contain enough information to make it possible).\n  //\n  // 5. Diffing 'foo   bar baz' vs 'foo  baz'\n  //    Prior to cleanup, we have K:'foo  ' D:'   bar ' K:'  baz'\n  //    After cleanup, we want K:'foo  ' D:' bar ' K:'baz'\n  //\n  // Our handling is unavoidably imperfect in the case where there's a single\n  // indel between keeps and the whitespace has changed. For instance, consider\n  // diffing 'foo\\tbar\\nbaz' vs 'foo baz'. Unless we create an extra change\n  // object to represent the insertion of the space character (which isn't even\n  // a token), we have no way to avoid losing information about the texts'\n  // original whitespace in the result we return. Still, we do our best to\n  // output something that will look sensible if we e.g. print it with\n  // insertions in green and deletions in red.\n\n  // Between two \"keep\" change objects (or before the first or after the last\n  // change object), we can have either:\n  // * A \"delete\" followed by an \"insert\"\n  // * Just an \"insert\"\n  // * Just a \"delete\"\n  // We handle the three cases separately.\n  if (deletion && insertion) {\n    var oldWsPrefix = deletion.value.match(/^\\s*/)[0];\n    var oldWsSuffix = deletion.value.match(/\\s*$/)[0];\n    var newWsPrefix = insertion.value.match(/^\\s*/)[0];\n    var newWsSuffix = insertion.value.match(/\\s*$/)[0];\n    if (startKeep) {\n      var commonWsPrefix = longestCommonPrefix(oldWsPrefix, newWsPrefix);\n      startKeep.value = replaceSuffix(startKeep.value, newWsPrefix, commonWsPrefix);\n      deletion.value = removePrefix(deletion.value, commonWsPrefix);\n      insertion.value = removePrefix(insertion.value, commonWsPrefix);\n    }\n    if (endKeep) {\n      var commonWsSuffix = longestCommonSuffix(oldWsSuffix, newWsSuffix);\n      endKeep.value = replacePrefix(endKeep.value, newWsSuffix, commonWsSuffix);\n      deletion.value = removeSuffix(deletion.value, commonWsSuffix);\n      insertion.value = removeSuffix(insertion.value, commonWsSuffix);\n    }\n  } else if (insertion) {\n    // The whitespaces all reflect what was in the new text rather than\n    // the old, so we essentially have no information about whitespace\n    // insertion or deletion. We just want to dedupe the whitespace.\n    // We do that by having each change object keep its trailing\n    // whitespace and deleting duplicate leading whitespace where\n    // present.\n    if (startKeep) {\n      insertion.value = insertion.value.replace(/^\\s*/, '');\n    }\n    if (endKeep) {\n      endKeep.value = endKeep.value.replace(/^\\s*/, '');\n    }\n    // otherwise we've got a deletion and no insertion\n  } else if (startKeep && endKeep) {\n    var newWsFull = endKeep.value.match(/^\\s*/)[0],\n      delWsStart = deletion.value.match(/^\\s*/)[0],\n      delWsEnd = deletion.value.match(/\\s*$/)[0];\n\n    // Any whitespace that comes straight after startKeep in both the old and\n    // new texts, assign to startKeep and remove from the deletion.\n    var newWsStart = longestCommonPrefix(newWsFull, delWsStart);\n    deletion.value = removePrefix(deletion.value, newWsStart);\n\n    // Any whitespace that comes straight before endKeep in both the old and\n    // new texts, and hasn't already been assigned to startKeep, assign to\n    // endKeep and remove from the deletion.\n    var newWsEnd = longestCommonSuffix(removePrefix(newWsFull, newWsStart), delWsEnd);\n    deletion.value = removeSuffix(deletion.value, newWsEnd);\n    endKeep.value = replacePrefix(endKeep.value, newWsFull, newWsEnd);\n\n    // If there's any whitespace from the new text that HASN'T already been\n    // assigned, assign it to the start:\n    startKeep.value = replaceSuffix(startKeep.value, newWsFull, newWsFull.slice(0, newWsFull.length - newWsEnd.length));\n  } else if (endKeep) {\n    // We are at the start of the text. Preserve all the whitespace on\n    // endKeep, and just remove whitespace from the end of deletion to the\n    // extent that it overlaps with the start of endKeep.\n    var endKeepWsPrefix = endKeep.value.match(/^\\s*/)[0];\n    var deletionWsSuffix = deletion.value.match(/\\s*$/)[0];\n    var overlap = maximumOverlap(deletionWsSuffix, endKeepWsPrefix);\n    deletion.value = removeSuffix(deletion.value, overlap);\n  } else if (startKeep) {\n    // We are at the END of the text. Preserve all the whitespace on\n    // startKeep, and just remove whitespace from the start of deletion to\n    // the extent that it overlaps with the end of startKeep.\n    var startKeepWsSuffix = startKeep.value.match(/\\s*$/)[0];\n    var deletionWsPrefix = deletion.value.match(/^\\s*/)[0];\n    var _overlap = maximumOverlap(startKeepWsSuffix, deletionWsPrefix);\n    deletion.value = removePrefix(deletion.value, _overlap);\n  }\n}\nvar wordWithSpaceDiff = new Diff();\nwordWithSpaceDiff.tokenize = function (value) {\n  // Slightly different to the tokenizeIncludingWhitespace regex used above in\n  // that this one treats each individual newline as a distinct tokens, rather\n  // than merging them into other surrounding whitespace. This was requested\n  // in https://github.com/kpdecker/jsdiff/issues/180 &\n  //    https://github.com/kpdecker/jsdiff/issues/211\n  var regex = new RegExp(\"(\\\\r?\\\\n)|[\".concat(extendedWordChars, \"]+|[^\\\\S\\\\n\\\\r]+|[^\").concat(extendedWordChars, \"]\"), 'ug');\n  return value.match(regex) || [];\n};\nfunction diffWordsWithSpace(oldStr, newStr, options) {\n  return wordWithSpaceDiff.diff(oldStr, newStr, options);\n}\n\nfunction generateOptions(options, defaults) {\n  if (typeof options === 'function') {\n    defaults.callback = options;\n  } else if (options) {\n    for (var name in options) {\n      /* istanbul ignore else */\n      if (options.hasOwnProperty(name)) {\n        defaults[name] = options[name];\n      }\n    }\n  }\n  return defaults;\n}\n\nvar lineDiff = new Diff();\nlineDiff.tokenize = function (value, options) {\n  if (options.stripTrailingCr) {\n    // remove one \\r before \\n to match GNU diff's --strip-trailing-cr behavior\n    value = value.replace(/\\r\\n/g, '\\n');\n  }\n  var retLines = [],\n    linesAndNewlines = value.split(/(\\n|\\r\\n)/);\n\n  // Ignore the final empty token that occurs if the string ends with a new line\n  if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n    linesAndNewlines.pop();\n  }\n\n  // Merge the content and line separators into single tokens\n  for (var i = 0; i < linesAndNewlines.length; i++) {\n    var line = linesAndNewlines[i];\n    if (i % 2 && !options.newlineIsToken) {\n      retLines[retLines.length - 1] += line;\n    } else {\n      retLines.push(line);\n    }\n  }\n  return retLines;\n};\nlineDiff.equals = function (left, right, options) {\n  // If we're ignoring whitespace, we need to normalise lines by stripping\n  // whitespace before checking equality. (This has an annoying interaction\n  // with newlineIsToken that requires special handling: if newlines get their\n  // own token, then we DON'T want to trim the *newline* tokens down to empty\n  // strings, since this would cause us to treat whitespace-only line content\n  // as equal to a separator between lines, which would be weird and\n  // inconsistent with the documented behavior of the options.)\n  if (options.ignoreWhitespace) {\n    if (!options.newlineIsToken || !left.includes('\\n')) {\n      left = left.trim();\n    }\n    if (!options.newlineIsToken || !right.includes('\\n')) {\n      right = right.trim();\n    }\n  } else if (options.ignoreNewlineAtEof && !options.newlineIsToken) {\n    if (left.endsWith('\\n')) {\n      left = left.slice(0, -1);\n    }\n    if (right.endsWith('\\n')) {\n      right = right.slice(0, -1);\n    }\n  }\n  return Diff.prototype.equals.call(this, left, right, options);\n};\nfunction diffLines(oldStr, newStr, callback) {\n  return lineDiff.diff(oldStr, newStr, callback);\n}\n\n// Kept for backwards compatibility. This is a rather arbitrary wrapper method\n// that just calls `diffLines` with `ignoreWhitespace: true`. It's confusing to\n// have two ways to do exactly the same thing in the API, so we no longer\n// document this one (library users should explicitly use `diffLines` with\n// `ignoreWhitespace: true` instead) but we keep it around to maintain\n// compatibility with code that used old versions.\nfunction diffTrimmedLines(oldStr, newStr, callback) {\n  var options = generateOptions(callback, {\n    ignoreWhitespace: true\n  });\n  return lineDiff.diff(oldStr, newStr, options);\n}\n\nvar sentenceDiff = new Diff();\nsentenceDiff.tokenize = function (value) {\n  return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n};\nfunction diffSentences(oldStr, newStr, callback) {\n  return sentenceDiff.diff(oldStr, newStr, callback);\n}\n\nvar cssDiff = new Diff();\ncssDiff.tokenize = function (value) {\n  return value.split(/([{}:;,]|\\s+)/);\n};\nfunction diffCss(oldStr, newStr, callback) {\n  return cssDiff.diff(oldStr, newStr, callback);\n}\n\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar jsonDiff = new Diff();\n// Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n// dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\njsonDiff.useLongestToken = true;\njsonDiff.tokenize = lineDiff.tokenize;\njsonDiff.castInput = function (value, options) {\n  var undefinedReplacement = options.undefinedReplacement,\n    _options$stringifyRep = options.stringifyReplacer,\n    stringifyReplacer = _options$stringifyRep === void 0 ? function (k, v) {\n      return typeof v === 'undefined' ? undefinedReplacement : v;\n    } : _options$stringifyRep;\n  return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n};\njsonDiff.equals = function (left, right, options) {\n  return Diff.prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'), options);\n};\nfunction diffJson(oldObj, newObj, options) {\n  return jsonDiff.diff(oldObj, newObj, options);\n}\n\n// This function handles the presence of circular references by bailing out when encountering an\n// object that is already on the \"stack\" of items being processed. Accepts an optional replacer\nfunction canonicalize(obj, stack, replacementStack, replacer, key) {\n  stack = stack || [];\n  replacementStack = replacementStack || [];\n  if (replacer) {\n    obj = replacer(key, obj);\n  }\n  var i;\n  for (i = 0; i < stack.length; i += 1) {\n    if (stack[i] === obj) {\n      return replacementStack[i];\n    }\n  }\n  var canonicalizedObj;\n  if ('[object Array]' === Object.prototype.toString.call(obj)) {\n    stack.push(obj);\n    canonicalizedObj = new Array(obj.length);\n    replacementStack.push(canonicalizedObj);\n    for (i = 0; i < obj.length; i += 1) {\n      canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n    }\n    stack.pop();\n    replacementStack.pop();\n    return canonicalizedObj;\n  }\n  if (obj && obj.toJSON) {\n    obj = obj.toJSON();\n  }\n  if (_typeof(obj) === 'object' && obj !== null) {\n    stack.push(obj);\n    canonicalizedObj = {};\n    replacementStack.push(canonicalizedObj);\n    var sortedKeys = [],\n      _key;\n    for (_key in obj) {\n      /* istanbul ignore else */\n      if (Object.prototype.hasOwnProperty.call(obj, _key)) {\n        sortedKeys.push(_key);\n      }\n    }\n    sortedKeys.sort();\n    for (i = 0; i < sortedKeys.length; i += 1) {\n      _key = sortedKeys[i];\n      canonicalizedObj[_key] = canonicalize(obj[_key], stack, replacementStack, replacer, _key);\n    }\n    stack.pop();\n    replacementStack.pop();\n  } else {\n    canonicalizedObj = obj;\n  }\n  return canonicalizedObj;\n}\n\nvar arrayDiff = new Diff();\narrayDiff.tokenize = function (value) {\n  return value.slice();\n};\narrayDiff.join = arrayDiff.removeEmpty = function (value) {\n  return value;\n};\nfunction diffArrays(oldArr, newArr, callback) {\n  return arrayDiff.diff(oldArr, newArr, callback);\n}\n\nfunction unixToWin(patch) {\n  if (Array.isArray(patch)) {\n    return patch.map(unixToWin);\n  }\n  return _objectSpread2(_objectSpread2({}, patch), {}, {\n    hunks: patch.hunks.map(function (hunk) {\n      return _objectSpread2(_objectSpread2({}, hunk), {}, {\n        lines: hunk.lines.map(function (line, i) {\n          var _hunk$lines;\n          return line.startsWith('\\\\') || line.endsWith('\\r') || (_hunk$lines = hunk.lines[i + 1]) !== null && _hunk$lines !== void 0 && _hunk$lines.startsWith('\\\\') ? line : line + '\\r';\n        })\n      });\n    })\n  });\n}\nfunction winToUnix(patch) {\n  if (Array.isArray(patch)) {\n    return patch.map(winToUnix);\n  }\n  return _objectSpread2(_objectSpread2({}, patch), {}, {\n    hunks: patch.hunks.map(function (hunk) {\n      return _objectSpread2(_objectSpread2({}, hunk), {}, {\n        lines: hunk.lines.map(function (line) {\n          return line.endsWith('\\r') ? line.substring(0, line.length - 1) : line;\n        })\n      });\n    })\n  });\n}\n\n/**\n * Returns true if the patch consistently uses Unix line endings (or only involves one line and has\n * no line endings).\n */\nfunction isUnix(patch) {\n  if (!Array.isArray(patch)) {\n    patch = [patch];\n  }\n  return !patch.some(function (index) {\n    return index.hunks.some(function (hunk) {\n      return hunk.lines.some(function (line) {\n        return !line.startsWith('\\\\') && line.endsWith('\\r');\n      });\n    });\n  });\n}\n\n/**\n * Returns true if the patch uses Windows line endings and only Windows line endings.\n */\nfunction isWin(patch) {\n  if (!Array.isArray(patch)) {\n    patch = [patch];\n  }\n  return patch.some(function (index) {\n    return index.hunks.some(function (hunk) {\n      return hunk.lines.some(function (line) {\n        return line.endsWith('\\r');\n      });\n    });\n  }) && patch.every(function (index) {\n    return index.hunks.every(function (hunk) {\n      return hunk.lines.every(function (line, i) {\n        var _hunk$lines2;\n        return line.startsWith('\\\\') || line.endsWith('\\r') || ((_hunk$lines2 = hunk.lines[i + 1]) === null || _hunk$lines2 === void 0 ? void 0 : _hunk$lines2.startsWith('\\\\'));\n      });\n    });\n  });\n}\n\nfunction parsePatch(uniDiff) {\n  var diffstr = uniDiff.split(/\\n/),\n    list = [],\n    i = 0;\n  function parseIndex() {\n    var index = {};\n    list.push(index);\n\n    // Parse diff metadata\n    while (i < diffstr.length) {\n      var line = diffstr[i];\n\n      // File header found, end parsing diff metadata\n      if (/^(\\-\\-\\-|\\+\\+\\+|@@)\\s/.test(line)) {\n        break;\n      }\n\n      // Diff index\n      var header = /^(?:Index:|diff(?: -r \\w+)+)\\s+(.+?)\\s*$/.exec(line);\n      if (header) {\n        index.index = header[1];\n      }\n      i++;\n    }\n\n    // Parse file headers if they are defined. Unified diff requires them, but\n    // there's no technical issues to have an isolated hunk without file header\n    parseFileHeader(index);\n    parseFileHeader(index);\n\n    // Parse hunks\n    index.hunks = [];\n    while (i < diffstr.length) {\n      var _line = diffstr[i];\n      if (/^(Index:\\s|diff\\s|\\-\\-\\-\\s|\\+\\+\\+\\s|===================================================================)/.test(_line)) {\n        break;\n      } else if (/^@@/.test(_line)) {\n        index.hunks.push(parseHunk());\n      } else if (_line) {\n        throw new Error('Unknown line ' + (i + 1) + ' ' + JSON.stringify(_line));\n      } else {\n        i++;\n      }\n    }\n  }\n\n  // Parses the --- and +++ headers, if none are found, no lines\n  // are consumed.\n  function parseFileHeader(index) {\n    var fileHeader = /^(---|\\+\\+\\+)\\s+(.*)\\r?$/.exec(diffstr[i]);\n    if (fileHeader) {\n      var keyPrefix = fileHeader[1] === '---' ? 'old' : 'new';\n      var data = fileHeader[2].split('\\t', 2);\n      var fileName = data[0].replace(/\\\\\\\\/g, '\\\\');\n      if (/^\".*\"$/.test(fileName)) {\n        fileName = fileName.substr(1, fileName.length - 2);\n      }\n      index[keyPrefix + 'FileName'] = fileName;\n      index[keyPrefix + 'Header'] = (data[1] || '').trim();\n      i++;\n    }\n  }\n\n  // Parses a hunk\n  // This assumes that we are at the start of a hunk.\n  function parseHunk() {\n    var chunkHeaderIndex = i,\n      chunkHeaderLine = diffstr[i++],\n      chunkHeader = chunkHeaderLine.split(/@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/);\n    var hunk = {\n      oldStart: +chunkHeader[1],\n      oldLines: typeof chunkHeader[2] === 'undefined' ? 1 : +chunkHeader[2],\n      newStart: +chunkHeader[3],\n      newLines: typeof chunkHeader[4] === 'undefined' ? 1 : +chunkHeader[4],\n      lines: []\n    };\n\n    // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n    if (hunk.oldLines === 0) {\n      hunk.oldStart += 1;\n    }\n    if (hunk.newLines === 0) {\n      hunk.newStart += 1;\n    }\n    var addCount = 0,\n      removeCount = 0;\n    for (; i < diffstr.length && (removeCount < hunk.oldLines || addCount < hunk.newLines || (_diffstr$i = diffstr[i]) !== null && _diffstr$i !== void 0 && _diffstr$i.startsWith('\\\\')); i++) {\n      var _diffstr$i;\n      var operation = diffstr[i].length == 0 && i != diffstr.length - 1 ? ' ' : diffstr[i][0];\n      if (operation === '+' || operation === '-' || operation === ' ' || operation === '\\\\') {\n        hunk.lines.push(diffstr[i]);\n        if (operation === '+') {\n          addCount++;\n        } else if (operation === '-') {\n          removeCount++;\n        } else if (operation === ' ') {\n          addCount++;\n          removeCount++;\n        }\n      } else {\n        throw new Error(\"Hunk at line \".concat(chunkHeaderIndex + 1, \" contained invalid line \").concat(diffstr[i]));\n      }\n    }\n\n    // Handle the empty block count case\n    if (!addCount && hunk.newLines === 1) {\n      hunk.newLines = 0;\n    }\n    if (!removeCount && hunk.oldLines === 1) {\n      hunk.oldLines = 0;\n    }\n\n    // Perform sanity checking\n    if (addCount !== hunk.newLines) {\n      throw new Error('Added line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n    }\n    if (removeCount !== hunk.oldLines) {\n      throw new Error('Removed line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n    }\n    return hunk;\n  }\n  while (i < diffstr.length) {\n    parseIndex();\n  }\n  return list;\n}\n\n// Iterator that traverses in the range of [min, max], stepping\n// by distance from a given start position. I.e. for [0, 4], with\n// start of 2, this will iterate 2, 3, 1, 4, 0.\nfunction distanceIterator (start, minLine, maxLine) {\n  var wantForward = true,\n    backwardExhausted = false,\n    forwardExhausted = false,\n    localOffset = 1;\n  return function iterator() {\n    if (wantForward && !forwardExhausted) {\n      if (backwardExhausted) {\n        localOffset++;\n      } else {\n        wantForward = false;\n      }\n\n      // Check if trying to fit beyond text length, and if not, check it fits\n      // after offset location (or desired location on first iteration)\n      if (start + localOffset <= maxLine) {\n        return start + localOffset;\n      }\n      forwardExhausted = true;\n    }\n    if (!backwardExhausted) {\n      if (!forwardExhausted) {\n        wantForward = true;\n      }\n\n      // Check if trying to fit before text beginning, and if not, check it fits\n      // before offset location\n      if (minLine <= start - localOffset) {\n        return start - localOffset++;\n      }\n      backwardExhausted = true;\n      return iterator();\n    }\n\n    // We tried to fit hunk before text beginning and beyond text length, then\n    // hunk can't fit on the text. Return undefined\n  };\n}\n\nfunction applyPatch(source, uniDiff) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n  if (Array.isArray(uniDiff)) {\n    if (uniDiff.length > 1) {\n      throw new Error('applyPatch only works with a single input.');\n    }\n    uniDiff = uniDiff[0];\n  }\n  if (options.autoConvertLineEndings || options.autoConvertLineEndings == null) {\n    if (hasOnlyWinLineEndings(source) && isUnix(uniDiff)) {\n      uniDiff = unixToWin(uniDiff);\n    } else if (hasOnlyUnixLineEndings(source) && isWin(uniDiff)) {\n      uniDiff = winToUnix(uniDiff);\n    }\n  }\n\n  // Apply the diff to the input\n  var lines = source.split('\\n'),\n    hunks = uniDiff.hunks,\n    compareLine = options.compareLine || function (lineNumber, line, operation, patchContent) {\n      return line === patchContent;\n    },\n    fuzzFactor = options.fuzzFactor || 0,\n    minLine = 0;\n  if (fuzzFactor < 0 || !Number.isInteger(fuzzFactor)) {\n    throw new Error('fuzzFactor must be a non-negative integer');\n  }\n\n  // Special case for empty patch.\n  if (!hunks.length) {\n    return source;\n  }\n\n  // Before anything else, handle EOFNL insertion/removal. If the patch tells us to make a change\n  // to the EOFNL that is redundant/impossible - i.e. to remove a newline that's not there, or add a\n  // newline that already exists - then we either return false and fail to apply the patch (if\n  // fuzzFactor is 0) or simply ignore the problem and do nothing (if fuzzFactor is >0).\n  // If we do need to remove/add a newline at EOF, this will always be in the final hunk:\n  var prevLine = '',\n    removeEOFNL = false,\n    addEOFNL = false;\n  for (var i = 0; i < hunks[hunks.length - 1].lines.length; i++) {\n    var line = hunks[hunks.length - 1].lines[i];\n    if (line[0] == '\\\\') {\n      if (prevLine[0] == '+') {\n        removeEOFNL = true;\n      } else if (prevLine[0] == '-') {\n        addEOFNL = true;\n      }\n    }\n    prevLine = line;\n  }\n  if (removeEOFNL) {\n    if (addEOFNL) {\n      // This means the final line gets changed but doesn't have a trailing newline in either the\n      // original or patched version. In that case, we do nothing if fuzzFactor > 0, and if\n      // fuzzFactor is 0, we simply validate that the source file has no trailing newline.\n      if (!fuzzFactor && lines[lines.length - 1] == '') {\n        return false;\n      }\n    } else if (lines[lines.length - 1] == '') {\n      lines.pop();\n    } else if (!fuzzFactor) {\n      return false;\n    }\n  } else if (addEOFNL) {\n    if (lines[lines.length - 1] != '') {\n      lines.push('');\n    } else if (!fuzzFactor) {\n      return false;\n    }\n  }\n\n  /**\n   * Checks if the hunk can be made to fit at the provided location with at most `maxErrors`\n   * insertions, substitutions, or deletions, while ensuring also that:\n   * - lines deleted in the hunk match exactly, and\n   * - wherever an insertion operation or block of insertion operations appears in the hunk, the\n   *   immediately preceding and following lines of context match exactly\n   *\n   * `toPos` should be set such that lines[toPos] is meant to match hunkLines[0].\n   *\n   * If the hunk can be applied, returns an object with properties `oldLineLastI` and\n   * `replacementLines`. Otherwise, returns null.\n   */\n  function applyHunk(hunkLines, toPos, maxErrors) {\n    var hunkLinesI = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var lastContextLineMatched = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var patchedLines = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [];\n    var patchedLinesLength = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n    var nConsecutiveOldContextLines = 0;\n    var nextContextLineMustMatch = false;\n    for (; hunkLinesI < hunkLines.length; hunkLinesI++) {\n      var hunkLine = hunkLines[hunkLinesI],\n        operation = hunkLine.length > 0 ? hunkLine[0] : ' ',\n        content = hunkLine.length > 0 ? hunkLine.substr(1) : hunkLine;\n      if (operation === '-') {\n        if (compareLine(toPos + 1, lines[toPos], operation, content)) {\n          toPos++;\n          nConsecutiveOldContextLines = 0;\n        } else {\n          if (!maxErrors || lines[toPos] == null) {\n            return null;\n          }\n          patchedLines[patchedLinesLength] = lines[toPos];\n          return applyHunk(hunkLines, toPos + 1, maxErrors - 1, hunkLinesI, false, patchedLines, patchedLinesLength + 1);\n        }\n      }\n      if (operation === '+') {\n        if (!lastContextLineMatched) {\n          return null;\n        }\n        patchedLines[patchedLinesLength] = content;\n        patchedLinesLength++;\n        nConsecutiveOldContextLines = 0;\n        nextContextLineMustMatch = true;\n      }\n      if (operation === ' ') {\n        nConsecutiveOldContextLines++;\n        patchedLines[patchedLinesLength] = lines[toPos];\n        if (compareLine(toPos + 1, lines[toPos], operation, content)) {\n          patchedLinesLength++;\n          lastContextLineMatched = true;\n          nextContextLineMustMatch = false;\n          toPos++;\n        } else {\n          if (nextContextLineMustMatch || !maxErrors) {\n            return null;\n          }\n\n          // Consider 3 possibilities in sequence:\n          // 1. lines contains a *substitution* not included in the patch context, or\n          // 2. lines contains an *insertion* not included in the patch context, or\n          // 3. lines contains a *deletion* not included in the patch context\n          // The first two options are of course only possible if the line from lines is non-null -\n          // i.e. only option 3 is possible if we've overrun the end of the old file.\n          return lines[toPos] && (applyHunk(hunkLines, toPos + 1, maxErrors - 1, hunkLinesI + 1, false, patchedLines, patchedLinesLength + 1) || applyHunk(hunkLines, toPos + 1, maxErrors - 1, hunkLinesI, false, patchedLines, patchedLinesLength + 1)) || applyHunk(hunkLines, toPos, maxErrors - 1, hunkLinesI + 1, false, patchedLines, patchedLinesLength);\n        }\n      }\n    }\n\n    // Before returning, trim any unmodified context lines off the end of patchedLines and reduce\n    // toPos (and thus oldLineLastI) accordingly. This allows later hunks to be applied to a region\n    // that starts in this hunk's trailing context.\n    patchedLinesLength -= nConsecutiveOldContextLines;\n    toPos -= nConsecutiveOldContextLines;\n    patchedLines.length = patchedLinesLength;\n    return {\n      patchedLines: patchedLines,\n      oldLineLastI: toPos - 1\n    };\n  }\n  var resultLines = [];\n\n  // Search best fit offsets for each hunk based on the previous ones\n  var prevHunkOffset = 0;\n  for (var _i = 0; _i < hunks.length; _i++) {\n    var hunk = hunks[_i];\n    var hunkResult = void 0;\n    var maxLine = lines.length - hunk.oldLines + fuzzFactor;\n    var toPos = void 0;\n    for (var maxErrors = 0; maxErrors <= fuzzFactor; maxErrors++) {\n      toPos = hunk.oldStart + prevHunkOffset - 1;\n      var iterator = distanceIterator(toPos, minLine, maxLine);\n      for (; toPos !== undefined; toPos = iterator()) {\n        hunkResult = applyHunk(hunk.lines, toPos, maxErrors);\n        if (hunkResult) {\n          break;\n        }\n      }\n      if (hunkResult) {\n        break;\n      }\n    }\n    if (!hunkResult) {\n      return false;\n    }\n\n    // Copy everything from the end of where we applied the last hunk to the start of this hunk\n    for (var _i2 = minLine; _i2 < toPos; _i2++) {\n      resultLines.push(lines[_i2]);\n    }\n\n    // Add the lines produced by applying the hunk:\n    for (var _i3 = 0; _i3 < hunkResult.patchedLines.length; _i3++) {\n      var _line = hunkResult.patchedLines[_i3];\n      resultLines.push(_line);\n    }\n\n    // Set lower text limit to end of the current hunk, so next ones don't try\n    // to fit over already patched text\n    minLine = hunkResult.oldLineLastI + 1;\n\n    // Note the offset between where the patch said the hunk should've applied and where we\n    // applied it, so we can adjust future hunks accordingly:\n    prevHunkOffset = toPos + 1 - hunk.oldStart;\n  }\n\n  // Copy over the rest of the lines from the old text\n  for (var _i4 = minLine; _i4 < lines.length; _i4++) {\n    resultLines.push(lines[_i4]);\n  }\n  return resultLines.join('\\n');\n}\n\n// Wrapper that supports multiple file patches via callbacks.\nfunction applyPatches(uniDiff, options) {\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n  var currentIndex = 0;\n  function processIndex() {\n    var index = uniDiff[currentIndex++];\n    if (!index) {\n      return options.complete();\n    }\n    options.loadFile(index, function (err, data) {\n      if (err) {\n        return options.complete(err);\n      }\n      var updatedContent = applyPatch(data, index, options);\n      options.patched(index, updatedContent, function (err) {\n        if (err) {\n          return options.complete(err);\n        }\n        processIndex();\n      });\n    });\n  }\n  processIndex();\n}\n\nfunction structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  if (!options) {\n    options = {};\n  }\n  if (typeof options === 'function') {\n    options = {\n      callback: options\n    };\n  }\n  if (typeof options.context === 'undefined') {\n    options.context = 4;\n  }\n  if (options.newlineIsToken) {\n    throw new Error('newlineIsToken may not be used with patch-generation functions, only with diffing functions');\n  }\n  if (!options.callback) {\n    return diffLinesResultToPatch(diffLines(oldStr, newStr, options));\n  } else {\n    var _options = options,\n      _callback = _options.callback;\n    diffLines(oldStr, newStr, _objectSpread2(_objectSpread2({}, options), {}, {\n      callback: function callback(diff) {\n        var patch = diffLinesResultToPatch(diff);\n        _callback(patch);\n      }\n    }));\n  }\n  function diffLinesResultToPatch(diff) {\n    // STEP 1: Build up the patch with no \"\\ No newline at end of file\" lines and with the arrays\n    //         of lines containing trailing newline characters. We'll tidy up later...\n\n    if (!diff) {\n      return;\n    }\n    diff.push({\n      value: '',\n      lines: []\n    }); // Append an empty value to make cleanup easier\n\n    function contextLines(lines) {\n      return lines.map(function (entry) {\n        return ' ' + entry;\n      });\n    }\n    var hunks = [];\n    var oldRangeStart = 0,\n      newRangeStart = 0,\n      curRange = [],\n      oldLine = 1,\n      newLine = 1;\n    var _loop = function _loop() {\n      var current = diff[i],\n        lines = current.lines || splitLines(current.value);\n      current.lines = lines;\n      if (current.added || current.removed) {\n        var _curRange;\n        // If we have previous context, start with that\n        if (!oldRangeStart) {\n          var prev = diff[i - 1];\n          oldRangeStart = oldLine;\n          newRangeStart = newLine;\n          if (prev) {\n            curRange = options.context > 0 ? contextLines(prev.lines.slice(-options.context)) : [];\n            oldRangeStart -= curRange.length;\n            newRangeStart -= curRange.length;\n          }\n        }\n\n        // Output our changes\n        (_curRange = curRange).push.apply(_curRange, _toConsumableArray(lines.map(function (entry) {\n          return (current.added ? '+' : '-') + entry;\n        })));\n\n        // Track the updated file position\n        if (current.added) {\n          newLine += lines.length;\n        } else {\n          oldLine += lines.length;\n        }\n      } else {\n        // Identical context lines. Track line changes\n        if (oldRangeStart) {\n          // Close out any changes that have been output (or join overlapping)\n          if (lines.length <= options.context * 2 && i < diff.length - 2) {\n            var _curRange2;\n            // Overlapping\n            (_curRange2 = curRange).push.apply(_curRange2, _toConsumableArray(contextLines(lines)));\n          } else {\n            var _curRange3;\n            // end the range and output\n            var contextSize = Math.min(lines.length, options.context);\n            (_curRange3 = curRange).push.apply(_curRange3, _toConsumableArray(contextLines(lines.slice(0, contextSize))));\n            var _hunk = {\n              oldStart: oldRangeStart,\n              oldLines: oldLine - oldRangeStart + contextSize,\n              newStart: newRangeStart,\n              newLines: newLine - newRangeStart + contextSize,\n              lines: curRange\n            };\n            hunks.push(_hunk);\n            oldRangeStart = 0;\n            newRangeStart = 0;\n            curRange = [];\n          }\n        }\n        oldLine += lines.length;\n        newLine += lines.length;\n      }\n    };\n    for (var i = 0; i < diff.length; i++) {\n      _loop();\n    }\n\n    // Step 2: eliminate the trailing `\\n` from each line of each hunk, and, where needed, add\n    //         \"\\ No newline at end of file\".\n    for (var _i = 0, _hunks = hunks; _i < _hunks.length; _i++) {\n      var hunk = _hunks[_i];\n      for (var _i2 = 0; _i2 < hunk.lines.length; _i2++) {\n        if (hunk.lines[_i2].endsWith('\\n')) {\n          hunk.lines[_i2] = hunk.lines[_i2].slice(0, -1);\n        } else {\n          hunk.lines.splice(_i2 + 1, 0, '\\\\ No newline at end of file');\n          _i2++; // Skip the line we just added, then continue iterating\n        }\n      }\n    }\n    return {\n      oldFileName: oldFileName,\n      newFileName: newFileName,\n      oldHeader: oldHeader,\n      newHeader: newHeader,\n      hunks: hunks\n    };\n  }\n}\nfunction formatPatch(diff) {\n  if (Array.isArray(diff)) {\n    return diff.map(formatPatch).join('\\n');\n  }\n  var ret = [];\n  if (diff.oldFileName == diff.newFileName) {\n    ret.push('Index: ' + diff.oldFileName);\n  }\n  ret.push('===================================================================');\n  ret.push('--- ' + diff.oldFileName + (typeof diff.oldHeader === 'undefined' ? '' : '\\t' + diff.oldHeader));\n  ret.push('+++ ' + diff.newFileName + (typeof diff.newHeader === 'undefined' ? '' : '\\t' + diff.newHeader));\n  for (var i = 0; i < diff.hunks.length; i++) {\n    var hunk = diff.hunks[i];\n    // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n    if (hunk.oldLines === 0) {\n      hunk.oldStart -= 1;\n    }\n    if (hunk.newLines === 0) {\n      hunk.newStart -= 1;\n    }\n    ret.push('@@ -' + hunk.oldStart + ',' + hunk.oldLines + ' +' + hunk.newStart + ',' + hunk.newLines + ' @@');\n    ret.push.apply(ret, hunk.lines);\n  }\n  return ret.join('\\n') + '\\n';\n}\nfunction createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  var _options2;\n  if (typeof options === 'function') {\n    options = {\n      callback: options\n    };\n  }\n  if (!((_options2 = options) !== null && _options2 !== void 0 && _options2.callback)) {\n    var patchObj = structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options);\n    if (!patchObj) {\n      return;\n    }\n    return formatPatch(patchObj);\n  } else {\n    var _options3 = options,\n      _callback2 = _options3.callback;\n    structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, _objectSpread2(_objectSpread2({}, options), {}, {\n      callback: function callback(patchObj) {\n        if (!patchObj) {\n          _callback2();\n        } else {\n          _callback2(formatPatch(patchObj));\n        }\n      }\n    }));\n  }\n}\nfunction createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n}\n\n/**\n * Split `text` into an array of lines, including the trailing newline character (where present)\n */\nfunction splitLines(text) {\n  var hasTrailingNl = text.endsWith('\\n');\n  var result = text.split('\\n').map(function (line) {\n    return line + '\\n';\n  });\n  if (hasTrailingNl) {\n    result.pop();\n  } else {\n    result.push(result.pop().slice(0, -1));\n  }\n  return result;\n}\n\nfunction arrayEqual(a, b) {\n  if (a.length !== b.length) {\n    return false;\n  }\n  return arrayStartsWith(a, b);\n}\nfunction arrayStartsWith(array, start) {\n  if (start.length > array.length) {\n    return false;\n  }\n  for (var i = 0; i < start.length; i++) {\n    if (start[i] !== array[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction calcLineCount(hunk) {\n  var _calcOldNewLineCount = calcOldNewLineCount(hunk.lines),\n    oldLines = _calcOldNewLineCount.oldLines,\n    newLines = _calcOldNewLineCount.newLines;\n  if (oldLines !== undefined) {\n    hunk.oldLines = oldLines;\n  } else {\n    delete hunk.oldLines;\n  }\n  if (newLines !== undefined) {\n    hunk.newLines = newLines;\n  } else {\n    delete hunk.newLines;\n  }\n}\nfunction merge(mine, theirs, base) {\n  mine = loadPatch(mine, base);\n  theirs = loadPatch(theirs, base);\n  var ret = {};\n\n  // For index we just let it pass through as it doesn't have any necessary meaning.\n  // Leaving sanity checks on this to the API consumer that may know more about the\n  // meaning in their own context.\n  if (mine.index || theirs.index) {\n    ret.index = mine.index || theirs.index;\n  }\n  if (mine.newFileName || theirs.newFileName) {\n    if (!fileNameChanged(mine)) {\n      // No header or no change in ours, use theirs (and ours if theirs does not exist)\n      ret.oldFileName = theirs.oldFileName || mine.oldFileName;\n      ret.newFileName = theirs.newFileName || mine.newFileName;\n      ret.oldHeader = theirs.oldHeader || mine.oldHeader;\n      ret.newHeader = theirs.newHeader || mine.newHeader;\n    } else if (!fileNameChanged(theirs)) {\n      // No header or no change in theirs, use ours\n      ret.oldFileName = mine.oldFileName;\n      ret.newFileName = mine.newFileName;\n      ret.oldHeader = mine.oldHeader;\n      ret.newHeader = mine.newHeader;\n    } else {\n      // Both changed... figure it out\n      ret.oldFileName = selectField(ret, mine.oldFileName, theirs.oldFileName);\n      ret.newFileName = selectField(ret, mine.newFileName, theirs.newFileName);\n      ret.oldHeader = selectField(ret, mine.oldHeader, theirs.oldHeader);\n      ret.newHeader = selectField(ret, mine.newHeader, theirs.newHeader);\n    }\n  }\n  ret.hunks = [];\n  var mineIndex = 0,\n    theirsIndex = 0,\n    mineOffset = 0,\n    theirsOffset = 0;\n  while (mineIndex < mine.hunks.length || theirsIndex < theirs.hunks.length) {\n    var mineCurrent = mine.hunks[mineIndex] || {\n        oldStart: Infinity\n      },\n      theirsCurrent = theirs.hunks[theirsIndex] || {\n        oldStart: Infinity\n      };\n    if (hunkBefore(mineCurrent, theirsCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(mineCurrent, mineOffset));\n      mineIndex++;\n      theirsOffset += mineCurrent.newLines - mineCurrent.oldLines;\n    } else if (hunkBefore(theirsCurrent, mineCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(theirsCurrent, theirsOffset));\n      theirsIndex++;\n      mineOffset += theirsCurrent.newLines - theirsCurrent.oldLines;\n    } else {\n      // Overlap, merge as best we can\n      var mergedHunk = {\n        oldStart: Math.min(mineCurrent.oldStart, theirsCurrent.oldStart),\n        oldLines: 0,\n        newStart: Math.min(mineCurrent.newStart + mineOffset, theirsCurrent.oldStart + theirsOffset),\n        newLines: 0,\n        lines: []\n      };\n      mergeLines(mergedHunk, mineCurrent.oldStart, mineCurrent.lines, theirsCurrent.oldStart, theirsCurrent.lines);\n      theirsIndex++;\n      mineIndex++;\n      ret.hunks.push(mergedHunk);\n    }\n  }\n  return ret;\n}\nfunction loadPatch(param, base) {\n  if (typeof param === 'string') {\n    if (/^@@/m.test(param) || /^Index:/m.test(param)) {\n      return parsePatch(param)[0];\n    }\n    if (!base) {\n      throw new Error('Must provide a base reference or pass in a patch');\n    }\n    return structuredPatch(undefined, undefined, base, param);\n  }\n  return param;\n}\nfunction fileNameChanged(patch) {\n  return patch.newFileName && patch.newFileName !== patch.oldFileName;\n}\nfunction selectField(index, mine, theirs) {\n  if (mine === theirs) {\n    return mine;\n  } else {\n    index.conflict = true;\n    return {\n      mine: mine,\n      theirs: theirs\n    };\n  }\n}\nfunction hunkBefore(test, check) {\n  return test.oldStart < check.oldStart && test.oldStart + test.oldLines < check.oldStart;\n}\nfunction cloneHunk(hunk, offset) {\n  return {\n    oldStart: hunk.oldStart,\n    oldLines: hunk.oldLines,\n    newStart: hunk.newStart + offset,\n    newLines: hunk.newLines,\n    lines: hunk.lines\n  };\n}\nfunction mergeLines(hunk, mineOffset, mineLines, theirOffset, theirLines) {\n  // This will generally result in a conflicted hunk, but there are cases where the context\n  // is the only overlap where we can successfully merge the content here.\n  var mine = {\n      offset: mineOffset,\n      lines: mineLines,\n      index: 0\n    },\n    their = {\n      offset: theirOffset,\n      lines: theirLines,\n      index: 0\n    };\n\n  // Handle any leading content\n  insertLeading(hunk, mine, their);\n  insertLeading(hunk, their, mine);\n\n  // Now in the overlap content. Scan through and select the best changes from each.\n  while (mine.index < mine.lines.length && their.index < their.lines.length) {\n    var mineCurrent = mine.lines[mine.index],\n      theirCurrent = their.lines[their.index];\n    if ((mineCurrent[0] === '-' || mineCurrent[0] === '+') && (theirCurrent[0] === '-' || theirCurrent[0] === '+')) {\n      // Both modified ...\n      mutualChange(hunk, mine, their);\n    } else if (mineCurrent[0] === '+' && theirCurrent[0] === ' ') {\n      var _hunk$lines;\n      // Mine inserted\n      (_hunk$lines = hunk.lines).push.apply(_hunk$lines, _toConsumableArray(collectChange(mine)));\n    } else if (theirCurrent[0] === '+' && mineCurrent[0] === ' ') {\n      var _hunk$lines2;\n      // Theirs inserted\n      (_hunk$lines2 = hunk.lines).push.apply(_hunk$lines2, _toConsumableArray(collectChange(their)));\n    } else if (mineCurrent[0] === '-' && theirCurrent[0] === ' ') {\n      // Mine removed or edited\n      removal(hunk, mine, their);\n    } else if (theirCurrent[0] === '-' && mineCurrent[0] === ' ') {\n      // Their removed or edited\n      removal(hunk, their, mine, true);\n    } else if (mineCurrent === theirCurrent) {\n      // Context identity\n      hunk.lines.push(mineCurrent);\n      mine.index++;\n      their.index++;\n    } else {\n      // Context mismatch\n      conflict(hunk, collectChange(mine), collectChange(their));\n    }\n  }\n\n  // Now push anything that may be remaining\n  insertTrailing(hunk, mine);\n  insertTrailing(hunk, their);\n  calcLineCount(hunk);\n}\nfunction mutualChange(hunk, mine, their) {\n  var myChanges = collectChange(mine),\n    theirChanges = collectChange(their);\n  if (allRemoves(myChanges) && allRemoves(theirChanges)) {\n    // Special case for remove changes that are supersets of one another\n    if (arrayStartsWith(myChanges, theirChanges) && skipRemoveSuperset(their, myChanges, myChanges.length - theirChanges.length)) {\n      var _hunk$lines3;\n      (_hunk$lines3 = hunk.lines).push.apply(_hunk$lines3, _toConsumableArray(myChanges));\n      return;\n    } else if (arrayStartsWith(theirChanges, myChanges) && skipRemoveSuperset(mine, theirChanges, theirChanges.length - myChanges.length)) {\n      var _hunk$lines4;\n      (_hunk$lines4 = hunk.lines).push.apply(_hunk$lines4, _toConsumableArray(theirChanges));\n      return;\n    }\n  } else if (arrayEqual(myChanges, theirChanges)) {\n    var _hunk$lines5;\n    (_hunk$lines5 = hunk.lines).push.apply(_hunk$lines5, _toConsumableArray(myChanges));\n    return;\n  }\n  conflict(hunk, myChanges, theirChanges);\n}\nfunction removal(hunk, mine, their, swap) {\n  var myChanges = collectChange(mine),\n    theirChanges = collectContext(their, myChanges);\n  if (theirChanges.merged) {\n    var _hunk$lines6;\n    (_hunk$lines6 = hunk.lines).push.apply(_hunk$lines6, _toConsumableArray(theirChanges.merged));\n  } else {\n    conflict(hunk, swap ? theirChanges : myChanges, swap ? myChanges : theirChanges);\n  }\n}\nfunction conflict(hunk, mine, their) {\n  hunk.conflict = true;\n  hunk.lines.push({\n    conflict: true,\n    mine: mine,\n    theirs: their\n  });\n}\nfunction insertLeading(hunk, insert, their) {\n  while (insert.offset < their.offset && insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n    insert.offset++;\n  }\n}\nfunction insertTrailing(hunk, insert) {\n  while (insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n  }\n}\nfunction collectChange(state) {\n  var ret = [],\n    operation = state.lines[state.index][0];\n  while (state.index < state.lines.length) {\n    var line = state.lines[state.index];\n\n    // Group additions that are immediately after subtractions and treat them as one \"atomic\" modify change.\n    if (operation === '-' && line[0] === '+') {\n      operation = '+';\n    }\n    if (operation === line[0]) {\n      ret.push(line);\n      state.index++;\n    } else {\n      break;\n    }\n  }\n  return ret;\n}\nfunction collectContext(state, matchChanges) {\n  var changes = [],\n    merged = [],\n    matchIndex = 0,\n    contextChanges = false,\n    conflicted = false;\n  while (matchIndex < matchChanges.length && state.index < state.lines.length) {\n    var change = state.lines[state.index],\n      match = matchChanges[matchIndex];\n\n    // Once we've hit our add, then we are done\n    if (match[0] === '+') {\n      break;\n    }\n    contextChanges = contextChanges || change[0] !== ' ';\n    merged.push(match);\n    matchIndex++;\n\n    // Consume any additions in the other block as a conflict to attempt\n    // to pull in the remaining context after this\n    if (change[0] === '+') {\n      conflicted = true;\n      while (change[0] === '+') {\n        changes.push(change);\n        change = state.lines[++state.index];\n      }\n    }\n    if (match.substr(1) === change.substr(1)) {\n      changes.push(change);\n      state.index++;\n    } else {\n      conflicted = true;\n    }\n  }\n  if ((matchChanges[matchIndex] || '')[0] === '+' && contextChanges) {\n    conflicted = true;\n  }\n  if (conflicted) {\n    return changes;\n  }\n  while (matchIndex < matchChanges.length) {\n    merged.push(matchChanges[matchIndex++]);\n  }\n  return {\n    merged: merged,\n    changes: changes\n  };\n}\nfunction allRemoves(changes) {\n  return changes.reduce(function (prev, change) {\n    return prev && change[0] === '-';\n  }, true);\n}\nfunction skipRemoveSuperset(state, removeChanges, delta) {\n  for (var i = 0; i < delta; i++) {\n    var changeContent = removeChanges[removeChanges.length - delta + i].substr(1);\n    if (state.lines[state.index + i] !== ' ' + changeContent) {\n      return false;\n    }\n  }\n  state.index += delta;\n  return true;\n}\nfunction calcOldNewLineCount(lines) {\n  var oldLines = 0;\n  var newLines = 0;\n  lines.forEach(function (line) {\n    if (typeof line !== 'string') {\n      var myCount = calcOldNewLineCount(line.mine);\n      var theirCount = calcOldNewLineCount(line.theirs);\n      if (oldLines !== undefined) {\n        if (myCount.oldLines === theirCount.oldLines) {\n          oldLines += myCount.oldLines;\n        } else {\n          oldLines = undefined;\n        }\n      }\n      if (newLines !== undefined) {\n        if (myCount.newLines === theirCount.newLines) {\n          newLines += myCount.newLines;\n        } else {\n          newLines = undefined;\n        }\n      }\n    } else {\n      if (newLines !== undefined && (line[0] === '+' || line[0] === ' ')) {\n        newLines++;\n      }\n      if (oldLines !== undefined && (line[0] === '-' || line[0] === ' ')) {\n        oldLines++;\n      }\n    }\n  });\n  return {\n    oldLines: oldLines,\n    newLines: newLines\n  };\n}\n\nfunction reversePatch(structuredPatch) {\n  if (Array.isArray(structuredPatch)) {\n    return structuredPatch.map(reversePatch).reverse();\n  }\n  return _objectSpread2(_objectSpread2({}, structuredPatch), {}, {\n    oldFileName: structuredPatch.newFileName,\n    oldHeader: structuredPatch.newHeader,\n    newFileName: structuredPatch.oldFileName,\n    newHeader: structuredPatch.oldHeader,\n    hunks: structuredPatch.hunks.map(function (hunk) {\n      return {\n        oldLines: hunk.newLines,\n        oldStart: hunk.newStart,\n        newLines: hunk.oldLines,\n        newStart: hunk.oldStart,\n        lines: hunk.lines.map(function (l) {\n          if (l.startsWith('-')) {\n            return \"+\".concat(l.slice(1));\n          }\n          if (l.startsWith('+')) {\n            return \"-\".concat(l.slice(1));\n          }\n          return l;\n        })\n      };\n    })\n  });\n}\n\n// See: http://code.google.com/p/google-diff-match-patch/wiki/API\nfunction convertChangesToDMP(changes) {\n  var ret = [],\n    change,\n    operation;\n  for (var i = 0; i < changes.length; i++) {\n    change = changes[i];\n    if (change.added) {\n      operation = 1;\n    } else if (change.removed) {\n      operation = -1;\n    } else {\n      operation = 0;\n    }\n    ret.push([operation, change.value]);\n  }\n  return ret;\n}\n\nfunction convertChangesToXML(changes) {\n  var ret = [];\n  for (var i = 0; i < changes.length; i++) {\n    var change = changes[i];\n    if (change.added) {\n      ret.push('<ins>');\n    } else if (change.removed) {\n      ret.push('<del>');\n    }\n    ret.push(escapeHTML(change.value));\n    if (change.added) {\n      ret.push('</ins>');\n    } else if (change.removed) {\n      ret.push('</del>');\n    }\n  }\n  return ret.join('');\n}\nfunction escapeHTML(s) {\n  var n = s;\n  n = n.replace(/&/g, '&amp;');\n  n = n.replace(/</g, '&lt;');\n  n = n.replace(/>/g, '&gt;');\n  n = n.replace(/\"/g, '&quot;');\n  return n;\n}\n\nexport { Diff, applyPatch, applyPatches, canonicalize, convertChangesToDMP, convertChangesToXML, createPatch, createTwoFilesPatch, diffArrays, diffChars, diffCss, diffJson, diffLines, diffSentences, diffTrimmedLines, diffWords, diffWordsWithSpace, formatPatch, merge, parsePatch, reversePatch, structuredPatch };\n","/**\n * Edit block display utilities.\n * Matches the server-side edit protocol markers for rendering.\n */\n\nimport { diffLines, diffWords } from 'diff';\n\nconst EDIT_START = '<<<< EDIT';\nconst EDIT_SEP = '==== REPLACE';\nconst EDIT_END = '>>>> EDIT END';\n\n/**\n * Split assistant text into segments: plain text and edit blocks.\n * Returns array of { type: 'text'|'edit', content, filePath?, oldLines?, newLines? }\n */\nexport function segmentResponse(text) {\n  if (!text) return [];\n\n  const lines = text.split('\\n');\n  const segments = [];\n  let textBuf = [];\n  let state = 'text'; // text | old | new\n  let candidatePath = '';\n  let oldLines = [];\n  let newLines = [];\n\n  function flushText() {\n    if (textBuf.length > 0) {\n      segments.push({ type: 'text', content: textBuf.join('\\n') });\n      textBuf = [];\n    }\n  }\n\n  for (const line of lines) {\n    if (state === 'text') {\n      if (line.trim() === EDIT_START && candidatePath) {\n        flushText();\n        // Remove the path line from text buffer  it was already flushed or is candidatePath\n        state = 'old';\n        oldLines = [];\n        newLines = [];\n        continue;\n      }\n      if (_looksLikePath(line.trim())) {\n        candidatePath = line.trim();\n      } else {\n        candidatePath = '';\n      }\n      textBuf.push(line);\n\n    } else if (state === 'old') {\n      if (line.trim() === EDIT_SEP) {\n        state = 'new';\n      } else {\n        oldLines.push(line);\n      }\n\n    } else if (state === 'new') {\n      if (line.trim() === EDIT_END) {\n        // Remove the trailing path line from previous text segment\n        if (segments.length > 0 && segments[segments.length - 1].type === 'text') {\n          const prev = segments[segments.length - 1];\n          const prevLines = prev.content.split('\\n');\n          if (prevLines.length > 0 && prevLines[prevLines.length - 1].trim() === candidatePath) {\n            prevLines.pop();\n            prev.content = prevLines.join('\\n');\n            if (!prev.content.trim()) segments.pop();\n          }\n        }\n\n        segments.push({\n          type: 'edit',\n          filePath: candidatePath,\n          oldLines: [...oldLines],\n          newLines: [...newLines],\n          isCreate: oldLines.length === 0,\n        });\n        state = 'text';\n        candidatePath = '';\n        oldLines = [];\n        newLines = [];\n      } else {\n        newLines.push(line);\n      }\n    }\n  }\n\n  // Flush remaining\n  if (state === 'text') {\n    flushText();\n  } else {\n    // Incomplete edit block  render as in-progress\n    flushText();\n    if (candidatePath) {\n      segments.push({\n        type: 'edit-pending',\n        filePath: candidatePath,\n        oldLines: [...oldLines],\n        newLines: [...newLines],\n      });\n    }\n  }\n\n  return segments;\n}\n\nfunction _looksLikePath(s) {\n  if (!s || s.length > 200) return false;\n  if (s.startsWith('#') || s.startsWith('//') || s.startsWith('/*') ||\n      s.startsWith('*') || s.startsWith('-') || s.startsWith('>') ||\n      s.startsWith('```')) return false;\n  return s.includes('/') || s.includes('\\\\') ||\n    (s.includes('.') && !s.includes(' '));\n}\n\n/**\n * Compute a unified diff for display using Myers diff (via 'diff' library).\n * Returns array of:\n *   { type: 'context', text }\n *   { type: 'remove', text, charDiff? }\n *   { type: 'add', text, charDiff? }\n *\n * Adjacent remove+add runs are paired for character-level highlighting\n * on similar lines, matching GitHub's diff rendering style.\n */\nexport function computeDiff(oldLines, newLines) {\n  const oldStr = oldLines.join('\\n');\n  const newStr = newLines.join('\\n');\n  const changes = diffLines(oldStr, newStr);\n\n  // First pass: collect raw lines with types\n  const raw = [];\n  for (const part of changes) {\n    const lines = part.value.replace(/\\n$/, '').split('\\n');\n    const type = part.added ? 'add' : part.removed ? 'remove' : 'context';\n    for (const line of lines) {\n      raw.push({ type, text: line });\n    }\n  }\n\n  // Second pass: pair adjacent remove/add runs for char-level diff\n  const result = [];\n  let i = 0;\n  while (i < raw.length) {\n    if (raw[i].type === 'context') {\n      result.push(raw[i]);\n      i++;\n      continue;\n    }\n\n    // Collect consecutive remove lines\n    const removes = [];\n    while (i < raw.length && raw[i].type === 'remove') {\n      removes.push(raw[i].text);\n      i++;\n    }\n    // Collect consecutive add lines\n    const adds = [];\n    while (i < raw.length && raw[i].type === 'add') {\n      adds.push(raw[i].text);\n      i++;\n    }\n\n    // Pair removes and adds for char-level highlighting\n    const paired = Math.min(removes.length, adds.length);\n    for (let j = 0; j < paired; j++) {\n      const charDiff = computeCharDiff(removes[j], adds[j]);\n      result.push({ type: 'remove', text: removes[j], charDiff: charDiff.old });\n      result.push({ type: 'add', text: adds[j], charDiff: charDiff.new });\n    }\n    for (let j = paired; j < removes.length; j++) {\n      result.push({ type: 'remove', text: removes[j] });\n    }\n    for (let j = paired; j < adds.length; j++) {\n      result.push({ type: 'add', text: adds[j] });\n    }\n  }\n\n  return result;\n}\n\n/**\n * Compute character-level diff between two strings using word-level diffing.\n * Returns { old: segments[], new: segments[] } where each segment is\n * { type: 'equal'|'delete'|'insert', text }.\n *\n * The 'old' array contains 'equal' and 'delete' segments.\n * The 'new' array contains 'equal' and 'insert' segments.\n */\nexport function computeCharDiff(oldStr, newStr) {\n  const changes = diffWords(oldStr, newStr);\n\n  const oldSegs = [];\n  const newSegs = [];\n\n  for (const part of changes) {\n    if (part.added) {\n      newSegs.push({ type: 'insert', text: part.value });\n    } else if (part.removed) {\n      oldSegs.push({ type: 'delete', text: part.value });\n    } else {\n      oldSegs.push({ type: 'equal', text: part.value });\n      newSegs.push({ type: 'equal', text: part.value });\n    }\n  }\n\n  return {\n    old: _mergeSegments(oldSegs),\n    new: _mergeSegments(newSegs),\n  };\n}\n\n/**\n * Merge consecutive segments of the same type.\n */\nfunction _mergeSegments(segs) {\n  if (segs.length === 0) return [];\n  const merged = [{ ...segs[0] }];\n  for (let i = 1; i < segs.length; i++) {\n    const last = merged[merged.length - 1];\n    if (segs[i].type === last.type) {\n      last.text += segs[i].text;\n    } else {\n      merged.push({ ...segs[i] });\n    }\n  }\n  return merged;\n}","import { LitElement, html, css, nothing } from 'lit';\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport { RpcMixin } from '../rpc-mixin.js';\nimport { renderMarkdown } from '../utils/markdown.js';\nimport { segmentResponse, computeDiff } from '../utils/edit-blocks.js';\n\n/**\n * Chat panel  renders messages, handles streaming display, manages scrolling.\n */\nclass ChatPanel extends RpcMixin(LitElement) {\n  static properties = {\n    messages: { type: Array },\n    streaming: { type: Boolean },\n    streamContent: { type: String },\n    editResults: { type: Array },\n    /** Known repo file paths (from file tree) for mention detection */\n    repoFiles: { type: Array },\n    /** Currently selected file paths */\n    selectedFiles: { type: Object },\n  };\n\n  static styles = css`\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    .messages-wrapper {\n      flex: 1;\n      overflow: hidden;\n      position: relative;\n    }\n\n    .messages {\n      height: 100%;\n      overflow-y: auto;\n      padding: 12px 16px;\n      scroll-behavior: smooth;\n    }\n\n    .sr-only {\n      position: absolute;\n      width: 1px;\n      height: 1px;\n      padding: 0;\n      margin: -1px;\n      overflow: hidden;\n      clip: rect(0,0,0,0);\n      white-space: nowrap;\n      border: 0;\n    }\n\n    .message-card {\n      margin-bottom: 12px;\n      padding: 10px 14px;\n      border-radius: var(--radius-md);\n      line-height: 1.5;\n      max-width: 100%;\n      overflow-wrap: break-word;\n      content-visibility: auto;\n      contain-intrinsic-size: auto 120px;\n    }\n\n    .message-card.force-visible {\n      content-visibility: visible;\n    }\n\n    .message-card.user {\n      background: var(--bg-elevated);\n      border-left: 3px solid var(--accent-primary);\n    }\n\n    .message-card.assistant {\n      background: var(--bg-surface);\n      border-left: 3px solid var(--accent-success);\n    }\n\n    .message-card.assistant.streaming {\n      border-left-color: var(--accent-warning);\n    }\n\n    /* Message action toolbars (top + bottom) */\n    .message-card {\n      position: relative;\n    }\n\n    .msg-actions {\n      position: absolute;\n      right: 8px;\n      display: flex;\n      gap: 2px;\n      opacity: 0;\n      transition: opacity var(--transition-fast);\n      z-index: 2;\n    }\n    .msg-actions.top { top: 6px; }\n    .msg-actions.bottom { bottom: 6px; }\n    .message-card:hover .msg-actions {\n      opacity: 1;\n    }\n\n    .msg-action-btn {\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: 3px;\n      padding: 2px 6px;\n      font-size: 12px;\n      cursor: pointer;\n      color: var(--text-muted);\n      line-height: 1;\n      transition: color var(--transition-fast), background var(--transition-fast);\n    }\n    .msg-action-btn:hover {\n      color: var(--text-primary);\n      background: var(--bg-surface);\n    }\n    .msg-action-btn.copied {\n      color: var(--accent-success);\n    }\n\n    .role-label {\n      font-size: 11px;\n      font-weight: 600;\n      text-transform: uppercase;\n      color: var(--text-muted);\n      margin-bottom: 6px;\n      letter-spacing: 0.5px;\n    }\n\n    /* Markdown content styles */\n    .md-content {\n      font-size: 13.5px;\n      color: var(--text-primary);\n    }\n\n    .md-content p { margin: 0.4em 0; }\n    .md-content p:first-child { margin-top: 0; }\n    .md-content p:last-child { margin-bottom: 0; }\n\n    .md-content code {\n      font-family: var(--font-mono);\n      font-size: 12.5px;\n      background: var(--bg-primary);\n      padding: 1px 5px;\n      border-radius: 3px;\n      color: var(--accent-primary);\n    }\n\n    .md-content pre.code-block {\n      position: relative;\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 10px 12px;\n      margin: 8px 0;\n      overflow-x: auto;\n    }\n\n    .md-content pre.code-block code {\n      background: none;\n      padding: 0;\n      color: var(--text-primary);\n      font-size: 12px;\n      line-height: 1.5;\n    }\n\n    .md-content pre .code-lang {\n      position: absolute;\n      top: 4px;\n      right: 8px;\n      font-size: 10px;\n      color: var(--text-muted);\n      font-family: var(--font-sans);\n    }\n\n    .md-content pre .code-copy-btn {\n      position: absolute;\n      top: 4px;\n      right: 4px;\n      padding: 2px 6px;\n      border: none;\n      border-radius: 3px;\n      background: transparent;\n      color: var(--text-muted);\n      font-size: 12px;\n      cursor: pointer;\n      opacity: 0;\n      transition: opacity var(--transition-fast), background var(--transition-fast);\n      z-index: 1;\n      font-family: var(--font-sans);\n      line-height: 1;\n    }\n    .md-content pre .code-copy-btn:hover {\n      background: var(--bg-elevated);\n      color: var(--text-primary);\n    }\n    .md-content pre:hover .code-copy-btn {\n      opacity: 1;\n    }\n    .md-content pre .code-copy-btn.copied {\n      opacity: 1;\n      color: var(--accent-success);\n    }\n\n    /* Shift lang label left when copy button is present */\n    .md-content pre .code-lang {\n      right: 36px;\n    }\n\n    .md-content ul, .md-content ol { margin: 0.4em 0; padding-left: 1.5em; }\n    .md-content li { margin: 0.2em 0; }\n    .md-content blockquote {\n      border-left: 3px solid var(--border-light);\n      padding-left: 12px;\n      color: var(--text-secondary);\n      margin: 0.4em 0;\n    }\n    .md-content h1, .md-content h2, .md-content h3,\n    .md-content h4, .md-content h5, .md-content h6 {\n      margin: 0.6em 0 0.3em;\n      color: var(--text-primary);\n    }\n    .md-content h1 { font-size: 1.3em; }\n    .md-content h2 { font-size: 1.15em; }\n    .md-content h3 { font-size: 1.05em; }\n    .md-content a { color: var(--accent-primary); text-decoration: none; }\n    .md-content a:hover { text-decoration: underline; }\n    .md-content table {\n      border-collapse: collapse;\n      margin: 8px 0;\n      font-size: 12.5px;\n    }\n    .md-content th, .md-content td {\n      border: 1px solid var(--border-color);\n      padding: 4px 8px;\n    }\n    .md-content th { background: var(--bg-elevated); font-weight: 600; }\n\n    /* highlight.js dark theme overrides */\n    .md-content .hljs-keyword { color: #c792ea; }\n    .md-content .hljs-string { color: #c3e88d; }\n    .md-content .hljs-number { color: #f78c6c; }\n    .md-content .hljs-comment { color: #546e7a; font-style: italic; }\n    .md-content .hljs-function { color: #82aaff; }\n    .md-content .hljs-built_in { color: #ffcb6b; }\n    .md-content .hljs-title { color: #82aaff; }\n    .md-content .hljs-params { color: var(--text-primary); }\n    .md-content .hljs-attr { color: #ffcb6b; }\n    .md-content .hljs-literal { color: #f78c6c; }\n    .md-content .hljs-type { color: #ffcb6b; }\n\n    /* Edit block display */\n    .edit-block {\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      margin: 8px 0;\n      overflow: hidden;\n    }\n\n    .edit-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 6px 10px;\n      background: var(--bg-elevated);\n      border-bottom: 1px solid var(--border-color);\n      font-size: 12px;\n    }\n\n    .edit-file-path {\n      font-family: var(--font-mono);\n      color: var(--accent-primary);\n      cursor: pointer;\n    }\n    .edit-file-path:hover { text-decoration: underline; }\n\n    .edit-badge {\n      font-size: 10px;\n      padding: 1px 6px;\n      border-radius: 3px;\n      font-weight: 600;\n      text-transform: uppercase;\n    }\n    .edit-badge.applied { background: #1b5e20; color: #a5d6a7; }\n    .edit-badge.failed { background: #b71c1c; color: #ef9a9a; }\n    .edit-badge.skipped { background: #4e342e; color: #bcaaa4; }\n    .edit-badge.pending { background: #e65100; color: #ffcc80; }\n    .edit-badge.new { background: #1a237e; color: #9fa8da; }\n\n    .edit-diff {\n      padding: 6px 0;\n      font-family: var(--font-mono);\n      font-size: 11.5px;\n      line-height: 1.5;\n      overflow-x: auto;\n    }\n\n    .diff-line { padding: 0 10px; white-space: pre; display: block; }\n    .diff-line.context { background: #0d1117; color: #e6edf3; }\n    .diff-line.remove { background: #2d1215; color: #ffa198; }\n    .diff-line.add { background: #122117; color: #7ee787; }\n\n    .diff-line-prefix {\n      display: inline-block;\n      width: 1.2em;\n      user-select: none;\n      color: inherit;\n      opacity: 0.6;\n    }\n\n    /* Character-level highlight within changed lines */\n    .diff-line.remove .diff-change { background: #6d3038; border-radius: 2px; padding: 0 2px; }\n    .diff-line.add .diff-change    { background: #2b6331; border-radius: 2px; padding: 0 2px; }\n\n    .edit-error {\n      padding: 6px 10px;\n      font-size: 11px;\n      color: var(--accent-error);\n      border-top: 1px solid var(--border-color);\n    }\n\n    /* File mentions */\n    .file-mention {\n      color: var(--accent-primary);\n      cursor: pointer;\n      text-decoration: none;\n      border-radius: 2px;\n      transition: background var(--transition-fast);\n    }\n    .file-mention:hover {\n      text-decoration: underline;\n      background: rgba(100, 180, 255, 0.1);\n    }\n    .file-mention.in-context {\n      color: var(--text-muted);\n    }\n\n    /* File summary section */\n    .file-summary {\n      margin: 8px 0;\n      padding: 8px 12px;\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      font-size: 12px;\n    }\n\n    .file-summary-header {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      margin-bottom: 6px;\n      color: var(--text-secondary);\n      font-weight: 600;\n    }\n\n    .file-summary-header .add-all-btn {\n      margin-left: auto;\n      background: none;\n      border: 1px solid var(--accent-primary);\n      color: var(--accent-primary);\n      padding: 2px 8px;\n      border-radius: var(--radius-sm);\n      cursor: pointer;\n      font-size: 11px;\n      transition: background var(--transition-fast);\n    }\n    .file-summary-header .add-all-btn:hover {\n      background: rgba(100, 180, 255, 0.15);\n    }\n\n    .file-chips {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 4px;\n    }\n\n    .file-chip {\n      display: inline-flex;\n      align-items: center;\n      gap: 4px;\n      padding: 2px 8px;\n      border-radius: var(--radius-sm);\n      font-size: 11px;\n      font-family: var(--font-mono);\n      cursor: pointer;\n      transition: background var(--transition-fast);\n      border: 1px solid var(--border-color);\n    }\n    .file-chip.in-context {\n      background: var(--bg-surface);\n      color: var(--text-muted);\n      cursor: pointer;\n    }\n    .file-chip.not-in-context {\n      background: rgba(100, 180, 255, 0.08);\n      border-color: var(--accent-primary);\n      color: var(--accent-primary);\n    }\n    .file-chip.not-in-context:hover {\n      background: rgba(100, 180, 255, 0.18);\n    }\n\n    /* Edit summary banner */\n    .edit-summary {\n      margin: 8px 0;\n      padding: 8px 12px;\n      border-radius: var(--radius-sm);\n      font-size: 12px;\n    }\n    .edit-summary.success { background: rgba(102,187,106,0.1); border: 1px solid rgba(102,187,106,0.3); }\n    .edit-summary.has-failures { background: rgba(239,83,80,0.1); border: 1px solid rgba(239,83,80,0.3); }\n\n    .edit-summary-counts {\n      display: flex;\n      gap: 12px;\n      margin-bottom: 4px;\n    }\n    .edit-summary-counts span { font-weight: 600; }\n    .count-applied { color: var(--accent-success); }\n    .count-failed { color: var(--accent-error); }\n    .count-skipped { color: var(--text-muted); }\n\n    /* Scroll to bottom button */\n    .scroll-to-bottom {\n      position: absolute;\n      bottom: 12px;\n      right: 20px;\n      width: 36px;\n      height: 36px;\n      border-radius: 50%;\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      color: var(--text-secondary);\n      font-size: 16px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      box-shadow: var(--shadow-md);\n      transition: opacity var(--transition-fast);\n      z-index: 5;\n    }\n    .scroll-to-bottom:hover { color: var(--text-primary); background: var(--bg-surface); }\n\n    /* User image thumbnails */\n    .user-images {\n      margin-top: 6px;\n      display: flex;\n      flex-wrap: wrap;\n      gap: 6px;\n    }\n    .user-image-thumb {\n      max-width: 200px;\n      max-height: 200px;\n      border-radius: 4px;\n      cursor: pointer;\n      border: 1px solid var(--border-color);\n      transition: border-color var(--transition-fast), box-shadow var(--transition-fast);\n    }\n    .user-image-thumb:hover {\n      border-color: var(--accent-primary);\n      box-shadow: 0 0 8px rgba(100, 180, 255, 0.2);\n    }\n\n    /* Image lightbox overlay */\n    .image-lightbox {\n      position: fixed;\n      inset: 0;\n      z-index: 1000;\n      background: rgba(0,0,0,0.85);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      outline: none;\n    }\n    .image-lightbox img {\n      max-width: 90vw;\n      max-height: 90vh;\n      border-radius: var(--radius-md);\n      box-shadow: 0 4px 30px rgba(0,0,0,0.5);\n    }\n\n    #scroll-sentinel { height: 0; overflow: hidden; }\n\n    .empty-state {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--text-muted);\n      font-size: 14px;\n    }\n  `;\n\n  constructor() {\n    super();\n    this.messages = [];\n    this.streaming = false;\n    this.streamContent = '';\n    this.editResults = [];\n    this.repoFiles = [];\n    this.selectedFiles = new Set();\n    this._userScrolledUp = false;\n    this._pendingScroll = false;\n    this._observer = null;\n    this._lightboxSrc = null;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    window.addEventListener('stream-chunk', this._onStreamChunk.bind(this));\n    window.addEventListener('stream-complete', this._onStreamComplete.bind(this));\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    window.removeEventListener('stream-chunk', this._onStreamChunk);\n    window.removeEventListener('stream-complete', this._onStreamComplete);\n    if (this._observer) this._observer.disconnect();\n  }\n\n  firstUpdated() {\n    // Set up IntersectionObserver on scroll sentinel\n    const sentinel = this.shadowRoot.getElementById('scroll-sentinel');\n    const container = this.shadowRoot.querySelector('.messages');\n    if (sentinel && container) {\n      this._observer = new IntersectionObserver(\n        ([entry]) => {\n          if (entry.isIntersecting) {\n            this._userScrolledUp = false;\n          }\n        },\n        { root: container, threshold: 0.1 }\n      );\n      this._observer.observe(sentinel);\n\n      // Detect user scrolling up via wheel\n      container.addEventListener('wheel', (e) => {\n        if (e.deltaY < 0) {\n          this._userScrolledUp = true;\n          this.requestUpdate();\n        }\n      });\n    }\n  }\n\n  //  Streaming events \n\n  _onStreamChunk(e) {\n    const { content } = e.detail;\n    this.streamContent = content;\n    this.streaming = true;\n    this._scrollToBottom();\n  }\n\n  _onStreamComplete(e) {\n    const { result } = e.detail;\n    this.streaming = false;\n    this.editResults = result.edit_results || [];\n\n    // The parent should add the exchange to messages\n    this.dispatchEvent(new CustomEvent('stream-finished', {\n      detail: result,\n      bubbles: true, composed: true,\n    }));\n\n    this.streamContent = '';\n    this._scrollToBottom();\n  }\n\n  //  Scrolling \n\n  _scrollToBottom() {\n    if (this._userScrolledUp) return;\n    if (this._pendingScroll) return;\n    this._pendingScroll = true;\n\n    this.updateComplete.then(() => {\n      requestAnimationFrame(() => {\n        const sentinel = this.shadowRoot.getElementById('scroll-sentinel');\n        if (sentinel) {\n          sentinel.scrollIntoView({ behavior: 'auto', block: 'end' });\n        }\n        this._pendingScroll = false;\n      });\n    });\n  }\n\n  _onScrollToBottomClick() {\n    this._userScrolledUp = false;\n    const sentinel = this.shadowRoot.getElementById('scroll-sentinel');\n    if (sentinel) sentinel.scrollIntoView({ behavior: 'smooth', block: 'end' });\n    this.requestUpdate();\n  }\n\n  //  Edit result lookup \n\n  _getEditResult(filePath) {\n    if (!this.editResults) return null;\n    return this.editResults.find(r => r.file_path === filePath);\n  }\n\n  //  Render \n\n  render() {\n    const allMessages = this.messages || [];\n    const hasContent = allMessages.length > 0 || this.streaming;\n\n    return html`\n      <div class=\"messages-wrapper\">\n        <div class=\"messages\" role=\"log\" aria-label=\"Conversation messages\" aria-live=\"polite\">\n          ${!hasContent ? html`\n            <div class=\"empty-state\">Send a message to start</div>\n          ` : nothing}\n\n          ${allMessages.map((msg, idx) => this._renderMessage(msg, idx, allMessages.length))}\n\n          ${this.streaming ? this._renderStreamingMessage() : nothing}\n\n          <div id=\"scroll-sentinel\" aria-hidden=\"true\"></div>\n        </div>\n\n        ${this._userScrolledUp ? html`\n          <button class=\"scroll-to-bottom\" @click=${this._onScrollToBottomClick}\n            aria-label=\"Scroll to bottom of conversation\"></button>\n        ` : nothing}\n      </div>\n\n      ${this._lightboxSrc ? html`\n        <div class=\"image-lightbox\" role=\"dialog\" aria-label=\"Image preview\"\n          @click=${this._closeLightbox} @keydown=${this._onLightboxKeyDown}>\n          <img src=${this._lightboxSrc} alt=\"Enlarged image\" @click=${(e) => e.stopPropagation()}>\n          <span class=\"sr-only\">Press Escape to close</span>\n        </div>\n      ` : nothing}\n    `;\n  }\n\n  _renderMessage(msg, idx, total) {\n    const isUser = msg.role === 'user';\n    const isLast = idx === (this.messages || []).length - 1;\n    const forceVisible = total - idx <= 15;\n\n    const actionBar = (pos) => html`\n      <div class=\"msg-actions ${pos}\" role=\"toolbar\" aria-label=\"Message actions\">\n        <button class=\"msg-action-btn\" title=\"Copy to clipboard\" aria-label=\"Copy message to clipboard\"\n          @click=${(e) => this._onCopyMessage(e, msg)}></button>\n        <button class=\"msg-action-btn\" title=\"Copy to prompt\" aria-label=\"Copy message to input\"\n          @click=${() => this._onCopyToPrompt(msg)}></button>\n      </div>\n    `;\n\n    return html`\n      <div class=\"message-card ${msg.role} ${forceVisible ? 'force-visible' : ''}\" role=\"article\"\n        aria-label=\"${isUser ? 'Your message' : 'Assistant response'}\">\n        ${actionBar('top')}\n        <div class=\"role-label\" aria-hidden=\"true\">${isUser ? 'You' : 'Assistant'}</div>\n        ${isUser\n          ? html`<div class=\"md-content\" @click=${this._onUserContentClick}>${unsafeHTML(this._renderUserContent(msg))}</div>`\n          : this._renderAssistantContent(msg.content, isLast, true)\n        }\n        ${actionBar('bottom')}\n      </div>\n    `;\n  }\n\n  _renderUserContent(msg) {\n    const content = msg.content;\n    let textHtml = '';\n    if (typeof content === 'string') {\n      // Simple escape for user messages  render as plain text with line breaks\n      textHtml = content\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\\n/g, '<br>');\n    } else if (Array.isArray(content)) {\n      // Multimodal content from loaded sessions\n      textHtml = content.map(block => {\n        if (block.type === 'text') return block.text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\n/g, '<br>');\n        if (block.type === 'image_url') return `<img class=\"user-image-thumb\" src=\"${block.image_url.url}\" title=\"Click to enlarge\">`;\n        return '';\n      }).join('');\n    } else {\n      textHtml = String(content);\n    }\n\n    // Append image thumbnails stored on the message object (current session)\n    if (msg.images && msg.images.length > 0) {\n      const imgs = msg.images.map(src =>\n        `<img class=\"user-image-thumb\" src=\"${src}\" title=\"Click to enlarge\">`\n      ).join('');\n      textHtml += `<div class=\"user-images\">${imgs}</div>`;\n    }\n\n    return textHtml;\n  }\n\n  _renderAssistantContent(content, showEditResults, isFinal) {\n    const segments = segmentResponse(content);\n    const resultMap = showEditResults ? this.editResults : [];\n\n    // Collect all mentioned files across text segments and edit blocks (final render only)\n    let allMentionedFiles = [];\n\n    return html`\n      <div class=\"md-content\" @click=${this._onMdContentClick}>\n        ${segments.map(seg => {\n          if (seg.type === 'text') {\n            if (isFinal && this.repoFiles?.length > 0) {\n              const rendered = renderMarkdown(seg.content);\n              const { html: processedHtml, files } = this._detectFileMentions(rendered, seg.content);\n              allMentionedFiles.push(...files);\n              return html`${unsafeHTML(processedHtml)}`;\n            }\n            return html`${unsafeHTML(renderMarkdown(seg.content))}`;\n          }\n          if (seg.type === 'edit') {\n            const result = resultMap.find(r => r.file_path === seg.filePath);\n            // Collect edit block file paths for the summary section\n            if (isFinal && seg.filePath) allMentionedFiles.push(seg.filePath);\n            return this._renderEditBlock(seg, result);\n          }\n          if (seg.type === 'edit-pending') {\n            return this._renderEditBlock(seg, { status: 'pending' });\n          }\n          return nothing;\n        })}\n        ${showEditResults && resultMap.length > 0 ? this._renderEditSummary(resultMap) : nothing}\n        ${isFinal ? this._renderFileSummary([...new Set(allMentionedFiles)]) : nothing}\n      </div>\n    `;\n  }\n\n  _renderEditBlock(seg, result) {\n    const diff = computeDiff(seg.oldLines || [], seg.newLines || []);\n    const status = result?.status || (seg.isCreate ? 'new' : '');\n\n    return html`\n      <div class=\"edit-block\" role=\"region\" aria-label=\"Edit block for ${seg.filePath}\">\n        <div class=\"edit-header\">\n          <span class=\"edit-file-path\" role=\"link\" tabindex=\"0\"\n            @click=${() => this._onEditFileClick(seg.filePath)}\n            @keydown=${(e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this._onEditFileClick(seg.filePath); } }}>\n            ${seg.filePath}\n          </span>\n          ${status ? html`<span class=\"edit-badge ${status}\" role=\"status\">${status}</span>` : nothing}\n        </div>\n        <div class=\"edit-diff\">\n          ${diff.map(line => this._renderDiffLine(line))}\n        </div>\n        ${result?.error ? html`<div class=\"edit-error\"> ${result.error}</div>` : nothing}\n      </div>\n    `;\n  }\n\n  _renderDiffLine(line) {\n    const prefix = line.type === 'remove' ? '-' : line.type === 'add' ? '+' : ' ';\n\n    if (line.charDiff && line.charDiff.length > 0) {\n      // Render with character-level highlighting\n      return html`<span class=\"diff-line ${line.type}\"><span class=\"diff-line-prefix\">${prefix}</span>${line.charDiff.map(seg =>\n        (seg.type === 'equal')\n          ? seg.text\n          : html`<span class=\"diff-change\">${seg.text}</span>`\n      )}</span>`;\n    }\n\n    return html`<span class=\"diff-line ${line.type}\"><span class=\"diff-line-prefix\">${prefix}</span>${line.text}</span>`;\n  }\n\n  _renderEditSummary(results) {\n    const applied = results.filter(r => r.status === 'applied').length;\n    const failed = results.filter(r => r.status === 'failed').length;\n    const skipped = results.filter(r => r.status === 'skipped').length;\n    if (applied === 0 && failed === 0 && skipped === 0) return nothing;\n\n    return html`\n      <div class=\"edit-summary ${failed > 0 ? 'has-failures' : 'success'}\">\n        <div class=\"edit-summary-counts\">\n          ${applied ? html`<span class=\"count-applied\"> ${applied} applied</span>` : nothing}\n          ${failed ? html`<span class=\"count-failed\"> ${failed} failed</span>` : nothing}\n          ${skipped ? html`<span class=\"count-skipped\"> ${skipped} skipped</span>` : nothing}\n        </div>\n      </div>\n    `;\n  }\n\n  _renderStreamingMessage() {\n    return html`\n      <div class=\"message-card assistant streaming\" role=\"article\" aria-label=\"Assistant response (streaming)\" aria-busy=\"true\">\n        <div class=\"role-label\" aria-hidden=\"true\">Assistant</div>\n        ${this._renderAssistantContent(this.streamContent, false, false)}\n      </div>\n    `;\n  }\n\n  //  File mention detection \n\n  /**\n   * Detect repo file paths in assistant message HTML and return\n   * modified HTML with clickable spans + list of found files.\n   * Skips matches inside <pre> blocks and HTML tags.\n   */\n  _detectFileMentions(htmlContent, rawContent) {\n    if (!this.repoFiles || this.repoFiles.length === 0) return { html: htmlContent, files: [] };\n\n    // Pre-filter: only check files whose path appears in raw text\n    const candidates = this.repoFiles.filter(f => rawContent.includes(f));\n    if (candidates.length === 0) return { html: htmlContent, files: [] };\n\n    // Sort by path length descending so longer paths match first\n    candidates.sort((a, b) => b.length - a.length);\n\n    const foundFiles = new Set();\n\n    // Process HTML, skipping <pre>...</pre> blocks and existing file-mention spans\n    // Strategy: split into \"safe to replace\" and \"skip\" zones\n    const parts = [];\n    let remaining = htmlContent;\n\n    // Regex to find <pre...>...</pre> blocks (non-greedy)\n    const skipPattern = /<pre[\\s>][\\s\\S]*?<\\/pre>/gi;\n    let lastIdx = 0;\n    let match;\n\n    // Reset lastIndex\n    skipPattern.lastIndex = 0;\n    while ((match = skipPattern.exec(htmlContent)) !== null) {\n      // Text before the <pre> block  safe to process\n      if (match.index > lastIdx) {\n        parts.push({ text: htmlContent.slice(lastIdx, match.index), safe: true });\n      }\n      // The <pre> block itself  skip\n      parts.push({ text: match[0], safe: false });\n      lastIdx = match.index + match[0].length;\n    }\n    // Remaining text after last <pre>\n    if (lastIdx < htmlContent.length) {\n      parts.push({ text: htmlContent.slice(lastIdx), safe: true });\n    }\n\n    // Build combined regex from candidates, escaping special chars\n    const escaped = candidates.map(f => f.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'));\n    const combinedRe = new RegExp(`(?<![\\\\w/])(?:` + escaped.join('|') + `)(?![\\\\w/])`, 'g');\n\n    // Process safe parts\n    const selectedSet = this.selectedFiles instanceof Set\n      ? this.selectedFiles\n      : new Set(this.selectedFiles || []);\n\n    const processedParts = parts.map(part => {\n      if (!part.safe) return part.text;\n\n      return part.text.replace(combinedRe, (matched, offset, str) => {\n        // Check we're not inside an HTML tag (< ... >)\n        // Find the last '<' before this match and the last '>' before this match\n        const before = str.slice(0, offset);\n        const lastOpen = before.lastIndexOf('<');\n        const lastClose = before.lastIndexOf('>');\n        if (lastOpen > lastClose) {\n          // We're inside a tag  don't replace\n          return matched;\n        }\n\n        // Check we're not already inside a file-mention span\n        const nearBefore = before.slice(Math.max(0, before.length - 200));\n        if (nearBefore.includes('class=\"file-mention') && !nearBefore.includes('</span>')) {\n          return matched;\n        }\n\n        foundFiles.add(matched);\n        const inContext = selectedSet.has(matched);\n        return `<span class=\"file-mention${inContext ? ' in-context' : ''}\" data-file=\"${matched}\">${matched}</span>`;\n      });\n    });\n\n    return {\n      html: processedParts.join(''),\n      files: [...foundFiles],\n    };\n  }\n\n  _renderFileSummary(files) {\n    if (!files || files.length === 0) return nothing;\n\n    const selectedSet = this.selectedFiles instanceof Set\n      ? this.selectedFiles\n      : new Set(this.selectedFiles || []);\n\n    const notInContext = files.filter(f => !selectedSet.has(f));\n\n    return html`\n      <div class=\"file-summary\" role=\"region\" aria-label=\"Files referenced in this response\">\n        <div class=\"file-summary-header\">\n          <span> Files Referenced</span>\n          ${notInContext.length >= 2 ? html`\n            <button class=\"add-all-btn\"\n              aria-label=\"Add all ${notInContext.length} files to context\"\n              @click=${() => this._onAddAllFiles(notInContext)}>\n              + Add All (${notInContext.length})\n            </button>\n          ` : nothing}\n        </div>\n        <div class=\"file-chips\">\n          ${files.map(f => {\n            const inCtx = selectedSet.has(f);\n            return html`\n              <span class=\"file-chip ${inCtx ? 'in-context' : 'not-in-context'}\"\n                @click=${() => this._onFileMentionClick(f)}>\n                ${inCtx ? '' : '+'} ${f}\n              </span>\n            `;\n          })}\n        </div>\n      </div>\n    `;\n  }\n\n  _onFileMentionClick(filePath) {\n    this.dispatchEvent(new CustomEvent('file-mention-click', {\n      detail: { path: filePath },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  _onAddAllFiles(files) {\n    for (const f of files) {\n      this.dispatchEvent(new CustomEvent('file-mention-click', {\n        detail: { path: f },\n        bubbles: true, composed: true,\n      }));\n    }\n  }\n\n  _onUserContentClick(e) {\n    // Delegate clicks on image thumbnails to open lightbox\n    const img = e.target.closest('.user-image-thumb');\n    if (img) {\n      e.preventDefault();\n      this._lightboxSrc = img.src;\n      this.requestUpdate();\n      // Focus the lightbox for keyboard dismissal\n      this.updateComplete.then(() => {\n        this.shadowRoot.querySelector('.image-lightbox')?.focus();\n      });\n    }\n  }\n\n  _onLightboxKeyDown(e) {\n    if (e.key === 'Escape') {\n      e.preventDefault();\n      this._closeLightbox();\n    }\n  }\n\n  _closeLightbox() {\n    this._lightboxSrc = null;\n    this.requestUpdate();\n  }\n\n  _onMdContentClick(e) {\n    // Delegate clicks on image thumbnails to open lightbox\n    const img = e.target.closest('.user-image-thumb');\n    if (img) {\n      e.preventDefault();\n      this._lightboxSrc = img.src;\n      this.requestUpdate();\n      this.updateComplete.then(() => {\n        this.shadowRoot.querySelector('.image-lightbox')?.focus();\n      });\n      return;\n    }\n\n    // Delegate clicks on code copy buttons\n    const copyBtn = e.target.closest('.code-copy-btn');\n    if (copyBtn) {\n      e.preventDefault();\n      const pre = copyBtn.closest('pre');\n      if (pre) {\n        const code = pre.querySelector('code');\n        const text = code ? code.textContent : pre.textContent;\n        navigator.clipboard.writeText(text).then(() => {\n          copyBtn.textContent = ' Copied';\n          copyBtn.classList.add('copied');\n          setTimeout(() => {\n            copyBtn.textContent = '';\n            copyBtn.classList.remove('copied');\n          }, 1500);\n        }).catch(() => {\n          copyBtn.textContent = ' Failed';\n          setTimeout(() => { copyBtn.textContent = ''; }, 1500);\n        });\n      }\n      return;\n    }\n\n    // Delegate clicks on file mentions within rendered markdown\n    const mention = e.target.closest('.file-mention');\n    if (mention) {\n      const filePath = mention.dataset.file;\n      if (filePath) {\n        this._onFileMentionClick(filePath);\n      }\n    }\n  }\n\n  _getMessageText(msg) {\n    if (typeof msg.content === 'string') return msg.content;\n    if (Array.isArray(msg.content)) {\n      return msg.content\n        .filter(b => b.type === 'text')\n        .map(b => b.text)\n        .join('\\n');\n    }\n    return String(msg.content || '');\n  }\n\n  _onCopyMessage(e, msg) {\n    const btn = e.currentTarget;\n    const text = this._getMessageText(msg);\n    navigator.clipboard.writeText(text).then(() => {\n      btn.textContent = '';\n      btn.classList.add('copied');\n      setTimeout(() => {\n        btn.textContent = '';\n        btn.classList.remove('copied');\n      }, 1500);\n    }).catch(() => {\n      btn.textContent = '';\n      setTimeout(() => { btn.textContent = ''; }, 1500);\n    });\n  }\n\n  _onCopyToPrompt(msg) {\n    const text = this._getMessageText(msg);\n    this.dispatchEvent(new CustomEvent('copy-to-prompt', {\n      detail: { text },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  _onEditFileClick(filePath) {\n    this.dispatchEvent(new CustomEvent('navigate-file', {\n      detail: { path: filePath },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  //  Public API \n\n  scrollToBottom() {\n    this._userScrolledUp = false;\n    // content-visibility: auto means off-screen messages have no height yet.\n    // Force scrollTop to scrollHeight repeatedly  each scroll reveals more\n    // content, increasing scrollHeight. Continue until stable or max retries.\n    let retries = 0;\n    let lastScrollHeight = 0;\n    const pump = () => {\n      const container = this.shadowRoot?.querySelector('.messages');\n      if (!container) return;\n      container.scrollTop = container.scrollHeight;\n      // Stop when scrollHeight stabilizes or after enough retries\n      if (retries++ < 20 && container.scrollHeight !== lastScrollHeight) {\n        lastScrollHeight = container.scrollHeight;\n        requestAnimationFrame(pump);\n      }\n    };\n    this.updateComplete.then(() => requestAnimationFrame(pump));\n  }\n\n  /** Scroll to bottom only if the user hasn't scrolled up. */\n  scrollToBottomIfAtBottom() {\n    this._scrollToBottom();\n  }\n}\n\ncustomElements.define('chat-panel', ChatPanel);","import { LitElement, html, css } from 'lit';\n\n/**\n * Speech-to-text toggle button using the Web Speech API.\n * Dispatches `transcript` events with recognized text.\n *\n * States:\n *   - inactive: not listening\n *   - listening: recognition active (orange pulse)\n *   - speaking: speech detected (green)\n */\nclass SpeechToText extends LitElement {\n  static properties = {\n    _state: { type: String, state: true }, // 'inactive' | 'listening' | 'speaking'\n    _supported: { type: Boolean, state: true },\n  };\n\n  static styles = css`\n    :host {\n      display: inline-flex;\n    }\n\n    button {\n      background: none;\n      border: 1px solid var(--border-color, #444);\n      border-radius: var(--radius-sm, 4px);\n      padding: 4px 8px;\n      cursor: pointer;\n      font-size: 16px;\n      color: var(--text-secondary, #aaa);\n      transition: background 0.15s, color 0.15s, border-color 0.15s, box-shadow 0.15s;\n      line-height: 1;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    button:hover {\n      background: var(--bg-surface, #2a2a2a);\n      color: var(--text-primary, #eee);\n    }\n\n    button.listening {\n      color: #f59e0b;\n      border-color: #f59e0b;\n      animation: pulse 1.5s ease-in-out infinite;\n    }\n\n    button.speaking {\n      color: #22c55e;\n      border-color: #22c55e;\n      animation: none;\n      box-shadow: 0 0 6px rgba(34, 197, 94, 0.4);\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n\n    button:disabled {\n      display: none;\n    }\n  `;\n\n  constructor() {\n    super();\n    this._state = 'inactive';\n    this._autoRestart = false;\n    this._recognition = null;\n\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    this._supported = !!SpeechRecognition;\n\n    if (this._supported) {\n      this._recognition = new SpeechRecognition();\n      this._recognition.continuous = false;\n      this._recognition.interimResults = false;\n      this._recognition.lang = navigator.language;\n\n      this._recognition.onstart = () => {\n        this._state = 'listening';\n      };\n\n      this._recognition.onspeechstart = () => {\n        this._state = 'speaking';\n      };\n\n      this._recognition.onspeechend = () => {\n        // Revert to listening while recognition finishes processing\n        if (this._state === 'speaking') {\n          this._state = 'listening';\n        }\n      };\n\n      this._recognition.onresult = (event) => {\n        const last = event.results[event.results.length - 1];\n        if (last.isFinal) {\n          const text = last[0].transcript.trim();\n          if (text) {\n            this.dispatchEvent(new CustomEvent('transcript', {\n              detail: { text },\n              bubbles: true,\n              composed: true,\n            }));\n          }\n        }\n      };\n\n      this._recognition.onend = () => {\n        this._handleEnd();\n      };\n\n      this._recognition.onerror = (event) => {\n        // 'no-speech' and 'aborted' are non-fatal during auto-restart\n        if (this._autoRestart && (event.error === 'no-speech' || event.error === 'aborted')) {\n          // Let onend handle the restart\n          return;\n        }\n        console.warn('[SpeechToText] Recognition error:', event.error);\n        this._autoRestart = false;\n        this._state = 'inactive';\n        this.dispatchEvent(new CustomEvent('recognition-error', {\n          detail: { error: event.error },\n          bubbles: true,\n          composed: true,\n        }));\n      };\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._autoRestart = false;\n    if (this._recognition) {\n      try { this._recognition.stop(); } catch (_) { /* ignore */ }\n    }\n    this._state = 'inactive';\n  }\n\n  _handleEnd() {\n    if (this._autoRestart) {\n      // Auto-restart after a short delay for continuous dictation feel\n      setTimeout(() => {\n        if (this._autoRestart) {\n          try {\n            this._recognition.start();\n          } catch (e) {\n            console.warn('[SpeechToText] Auto-restart failed:', e);\n            this._autoRestart = false;\n            this._state = 'inactive';\n          }\n        }\n      }, 100);\n    } else {\n      this._state = 'inactive';\n    }\n  }\n\n  _toggle() {\n    if (!this._recognition) return;\n\n    if (this._autoRestart || this._state !== 'inactive') {\n      // Turn OFF\n      this._autoRestart = false;\n      try { this._recognition.stop(); } catch (_) { /* ignore */ }\n      this._state = 'inactive';\n    } else {\n      // Turn ON\n      this._autoRestart = true;\n      try {\n        this._recognition.start();\n      } catch (e) {\n        console.warn('[SpeechToText] Failed to start:', e);\n        this._autoRestart = false;\n        this._state = 'inactive';\n      }\n    }\n  }\n\n  render() {\n    if (!this._supported) return html``;\n\n    return html`\n      <button\n        class=${this._state}\n        @click=${this._toggle}\n        title=${this._state === 'inactive' ? 'Start voice dictation' : 'Stop voice dictation'}\n        aria-label=${this._state === 'inactive' ? 'Start voice dictation' : 'Stop voice dictation'}\n        aria-pressed=${this._state !== 'inactive'}\n      ></button>\n    `;\n  }\n}\n\ncustomElements.define('speech-to-text', SpeechToText);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\nimport '../prompt/SpeechToText.js';\n\nconst MAX_IMAGE_SIZE = 5 * 1024 * 1024; // 5MB\nconst MAX_IMAGES = 5;\nconst URL_DETECT_DEBOUNCE_MS = 300;\n\n/**\n * Chat input  auto-resize textarea, Enter to send, image paste, snippets, URL detection.\n */\nclass ChatInput extends RpcMixin(LitElement) {\n  static properties = {\n    disabled: { type: Boolean },\n    snippets: { type: Array },\n    /** Array of user message strings from conversation history (most recent first, deduplicated) */\n    userMessageHistory: { type: Array },\n    _images: { type: Array, state: true },\n    _showSnippets: { type: Boolean, state: true },\n    _showHistorySearch: { type: Boolean, state: true },\n    _historySearchQuery: { type: String, state: true },\n    _historySearchResults: { type: Array, state: true },\n    _historySearchIndex: { type: Number, state: true },\n    _savedInputBeforeHistory: { type: String, state: true },\n  };\n\n  static styles = css`\n    :host {\n      display: block;\n      border-top: 1px solid var(--border-color);\n      background: var(--bg-secondary);\n    }\n\n    .input-area {\n      display: flex;\n      flex-direction: column;\n      padding: 8px 12px;\n      gap: 6px;\n    }\n\n    .images-row {\n      display: flex;\n      gap: 6px;\n      flex-wrap: wrap;\n    }\n\n    .image-thumb {\n      position: relative;\n      width: 60px;\n      height: 60px;\n      border-radius: var(--radius-sm);\n      overflow: hidden;\n      border: 1px solid var(--border-color);\n    }\n\n    .image-thumb img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n    }\n\n    .image-remove {\n      position: absolute;\n      top: -4px;\n      right: -4px;\n      width: 18px;\n      height: 18px;\n      border-radius: 50%;\n      background: var(--accent-error);\n      color: white;\n      border: none;\n      font-size: 10px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      line-height: 1;\n    }\n\n    .input-row {\n      display: flex;\n      gap: 6px;\n      align-items: flex-end;\n    }\n\n    .input-tools {\n      display: flex;\n      flex-direction: column;\n      gap: 2px;\n      flex-shrink: 0;\n    }\n\n    .snippet-toggle {\n      background: none;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 6px 8px;\n      cursor: pointer;\n      color: var(--text-secondary);\n      font-size: 14px;\n      flex-shrink: 0;\n      transition: background var(--transition-fast);\n    }\n    .snippet-toggle:hover { background: var(--bg-surface); }\n    .snippet-toggle.active { background: var(--bg-surface); color: var(--accent-primary); }\n\n    textarea {\n      flex: 1;\n      min-height: 38px;\n      max-height: 200px;\n      padding: 8px 10px;\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      color: var(--text-primary);\n      font-family: var(--font-sans);\n      font-size: 13.5px;\n      line-height: 1.4;\n      resize: none;\n      outline: none;\n      overflow-y: auto;\n    }\n\n    textarea:focus { border-color: var(--accent-primary); }\n    textarea:disabled { opacity: 0.5; cursor: not-allowed; }\n\n    textarea::placeholder { color: var(--text-muted); }\n\n    .send-btn {\n      background: var(--accent-primary);\n      border: none;\n      border-radius: var(--radius-sm);\n      padding: 8px 14px;\n      color: var(--bg-primary);\n      font-weight: 600;\n      font-size: 13px;\n      cursor: pointer;\n      flex-shrink: 0;\n      transition: opacity var(--transition-fast);\n    }\n    .send-btn:hover { opacity: 0.9; }\n    .send-btn:disabled { opacity: 0.4; cursor: not-allowed; }\n\n    .sr-only {\n      position: absolute;\n      width: 1px;\n      height: 1px;\n      padding: 0;\n      margin: -1px;\n      overflow: hidden;\n      clip: rect(0,0,0,0);\n      white-space: nowrap;\n      border: 0;\n    }\n\n    .stop-btn {\n      background: var(--accent-error, #ef5350);\n      border: none;\n      border-radius: var(--radius-sm);\n      padding: 8px 14px;\n      color: white;\n      font-weight: 600;\n      font-size: 13px;\n      cursor: pointer;\n      flex-shrink: 0;\n      transition: opacity var(--transition-fast);\n    }\n    .stop-btn:hover { opacity: 0.85; }\n\n    /* Snippet drawer */\n    .snippet-drawer {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 4px;\n      padding: 6px 0;\n    }\n\n    .snippet-btn {\n      background: var(--bg-surface);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 4px 8px;\n      cursor: pointer;\n      font-size: 13px;\n      color: var(--text-secondary);\n      transition: background var(--transition-fast);\n      white-space: nowrap;\n    }\n    .snippet-btn:hover { background: var(--bg-elevated); color: var(--text-primary); }\n\n    /* Input history search overlay */\n    .history-overlay {\n      position: absolute;\n      bottom: 100%;\n      left: 12px;\n      right: 12px;\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      box-shadow: var(--shadow-lg);\n      max-height: 340px;\n      display: flex;\n      flex-direction: column;\n      z-index: 50;\n    }\n\n    .history-search-input {\n      padding: 8px 10px;\n      background: var(--bg-primary);\n      border: none;\n      border-bottom: 1px solid var(--border-color);\n      border-radius: var(--radius-md) var(--radius-md) 0 0;\n      color: var(--text-primary);\n      font-family: var(--font-sans);\n      font-size: 12.5px;\n      outline: none;\n    }\n    .history-search-input::placeholder { color: var(--text-muted); }\n\n    .history-results {\n      overflow-y: auto;\n      flex: 1;\n      min-height: 0;\n    }\n\n    .history-item {\n      padding: 8px 12px;\n      font-size: 12.5px;\n      color: var(--text-secondary);\n      cursor: pointer;\n      border-bottom: 1px solid var(--border-color);\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n    .history-item:last-child { border-bottom: none; }\n    .history-item:hover { background: var(--bg-surface); }\n    .history-item.selected { background: var(--bg-surface); color: var(--accent-primary); }\n  `;\n\n  constructor() {\n    super();\n    this.disabled = false;\n    this.snippets = [];\n    this.userMessageHistory = [];\n    this._images = [];\n    this._showSnippets = false;\n    this._showHistorySearch = false;\n    this._historySearchQuery = '';\n    this._historySearchResults = [];\n    this._historySearchIndex = 0;\n    this._savedInputBeforeHistory = undefined;\n    this._urlDetectTimer = null;\n    this._lastDetectedText = '';\n  }\n\n  //  Auto-resize & URL detection \n\n  _onInput(e) {\n    this._autoResize(e.target);\n    this._scheduleUrlDetection(e.target.value);\n  }\n\n  _scheduleUrlDetection(text) {\n    if (this._urlDetectTimer) clearTimeout(this._urlDetectTimer);\n    this._urlDetectTimer = setTimeout(() => {\n      this._urlDetectTimer = null;\n      this._detectUrls(text);\n    }, URL_DETECT_DEBOUNCE_MS);\n  }\n\n  async _detectUrls(text) {\n    if (!text || text === this._lastDetectedText) return;\n    if (!this.rpcConnected) return;\n    this._lastDetectedText = text;\n\n    try {\n      const urls = await this.rpcExtract('LLM.detect_urls', text);\n      if (Array.isArray(urls)) {\n        this.dispatchEvent(new CustomEvent('urls-detected', {\n          detail: { urls },\n          bubbles: true, composed: true,\n        }));\n      }\n    } catch (e) {\n      // URL detection is non-critical  silently ignore\n    }\n  }\n\n  _autoResize(textarea) {\n    textarea.style.height = 'auto';\n    textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px';\n  }\n\n  //  Send \n\n  _onKeyDown(e) {\n    const textarea = e.target;\n\n    // If history search is open, don't handle keys on the textarea\n    // (the overlay input handles its own keys)\n    if (this._showHistorySearch) return;\n\n    // Enter to send (without shift)\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      this._send();\n      return;\n    }\n\n    // Escape  close snippets or clear input\n    if (e.key === 'Escape') {\n      if (this._showSnippets) { this._showSnippets = false; return; }\n      textarea.value = '';\n      this._autoResize(textarea);\n      return;\n    }\n\n    // Up arrow at position 0  open history search\n    if (e.key === 'ArrowUp' && textarea.selectionStart === 0 && textarea.selectionEnd === 0) {\n      this._openHistorySearch();\n      e.preventDefault();\n      return;\n    }\n\n    // Down arrow at end  restore saved input from before history search\n    if (e.key === 'ArrowDown' && this._savedInputBeforeHistory !== undefined &&\n        textarea.selectionStart === textarea.value.length) {\n      textarea.value = this._savedInputBeforeHistory;\n      this._savedInputBeforeHistory = undefined;\n      this._autoResize(textarea);\n      e.preventDefault();\n    }\n  }\n\n  _send() {\n    const textarea = this.shadowRoot.querySelector('textarea');\n    if (!textarea) return;\n    const text = textarea.value.trim();\n    if (!text && this._images.length === 0) return;\n    if (this.disabled) return;\n\n    this.dispatchEvent(new CustomEvent('send-message', {\n      detail: {\n        message: textarea.value,\n        images: [...this._images],\n      },\n      bubbles: true, composed: true,\n    }));\n\n    textarea.value = '';\n    this._images = [];\n    this._autoResize(textarea);\n    this._showSnippets = false;\n    this._showHistorySearch = false;\n    this._savedInputBeforeHistory = undefined;\n    this._lastDetectedText = '';\n    if (this._urlDetectTimer) {\n      clearTimeout(this._urlDetectTimer);\n      this._urlDetectTimer = null;\n    }\n  }\n\n  _stop() {\n    this.dispatchEvent(new CustomEvent('stop-streaming', {\n      bubbles: true, composed: true,\n    }));\n  }\n\n  //  Image paste \n\n  _onPaste(e) {\n    const items = e.clipboardData?.items;\n    if (!items) return;\n\n    for (const item of items) {\n      if (item.type.startsWith('image/')) {\n        e.preventDefault();\n        const file = item.getAsFile();\n        if (!file) continue;\n        if (file.size > MAX_IMAGE_SIZE) {\n          console.warn('Image too large (>5MB)');\n          continue;\n        }\n        if (this._images.length >= MAX_IMAGES) {\n          console.warn('Maximum images reached');\n          continue;\n        }\n        const reader = new FileReader();\n        reader.onload = () => {\n          this._images = [...this._images, reader.result];\n        };\n        reader.readAsDataURL(file);\n        break; // One image per paste\n      }\n    }\n  }\n\n  _removeImage(index) {\n    this._images = this._images.filter((_, i) => i !== index);\n  }\n\n  //  Speech to text \n\n  _onTranscript(e) {\n    const { text } = e.detail;\n    if (!text) return;\n    const textarea = this.shadowRoot.querySelector('textarea');\n    if (!textarea) return;\n\n    // Append transcript to current value, space-separated\n    if (textarea.value && !textarea.value.endsWith(' ')) {\n      textarea.value += ' ' + text;\n    } else {\n      textarea.value += text;\n    }\n\n    this._autoResize(textarea);\n    this._scheduleUrlDetection(textarea.value);\n  }\n\n  //  Snippets \n\n  _toggleSnippets() {\n    this._showSnippets = !this._showSnippets;\n    this._showHistory = false;\n  }\n\n  _insertSnippet(message) {\n    const textarea = this.shadowRoot.querySelector('textarea');\n    if (!textarea) return;\n    const start = textarea.selectionStart;\n    const before = textarea.value.substring(0, start);\n    const after = textarea.value.substring(textarea.selectionEnd);\n    textarea.value = before + message + after;\n    textarea.selectionStart = textarea.selectionEnd = start + message.length;\n    this._autoResize(textarea);\n    this._showSnippets = false;\n    textarea.focus();\n  }\n\n  //  Input history search \n\n  /** Get deduplicated user messages from conversation history, most recent first */\n  _getUserMessageHistory() {\n    if (!this.userMessageHistory || this.userMessageHistory.length === 0) return [];\n    return this.userMessageHistory;\n  }\n\n  _openHistorySearch() {\n    const history = this._getUserMessageHistory();\n    if (history.length === 0) return;\n    const textarea = this.shadowRoot.querySelector('textarea');\n    this._savedInputBeforeHistory = textarea?.value || '';\n    this._historySearchQuery = '';\n    // Reverse so oldest is first (index 0 = top), newest is last (bottom)\n    this._historySearchResults = [...history].reverse().slice(-20);\n    this._historySearchIndex = this._historySearchResults.length - 1; // Select newest (bottom)\n    this._showHistorySearch = true;\n    this._showSnippets = false;\n    // Focus the search input and scroll to bottom after render\n    this.updateComplete.then(() => {\n      this.shadowRoot.querySelector('.history-search-input')?.focus();\n      this._scrollHistoryToBottom();\n    });\n  }\n\n  _onHistorySearchInput(e) {\n    const query = e.target.value;\n    this._historySearchQuery = query;\n    this._filterHistoryResults(query);\n    // Select newest (bottom) after filtering\n    this._historySearchIndex = this._historySearchResults.length - 1;\n    this.updateComplete.then(() => this._scrollHistoryToBottom());\n  }\n\n  _filterHistoryResults(query) {\n    const history = this._getUserMessageHistory();\n    if (!query.trim()) {\n      // Reverse so oldest first (top), newest last (bottom)\n      this._historySearchResults = [...history].reverse().slice(-20);\n      return;\n    }\n\n    const q = query.toLowerCase();\n\n    // Score each message: exact substring first (scored by position), then fuzzy\n    const scored = [];\n    for (const msg of history) {\n      const lower = msg.toLowerCase();\n      const substringIdx = lower.indexOf(q);\n      if (substringIdx !== -1) {\n        // Exact substring match  score by position (earlier = better)\n        scored.push({ msg, score: 1000 - substringIdx });\n      } else if (this._fuzzyMatch(q, lower)) {\n        // Fuzzy match  lower priority\n        scored.push({ msg, score: 0 });\n      }\n    }\n\n    // Sort: exact substring matches first (by score desc), then fuzzy\n    // Then reverse so newest matches are at the bottom\n    scored.sort((a, b) => b.score - a.score);\n    this._historySearchResults = scored.slice(0, 20).map(s => s.msg).reverse();\n  }\n\n  /** Fuzzy match: all characters in query appear in order in text */\n  _fuzzyMatch(query, text) {\n    let qi = 0;\n    for (let ti = 0; ti < text.length && qi < query.length; ti++) {\n      if (text[ti] === query[qi]) qi++;\n    }\n    return qi === query.length;\n  }\n\n  _onHistorySearchKeyDown(e) {\n    if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (this._historySearchIndex > 0) {\n        this._historySearchIndex--;\n      }\n      this._scrollHistoryItemIntoView();\n      return;\n    }\n    if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (this._historySearchIndex < this._historySearchResults.length - 1) {\n        this._historySearchIndex++;\n      } else {\n        // Past the newest  restore saved input and close\n        this._restoreAndClose();\n        return;\n      }\n      this._scrollHistoryItemIntoView();\n      return;\n    }\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      this._selectHistoryResult();\n      return;\n    }\n    if (e.key === 'Escape') {\n      e.preventDefault();\n      this._restoreAndClose();\n      return;\n    }\n  }\n\n  _scrollHistoryItemIntoView() {\n    this.updateComplete.then(() => {\n      this.shadowRoot.querySelector('.history-item.selected')\n        ?.scrollIntoView({ block: 'nearest' });\n    });\n  }\n\n  _scrollHistoryToBottom() {\n    const container = this.shadowRoot.querySelector('.history-results');\n    if (container) container.scrollTop = container.scrollHeight;\n  }\n\n  _restoreAndClose() {\n    const textarea = this.shadowRoot.querySelector('textarea');\n    if (textarea && this._savedInputBeforeHistory !== undefined) {\n      textarea.value = this._savedInputBeforeHistory;\n      this._autoResize(textarea);\n    }\n    this._savedInputBeforeHistory = undefined;\n    this._showHistorySearch = false;\n    this.updateComplete.then(() => {\n      this.shadowRoot.querySelector('textarea')?.focus();\n    });\n  }\n\n  _selectHistoryResult() {\n    const results = this._historySearchResults;\n    if (this._historySearchIndex >= 0 && this._historySearchIndex < results.length) {\n      const textarea = this.shadowRoot.querySelector('textarea');\n      if (textarea) {\n        textarea.value = results[this._historySearchIndex];\n        this._autoResize(textarea);\n      }\n    }\n    this._showHistorySearch = false;\n    // Focus textarea after closing\n    this.updateComplete.then(() => {\n      this.shadowRoot.querySelector('textarea')?.focus();\n    });\n  }\n\n  _closeHistorySearch() {\n    this._restoreAndClose();\n  }\n\n  //  Public API \n\n  focus() {\n    this.updateComplete.then(() => {\n      this.shadowRoot.querySelector('textarea')?.focus();\n    });\n  }\n\n  clear() {\n    const textarea = this.shadowRoot.querySelector('textarea');\n    if (textarea) {\n      textarea.value = '';\n      this._autoResize(textarea);\n    }\n    this._images = [];\n    this._lastDetectedText = '';\n    if (this._urlDetectTimer) {\n      clearTimeout(this._urlDetectTimer);\n      this._urlDetectTimer = null;\n    }\n  }\n\n  //  Render \n\n  render() {\n    return html`\n      <div class=\"input-area\" style=\"position:relative;\" role=\"region\" aria-label=\"Chat input\">\n\n        ${this._showHistorySearch ? html`\n          <div class=\"history-overlay\" role=\"listbox\" aria-label=\"Message history\">\n            <input class=\"history-search-input\"\n              type=\"text\"\n              placeholder=\"Search message history\"\n              aria-label=\"Search message history\"\n              aria-controls=\"history-results-list\"\n              aria-activedescendant=${this._historySearchIndex >= 0 ? `history-item-${this._historySearchIndex}` : nothing}\n              .value=${this._historySearchQuery}\n              @input=${this._onHistorySearchInput}\n              @keydown=${this._onHistorySearchKeyDown}\n            >\n            <div class=\"history-results\" id=\"history-results-list\" role=\"group\">\n              ${this._historySearchResults.length === 0 ? html`\n                <div class=\"history-item\" style=\"color:var(--text-muted); cursor:default;\" role=\"option\" aria-disabled=\"true\">\n                  No matches\n                </div>\n              ` : this._historySearchResults.map((item, i) => html`\n                <div class=\"history-item ${i === this._historySearchIndex ? 'selected' : ''}\"\n                  id=\"history-item-${i}\"\n                  role=\"option\"\n                  aria-selected=${i === this._historySearchIndex}\n                  @click=${() => { this._historySearchIndex = i; this._selectHistoryResult(); }}>\n                  ${item.length > 120 ? item.substring(0, 120) + '' : item}\n                </div>\n              `)}\n            </div>\n          </div>\n        ` : nothing}\n\n        ${this._images.length > 0 ? html`\n          <div class=\"images-row\" role=\"list\" aria-label=\"Attached images\">\n            ${this._images.map((src, i) => html`\n              <div class=\"image-thumb\" role=\"listitem\">\n                <img src=${src} alt=\"Pasted image ${i + 1}\">\n                <button class=\"image-remove\" @click=${() => this._removeImage(i)}\n                  aria-label=\"Remove image ${i + 1}\"></button>\n              </div>\n            `)}\n          </div>\n        ` : nothing}\n\n        ${this._showSnippets && this.snippets.length > 0 ? html`\n          <div class=\"snippet-drawer\" role=\"toolbar\" aria-label=\"Quick insert snippets\">\n            ${this.snippets.map(s => html`\n              <button class=\"snippet-btn\" title=${s.tooltip || s.message}\n                aria-label=\"${s.tooltip || s.message.substring(0, 60)}\"\n                @click=${() => this._insertSnippet(s.message)}>\n                ${s.icon} ${s.tooltip || s.message.substring(0, 30)}\n              </button>\n            `)}\n          </div>\n        ` : nothing}\n\n        <div class=\"input-row\">\n          <div class=\"input-tools\">\n            <speech-to-text @transcript=${this._onTranscript}></speech-to-text>\n            ${this.snippets.length > 0 ? html`\n              <button class=\"snippet-toggle ${this._showSnippets ? 'active' : ''}\"\n                @click=${this._toggleSnippets} title=\"Snippets\"\n                aria-label=\"Toggle snippet drawer\"\n                aria-expanded=${this._showSnippets}></button>\n            ` : nothing}\n          </div>\n\n          <textarea\n            placeholder=\"Type a message... (Enter to send, Shift+Enter for newline)\"\n            aria-label=\"Chat message input\"\n            ?disabled=${this.disabled}\n            @input=${this._onInput}\n            @keydown=${this._onKeyDown}\n            @paste=${this._onPaste}\n            rows=\"1\"\n          ></textarea>\n\n          ${this.disabled ? html`\n            <button class=\"stop-btn\" @click=${this._stop} aria-label=\"Stop streaming response\">\n               Stop\n            </button>\n          ` : html`\n            <button class=\"send-btn\" @click=${this._send} aria-label=\"Send message\">\n              Send\n            </button>\n          `}\n        </div>\n        <span class=\"sr-only\" aria-live=\"polite\" id=\"input-status\">\n          ${this.disabled ? 'Waiting for response...' : ''}\n        </span>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('chat-input', ChatInput);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\n\n/**\n * URL chips  shows detected and fetched URLs below chat input.\n *\n * Detected chips: type badge, display name, fetch button, dismiss button.\n * Fetched chips: include/exclude checkbox, clickable label, remove button.\n */\nclass UrlChips extends RpcMixin(LitElement) {\n  static properties = {\n    /** Detected but not yet fetched URLs: [{url, url_type, display_name, github_info?}] */\n    detected: { type: Array },\n    /** Fetched URL results: [{url, url_type, title, error?, display_name?}] */\n    fetched: { type: Array },\n    /** Set of excluded URL strings */\n    excluded: { type: Object },\n    /** Set of URLs currently being fetched */\n    _fetching: { type: Object, state: true },\n  };\n\n  static styles = css`\n    :host {\n      display: block;\n    }\n\n    .chips-row {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 6px;\n      padding: 6px 12px;\n      border-top: 1px solid var(--border-color);\n      background: var(--bg-secondary);\n    }\n\n    .chip {\n      display: inline-flex;\n      align-items: center;\n      gap: 5px;\n      padding: 3px 8px;\n      border-radius: 12px;\n      font-size: 12px;\n      line-height: 1.4;\n      border: 1px solid var(--border-color);\n      background: var(--bg-surface);\n      color: var(--text-secondary);\n      max-width: 320px;\n    }\n\n    .chip.fetched {\n      border-color: var(--accent-success);\n      background: rgba(102, 187, 106, 0.08);\n    }\n\n    .chip.fetched.excluded {\n      border-color: var(--border-color);\n      background: var(--bg-surface);\n      opacity: 0.6;\n    }\n\n    .chip.fetched.error {\n      border-color: var(--accent-error);\n      background: rgba(239, 83, 80, 0.08);\n    }\n\n    .chip.fetching {\n      border-color: var(--accent-warning);\n      background: rgba(255, 167, 38, 0.08);\n    }\n\n    .type-badge {\n      font-size: 11px;\n      flex-shrink: 0;\n    }\n\n    .chip-label {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      min-width: 0;\n    }\n\n    .chip-label.clickable {\n      cursor: pointer;\n    }\n    .chip-label.clickable:hover {\n      color: var(--accent-primary);\n      text-decoration: underline;\n    }\n\n    .chip-btn {\n      background: none;\n      border: none;\n      padding: 0 2px;\n      cursor: pointer;\n      font-size: 12px;\n      color: var(--text-muted);\n      flex-shrink: 0;\n      line-height: 1;\n    }\n    .chip-btn:hover {\n      color: var(--text-primary);\n    }\n\n    .chip-checkbox {\n      width: 13px;\n      height: 13px;\n      flex-shrink: 0;\n      cursor: pointer;\n      accent-color: var(--accent-success);\n    }\n\n    .spinner {\n      display: inline-block;\n      width: 12px;\n      height: 12px;\n      border: 2px solid var(--border-color);\n      border-top-color: var(--accent-warning);\n      border-radius: 50%;\n      animation: spin 0.8s linear infinite;\n      flex-shrink: 0;\n    }\n\n    @keyframes spin {\n      to { transform: rotate(360deg); }\n    }\n  `;\n\n  // Type badge emojis\n  static TYPE_ICONS = {\n    github_repo: '',\n    github_file: '',\n    github_issue: '',\n    github_pr: '',\n    documentation: '',\n    generic: '',\n  };\n\n  constructor() {\n    super();\n    this.detected = [];\n    this.fetched = [];\n    this.excluded = new Set();\n    this._fetching = new Set();\n  }\n\n  //  Actions \n\n  async _fetchUrl(url) {\n    if (this._fetching.has(url)) return;\n\n    this._fetching = new Set([...this._fetching, url]);\n\n    try {\n      const result = await this.rpcExtract('LLM.fetch_url', url, true, true, '');\n      // Remove from detected, add to fetched\n      this.dispatchEvent(new CustomEvent('url-fetched', {\n        detail: { url, result },\n        bubbles: true, composed: true,\n      }));\n    } catch (e) {\n      console.error('URL fetch failed:', e);\n      this.dispatchEvent(new CustomEvent('url-fetched', {\n        detail: { url, result: { url, error: String(e) } },\n        bubbles: true, composed: true,\n      }));\n    } finally {\n      const next = new Set(this._fetching);\n      next.delete(url);\n      this._fetching = next;\n    }\n  }\n\n  _dismiss(url) {\n    this.dispatchEvent(new CustomEvent('url-dismissed', {\n      detail: { url },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  _remove(url) {\n    this.dispatchEvent(new CustomEvent('url-removed', {\n      detail: { url },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  _toggleExclude(url) {\n    this.dispatchEvent(new CustomEvent('url-toggle-exclude', {\n      detail: { url },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  _viewContent(url) {\n    this.dispatchEvent(new CustomEvent('url-view-content', {\n      detail: { url },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  //  Render \n\n  render() {\n    const hasDetected = this.detected.length > 0;\n    const hasFetched = this.fetched.length > 0;\n    const hasFetching = this._fetching.size > 0;\n\n    if (!hasDetected && !hasFetched && !hasFetching) return nothing;\n\n    return html`\n      <div class=\"chips-row\" role=\"list\" aria-label=\"URL references\">\n        ${this.fetched.map(f => this._renderFetchedChip(f))}\n        ${this.detected.map(d => this._renderDetectedChip(d))}\n      </div>\n    `;\n  }\n\n  _renderDetectedChip(info) {\n    const isFetching = this._fetching.has(info.url);\n    const icon = UrlChips.TYPE_ICONS[info.url_type] || '';\n\n    return html`\n      <span class=\"chip ${isFetching ? 'fetching' : ''}\" role=\"listitem\">\n        <span class=\"type-badge\" aria-hidden=\"true\">${icon}</span>\n        <span class=\"chip-label\">${info.display_name || info.url}</span>\n        ${isFetching\n          ? html`<span class=\"spinner\" aria-label=\"Fetching\"></span>`\n          : html`<button class=\"chip-btn\" title=\"Fetch\" aria-label=\"Fetch ${info.display_name || info.url}\" @click=${() => this._fetchUrl(info.url)}></button>`\n        }\n        <button class=\"chip-btn\" title=\"Dismiss\" aria-label=\"Dismiss ${info.display_name || info.url}\" @click=${() => this._dismiss(info.url)}></button>\n      </span>\n    `;\n  }\n\n  _renderFetchedChip(info) {\n    const isExcluded = this.excluded.has(info.url);\n    const hasError = !!info.error;\n    const icon = UrlChips.TYPE_ICONS[info.url_type] || '';\n\n    return html`\n      <span class=\"chip fetched ${isExcluded ? 'excluded' : ''} ${hasError ? 'error' : ''}\" role=\"listitem\">\n        ${!hasError ? html`\n          <input type=\"checkbox\"\n            class=\"chip-checkbox\"\n            .checked=${!isExcluded}\n            @change=${() => this._toggleExclude(info.url)}\n            title=${isExcluded ? 'Include in context' : 'Exclude from context'}\n            aria-label=\"${isExcluded ? 'Include' : 'Exclude'} ${info.title || info.display_name || info.url} ${isExcluded ? 'in' : 'from'} context\"\n          >\n        ` : nothing}\n        <span class=\"type-badge\" aria-hidden=\"true\">${hasError ? '' : icon}</span>\n        <span class=\"chip-label clickable\"\n          role=\"button\"\n          title=${info.url}\n          @click=${() => this._viewContent(info.url)}>\n          ${info.title || info.display_name || info.url}\n        </span>\n        <button class=\"chip-btn\" title=\"Remove\" aria-label=\"Remove ${info.title || info.display_name || info.url}\" @click=${() => this._remove(info.url)}></button>\n      </span>\n    `;\n  }\n}\n\ncustomElements.define('url-chips', UrlChips);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\n\n/**\n * File picker  tree view with checkboxes, git status, context menu.\n *\n * Events emitted:\n *   selection-changed  { selectedFiles: string[] }\n *   file-clicked       { path: string }\n *   git-operation       { operation, paths }\n */\nclass FilePicker extends RpcMixin(LitElement) {\n  static properties = {\n    /** Root tree node from Repo.get_file_tree */\n    tree: { type: Object },\n    /** Arrays of file paths by git status */\n    modified: { type: Array },\n    staged: { type: Array },\n    untracked: { type: Array },\n    /** Diff stats: path  {additions, deletions} */\n    diffStats: { type: Object },\n    /** Currently selected file paths */\n    selectedFiles: { type: Object },\n    /** Filter text */\n    _filter: { type: String, state: true },\n    /** Set of expanded directory paths */\n    _expanded: { type: Object, state: true },\n    /** Focused file path for keyboard nav */\n    _focused: { type: String, state: true },\n    /** Context menu state */\n    _contextMenu: { type: Object, state: true },\n    /** Whether initial auto-select has run */\n    _autoSelected: { type: Boolean, state: true },\n    /** Path of the file currently open in the diff viewer */\n    viewerActiveFile: { type: String },\n  };\n\n  static styles = css`\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      overflow: hidden;\n      font-size: 12.5px;\n      --indent: 16px;\n    }\n\n    /*  Filter bar  */\n    .filter-bar {\n      padding: 6px 8px;\n      border-bottom: 1px solid var(--border-color);\n      flex-shrink: 0;\n    }\n\n    .filter-bar input {\n      width: 100%;\n      padding: 4px 8px;\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      color: var(--text-primary);\n      font-size: 12px;\n      outline: none;\n      font-family: var(--font-sans);\n    }\n    .filter-bar input:focus { border-color: var(--accent-primary); }\n    .filter-bar input::placeholder { color: var(--text-muted); }\n\n    /*  Tree container  */\n    .tree-container {\n      flex: 1;\n      overflow-y: auto;\n      overflow-x: hidden;\n      padding: 4px 0;\n    }\n\n    /*  Tree node row  */\n    .node-row {\n      display: flex;\n      align-items: center;\n      padding: 2px 8px 2px 0;\n      cursor: default;\n      user-select: none;\n      white-space: nowrap;\n      min-height: 24px;\n      border-left: 2px solid transparent;\n      transition: background var(--transition-fast);\n    }\n    .node-row:hover { background: var(--bg-surface); }\n    .node-row.focused {\n      background: var(--bg-surface);\n      border-left-color: var(--accent-primary);\n    }\n    .node-row.active-in-viewer {\n      background: rgba(100, 180, 255, 0.08);\n      border-left-color: var(--accent-primary);\n    }\n    .node-row.active-in-viewer:hover {\n      background: rgba(100, 180, 255, 0.14);\n    }\n\n    /* Indent spacer */\n    .indent { flex-shrink: 0; }\n\n    /* Expand toggle */\n    .toggle {\n      width: 18px;\n      flex-shrink: 0;\n      text-align: center;\n      font-size: 10px;\n      color: var(--text-muted);\n      cursor: pointer;\n      line-height: 1;\n    }\n    .toggle:hover { color: var(--text-primary); }\n\n    /* Checkbox */\n    .node-check {\n      width: 14px;\n      height: 14px;\n      margin-right: 4px;\n      flex-shrink: 0;\n      cursor: pointer;\n      accent-color: var(--accent-primary);\n    }\n\n    /* Name */\n    .node-name {\n      flex: 1;\n      min-width: 0;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: var(--text-primary);\n    }\n    .node-name.dir { font-weight: 600; color: var(--text-secondary); }\n    .node-name.file-click { cursor: pointer; }\n    .node-name.file-click:hover { color: var(--accent-primary); text-decoration: underline; }\n\n    /* Line count */\n    .line-count {\n      font-size: 10px;\n      margin-left: 6px;\n      flex-shrink: 0;\n      font-family: var(--font-mono);\n    }\n    .line-count.green { color: var(--accent-success); }\n    .line-count.orange { color: var(--accent-warning); }\n    .line-count.red { color: var(--accent-error); }\n\n    /* Git status badge */\n    .git-badge {\n      font-size: 9px;\n      font-weight: 700;\n      padding: 0 4px;\n      border-radius: 3px;\n      margin-left: 4px;\n      flex-shrink: 0;\n      line-height: 1.5;\n    }\n    .git-badge.modified { background: rgba(255,167,38,0.2); color: var(--accent-warning); }\n    .git-badge.staged { background: rgba(102,187,106,0.2); color: var(--accent-success); }\n    .git-badge.untracked { background: rgba(102,187,106,0.2); color: var(--accent-success); }\n\n    /* Diff stats */\n    .diff-stats {\n      font-size: 10px;\n      margin-left: 4px;\n      flex-shrink: 0;\n      font-family: var(--font-mono);\n    }\n    .diff-add { color: var(--accent-success); }\n    .diff-del { color: var(--accent-error); }\n\n    /*  Context menu  */\n    .context-menu {\n      position: fixed;\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      box-shadow: var(--shadow-lg);\n      z-index: 200;\n      min-width: 160px;\n      padding: 4px 0;\n      font-size: 12px;\n    }\n    .context-item {\n      padding: 5px 14px;\n      cursor: pointer;\n      color: var(--text-secondary);\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n    .context-item:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n    .context-item.danger { color: var(--accent-error); }\n    .context-item.danger:hover { background: rgba(239,83,80,0.1); }\n    .context-sep {\n      height: 1px;\n      background: var(--border-color);\n      margin: 4px 0;\n    }\n\n    /*  Confirm/prompt overlay  */\n    .overlay-backdrop {\n      position: fixed;\n      inset: 0;\n      z-index: 250;\n    }\n    .overlay-dialog {\n      position: fixed;\n      top: 50%; left: 50%;\n      transform: translate(-50%, -50%);\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      box-shadow: var(--shadow-lg);\n      padding: 16px 20px;\n      z-index: 260;\n      min-width: 280px;\n    }\n    .overlay-dialog p {\n      margin: 0 0 12px 0;\n      color: var(--text-primary);\n      font-size: 13px;\n    }\n    .overlay-dialog input {\n      width: 100%;\n      padding: 6px 8px;\n      margin-bottom: 12px;\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      color: var(--text-primary);\n      font-size: 13px;\n      outline: none;\n      box-sizing: border-box;\n    }\n    .overlay-dialog input:focus { border-color: var(--accent-primary); }\n    .overlay-btns {\n      display: flex;\n      justify-content: flex-end;\n      gap: 8px;\n    }\n    .overlay-btns button {\n      padding: 5px 14px;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      background: var(--bg-surface);\n      color: var(--text-primary);\n      cursor: pointer;\n      font-size: 12px;\n    }\n    .overlay-btns button.primary {\n      background: var(--accent-primary);\n      color: var(--bg-primary);\n      border-color: var(--accent-primary);\n    }\n    .overlay-btns button.danger {\n      background: var(--accent-error);\n      color: white;\n      border-color: var(--accent-error);\n    }\n\n    .empty-tree {\n      padding: 20px;\n      color: var(--text-muted);\n      text-align: center;\n      font-size: 13px;\n    }\n  `;\n\n  constructor() {\n    super();\n    this.tree = null;\n    this.modified = [];\n    this.staged = [];\n    this.untracked = [];\n    this.diffStats = {};\n    this.selectedFiles = new Set();\n    this._filter = '';\n    this._expanded = new Set();\n    this._focused = '';\n    this._contextMenu = null;\n    this._autoSelected = false;\n    this._overlayState = null; // {type:'confirm'|'prompt', ...}\n    this.viewerActiveFile = '';\n    this._flatVisibleCache = null;\n\n    this._onDocClick = this._onDocClick.bind(this);\n    this._onDocKeydown = this._onDocKeydown.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    document.addEventListener('click', this._onDocClick, true);\n    document.addEventListener('keydown', this._onDocKeydown);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    document.removeEventListener('click', this._onDocClick, true);\n    document.removeEventListener('keydown', this._onDocKeydown);\n  }\n\n  //  Property change tracking \n\n  willUpdate(changed) {\n    // Invalidate flat list cache on relevant changes\n    if (changed.has('tree') || changed.has('_filter') || changed.has('_expanded')) {\n      this._flatVisibleCache = null;\n    }\n    // Auto-select changed files on first tree load\n    if (changed.has('tree') && this.tree && !this._autoSelected) {\n      this._autoSelected = true;\n      this._autoSelect();\n    }\n  }\n\n  //  Auto selection \n\n  _autoSelect() {\n    const changed = new Set([\n      ...(this.modified || []),\n      ...(this.staged || []),\n      ...(this.untracked || []),\n    ]);\n    if (changed.size === 0) return;\n    this.selectedFiles = new Set(changed);\n    // Auto-expand directories containing changed files\n    for (const fpath of changed) {\n      this._expandParents(fpath);\n    }\n    this._emitSelection();\n  }\n\n  _expandParents(filePath) {\n    const parts = filePath.split('/');\n    for (let i = 1; i < parts.length; i++) {\n      this._expanded.add(parts.slice(0, i).join('/'));\n    }\n    this._expanded = new Set(this._expanded);\n  }\n\n  //  Filter \n\n  _onFilterInput(e) {\n    this._filter = e.target.value;\n  }\n\n  _matchesFilter(node) {\n    if (!this._filter) return true;\n    const q = this._filter.toLowerCase();\n    if (node.path.toLowerCase().includes(q)) return true;\n    if (node.type === 'dir') {\n      return (node.children || []).some(c => this._matchesFilter(c));\n    }\n    return false;\n  }\n\n  //  Selection \n\n  _toggleSelect(path, isDir, children) {\n    const next = new Set(this.selectedFiles);\n    if (isDir) {\n      const files = this._collectFiles(children);\n      const allSelected = files.every(f => next.has(f));\n      if (allSelected) {\n        files.forEach(f => next.delete(f));\n      } else {\n        files.forEach(f => next.add(f));\n      }\n    } else {\n      if (next.has(path)) next.delete(path);\n      else next.add(path);\n    }\n    this.selectedFiles = next;\n    this._emitSelection();\n  }\n\n  _collectFiles(children) {\n    const result = [];\n    const walk = (nodes) => {\n      for (const n of nodes) {\n        if (n.type === 'file') result.push(n.path);\n        else if (n.children) walk(n.children);\n      }\n    };\n    walk(children || []);\n    return result;\n  }\n\n  _dirCheckState(children) {\n    const files = this._collectFiles(children);\n    if (files.length === 0) return 'none';\n    const sel = files.filter(f => this.selectedFiles.has(f)).length;\n    if (sel === 0) return 'none';\n    if (sel === files.length) return 'all';\n    return 'indeterminate';\n  }\n\n  _emitSelection() {\n    this.dispatchEvent(new CustomEvent('selection-changed', {\n      detail: { selectedFiles: [...this.selectedFiles] },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  //  Expand / Collapse \n\n  _toggleExpand(path) {\n    const next = new Set(this._expanded);\n    if (next.has(path)) next.delete(path);\n    else next.add(path);\n    this._expanded = next;\n  }\n\n  //  File click \n\n  _onFileNameClick(path) {\n    this.dispatchEvent(new CustomEvent('file-clicked', {\n      detail: { path },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  //  Middle-click to insert path into chat input \n\n  _onMiddleClick(e, path) {\n    // Middle mouse button = button 1\n    if (e.button !== 1) return;\n    e.preventDefault();\n    e.stopPropagation();\n\n    // Block all follow-up events that could trigger clipboard paste or autoscroll.\n    // Different browsers use different events for middle-click paste:\n    //   - auxclick (Chrome/Firefox)\n    //   - mouseup with button=1 (some Linux environments)\n    //   - paste event on the focused textarea\n    const blockMid = (ev) => { if (ev.button === 1) { ev.preventDefault(); ev.stopPropagation(); } };\n    const blockPaste = (ev) => { ev.preventDefault(); ev.stopPropagation(); };\n\n    window.addEventListener('auxclick', blockMid, { once: true, capture: true });\n    window.addEventListener('mouseup', blockMid, { once: true, capture: true });\n    // Temporarily block paste on the target textarea\n    const input = this.closest('files-tab')?.shadowRoot?.querySelector('chat-input');\n    const textarea = input?.shadowRoot?.querySelector('textarea');\n    if (textarea) {\n      textarea.addEventListener('paste', blockPaste, { once: true, capture: true });\n      // Clean up paste blocker after a short delay in case paste never fires\n      setTimeout(() => textarea.removeEventListener('paste', blockPaste, true), 200);\n    }\n\n    this.dispatchEvent(new CustomEvent('path-to-input', {\n      detail: { path },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  //  Git status helpers \n\n  _gitStatus(path) {\n    if (this.staged?.includes(path)) return 'staged';\n    if (this.modified?.includes(path)) return 'modified';\n    if (this.untracked?.includes(path)) return 'untracked';\n    return '';\n  }\n\n  _gitBadge(status) {\n    if (status === 'staged') return 'S';\n    if (status === 'modified') return 'M';\n    if (status === 'untracked') return 'U';\n    return '';\n  }\n\n  _nameColor(path) {\n    const s = this._gitStatus(path);\n    if (s === 'modified') return 'color: var(--accent-warning)';\n    if (s === 'staged' || s === 'untracked') return 'color: var(--accent-success)';\n    return 'color: var(--text-muted)';\n  }\n\n  _lineCountClass(lines) {\n    if (lines <= 0) return '';\n    if (lines < 130) return 'green';\n    if (lines <= 170) return 'orange';\n    return 'red';\n  }\n\n  //  Context menu \n\n  _onContextMenu(e, node) {\n    e.preventDefault();\n    e.stopPropagation();\n    this._contextMenu = {\n      x: e.clientX,\n      y: e.clientY,\n      node,\n    };\n    this.requestUpdate();\n  }\n\n  _onDocClick() {\n    if (this._contextMenu) {\n      this._contextMenu = null;\n      this.requestUpdate();\n    }\n  }\n\n  _onDocKeydown(e) {\n    if (e.key === 'Escape') {\n      if (this._overlayState) {\n        this._overlayState = null;\n        this.requestUpdate();\n        return;\n      }\n      if (this._contextMenu) {\n        this._contextMenu = null;\n        this.requestUpdate();\n      }\n    }\n  }\n\n  _contextItems(node) {\n    const items = [];\n    const path = node.path;\n\n    if (node.type === 'file') {\n      const status = this._gitStatus(path);\n      if (status === 'modified' || status === 'untracked') {\n        items.push({ label: 'Stage file', icon: '', op: 'stage', paths: [path] });\n      }\n      if (status === 'staged') {\n        items.push({ label: 'Unstage file', icon: '', op: 'unstage', paths: [path] });\n      }\n      if (status === 'modified') {\n        items.push({ label: 'Discard changes', icon: '', op: 'discard', paths: [path], danger: true, confirm: true });\n      }\n      items.push({ sep: true });\n      items.push({ label: 'Rename / Move', icon: '', op: 'rename', paths: [path], prompt: true });\n      items.push({ label: 'Delete file', icon: '', op: 'delete', paths: [path], danger: true, confirm: true });\n    } else {\n      // Directory\n      const dirFiles = this._collectFiles(node.children || []);\n      const hasUnstaged = dirFiles.some(f => this._gitStatus(f) === 'modified' || this._gitStatus(f) === 'untracked');\n      const hasStaged = dirFiles.some(f => this._gitStatus(f) === 'staged');\n\n      if (hasUnstaged) {\n        items.push({ label: 'Stage all in dir', icon: '', op: 'stage', paths: dirFiles.filter(f => {\n          const s = this._gitStatus(f);\n          return s === 'modified' || s === 'untracked';\n        })});\n      }\n      if (hasStaged) {\n        items.push({ label: 'Unstage all', icon: '', op: 'unstage', paths: dirFiles.filter(f => this._gitStatus(f) === 'staged') });\n      }\n      if (items.length > 0) items.push({ sep: true });\n      items.push({ label: 'Rename / Move', icon: '', op: 'rename-dir', paths: [path], prompt: true });\n      items.push({ label: 'New file', icon: '', op: 'create-file', paths: [path], prompt: true });\n      items.push({ label: 'New directory', icon: '', op: 'create-dir', paths: [path], prompt: true });\n    }\n    return items;\n  }\n\n  _onContextItemClick(item) {\n    this._contextMenu = null;\n    if (item.confirm) {\n      this._overlayState = { type: 'confirm', item };\n      this.requestUpdate();\n    } else if (item.prompt) {\n      const defaultVal = item.op.startsWith('rename') ? item.paths[0] : '';\n      this._overlayState = { type: 'prompt', item, value: defaultVal };\n      this.requestUpdate();\n    } else {\n      this._executeGitOp(item.op, item.paths);\n    }\n  }\n\n  _onOverlayConfirm() {\n    const item = this._overlayState?.item;\n    this._overlayState = null;\n    if (item) this._executeGitOp(item.op, item.paths);\n    this.requestUpdate();\n  }\n\n  _onOverlayPromptConfirm() {\n    const { item, value } = this._overlayState || {};\n    this._overlayState = null;\n    this.requestUpdate();\n    if (!item || !value?.trim()) return;\n    this._executeGitOp(item.op, item.paths, value.trim());\n  }\n\n  async _executeGitOp(op, paths, extra) {\n    try {\n      let result;\n      switch (op) {\n        case 'stage':\n          result = await this.rpcExtract('Repo.stage_files', paths);\n          break;\n        case 'unstage':\n          result = await this.rpcExtract('Repo.unstage_files', paths);\n          break;\n        case 'discard':\n          result = await this.rpcExtract('Repo.discard_changes', paths);\n          break;\n        case 'delete':\n          result = await this.rpcExtract('Repo.delete_file', paths[0]);\n          break;\n        case 'rename':\n        case 'rename-dir':\n          result = await this.rpcExtract(\n            op === 'rename-dir' ? 'Repo.rename_directory' : 'Repo.rename_file',\n            paths[0], extra,\n          );\n          break;\n        case 'create-file':\n          result = await this.rpcExtract('Repo.create_file', paths[0] + '/' + extra, '');\n          break;\n        case 'create-dir': {\n          // Create dir by creating a .gitkeep inside it\n          const dirPath = paths[0] + '/' + extra + '/.gitkeep';\n          result = await this.rpcExtract('Repo.create_file', dirPath, '');\n          break;\n        }\n        default:\n          console.warn('Unknown git op:', op);\n          return;\n      }\n      if (result?.error) {\n        console.error('Git operation failed:', result.error);\n      }\n      // Refresh tree\n      this.dispatchEvent(new CustomEvent('git-operation', {\n        detail: { operation: op, paths, result },\n        bubbles: true, composed: true,\n      }));\n    } catch (e) {\n      console.error('Git operation error:', e);\n    }\n  }\n\n  //  Keyboard navigation \n\n  _getFlatVisible() {\n    if (this._flatVisibleCache) return this._flatVisibleCache;\n    const flat = [];\n    const walk = (nodes, depth) => {\n      for (const node of nodes) {\n        if (!this._matchesFilter(node)) continue;\n        flat.push({ path: node.path, type: node.type, depth });\n        if (node.type === 'dir' && (this._expanded.has(node.path) || this._filter)) {\n          walk(node.children || [], depth + 1);\n        }\n      }\n    };\n    if (this.tree?.children) walk(this.tree.children, 0);\n    this._flatVisibleCache = flat;\n    return flat;\n  }\n\n  _onTreeKeydown(e) {\n    const flat = this._getFlatVisible();\n    if (flat.length === 0) return;\n\n    const idx = flat.findIndex(n => n.path === this._focused);\n\n    if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      const next = Math.min(idx + 1, flat.length - 1);\n      this._focused = flat[next >= 0 ? next : 0].path;\n      this._scrollFocusedIntoView();\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      const next = Math.max(idx - 1, 0);\n      this._focused = flat[next].path;\n      this._scrollFocusedIntoView();\n    } else if (e.key === ' ' || e.key === 'Enter') {\n      e.preventDefault();\n      if (idx >= 0) {\n        const item = flat[idx];\n        if (item.type === 'dir') {\n          this._toggleExpand(item.path);\n        } else {\n          this._toggleSelect(item.path, false, []);\n        }\n      }\n    } else if (e.key === 'ArrowRight') {\n      e.preventDefault();\n      if (idx >= 0 && flat[idx].type === 'dir') {\n        const next = new Set(this._expanded);\n        next.add(flat[idx].path);\n        this._expanded = next;\n      }\n    } else if (e.key === 'ArrowLeft') {\n      e.preventDefault();\n      if (idx >= 0 && flat[idx].type === 'dir') {\n        const next = new Set(this._expanded);\n        next.delete(flat[idx].path);\n        this._expanded = next;\n      }\n    }\n  }\n\n  _scrollFocusedIntoView() {\n    this.updateComplete.then(() => {\n      const el = this.shadowRoot.querySelector('.node-row.focused');\n      if (el) el.scrollIntoView({ block: 'nearest' });\n    });\n  }\n\n  //  Public API \n\n  setTree(data) {\n    this.tree = data.tree || null;\n    this.modified = data.modified || [];\n    this.staged = data.staged || [];\n    this.untracked = data.untracked || [];\n    this.diffStats = data.diff_stats || {};\n  }\n\n  setSelectedFiles(files) {\n    this.selectedFiles = new Set(files);\n  }\n\n  //  Render \n\n  render() {\n    return html`\n      <div class=\"filter-bar\">\n        <input type=\"text\"\n          placeholder=\"Filter files...\"\n          aria-label=\"Filter files\"\n          .value=${this._filter}\n          @input=${this._onFilterInput}\n        >\n      </div>\n\n      <div class=\"tree-container\"\n        role=\"tree\"\n        aria-label=\"Repository files\"\n        tabindex=\"0\"\n        @keydown=${this._onTreeKeydown}\n      >\n        ${this.tree?.children?.length\n          ? this._renderNodes(this.tree.children, 0)\n          : html`<div class=\"empty-tree\">No files</div>`\n        }\n      </div>\n\n      ${this._contextMenu ? this._renderContextMenu() : nothing}\n      ${this._overlayState ? this._renderOverlay() : nothing}\n    `;\n  }\n\n  _renderNodes(nodes, depth) {\n    if (!nodes) return nothing;\n    return nodes\n      .filter(n => this._matchesFilter(n))\n      .map(n => n.type === 'dir'\n        ? this._renderDir(n, depth)\n        : this._renderFile(n, depth)\n      );\n  }\n\n  _renderDir(node, depth) {\n    const expanded = this._expanded.has(node.path) || !!this._filter;\n    const checkState = this._dirCheckState(node.children || []);\n    const isFocused = this._focused === node.path;\n\n    return html`\n      <div class=\"node-row ${isFocused ? 'focused' : ''}\"\n        role=\"treeitem\"\n        aria-expanded=${expanded}\n        aria-selected=${checkState === 'all'}\n        style=\"padding-left: ${depth * 16 + 4}px\"\n        @contextmenu=${(e) => this._onContextMenu(e, node)}\n        @click=${() => { this._focused = node.path; this._toggleExpand(node.path); }}\n        @mousedown=${(e) => this._onMiddleClick(e, node.path)}\n      >\n        <span class=\"toggle\" aria-hidden=\"true\" @click=${(e) => { e.stopPropagation(); this._toggleExpand(node.path); }}>\n          ${expanded ? '' : ''}\n        </span>\n        <input type=\"checkbox\"\n          class=\"node-check\"\n          aria-label=\"Select ${node.name}\"\n          .checked=${checkState === 'all'}\n          .indeterminate=${checkState === 'indeterminate'}\n          @change=${() => this._toggleSelect(node.path, true, node.children || [])}\n          @click=${(e) => e.stopPropagation()}\n        >\n        <span class=\"node-name dir\">${node.name}</span>\n      </div>\n      ${expanded ? html`<div role=\"group\">${this._renderNodes(node.children || [], depth + 1)}</div>` : nothing}\n    `;\n  }\n\n  _renderFile(node, depth) {\n    const selected = this.selectedFiles.has(node.path);\n    const status = this._gitStatus(node.path);\n    const badge = this._gitBadge(status);\n    const stats = this.diffStats?.[node.path];\n    const isFocused = this._focused === node.path;\n\n    const isActiveInViewer = this.viewerActiveFile === node.path;\n\n    return html`\n      <div class=\"node-row ${isFocused ? 'focused' : ''} ${isActiveInViewer ? 'active-in-viewer' : ''}\"\n        role=\"treeitem\"\n        aria-selected=${selected}\n        aria-current=${isActiveInViewer ? 'true' : nothing}\n        style=\"padding-left: ${depth * 16 + 4}px\"\n        @contextmenu=${(e) => this._onContextMenu(e, node)}\n        @click=${() => { this._focused = node.path; }}\n        @mousedown=${(e) => this._onMiddleClick(e, node.path)}\n      >\n        <span class=\"toggle\" aria-hidden=\"true\"></span>\n        <input type=\"checkbox\"\n          class=\"node-check\"\n          aria-label=\"Select ${node.name}\"\n          .checked=${selected}\n          @change=${() => this._toggleSelect(node.path, false, [])}\n          @click=${(e) => e.stopPropagation()}\n        >\n        <span class=\"node-name file-click\"\n          role=\"link\"\n          tabindex=\"-1\"\n          style=${this._nameColor(node.path)}\n          @click=${(e) => { e.stopPropagation(); this._onFileNameClick(node.path); }}>\n          ${node.name}\n        </span>\n        ${node.lines > 0 ? html`\n          <span class=\"line-count ${this._lineCountClass(node.lines)}\">${node.lines}</span>\n        ` : nothing}\n        ${badge ? html`\n          <span class=\"git-badge ${status}\">${badge}</span>\n        ` : nothing}\n        ${stats ? html`\n          <span class=\"diff-stats\">\n            ${stats.additions ? html`<span class=\"diff-add\">+${stats.additions}</span>` : nothing}\n            ${stats.deletions ? html`<span class=\"diff-del\">-${stats.deletions}</span>` : nothing}\n          </span>\n        ` : nothing}\n      </div>\n    `;\n  }\n\n  _renderContextMenu() {\n    const { x, y, node } = this._contextMenu;\n    const items = this._contextItems(node);\n    // Clamp position to viewport\n    const clampedX = Math.min(x, window.innerWidth - 180);\n    const clampedY = Math.min(y, window.innerHeight - items.length * 30 - 20);\n\n    return html`\n      <div class=\"context-menu\"\n        role=\"menu\"\n        aria-label=\"File actions\"\n        style=\"left:${clampedX}px; top:${clampedY}px\"\n        @click=${(e) => e.stopPropagation()}>\n        ${items.map(item =>\n          item.sep\n            ? html`<div class=\"context-sep\" role=\"separator\"></div>`\n            : html`\n              <div class=\"context-item ${item.danger ? 'danger' : ''}\"\n                role=\"menuitem\"\n                tabindex=\"-1\"\n                @click=${() => this._onContextItemClick(item)}>\n                <span aria-hidden=\"true\">${item.icon}</span>\n                <span>${item.label}</span>\n              </div>`\n        )}\n      </div>\n    `;\n  }\n\n  _renderOverlay() {\n    const s = this._overlayState;\n    if (s.type === 'confirm') {\n      return html`\n        <div class=\"overlay-backdrop\" @click=${() => { this._overlayState = null; this.requestUpdate(); }}></div>\n        <div class=\"overlay-dialog\" role=\"alertdialog\" aria-label=\"Confirm ${s.item.label.toLowerCase()}\">\n          <p>Are you sure you want to <b>${s.item.label.toLowerCase()}</b>?</p>\n          <p style=\"font-size:12px; color:var(--text-secondary)\">${s.item.paths.join(', ')}</p>\n          <div class=\"overlay-btns\">\n            <button @click=${() => { this._overlayState = null; this.requestUpdate(); }}>Cancel</button>\n            <button class=\"danger\" @click=${this._onOverlayConfirm}>${s.item.label}</button>\n          </div>\n        </div>\n      `;\n    }\n    if (s.type === 'prompt') {\n      const placeholder = s.item.op.includes('create-file') ? 'filename.ext'\n        : s.item.op.includes('create-dir') ? 'directory-name'\n        : s.item.paths[0] || '';\n      return html`\n        <div class=\"overlay-backdrop\" @click=${() => { this._overlayState = null; this.requestUpdate(); }}></div>\n        <div class=\"overlay-dialog\" role=\"dialog\" aria-label=\"${s.item.label}\">\n          <p>${s.item.label}</p>\n          <input type=\"text\"\n            aria-label=\"${s.item.label} path\"\n            .value=${s.value}\n            placeholder=${placeholder}\n            @input=${(e) => { s.value = e.target.value; }}\n            @keydown=${(e) => { if (e.key === 'Enter') this._onOverlayPromptConfirm(); }}\n          >\n          <div class=\"overlay-btns\">\n            <button @click=${() => { this._overlayState = null; this.requestUpdate(); }}>Cancel</button>\n            <button class=\"primary\" @click=${this._onOverlayPromptConfirm}>OK</button>\n          </div>\n        </div>\n      `;\n    }\n    return nothing;\n  }\n\n  updated(changed) {\n    super.updated(changed);\n    // Auto-focus prompt input\n    if (this._overlayState?.type === 'prompt') {\n      const input = this.shadowRoot.querySelector('.overlay-dialog input');\n      if (input) input.focus();\n    }\n  }\n}\n\ncustomElements.define('file-picker', FilePicker);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\n\nconst DEBOUNCE_MS = 300;\nconst SESSION_CACHE_TTL = 10000; // 10s\n\n/**\n * History Browser  modal overlay for browsing past conversations.\n * Left panel: session list or search results.\n * Right panel: messages for selected session.\n */\nclass HistoryBrowser extends RpcMixin(LitElement) {\n  static properties = {\n    open: { type: Boolean, reflect: true },\n    _sessions: { type: Array, state: true },\n    _selectedId: { type: String, state: true },\n    _messages: { type: Array, state: true },\n    _query: { type: String, state: true },\n    _searchResults: { type: Array, state: true },\n    _searching: { type: Boolean, state: true },\n    _loadingSessions: { type: Boolean, state: true },\n    _loadingMessages: { type: Boolean, state: true },\n    _highlightMsgId: { type: String, state: true },\n  };\n\n  static styles = css`\n    :host { display: contents; }\n\n    .backdrop {\n      position: fixed;\n      inset: 0;\n      background: rgba(0, 0, 0, 0.5);\n      z-index: 200;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      animation: fade-in 0.15s ease;\n    }\n\n    @keyframes fade-in {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n\n    .modal {\n      background: var(--bg-secondary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-lg);\n      box-shadow: var(--shadow-lg);\n      width: min(900px, 90vw);\n      height: min(600px, 80vh);\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      animation: slide-up 0.15s ease;\n    }\n\n    @keyframes slide-up {\n      from { transform: translateY(12px); opacity: 0; }\n      to { transform: translateY(0); opacity: 1; }\n    }\n\n    /*  Header  */\n    .header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 10px 14px;\n      border-bottom: 1px solid var(--border-color);\n      background: var(--bg-elevated);\n      flex-shrink: 0;\n    }\n\n    .header-title {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--text-primary);\n    }\n\n    .header-search {\n      flex: 1;\n      margin: 0 12px;\n    }\n\n    .search-input {\n      width: 100%;\n      padding: 5px 10px;\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      color: var(--text-primary);\n      font-size: 12px;\n      font-family: var(--font-mono);\n      outline: none;\n      box-sizing: border-box;\n    }\n    .search-input:focus { border-color: var(--accent-primary); }\n    .search-input::placeholder { color: var(--text-muted); }\n\n    .header-actions {\n      display: flex;\n      gap: 6px;\n      flex-shrink: 0;\n    }\n\n    .header-btn {\n      background: none;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 4px 10px;\n      cursor: pointer;\n      font-size: 11px;\n      color: var(--text-secondary);\n      transition: background var(--transition-fast), color var(--transition-fast);\n      white-space: nowrap;\n    }\n    .header-btn:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n    .header-btn.primary {\n      background: var(--accent-primary);\n      color: white;\n      border-color: var(--accent-primary);\n    }\n    .header-btn.primary:hover { opacity: 0.9; }\n    .header-btn.primary:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n\n    .close-btn {\n      background: none;\n      border: none;\n      padding: 4px 8px;\n      cursor: pointer;\n      font-size: 16px;\n      color: var(--text-muted);\n      border-radius: var(--radius-sm);\n      transition: color var(--transition-fast);\n      line-height: 1;\n    }\n    .close-btn:hover { color: var(--text-primary); }\n\n    /*  Body  */\n    .body {\n      display: flex;\n      flex: 1;\n      overflow: hidden;\n      min-height: 0;\n    }\n\n    /*  Left panel (session list)  */\n    .left-panel {\n      width: 280px;\n      min-width: 200px;\n      border-right: 1px solid var(--border-color);\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      flex-shrink: 0;\n    }\n\n    .session-list {\n      flex: 1;\n      overflow-y: auto;\n      padding: 4px 0;\n    }\n\n    .session-item {\n      padding: 8px 12px;\n      cursor: pointer;\n      border-left: 3px solid transparent;\n      transition: background var(--transition-fast);\n    }\n    .session-item:hover { background: var(--bg-surface); }\n    .session-item.selected {\n      background: var(--bg-surface);\n      border-left-color: var(--accent-primary);\n    }\n\n    .session-time {\n      font-size: 10px;\n      color: var(--text-muted);\n      margin-bottom: 2px;\n    }\n\n    .session-preview {\n      font-size: 12px;\n      color: var(--text-secondary);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    .session-count {\n      font-size: 10px;\n      color: var(--text-muted);\n      margin-top: 2px;\n    }\n\n    .list-empty {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--text-muted);\n      font-size: 12px;\n      padding: 20px;\n      text-align: center;\n    }\n\n    .list-loading {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 20px;\n      color: var(--text-muted);\n      font-size: 12px;\n      gap: 6px;\n    }\n\n    .spinner {\n      display: inline-block;\n      width: 12px;\n      height: 12px;\n      border: 2px solid var(--border-color);\n      border-top-color: var(--accent-primary);\n      border-radius: 50%;\n      animation: spin 0.8s linear infinite;\n    }\n    @keyframes spin { to { transform: rotate(360deg); } }\n\n    /*  Right panel (messages)  */\n    .right-panel {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      min-width: 0;\n    }\n\n    .messages-container {\n      flex: 1;\n      overflow-y: auto;\n      padding: 12px;\n    }\n\n    .messages-empty {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--text-muted);\n      font-size: 12px;\n    }\n\n    .msg-card {\n      margin-bottom: 10px;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      overflow: hidden;\n      background: var(--bg-elevated);\n      transition: border-color 0.3s ease;\n    }\n    .msg-card.highlighted {\n      border-color: var(--accent-primary);\n      box-shadow: 0 0 0 1px var(--accent-primary);\n    }\n\n    .msg-header {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 6px 10px;\n      background: var(--bg-secondary);\n      border-bottom: 1px solid var(--border-color);\n    }\n\n    .msg-role {\n      font-size: 10px;\n      font-weight: 700;\n      text-transform: uppercase;\n      padding: 1px 5px;\n      border-radius: 3px;\n      color: white;\n    }\n    .msg-role.user { background: var(--accent-primary); }\n    .msg-role.assistant { background: #7c4dff; }\n\n    .msg-meta {\n      font-size: 10px;\n      color: var(--text-muted);\n      flex: 1;\n    }\n\n    .msg-actions {\n      display: flex;\n      gap: 2px;\n    }\n\n    .msg-action-btn {\n      background: none;\n      border: none;\n      padding: 2px 5px;\n      cursor: pointer;\n      font-size: 12px;\n      color: var(--text-muted);\n      border-radius: var(--radius-sm);\n      transition: color var(--transition-fast), background var(--transition-fast);\n      line-height: 1;\n    }\n    .msg-action-btn:hover {\n      color: var(--text-primary);\n      background: var(--bg-surface);\n    }\n\n    .msg-content {\n      padding: 8px 10px;\n      font-size: 12px;\n      color: var(--text-secondary);\n      line-height: 1.5;\n      white-space: pre-wrap;\n      word-break: break-word;\n      max-height: 300px;\n      overflow-y: auto;\n    }\n\n    .msg-files {\n      padding: 4px 10px 6px;\n      display: flex;\n      flex-wrap: wrap;\n      gap: 4px;\n    }\n\n    .file-badge {\n      font-size: 10px;\n      font-family: var(--font-mono);\n      padding: 1px 6px;\n      background: var(--bg-surface);\n      border-radius: 3px;\n      color: var(--text-muted);\n    }\n\n    /*  Search result items  */\n    .search-item {\n      padding: 8px 12px;\n      cursor: pointer;\n      border-left: 3px solid transparent;\n      transition: background var(--transition-fast);\n    }\n    .search-item:hover { background: var(--bg-surface); }\n\n    .search-item-role {\n      font-size: 10px;\n      font-weight: 600;\n      text-transform: uppercase;\n      color: var(--text-muted);\n    }\n\n    .search-item-preview {\n      font-size: 12px;\n      color: var(--text-secondary);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      margin-top: 2px;\n    }\n\n    .search-item-session {\n      font-size: 10px;\n      color: var(--text-muted);\n      margin-top: 2px;\n    }\n\n    .search-highlight {\n      background: rgba(79, 195, 247, 0.2);\n      color: var(--accent-primary);\n      border-radius: 2px;\n    }\n  `;\n\n  constructor() {\n    super();\n    this.open = false;\n    this._sessions = [];\n    this._selectedId = null;\n    this._messages = [];\n    this._query = '';\n    this._searchResults = [];\n    this._searching = false;\n    this._loadingSessions = false;\n    this._loadingMessages = false;\n    this._highlightMsgId = null;\n    this._debounceTimer = null;\n    this._sessionsLoadedAt = 0;\n  }\n\n  //  Lifecycle \n\n  updated(changed) {\n    if (changed.has('open') && this.open) {\n      this._onOpen();\n    }\n  }\n\n  _onOpen() {\n    // Refresh sessions if stale or never loaded\n    const now = Date.now();\n    if (!this._sessions.length || now - this._sessionsLoadedAt > SESSION_CACHE_TTL) {\n      this._loadSessions();\n    }\n    // Focus search input\n    this.updateComplete.then(() => {\n      this.shadowRoot.querySelector('.search-input')?.focus();\n    });\n  }\n\n  //  Data loading \n\n  async _loadSessions() {\n    if (!this.rpcConnected) return;\n    this._loadingSessions = true;\n    try {\n      const sessions = await this.rpcExtract('LLM.history_list_sessions', 50);\n      if (Array.isArray(sessions)) {\n        this._sessions = sessions;\n        this._sessionsLoadedAt = Date.now();\n      }\n    } catch (e) {\n      console.warn('Failed to load sessions:', e);\n    } finally {\n      this._loadingSessions = false;\n    }\n  }\n\n  async _selectSession(sessionId) {\n    if (this._selectedId === sessionId) return;\n    this._selectedId = sessionId;\n    this._messages = [];\n    this._highlightMsgId = null;\n    this._loadingMessages = true;\n    try {\n      const messages = await this.rpcExtract('LLM.history_get_session', sessionId);\n      if (Array.isArray(messages)) {\n        this._messages = messages;\n      }\n    } catch (e) {\n      console.warn('Failed to load session:', e);\n    } finally {\n      this._loadingMessages = false;\n    }\n  }\n\n  //  Search \n\n  _onSearchInput(e) {\n    this._query = e.target.value;\n    if (this._debounceTimer) clearTimeout(this._debounceTimer);\n    if (!this._query.trim()) {\n      this._searchResults = [];\n      this._searching = false;\n      return;\n    }\n    this._debounceTimer = setTimeout(() => this._executeSearch(), DEBOUNCE_MS);\n  }\n\n  async _executeSearch() {\n    const query = this._query.trim();\n    if (!query || !this.rpcConnected) return;\n    this._searching = true;\n    try {\n      const results = await this.rpcExtract('LLM.history_search', query, null, 50);\n      if (Array.isArray(results)) {\n        this._searchResults = results;\n      }\n    } catch (e) {\n      console.warn('Search failed:', e);\n    } finally {\n      this._searching = false;\n    }\n  }\n\n  _onSearchResultClick(result) {\n    // Select the session and highlight the message\n    this._highlightMsgId = result.id || null;\n    if (result.session_id && result.session_id !== this._selectedId) {\n      this._selectSession(result.session_id).then(() => {\n        this._scrollToHighlighted();\n      });\n    } else {\n      this._scrollToHighlighted();\n    }\n  }\n\n  _scrollToHighlighted() {\n    this.updateComplete.then(() => {\n      const el = this.shadowRoot.querySelector('.msg-card.highlighted');\n      if (el) el.scrollIntoView({ block: 'center', behavior: 'smooth' });\n    });\n  }\n\n  //  Actions \n\n  async _loadIntoContext() {\n    if (!this._selectedId || !this.rpcConnected) return;\n    try {\n      const result = await this.rpcExtract(\n        'LLM.load_session_into_context', this._selectedId\n      );\n      if (result?.error) {\n        console.error('Load session failed:', result.error);\n        return;\n      }\n      // Dispatch event so files-tab rebuilds messages\n      this.dispatchEvent(new CustomEvent('session-loaded', {\n        detail: {\n          sessionId: this._selectedId,\n          messages: this._messages.map(m => ({\n            role: m.role,\n            content: m.content,\n          })),\n        },\n        bubbles: true, composed: true,\n      }));\n      this._close();\n    } catch (e) {\n      console.error('Load session failed:', e);\n    }\n  }\n\n  async _copyMessage(msg) {\n    try {\n      await navigator.clipboard.writeText(msg.content);\n    } catch (e) {\n      console.warn('Copy failed:', e);\n    }\n  }\n\n  _toPrompt(msg) {\n    this.dispatchEvent(new CustomEvent('insert-to-prompt', {\n      detail: { text: msg.content },\n      bubbles: true, composed: true,\n    }));\n    this._close();\n  }\n\n  _close() {\n    this.open = false;\n    this.dispatchEvent(new CustomEvent('history-closed', {\n      bubbles: true, composed: true,\n    }));\n  }\n\n  _onBackdropClick(e) {\n    if (e.target === e.currentTarget) this._close();\n  }\n\n  _onKeyDown(e) {\n    if (e.key === 'Escape') {\n      e.stopPropagation();\n      this._close();\n    }\n  }\n\n  //  Formatting helpers \n\n  _formatTime(timestamp) {\n    if (!timestamp) return '';\n    try {\n      const d = new Date(timestamp);\n      const now = new Date();\n      const diffMs = now - d;\n      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n\n      if (diffDays === 0) {\n        return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n      } else if (diffDays === 1) {\n        return 'Yesterday ' + d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n      } else if (diffDays < 7) {\n        return d.toLocaleDateString([], { weekday: 'short' }) + ' ' +\n          d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n      }\n      return d.toLocaleDateString([], { month: 'short', day: 'numeric' }) + ' ' +\n        d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    } catch {\n      return String(timestamp).slice(0, 16);\n    }\n  }\n\n  _truncate(text, len = 100) {\n    if (!text) return '';\n    const clean = text.replace(/\\n/g, ' ').trim();\n    if (clean.length <= len) return clean;\n    return clean.slice(0, len) + '';\n  }\n\n  _highlightQuery(text, query) {\n    if (!query || !text) return text;\n    const truncated = this._truncate(text, 120);\n    try {\n      const escaped = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n      const pattern = new RegExp(`(${escaped})`, 'gi');\n      const parts = truncated.split(pattern);\n      if (parts.length <= 1) return truncated;\n      return parts.map((part, i) =>\n        i % 2 === 1\n          ? html`<span class=\"search-highlight\">${part}</span>`\n          : part\n      );\n    } catch {\n      return truncated;\n    }\n  }\n\n  //  Render \n\n  render() {\n    if (!this.open) return nothing;\n\n    const isSearching = this._query.trim().length > 0;\n\n    return html`\n      <div class=\"backdrop\" @click=${this._onBackdropClick} @keydown=${this._onKeyDown}\n        role=\"dialog\" aria-modal=\"true\" aria-label=\"History browser\">\n        <div class=\"modal\">\n          <div class=\"header\">\n            <span class=\"header-title\" id=\"history-dialog-title\"> History</span>\n            <div class=\"header-search\">\n              <input type=\"text\"\n                class=\"search-input\"\n                placeholder=\"Search messages...\"\n                aria-label=\"Search conversation history\"\n                .value=${this._query}\n                @input=${this._onSearchInput}\n                @keydown=${(e) => e.key === 'Escape' && this._close()}\n              >\n            </div>\n            <div class=\"header-actions\">\n              <button class=\"header-btn primary\"\n                ?disabled=${!this._selectedId}\n                @click=${this._loadIntoContext}\n                title=\"Load selected session into active context\"\n                aria-label=\"Load selected session into active context\">\n                Load Session\n              </button>\n            </div>\n            <button class=\"close-btn\" @click=${this._close} title=\"Close\" aria-label=\"Close history browser\"></button>\n          </div>\n          <div class=\"body\">\n            <div class=\"left-panel\" role=\"navigation\" aria-label=\"Sessions\">\n              <div class=\"session-list\" role=\"listbox\" aria-label=\"Session list\">\n                ${isSearching\n                  ? this._renderSearchResults()\n                  : this._renderSessionList()}\n              </div>\n            </div>\n            <div class=\"right-panel\">\n              ${this._loadingMessages ? html`\n                <div class=\"messages-empty\" role=\"status\"><span class=\"spinner\" aria-hidden=\"true\"></span>&nbsp; Loading...</div>\n              ` : this._messages.length === 0 ? html`\n                <div class=\"messages-empty\">\n                  ${this._selectedId ? 'No messages in this session' : 'Select a session to view messages'}\n                </div>\n              ` : html`\n                <div class=\"messages-container\" role=\"log\" aria-label=\"Session messages\">\n                  ${this._messages.map(msg => this._renderMessage(msg))}\n                </div>\n              `}\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  _renderSessionList() {\n    if (this._loadingSessions) {\n      return html`<div class=\"list-loading\"><span class=\"spinner\"></span> Loading sessions...</div>`;\n    }\n    if (this._sessions.length === 0) {\n      return html`<div class=\"list-empty\">No sessions yet</div>`;\n    }\n    return this._sessions.map(s => html`\n      <div class=\"session-item ${this._selectedId === s.session_id ? 'selected' : ''}\"\n        role=\"option\"\n        aria-selected=${this._selectedId === s.session_id}\n        @click=${() => this._selectSession(s.session_id)}>\n        <div class=\"session-time\">${this._formatTime(s.timestamp)}</div>\n        <div class=\"session-preview\">${this._truncate(s.preview, 80)}</div>\n        <div class=\"session-count\">${s.message_count || 0} messages</div>\n      </div>\n    `);\n  }\n\n  _renderSearchResults() {\n    if (this._searching) {\n      return html`<div class=\"list-loading\"><span class=\"spinner\"></span> Searching...</div>`;\n    }\n    if (this._searchResults.length === 0) {\n      return html`<div class=\"list-empty\">\n        ${this._query.trim() ? `No results for \"${this._query}\"` : 'Type to search'}\n      </div>`;\n    }\n    return this._searchResults.map(r => html`\n      <div class=\"search-item\" @click=${() => this._onSearchResultClick(r)}>\n        <span class=\"search-item-role\">${r.role || '?'}</span>\n        <div class=\"search-item-preview\">\n          ${this._highlightQuery(r.content, this._query.trim())}\n        </div>\n        <div class=\"search-item-session\">${this._formatTime(r.timestamp)}</div>\n      </div>\n    `);\n  }\n\n  _renderMessage(msg) {\n    const isHighlighted = this._highlightMsgId && msg.id === this._highlightMsgId;\n    return html`\n      <div class=\"msg-card ${isHighlighted ? 'highlighted' : ''}\" role=\"article\"\n        aria-label=\"${msg.role} message\">\n        <div class=\"msg-header\">\n          <span class=\"msg-role ${msg.role}\">${msg.role}</span>\n          <span class=\"msg-meta\">${this._formatTime(msg.timestamp)}</span>\n          <div class=\"msg-actions\" role=\"toolbar\" aria-label=\"Message actions\">\n            <button class=\"msg-action-btn\" @click=${() => this._copyMessage(msg)}\n              title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"></button>\n            <button class=\"msg-action-btn\" @click=${() => this._toPrompt(msg)}\n              title=\"Insert into prompt\" aria-label=\"Insert into prompt\"></button>\n          </div>\n        </div>\n        <div class=\"msg-content\">${msg.content || ''}</div>\n        ${msg.files?.length ? html`\n          <div class=\"msg-files\">\n            ${msg.files.map(f => html`<span class=\"file-badge\">${f}</span>`)}\n          </div>\n        ` : nothing}\n        ${msg.files_modified?.length ? html`\n          <div class=\"msg-files\">\n            ${msg.files_modified.map(f => html`<span class=\"file-badge\"> ${f}</span>`)}\n          </div>\n        ` : nothing}\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('history-browser', HistoryBrowser);","import { LitElement, html, css, nothing } from 'lit';\n\n/**\n * Token HUD  floating overlay showing token usage after each LLM response.\n * Auto-hides after a timeout. Click to dismiss early.\n */\nclass TokenHud extends LitElement {\n  static properties = {\n    _visible: { type: Boolean, state: true },\n    _data: { type: Object, state: true },\n    _fading: { type: Boolean, state: true },\n  };\n\n  static styles = css`\n    :host {\n      position: absolute;\n      bottom: 80px;\n      right: 16px;\n      z-index: 50;\n      pointer-events: none;\n    }\n\n    .hud {\n      pointer-events: auto;\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      padding: 8px 12px;\n      box-shadow: var(--shadow-md);\n      font-family: var(--font-mono);\n      font-size: 11px;\n      color: var(--text-secondary);\n      cursor: pointer;\n      user-select: none;\n      opacity: 1;\n      transition: opacity 0.6s ease;\n      min-width: 200px;\n    }\n\n    .hud.fading {\n      opacity: 0;\n    }\n\n    .hud-row {\n      display: flex;\n      justify-content: space-between;\n      gap: 12px;\n      padding: 1px 0;\n    }\n\n    .hud-label {\n      color: var(--text-muted);\n    }\n\n    .hud-value {\n      color: var(--text-primary);\n      text-align: right;\n    }\n\n    .hud-value.cache-hit {\n      color: var(--accent-success);\n    }\n\n    .hud-value.cache-write {\n      color: var(--accent-primary);\n    }\n\n    .hud-divider {\n      border-top: 1px solid var(--border-color);\n      margin: 3px 0;\n    }\n\n    .hud-title {\n      font-size: 10px;\n      font-weight: 600;\n      color: var(--text-muted);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      margin-bottom: 2px;\n    }\n  `;\n\n  constructor() {\n    super();\n    this._visible = false;\n    this._data = null;\n    this._fading = false;\n    this._hideTimer = null;\n    this._fadeTimer = null;\n  }\n\n  /**\n   * Show the HUD with token usage data.\n   * @param {{ token_usage: Object, session_totals?: Object }} result\n   */\n  show(result) {\n    const usage = result.token_usage || {};\n    if (!usage.total_tokens && !usage.prompt_tokens) return;\n\n    this._data = {\n      prompt: usage.prompt_tokens || 0,\n      completion: usage.completion_tokens || 0,\n      cacheRead: usage.cache_read_tokens || 0,\n      cacheWrite: usage.cache_creation_tokens || 0,\n      total: usage.total_tokens || 0,\n    };\n\n    this._visible = true;\n    this._fading = false;\n\n    // Clear existing timers\n    clearTimeout(this._hideTimer);\n    clearTimeout(this._fadeTimer);\n\n    // Start fade after 4 seconds\n    this._fadeTimer = setTimeout(() => {\n      this._fading = true;\n    }, 4000);\n\n    // Remove after fade completes\n    this._hideTimer = setTimeout(() => {\n      this._visible = false;\n      this._fading = false;\n    }, 4600);\n  }\n\n  _dismiss() {\n    clearTimeout(this._hideTimer);\n    clearTimeout(this._fadeTimer);\n    this._visible = false;\n    this._fading = false;\n  }\n\n  _fmt(n) {\n    if (n == null || n === 0) return '0';\n    if (n >= 1000) return `${(n / 1000).toFixed(1)}k`;\n    return String(n);\n  }\n\n  render() {\n    if (!this._visible || !this._data) return nothing;\n\n    const d = this._data;\n    const cacheHitPct = d.prompt > 0\n      ? Math.round((d.cacheRead / d.prompt) * 100)\n      : 0;\n\n    return html`\n      <div class=\"hud ${this._fading ? 'fading' : ''}\" @click=${this._dismiss}\n        role=\"status\" aria-label=\"Token usage summary\">\n        <div class=\"hud-title\">Token Usage</div>\n        <div class=\"hud-row\">\n          <span class=\"hud-label\">Prompt</span>\n          <span class=\"hud-value\">${this._fmt(d.prompt)}</span>\n        </div>\n        <div class=\"hud-row\">\n          <span class=\"hud-label\">Completion</span>\n          <span class=\"hud-value\">${this._fmt(d.completion)}</span>\n        </div>\n        ${d.cacheRead > 0 ? html`\n          <div class=\"hud-row\">\n            <span class=\"hud-label\">Cache hit</span>\n            <span class=\"hud-value cache-hit\">${this._fmt(d.cacheRead)} (${cacheHitPct}%)</span>\n          </div>\n        ` : nothing}\n        ${d.cacheWrite > 0 ? html`\n          <div class=\"hud-row\">\n            <span class=\"hud-label\">Cache write</span>\n            <span class=\"hud-value cache-write\">${this._fmt(d.cacheWrite)}</span>\n          </div>\n        ` : nothing}\n        <div class=\"hud-divider\"></div>\n        <div class=\"hud-row\">\n          <span class=\"hud-label\">Total</span>\n          <span class=\"hud-value\">${this._fmt(d.total)}</span>\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('token-hud', TokenHud);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\nimport './chat-panel.js';\nimport './chat-input.js';\nimport './url-chips.js';\nimport './file-picker.js';\nimport './history-browser.js';\nimport './token-hud.js';\n\n/**\n * Files & Chat tab  left panel (file picker) + right panel (chat).\n * This orchestrates chat state, streaming, URL state, file selection, and message flow.\n */\nclass FilesTab extends RpcMixin(LitElement) {\n  static properties = {\n    messages: { type: Array, state: true },\n    selectedFiles: { type: Array, state: true },\n    streaming: { type: Boolean, state: true },\n    snippets: { type: Array, state: true },\n    _activeRequestId: { type: String, state: true },\n    _detectedUrls: { type: Array, state: true },\n    _fetchedUrls: { type: Array, state: true },\n    _excludedUrls: { type: Object, state: true },\n    _pickerCollapsed: { type: Boolean, state: true },\n    _pickerWidth: { type: Number, state: true },\n    _dividerDragging: { type: Boolean, state: true },\n    _confirmAction: { type: Object, state: true },\n    _historyOpen: { type: Boolean, state: true },\n    /** Flat list of repo file paths for file mention detection */\n    _repoFiles: { type: Array, state: true },\n    /** Path of file currently active in the diff viewer */\n    _viewerActiveFile: { type: String, state: true },\n  };\n\n  static styles = css`\n    :host {\n      display: flex;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    .file-picker-panel {\n      border-right: 1px solid var(--border-color);\n      background: var(--bg-secondary);\n      overflow: hidden;\n      flex-shrink: 0;\n      display: flex;\n      flex-direction: column;\n    }\n\n    .file-picker-panel.collapsed {\n      width: 0 !important;\n      min-width: 0 !important;\n      border-right: none;\n    }\n\n    /*  Panel divider / resize handle  */\n    .panel-divider {\n      width: 6px;\n      flex-shrink: 0;\n      background: var(--bg-secondary);\n      border-left: 1px solid var(--border-color);\n      cursor: col-resize;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      z-index: 5;\n      transition: background var(--transition-fast);\n    }\n    .panel-divider:hover,\n    .panel-divider.dragging {\n      background: var(--bg-surface);\n    }\n    .panel-divider.collapsed {\n      cursor: default;\n      width: 4px;\n    }\n\n    .divider-grip {\n      width: 2px;\n      height: 24px;\n      border-radius: 1px;\n      background: var(--border-color);\n      pointer-events: none;\n    }\n    .panel-divider:hover .divider-grip,\n    .panel-divider.dragging .divider-grip {\n      background: var(--text-muted);\n    }\n\n    .collapse-btn {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 16px;\n      height: 32px;\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: 3px;\n      color: var(--text-muted);\n      font-size: 9px;\n      cursor: pointer;\n      display: none;\n      align-items: center;\n      justify-content: center;\n      z-index: 6;\n      line-height: 1;\n    }\n    .panel-divider:hover .collapse-btn,\n    .panel-divider.collapsed .collapse-btn {\n      display: flex;\n    }\n    .collapse-btn:hover {\n      color: var(--text-primary);\n      background: var(--bg-surface);\n    }\n\n    .chat-panel-container {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      min-width: 0;\n      position: relative;\n    }\n\n    /*  Git action bar  */\n    .git-actions {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 8px;\n      border-bottom: 1px solid var(--border-color);\n      background: var(--bg-elevated);\n      flex-shrink: 0;\n    }\n\n    .git-btn {\n      background: none;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 3px 8px;\n      cursor: pointer;\n      font-size: 12px;\n      color: var(--text-secondary);\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      transition: background var(--transition-fast), color var(--transition-fast);\n      white-space: nowrap;\n    }\n    .git-btn:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n    .git-btn.danger:hover {\n      background: rgba(239,83,80,0.15);\n      color: var(--accent-error);\n    }\n    .git-btn:disabled {\n      opacity: 0.4;\n      cursor: not-allowed;\n    }\n\n    .git-spacer { flex: 1; }\n\n    .session-btn {\n      background: none;\n      border: none;\n      padding: 3px 6px;\n      cursor: pointer;\n      font-size: 13px;\n      color: var(--text-muted);\n      border-radius: var(--radius-sm);\n      transition: color var(--transition-fast);\n    }\n    .session-btn:hover { color: var(--text-primary); }\n\n    /*  Confirm dialog  */\n    .confirm-backdrop {\n      position: fixed;\n      inset: 0;\n      background: rgba(0,0,0,0.4);\n      z-index: 300;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .confirm-dialog {\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      padding: 16px 20px;\n      box-shadow: var(--shadow-lg);\n      max-width: 360px;\n    }\n    .confirm-dialog p {\n      color: var(--text-primary);\n      font-size: 13px;\n      margin: 0 0 12px 0;\n    }\n    .confirm-btns {\n      display: flex;\n      justify-content: flex-end;\n      gap: 8px;\n    }\n    .confirm-btns button {\n      padding: 5px 14px;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      background: var(--bg-surface);\n      color: var(--text-primary);\n      cursor: pointer;\n      font-size: 12px;\n    }\n    .confirm-btns button.danger {\n      background: var(--accent-error);\n      color: white;\n      border-color: var(--accent-error);\n    }\n  `;\n\n  constructor() {\n    super();\n    this.messages = [];\n    this.selectedFiles = [];\n    this.streaming = false;\n    this.snippets = [];\n    this._activeRequestId = null;\n    this._watchdogTimer = null;\n    this._detectedUrls = [];\n    this._fetchedUrls = [];\n    this._excludedUrls = new Set();\n    this._dividerDragging = false;\n    this._confirmAction = null;\n    this._historyOpen = false;\n    this._repoFiles = [];\n    this._viewerActiveFile = '';\n\n    // Picker panel state  restore from localStorage\n    this._pickerCollapsed = localStorage.getItem('ac-dc-picker-collapsed') === 'true';\n    this._pickerWidth = parseInt(localStorage.getItem('ac-dc-picker-width')) || 280;\n\n    // Bind divider drag handlers\n    this._onDividerMove = this._onDividerMove.bind(this);\n    this._onDividerUp = this._onDividerUp.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._boundOnStateLoaded = this._onStateLoaded.bind(this);\n    this._boundOnStreamComplete = this._onStreamComplete.bind(this);\n    this._boundOnCompactionEvent = this._onCompactionEvent.bind(this);\n    this._boundOnFilesChanged = this._onFilesChanged.bind(this);\n    this._boundOnViewerActiveFile = this._onViewerActiveFile.bind(this);\n    window.addEventListener('state-loaded', this._boundOnStateLoaded);\n    window.addEventListener('stream-complete', this._boundOnStreamComplete);\n    window.addEventListener('compaction-event', this._boundOnCompactionEvent);\n    window.addEventListener('files-changed', this._boundOnFilesChanged);\n    window.addEventListener('viewer-active-file', this._boundOnViewerActiveFile);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    window.removeEventListener('state-loaded', this._boundOnStateLoaded);\n    window.removeEventListener('stream-complete', this._boundOnStreamComplete);\n    window.removeEventListener('compaction-event', this._boundOnCompactionEvent);\n    window.removeEventListener('files-changed', this._boundOnFilesChanged);\n    window.removeEventListener('viewer-active-file', this._boundOnViewerActiveFile);\n    document.removeEventListener('mousemove', this._onDividerMove);\n    document.removeEventListener('mouseup', this._onDividerUp);\n    this._clearWatchdog();\n  }\n\n  onRpcReady() {\n    this._loadSnippets();\n    this._loadFileTree();\n  }\n\n  async _loadSnippets() {\n    try {\n      const result = await this.rpcExtract('Settings.get_snippets');\n      this.snippets = result?.snippets || [];\n    } catch (e) {\n      console.warn('Failed to load snippets:', e);\n    }\n  }\n\n  async _loadFileTree() {\n    try {\n      const result = await this.rpcExtract('Repo.get_file_tree');\n      if (result && !result.error) {\n        const picker = this.shadowRoot.querySelector('file-picker');\n        if (picker) picker.setTree(result);\n        // Extract flat file list for file mention detection\n        this._repoFiles = this._collectAllFiles(result.tree);\n      }\n    } catch (e) {\n      console.warn('Failed to load file tree:', e);\n    }\n  }\n\n  /** Recursively collect all file paths from tree structure */\n  _collectAllFiles(node) {\n    if (!node) return [];\n    const files = [];\n    const walk = (n) => {\n      if (n.type === 'file') files.push(n.path);\n      if (n.children) n.children.forEach(walk);\n    };\n    walk(node);\n    return files;\n  }\n\n  _onStateLoaded(e) {\n    const state = e.detail;\n    if (state) {\n      this.messages = state.messages || [];\n      this.selectedFiles = state.selected_files || [];\n      this.streaming = state.streaming_active || false;\n      // Sync selection to picker and scroll chat to bottom\n      // Double updateComplete: first waits for files-tab to pass messages down,\n      // second waits for chat-panel to render them, so scroll target exists.\n      this.updateComplete.then(() => {\n        const picker = this.shadowRoot.querySelector('file-picker');\n        if (picker && this.selectedFiles.length) picker.setSelectedFiles(this.selectedFiles);\n        if (this.messages.length > 0) {\n          const panel = this.shadowRoot.querySelector('chat-panel');\n          if (panel) {\n            panel.updateComplete.then(() => {\n              panel.scrollToBottom();\n            });\n          }\n        }\n      });\n    }\n  }\n\n  //  File picker events \n\n  _onSelectionChanged(e) {\n    const { selectedFiles } = e.detail;\n    this.selectedFiles = selectedFiles;\n    // Notify server\n    if (this.rpcConnected) {\n      this.rpcCall('LLM.set_selected_files', selectedFiles).catch(() => {});\n    }\n  }\n\n  _onFileClicked(e) {\n    // Bubble up as navigate-file  app-shell routes to diff viewer\n    this.dispatchEvent(new CustomEvent('navigate-file', {\n      detail: { path: e.detail.path },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  _onPathToInput(e) {\n    const { path } = e.detail;\n    if (!path) return;\n    const input = this.shadowRoot.querySelector('chat-input');\n    if (!input) return;\n    const textarea = input.shadowRoot?.querySelector('textarea');\n    if (!textarea) return;\n\n    // Insert path at cursor position with a space before and after\n    const start = textarea.selectionStart;\n    const before = textarea.value.substring(0, start);\n    const after = textarea.value.substring(textarea.selectionEnd);\n    const insert = ' ' + path + ' ';\n    textarea.value = before + insert + after;\n    const newPos = start + insert.length;\n    textarea.selectionStart = textarea.selectionEnd = newPos;\n    textarea.dispatchEvent(new Event('input'));\n    input._autoResize(textarea);\n    textarea.focus();\n  }\n\n  async _onGitOperation() {\n    // Refresh tree after any git operation\n    await this._loadFileTree();\n  }\n\n  _onFilesChanged(e) {\n    const { selectedFiles } = e.detail;\n    if (selectedFiles) {\n      this.selectedFiles = selectedFiles;\n      this.updateComplete.then(() => {\n        const picker = this.shadowRoot.querySelector('file-picker');\n        if (picker) picker.setSelectedFiles(selectedFiles);\n      });\n    }\n  }\n\n  _onViewerActiveFile(e) {\n    this._viewerActiveFile = e.detail?.path || '';\n  }\n\n  //  File mention handling \n\n  _onFileMentionClick(e) {\n    const { path } = e.detail;\n    if (!path) return;\n\n    const next = new Set(this.selectedFiles);\n    const wasSelected = next.has(path);\n\n    if (wasSelected) {\n      // Remove from selection\n      next.delete(path);\n      this._removeFileFromInput(path);\n    } else {\n      // Add to selection\n      next.add(path);\n      this._addFileToInput(path);\n    }\n\n    this.selectedFiles = [...next];\n\n    // Sync to picker (also auto-expands parent dirs)\n    const picker = this.shadowRoot.querySelector('file-picker');\n    if (picker) {\n      picker.setSelectedFiles(this.selectedFiles);\n      if (!wasSelected) picker._expandParents(path);\n    }\n\n    // Notify server\n    if (this.rpcConnected) {\n      this.rpcCall('LLM.set_selected_files', this.selectedFiles).catch(() => {});\n    }\n  }\n\n  /** Accumulate a file addition into the chat input textarea */\n  _addFileToInput(filePath) {\n    const input = this.shadowRoot.querySelector('chat-input');\n    if (!input) return;\n    const textarea = input.shadowRoot?.querySelector('textarea');\n    if (!textarea) return;\n\n    const fileName = filePath.split('/').pop();\n    const currentText = textarea.value;\n    const suffix = ' added. Do you want to see more files before you continue?';\n\n    // Pattern: \"The file(s) X, Y, Z added. Do you want to see more files...\"\n    const pattern = /^The files? (.+) added\\. Do you want to see more files before you continue\\?$/;\n    const match = currentText.match(pattern);\n\n    if (match) {\n      // Append to existing file list\n      const existingFiles = match[1];\n      textarea.value = `The files ${existingFiles}, ${fileName}${suffix}`;\n    } else if (currentText.trim() === '') {\n      // Empty input  start fresh\n      textarea.value = `The file ${fileName}${suffix}`;\n    } else {\n      // Has unrelated text  append parenthetical\n      textarea.value = `${currentText} (added ${fileName})`;\n    }\n\n    textarea.dispatchEvent(new Event('input'));\n    input._autoResize(textarea);\n  }\n\n  /** Remove a file from the accumulated input text */\n  _removeFileFromInput(filePath) {\n    const input = this.shadowRoot.querySelector('chat-input');\n    if (!input) return;\n    const textarea = input.shadowRoot?.querySelector('textarea');\n    if (!textarea) return;\n\n    const fileName = filePath.split('/').pop();\n    const currentText = textarea.value;\n    const suffix = ' added. Do you want to see more files before you continue?';\n\n    // Pattern: \"The file(s) X, Y, Z added. Do you want to see more files...\"\n    const pattern = /^The files? (.+) added\\. Do you want to see more files before you continue\\?$/;\n    const match = currentText.match(pattern);\n\n    if (match) {\n      const files = match[1].split(', ').filter(f => f !== fileName);\n      if (files.length === 0) {\n        textarea.value = '';\n      } else if (files.length === 1) {\n        textarea.value = `The file ${files[0]}${suffix}`;\n      } else {\n        textarea.value = `The files ${files.join(', ')}${suffix}`;\n      }\n    } else {\n      // Try removing parenthetical: \" (added filename)\"\n      const parenthetical = ` (added ${fileName})`;\n      if (currentText.includes(parenthetical)) {\n        textarea.value = currentText.replace(parenthetical, '');\n      }\n    }\n\n    textarea.dispatchEvent(new Event('input'));\n    input._autoResize(textarea);\n  }\n\n  /** Extract deduplicated user messages from conversation history, most recent first */\n  _getUserMessageHistory() {\n    if (!this.messages || this.messages.length === 0) return [];\n    const seen = new Set();\n    const result = [];\n    // Walk from newest to oldest\n    for (let i = this.messages.length - 1; i >= 0; i--) {\n      const msg = this.messages[i];\n      if (msg.role === 'user' && msg.content) {\n        const text = typeof msg.content === 'string' ? msg.content : '';\n        if (text && !seen.has(text)) {\n          seen.add(text);\n          result.push(text);\n        }\n      }\n    }\n    return result;\n  }\n\n  //  URL events \n\n  _onUrlsDetected(e) {\n    const { urls } = e.detail;\n    // Filter out URLs that are already fetched\n    const fetchedSet = new Set(this._fetchedUrls.map(f => f.url));\n    this._detectedUrls = urls.filter(u => !fetchedSet.has(u.url));\n  }\n\n  _onUrlFetched(e) {\n    const { url, result } = e.detail;\n    // Remove from detected\n    this._detectedUrls = this._detectedUrls.filter(d => d.url !== url);\n    // Add to / update fetched\n    const existing = this._fetchedUrls.findIndex(f => f.url === url);\n    const entry = {\n      url,\n      url_type: result.url_type || 'generic',\n      title: result.title || '',\n      display_name: result.display_name || url,\n      error: result.error || '',\n    };\n    if (existing >= 0) {\n      this._fetchedUrls = [\n        ...this._fetchedUrls.slice(0, existing),\n        entry,\n        ...this._fetchedUrls.slice(existing + 1),\n      ];\n    } else {\n      this._fetchedUrls = [...this._fetchedUrls, entry];\n    }\n  }\n\n  _onUrlDismissed(e) {\n    this._detectedUrls = this._detectedUrls.filter(d => d.url !== e.detail.url);\n  }\n\n  _onUrlRemoved(e) {\n    const { url } = e.detail;\n    this._fetchedUrls = this._fetchedUrls.filter(f => f.url !== url);\n    const next = new Set(this._excludedUrls);\n    next.delete(url);\n    this._excludedUrls = next;\n  }\n\n  _onUrlToggleExclude(e) {\n    const { url } = e.detail;\n    const next = new Set(this._excludedUrls);\n    if (next.has(url)) {\n      next.delete(url);\n    } else {\n      next.add(url);\n    }\n    this._excludedUrls = next;\n  }\n\n  _onUrlViewContent(e) {\n    // Future: open a modal to view fetched content\n    // For now, log to console\n    console.log('[url-chips] View content for:', e.detail.url);\n  }\n\n  _getIncludedUrls() {\n    return this._fetchedUrls\n      .filter(f => !f.error && !this._excludedUrls.has(f.url))\n      .map(f => f.url);\n  }\n\n  //  Sending \n\n  async _onSendMessage(e) {\n    const { message, images } = e.detail;\n    if (this.streaming) return;\n\n    // Show user message immediately (include images for display)\n    const userMsg = { role: 'user', content: message };\n    if (images && images.length > 0) {\n      userMsg.images = [...images];\n    }\n    this.messages = [...this.messages, userMsg];\n\n    // Clear detected URLs on send (fetched persist across messages)\n    this._detectedUrls = [];\n\n    // Generate request ID\n    const requestId = `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n    this._activeRequestId = requestId;\n    this.streaming = true;\n\n    // Start watchdog (5 minute timeout)\n    this._startWatchdog();\n\n    // Scroll chat to bottom\n    this.shadowRoot.querySelector('chat-panel')?.scrollToBottom();\n\n    try {\n      await this.rpcCall(\n        'LLM.chat_streaming',\n        requestId,\n        message,\n        this.selectedFiles,\n        images.length > 0 ? images : [],\n      );\n    } catch (e) {\n      console.error('chat_streaming failed:', e);\n      this.streaming = false;\n      this._clearWatchdog();\n      this._toast('Failed to send message: ' + (e.message || e), 'error');\n    }\n  }\n\n  _onStreamComplete(e) {\n    const { result } = e.detail;\n    this._clearWatchdog();\n    this.streaming = false;\n    this._activeRequestId = null;\n\n    // Show error toast if present\n    if (result.error) {\n      this._toast(result.error, 'error');\n    }\n\n    // Add assistant message to our list\n    if (result.response) {\n      this.messages = [...this.messages, {\n        role: 'assistant',\n        content: result.response,\n        editResults: result.edit_results || [],\n      }];\n    }\n\n    // Show token usage HUD\n    if (result.token_usage) {\n      this.shadowRoot.querySelector('token-hud')?.show(result);\n    }\n\n    // Refresh file tree if edits were applied\n    if (result.files_modified?.length > 0) {\n      this._loadFileTree();\n    }\n\n    // Focus input\n    this.shadowRoot.querySelector('chat-input')?.focus();\n  }\n\n  _onCompactionEvent(e) {\n    const event = e.detail?.event;\n    if (!event) return;\n\n    if (event.type === 'compaction_complete' && event.case !== 'none') {\n      // Rebuild messages from compacted history\n      if (event.messages) {\n        this.messages = [...event.messages];\n        // Auto-scroll only if user is already at bottom\n        this.updateComplete.then(() => {\n          this.shadowRoot.querySelector('chat-panel')?.scrollToBottomIfAtBottom();\n        });\n      }\n      // Show summary as system-like message\n      const info = event.case === 'truncate'\n        ? `History truncated: ${event.messages_before}  ${event.messages_after} messages`\n        : `History compacted: ${event.messages_before}  ${event.messages_after} messages`;\n      console.log(`[ac-dc] ${info}`);\n    }\n  }\n\n  //  Watchdog \n\n  _startWatchdog() {\n    this._clearWatchdog();\n    this._watchdogTimer = setTimeout(() => {\n      console.warn('[ac-dc] Watchdog timeout  forcing stream recovery');\n      this.streaming = false;\n      this._activeRequestId = null;\n    }, 5 * 60 * 1000); // 5 minutes\n  }\n\n  _clearWatchdog() {\n    if (this._watchdogTimer) {\n      clearTimeout(this._watchdogTimer);\n      this._watchdogTimer = null;\n    }\n  }\n\n  //  Stop streaming \n\n  async _onStopStreaming() {\n    if (!this._activeRequestId) return;\n    try {\n      await this.rpcCall('LLM.cancel_streaming', this._activeRequestId);\n    } catch (e) {\n      console.warn('Failed to cancel streaming:', e);\n    }\n  }\n\n  //  Copy to prompt \n\n  _onCopyToPrompt(e) {\n    const { text } = e.detail;\n    if (!text) return;\n    const input = this.shadowRoot.querySelector('chat-input');\n    if (input) {\n      const textarea = input.shadowRoot?.querySelector('textarea');\n      if (textarea) {\n        textarea.value = text;\n        textarea.dispatchEvent(new Event('input'));\n        input._autoResize(textarea);\n        input.focus();\n      }\n    }\n  }\n\n  //  Panel divider drag \n\n  _onDividerDown(e) {\n    if (this._pickerCollapsed) return;\n    e.preventDefault();\n    this._dividerDragging = true;\n    this._dividerStartX = e.clientX;\n    this._dividerStartWidth = this._pickerWidth;\n    document.addEventListener('mousemove', this._onDividerMove);\n    document.addEventListener('mouseup', this._onDividerUp);\n  }\n\n  _onDividerMove(e) {\n    if (!this._dividerDragging) return;\n    const dx = e.clientX - this._dividerStartX;\n    const newWidth = Math.max(150, Math.min(500, this._dividerStartWidth + dx));\n    this._pickerWidth = newWidth;\n  }\n\n  _onDividerUp() {\n    if (!this._dividerDragging) return;\n    this._dividerDragging = false;\n    document.removeEventListener('mousemove', this._onDividerMove);\n    document.removeEventListener('mouseup', this._onDividerUp);\n    localStorage.setItem('ac-dc-picker-width', String(this._pickerWidth));\n  }\n\n  _togglePickerCollapsed() {\n    this._pickerCollapsed = !this._pickerCollapsed;\n    localStorage.setItem('ac-dc-picker-collapsed', String(this._pickerCollapsed));\n  }\n\n  //  Git actions \n\n  /** Dispatch a toast notification. */\n  _toast(message, type = 'info') {\n    window.dispatchEvent(new CustomEvent('ac-toast', {\n      detail: { message, type },\n      bubbles: true,\n    }));\n  }\n\n  async _copyDiff() {\n    try {\n      const staged = await this.rpcExtract('Repo.get_staged_diff');\n      const unstaged = await this.rpcExtract('Repo.get_unstaged_diff');\n      const parts = [];\n      if (staged?.diff) parts.push('=== Staged ===\\n' + staged.diff);\n      if (unstaged?.diff) parts.push('=== Unstaged ===\\n' + unstaged.diff);\n      const text = parts.join('\\n\\n') || '(no changes)';\n      await navigator.clipboard.writeText(text);\n      this._toast('Diff copied to clipboard', 'success');\n    } catch (e) {\n      console.error('Copy diff failed:', e);\n      this._toast('Failed to copy diff: ' + (e.message || e), 'error');\n    }\n  }\n\n  async _commitWithMessage() {\n    if (this.streaming) return;\n    try {\n      this._toast('Staging all changes...', 'info');\n      // Stage all\n      await this.rpcExtract('Repo.stage_all');\n      // Get staged diff\n      const diffResult = await this.rpcExtract('Repo.get_staged_diff');\n      if (!diffResult?.diff?.trim()) {\n        this._toast('Nothing to commit  working tree clean', 'info');\n        return;\n      }\n      this._toast('Generating commit message...', 'info');\n      // Generate commit message\n      const msgResult = await this.rpcExtract('LLM.generate_commit_message', diffResult.diff);\n      if (msgResult?.error) {\n        this._toast(`Commit message generation failed: ${msgResult.error}`, 'error');\n        return;\n      }\n      // Commit\n      const commitMsg = msgResult.message || msgResult;\n      this._toast('Committing...', 'info');\n      const commitResult = await this.rpcExtract('Repo.commit', commitMsg);\n      if (commitResult?.error) {\n        this._toast(`Commit failed: ${commitResult.error}`, 'error');\n      } else {\n        this._toast('Committed successfully', 'success');\n        this.messages = [...this.messages, {\n          role: 'assistant',\n          content: `**Committed:**\\n\\n${commitMsg}`,\n        }];\n        // Auto-scroll only if user is already at bottom\n        this.updateComplete.then(() => {\n          this.shadowRoot.querySelector('chat-panel')?.scrollToBottomIfAtBottom();\n        });\n      }\n      // Refresh tree\n      await this._loadFileTree();\n    } catch (e) {\n      console.error('Commit failed:', e);\n      this._toast('Commit failed: ' + (e.message || e), 'error');\n    }\n  }\n\n  _requestReset() {\n    this._confirmAction = {\n      message: 'Reset all changes? This will discard all uncommitted modifications (git reset --hard HEAD).',\n      action: () => this._doReset(),\n    };\n  }\n\n  async _doReset() {\n    this._confirmAction = null;\n    try {\n      const result = await this.rpcExtract('Repo.reset_hard');\n      if (result?.error) {\n        this._toast(`Reset failed: ${result.error}`, 'error');\n      } else {\n        this._toast('Repository reset to HEAD', 'success');\n      }\n      await this._loadFileTree();\n      // Scroll chat to bottom so user sees latest context\n      this.shadowRoot.querySelector('chat-panel')?.scrollToBottom();\n    } catch (e) {\n      console.error('Reset failed:', e);\n      this._toast('Reset failed: ' + (e.message || e), 'error');\n    }\n  }\n\n  _cancelConfirm() {\n    this._confirmAction = null;\n  }\n\n  async _newSession() {\n    try {\n      await this.rpcExtract('LLM.history_new_session');\n      this.messages = [];\n      this._detectedUrls = [];\n      this._fetchedUrls = [];\n      this._excludedUrls = new Set();\n      this._toast('New session started', 'info');\n      window.dispatchEvent(new CustomEvent('session-reset'));\n    } catch (e) {\n      console.error('New session failed:', e);\n      this._toast('Failed to start new session: ' + (e.message || e), 'error');\n    }\n  }\n\n  //  History browser \n\n  _openHistory() {\n    this._historyOpen = true;\n  }\n\n  _onHistoryClosed() {\n    this._historyOpen = false;\n  }\n\n  _onSessionLoaded(e) {\n    const { messages } = e.detail;\n    if (Array.isArray(messages)) {\n      this.messages = [...messages];\n    }\n    this._historyOpen = false;\n    // Scroll chat to bottom\n    this.updateComplete.then(() => {\n      this.shadowRoot.querySelector('chat-panel')?.scrollToBottom();\n    });\n  }\n\n  _onInsertToPrompt(e) {\n    const { text } = e.detail;\n    if (text) {\n      const input = this.shadowRoot.querySelector('chat-input');\n      if (input) {\n        const textarea = input.shadowRoot?.querySelector('textarea');\n        if (textarea) {\n          textarea.value = text;\n          textarea.dispatchEvent(new Event('input'));\n          input.focus();\n        }\n      }\n    }\n  }\n\n  //  Render \n\n  render() {\n    const pickerStyle = this._pickerCollapsed\n      ? ''\n      : `width:${this._pickerWidth}px; min-width:150px; max-width:500px;`;\n\n    return html`\n      <div class=\"file-picker-panel ${this._pickerCollapsed ? 'collapsed' : ''}\"\n        style=${pickerStyle}>\n        <file-picker\n          .viewerActiveFile=${this._viewerActiveFile}\n          @selection-changed=${this._onSelectionChanged}\n          @file-clicked=${this._onFileClicked}\n          @git-operation=${this._onGitOperation}\n          @path-to-input=${this._onPathToInput}\n        ></file-picker>\n      </div>\n\n      <div class=\"panel-divider ${this._pickerCollapsed ? 'collapsed' : ''} ${this._dividerDragging ? 'dragging' : ''}\"\n        @mousedown=${(e) => this._onDividerDown(e)}>\n        <span class=\"divider-grip\"></span>\n        <button class=\"collapse-btn\"\n          @mousedown=${(e) => e.stopPropagation()}\n          @click=${this._togglePickerCollapsed}\n          title=${this._pickerCollapsed ? 'Show file picker' : 'Hide file picker'}\n          aria-label=${this._pickerCollapsed ? 'Show file picker' : 'Hide file picker'}\n          aria-expanded=${!this._pickerCollapsed}>\n          ${this._pickerCollapsed ? '' : ''}\n        </button>\n      </div>\n\n      <div class=\"chat-panel-container\">\n        <div class=\"git-actions\" role=\"toolbar\" aria-label=\"Git actions\">\n          <button class=\"git-btn\" @click=${this._copyDiff} title=\"Copy diff to clipboard\"\n            aria-label=\"Copy diff to clipboard\">\n             Diff\n          </button>\n          <button class=\"git-btn\" @click=${this._commitWithMessage}\n            ?disabled=${this.streaming} title=\"Stage all, generate message, commit\"\n            aria-label=\"Auto-commit with generated message\">\n             Commit\n          </button>\n          <button class=\"git-btn danger\" @click=${this._requestReset}\n            ?disabled=${this.streaming} title=\"Reset to HEAD\"\n            aria-label=\"Reset repository to HEAD\">\n             Reset\n          </button>\n          <span class=\"git-spacer\"></span>\n          <button class=\"session-btn\" @click=${this._openHistory}\n            title=\"Browse history\" aria-label=\"Browse conversation history\"></button>\n          <button class=\"session-btn\" @click=${this._newSession}\n            title=\"New session (clear chat)\" aria-label=\"Start new session\"></button>\n        </div>\n\n        <chat-panel\n          .messages=${this.messages}\n          .streaming=${this.streaming}\n          .repoFiles=${this._repoFiles}\n          .selectedFiles=${new Set(this.selectedFiles)}\n          @file-mention-click=${this._onFileMentionClick}\n          @copy-to-prompt=${this._onCopyToPrompt}\n        ></chat-panel>\n\n        <url-chips\n          .detected=${this._detectedUrls}\n          .fetched=${this._fetchedUrls}\n          .excluded=${this._excludedUrls}\n          @urls-detected=${this._onUrlsDetected}\n          @url-fetched=${this._onUrlFetched}\n          @url-dismissed=${this._onUrlDismissed}\n          @url-removed=${this._onUrlRemoved}\n          @url-toggle-exclude=${this._onUrlToggleExclude}\n          @url-view-content=${this._onUrlViewContent}\n        ></url-chips>\n\n        <chat-input\n          .disabled=${this.streaming}\n          .snippets=${this.snippets}\n          .userMessageHistory=${this._getUserMessageHistory()}\n          @send-message=${this._onSendMessage}\n          @stop-streaming=${this._onStopStreaming}\n          @urls-detected=${this._onUrlsDetected}\n        ></chat-input>\n\n        <token-hud></token-hud>\n      </div>\n\n      <history-browser\n        .open=${this._historyOpen}\n        @history-closed=${this._onHistoryClosed}\n        @session-loaded=${this._onSessionLoaded}\n        @insert-to-prompt=${this._onInsertToPrompt}\n      ></history-browser>\n\n      ${this._confirmAction ? html`\n        <div class=\"confirm-backdrop\" @click=${this._cancelConfirm} role=\"presentation\">\n          <div class=\"confirm-dialog\" role=\"alertdialog\" aria-label=\"Confirm action\"\n            @click=${(e) => e.stopPropagation()}>\n            <p>${this._confirmAction.message}</p>\n            <div class=\"confirm-btns\">\n              <button @click=${this._cancelConfirm}>Cancel</button>\n              <button class=\"danger\" @click=${() => this._confirmAction.action()}>Reset</button>\n            </div>\n          </div>\n        </div>\n      ` : nothing}\n    `;\n  }\n}\n\ncustomElements.define('files-tab', FilesTab);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\n\nconst DEBOUNCE_MS = 300;\n\n/**\n * Search tab  full-text search via git grep with result grouping,\n * keyboard navigation, and option toggles.\n */\nclass SearchTab extends RpcMixin(LitElement) {\n  static properties = {\n    _query: { type: String, state: true },\n    _results: { type: Array, state: true },\n    _loading: { type: Boolean, state: true },\n    _error: { type: String, state: true },\n    _ignoreCase: { type: Boolean, state: true },\n    _useRegex: { type: Boolean, state: true },\n    _wholeWord: { type: Boolean, state: true },\n    _focusedIdx: { type: Number, state: true },\n    _expandedFiles: { type: Object, state: true },\n  };\n\n  static styles = css`\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    /*  Search bar  */\n    .search-bar {\n      padding: 8px 12px;\n      border-bottom: 1px solid var(--border-color);\n      display: flex;\n      flex-direction: column;\n      gap: 6px;\n      flex-shrink: 0;\n      background: var(--bg-secondary);\n    }\n\n    .search-row {\n      display: flex;\n      gap: 6px;\n      align-items: center;\n    }\n\n    .search-input {\n      flex: 1;\n      padding: 6px 10px;\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      color: var(--text-primary);\n      font-size: 13px;\n      font-family: var(--font-mono);\n      outline: none;\n    }\n    .search-input:focus { border-color: var(--accent-primary); }\n    .search-input::placeholder { color: var(--text-muted); }\n\n    .option-row {\n      display: flex;\n      gap: 4px;\n    }\n\n    .option-btn {\n      background: var(--bg-surface);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 3px 8px;\n      cursor: pointer;\n      font-size: 11px;\n      color: var(--text-secondary);\n      transition: background var(--transition-fast), color var(--transition-fast);\n      white-space: nowrap;\n      font-family: var(--font-mono);\n    }\n    .option-btn:hover {\n      background: var(--bg-elevated);\n      color: var(--text-primary);\n    }\n    .option-btn.active {\n      background: var(--accent-primary);\n      color: var(--bg-primary);\n      border-color: var(--accent-primary);\n    }\n\n    .result-count {\n      font-size: 11px;\n      color: var(--text-muted);\n      padding: 0 2px;\n      white-space: nowrap;\n      flex-shrink: 0;\n    }\n\n    /*  Results  */\n    .results-container {\n      flex: 1;\n      overflow-y: auto;\n      padding: 4px 0;\n    }\n\n    .empty-state {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--text-muted);\n      font-size: 13px;\n      padding: 20px;\n      text-align: center;\n    }\n\n    .loading-state {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 20px;\n      color: var(--text-muted);\n      font-size: 13px;\n      gap: 8px;\n    }\n\n    .spinner {\n      display: inline-block;\n      width: 14px;\n      height: 14px;\n      border: 2px solid var(--border-color);\n      border-top-color: var(--accent-primary);\n      border-radius: 50%;\n      animation: spin 0.8s linear infinite;\n    }\n    @keyframes spin { to { transform: rotate(360deg); } }\n\n    .error-state {\n      padding: 12px 16px;\n      color: var(--accent-error);\n      font-size: 12px;\n    }\n\n    /*  File group  */\n    .file-group {\n      border-bottom: 1px solid var(--border-color);\n    }\n\n    .file-header {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 6px 12px;\n      cursor: pointer;\n      user-select: none;\n      background: var(--bg-elevated);\n      transition: background var(--transition-fast);\n      font-size: 12px;\n    }\n    .file-header:hover { background: var(--bg-surface); }\n\n    .file-toggle {\n      font-size: 10px;\n      color: var(--text-muted);\n      width: 14px;\n      text-align: center;\n      flex-shrink: 0;\n    }\n\n    .file-path {\n      flex: 1;\n      font-family: var(--font-mono);\n      font-size: 12px;\n      color: var(--accent-primary);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      min-width: 0;\n    }\n    .file-path:hover { text-decoration: underline; }\n\n    .match-count {\n      font-size: 10px;\n      color: var(--text-muted);\n      flex-shrink: 0;\n      padding: 1px 5px;\n      background: var(--bg-surface);\n      border-radius: 8px;\n    }\n\n    /*  Match rows  */\n    .match-row {\n      display: flex;\n      align-items: flex-start;\n      gap: 0;\n      padding: 3px 12px 3px 32px;\n      cursor: pointer;\n      transition: background var(--transition-fast);\n      font-size: 12px;\n      font-family: var(--font-mono);\n      line-height: 1.5;\n      border-left: 2px solid transparent;\n    }\n    .match-row:hover { background: var(--bg-surface); }\n    .match-row.focused {\n      background: var(--bg-surface);\n      border-left-color: var(--accent-primary);\n    }\n\n    .match-line-num {\n      color: var(--text-muted);\n      width: 40px;\n      flex-shrink: 0;\n      text-align: right;\n      padding-right: 8px;\n      font-size: 11px;\n    }\n\n    .match-content {\n      flex: 1;\n      min-width: 0;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: pre;\n      color: var(--text-secondary);\n    }\n\n    .match-highlight {\n      background: rgba(79, 195, 247, 0.2);\n      color: var(--accent-primary);\n      font-weight: 600;\n      border-radius: 2px;\n    }\n\n    /*  Context lines  */\n    .context-row {\n      display: flex;\n      align-items: flex-start;\n      padding: 1px 12px 1px 32px;\n      font-size: 11px;\n      font-family: var(--font-mono);\n      line-height: 1.5;\n      opacity: 0.5;\n    }\n\n    .context-line-num {\n      color: var(--text-muted);\n      width: 40px;\n      flex-shrink: 0;\n      text-align: right;\n      padding-right: 8px;\n      font-size: 10px;\n    }\n\n    .context-content {\n      flex: 1;\n      min-width: 0;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: pre;\n      color: var(--text-muted);\n    }\n  `;\n\n  constructor() {\n    super();\n    this._query = '';\n    this._results = [];\n    this._loading = false;\n    this._error = '';\n    this._focusedIdx = -1;\n    this._expandedFiles = new Set();\n    this._debounceTimer = null;\n    this._generation = 0;\n\n    // Restore options from localStorage\n    this._ignoreCase = localStorage.getItem('ac-dc-search-ignoreCase') !== 'false';\n    this._useRegex = localStorage.getItem('ac-dc-search-useRegex') === 'true';\n    this._wholeWord = localStorage.getItem('ac-dc-search-wholeWord') === 'true';\n  }\n\n  //  Focus input on tab activation \n\n  focus() {\n    this.updateComplete.then(() => {\n      this.shadowRoot.querySelector('.search-input')?.focus();\n    });\n  }\n\n  //  Search execution \n\n  _onInput(e) {\n    this._query = e.target.value;\n    this._scheduleSearch();\n  }\n\n  _scheduleSearch() {\n    if (this._debounceTimer) clearTimeout(this._debounceTimer);\n    if (!this._query.trim()) {\n      this._results = [];\n      this._error = '';\n      this._loading = false;\n      this._focusedIdx = -1;\n      return;\n    }\n    this._debounceTimer = setTimeout(() => {\n      this._debounceTimer = null;\n      this._executeSearch();\n    }, DEBOUNCE_MS);\n  }\n\n  async _executeSearch() {\n    if (!this.rpcConnected) return;\n    const query = this._query.trim();\n    if (!query) return;\n\n    const gen = ++this._generation;\n    this._loading = true;\n    this._error = '';\n\n    try {\n      const results = await this.rpcExtract(\n        'Repo.search_files',\n        query,\n        this._wholeWord,\n        this._useRegex,\n        this._ignoreCase,\n        4, // context lines\n      );\n\n      // Discard stale responses\n      if (gen !== this._generation) return;\n\n      if (Array.isArray(results)) {\n        this._results = results;\n        // Auto-expand all file groups\n        this._expandedFiles = new Set(results.map(r => r.file));\n      } else {\n        this._results = [];\n      }\n      this._focusedIdx = -1;\n    } catch (e) {\n      if (gen !== this._generation) return;\n      this._error = String(e);\n      this._results = [];\n    } finally {\n      if (gen === this._generation) {\n        this._loading = false;\n      }\n    }\n  }\n\n  //  Option toggles \n\n  _toggleOption(key) {\n    this[`_${key}`] = !this[`_${key}`];\n    localStorage.setItem(`ac-dc-search-${key}`, String(this[`_${key}`]));\n    // Re-run search with new options\n    if (this._query.trim()) {\n      this._executeSearch();\n    }\n  }\n\n  //  File group expand/collapse \n\n  _toggleFileExpand(file) {\n    const next = new Set(this._expandedFiles);\n    if (next.has(file)) next.delete(file);\n    else next.add(file);\n    this._expandedFiles = next;\n  }\n\n  //  Flat match list for keyboard nav \n\n  _getFlatMatches() {\n    const flat = [];\n    for (const group of this._results) {\n      if (!this._expandedFiles.has(group.file)) continue;\n      for (const match of (group.matches || [])) {\n        flat.push({ file: group.file, match });\n      }\n    }\n    return flat;\n  }\n\n  //  Total match count \n\n  _getTotalMatches() {\n    let total = 0;\n    for (const group of this._results) {\n      total += (group.matches || []).length;\n    }\n    return total;\n  }\n\n  //  Keyboard navigation \n\n  _onKeyDown(e) {\n    if (e.key === 'Escape') {\n      if (this._query) {\n        this._query = '';\n        this._results = [];\n        this._error = '';\n        this._focusedIdx = -1;\n        const input = this.shadowRoot.querySelector('.search-input');\n        if (input) input.value = '';\n      }\n      return;\n    }\n\n    const flat = this._getFlatMatches();\n    if (flat.length === 0) return;\n\n    if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      this._focusedIdx = Math.min(this._focusedIdx + 1, flat.length - 1);\n      this._scrollFocusedIntoView();\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      this._focusedIdx = Math.max(this._focusedIdx - 1, 0);\n      this._scrollFocusedIntoView();\n    } else if (e.key === 'Enter') {\n      e.preventDefault();\n      if (this._focusedIdx >= 0 && this._focusedIdx < flat.length) {\n        this._selectMatch(flat[this._focusedIdx].file, flat[this._focusedIdx].match);\n      } else if (flat.length > 0) {\n        this._selectMatch(flat[0].file, flat[0].match);\n      }\n    }\n  }\n\n  _scrollFocusedIntoView() {\n    this.updateComplete.then(() => {\n      const el = this.shadowRoot.querySelector('.match-row.focused');\n      if (el) el.scrollIntoView({ block: 'nearest' });\n    });\n  }\n\n  //  Selection / navigation \n\n  _selectMatch(file, match) {\n    this.dispatchEvent(new CustomEvent('search-navigate', {\n      detail: { path: file, line: match.line_num },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  _onFileHeaderClick(file) {\n    this.dispatchEvent(new CustomEvent('search-navigate', {\n      detail: { path: file, line: 1 },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  //  Highlight query in match text \n\n  _highlightMatch(text, query) {\n    if (!query || !text) return text;\n\n    try {\n      let pattern;\n      if (this._useRegex) {\n        pattern = new RegExp(`(${query})`, this._ignoreCase ? 'gi' : 'g');\n      } else {\n        const escaped = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        const wordBound = this._wholeWord ? `\\\\b${escaped}\\\\b` : escaped;\n        pattern = new RegExp(`(${wordBound})`, this._ignoreCase ? 'gi' : 'g');\n      }\n\n      const parts = text.split(pattern);\n      if (parts.length <= 1) return text;\n\n      return parts.map((part, i) => {\n        if (i % 2 === 1) {\n          return `<span class=\"match-highlight\">${this._escapeHtml(part)}</span>`;\n        }\n        return this._escapeHtml(part);\n      }).join('');\n    } catch {\n      // Invalid regex  return plain text\n      return this._escapeHtml(text);\n    }\n  }\n\n  _escapeHtml(s) {\n    return s\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n\n  //  Render \n\n  render() {\n    const totalMatches = this._getTotalMatches();\n    const totalFiles = this._results.length;\n\n    return html`\n      <div class=\"search-bar\">\n        <div class=\"search-row\">\n          <input type=\"text\"\n            class=\"search-input\"\n            placeholder=\"Search files...\"\n            aria-label=\"Search repository files\"\n            .value=${this._query}\n            @input=${this._onInput}\n            @keydown=${this._onKeyDown}\n          >\n          ${totalMatches > 0 ? html`\n            <span class=\"result-count\" role=\"status\" aria-live=\"polite\">${totalMatches} match${totalMatches !== 1 ? 'es' : ''} in ${totalFiles} file${totalFiles !== 1 ? 's' : ''}</span>\n          ` : nothing}\n        </div>\n        <div class=\"option-row\" role=\"toolbar\" aria-label=\"Search options\">\n          <button class=\"option-btn ${this._ignoreCase ? 'active' : ''}\"\n            @click=${() => this._toggleOption('ignoreCase')}\n            title=\"Ignore case\"\n            aria-label=\"Ignore case\"\n            aria-pressed=${this._ignoreCase}>Aa</button>\n          <button class=\"option-btn ${this._useRegex ? 'active' : ''}\"\n            @click=${() => this._toggleOption('useRegex')}\n            title=\"Regular expression\"\n            aria-label=\"Use regular expression\"\n            aria-pressed=${this._useRegex}>.*</button>\n          <button class=\"option-btn ${this._wholeWord ? 'active' : ''}\"\n            @click=${() => this._toggleOption('wholeWord')}\n            title=\"Whole word\"\n            aria-label=\"Whole word match\"\n            aria-pressed=${this._wholeWord}>ab</button>\n        </div>\n      </div>\n\n      <div class=\"results-container\" @keydown=${this._onKeyDown} tabindex=\"-1\"\n        role=\"region\" aria-label=\"Search results\">\n        ${this._loading ? html`\n          <div class=\"loading-state\"><span class=\"spinner\"></span> Searching...</div>\n        ` : this._error ? html`\n          <div class=\"error-state\"> ${this._error}</div>\n        ` : this._results.length === 0 && this._query.trim() ? html`\n          <div class=\"empty-state\">No results for \"${this._query}\"</div>\n        ` : this._results.length === 0 ? html`\n          <div class=\"empty-state\">Type to search across the repository</div>\n        ` : this._renderResults()}\n      </div>\n    `;\n  }\n\n  _renderResults() {\n    let flatIdx = 0;\n    return this._results.map(group => {\n      const expanded = this._expandedFiles.has(group.file);\n      const matchCount = (group.matches || []).length;\n      const startIdx = flatIdx;\n\n      const matchRows = expanded ? (group.matches || []).map(match => {\n        const idx = flatIdx++;\n        return this._renderMatch(group.file, match, idx);\n      }) : (flatIdx += matchCount, nothing);\n\n      return html`\n        <div class=\"file-group\">\n          <div class=\"file-header\" @click=${() => this._toggleFileExpand(group.file)}>\n            <span class=\"file-toggle\">${expanded ? '' : ''}</span>\n            <span class=\"file-path\" @click=${(e) => { e.stopPropagation(); this._onFileHeaderClick(group.file); }}>${group.file}</span>\n            <span class=\"match-count\">${matchCount}</span>\n          </div>\n          ${matchRows}\n        </div>\n      `;\n    });\n  }\n\n  _renderMatch(file, match, flatIdx) {\n    const isFocused = flatIdx === this._focusedIdx;\n    const highlighted = this._highlightMatch(match.line, this._query);\n\n    return html`\n      ${(match.context_before || []).map(ctx => html`\n        <div class=\"context-row\">\n          <span class=\"context-line-num\">${ctx.line_num}</span>\n          <span class=\"context-content\">${ctx.line}</span>\n        </div>\n      `)}\n      <div class=\"match-row ${isFocused ? 'focused' : ''}\"\n        @click=${() => this._selectMatch(file, match)}>\n        <span class=\"match-line-num\">${match.line_num}</span>\n        <span class=\"match-content\" .innerHTML=${highlighted}></span>\n      </div>\n      ${(match.context_after || []).map(ctx => html`\n        <div class=\"context-row\">\n          <span class=\"context-line-num\">${ctx.line_num}</span>\n          <span class=\"context-content\">${ctx.line}</span>\n        </div>\n      `)}\n    `;\n  }\n}\n\ncustomElements.define('search-tab', SearchTab);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\n\n/**\n * Context Budget tab  token usage bar, category breakdown, expandable details.\n * Fetches data via LLM.get_context_breakdown RPC.\n */\nclass ContextTab extends RpcMixin(LitElement) {\n  static properties = {\n    _data: { type: Object, state: true },\n    _loading: { type: Boolean, state: true },\n    _error: { type: String, state: true },\n    _expanded: { type: Object, state: true },\n  };\n\n  static styles = css`\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    .toolbar {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      border-bottom: 1px solid var(--border-color);\n      background: var(--bg-secondary);\n      flex-shrink: 0;\n    }\n\n    .toolbar-title {\n      font-size: 12px;\n      font-weight: 600;\n      color: var(--text-primary);\n      flex: 1;\n    }\n\n    .refresh-btn {\n      background: none;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 3px 8px;\n      cursor: pointer;\n      font-size: 11px;\n      color: var(--text-secondary);\n      transition: background var(--transition-fast);\n    }\n    .refresh-btn:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n\n    .content {\n      flex: 1;\n      overflow-y: auto;\n      padding: 12px;\n    }\n\n    .loading-state, .error-state, .empty-state {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--text-muted);\n      font-size: 13px;\n    }\n    .error-state { color: var(--accent-error); }\n\n    /*  Budget bar  */\n    .budget-section {\n      margin-bottom: 16px;\n    }\n\n    .budget-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: baseline;\n      margin-bottom: 6px;\n    }\n\n    .budget-label {\n      font-size: 12px;\n      font-weight: 600;\n      color: var(--text-primary);\n    }\n\n    .budget-value {\n      font-size: 11px;\n      color: var(--text-secondary);\n      font-family: var(--font-mono);\n    }\n\n    .budget-bar {\n      height: 8px;\n      background: var(--bg-surface);\n      border-radius: 4px;\n      overflow: hidden;\n      display: flex;\n    }\n\n    .budget-segment {\n      height: 100%;\n      transition: width var(--transition-normal);\n      min-width: 1px;\n    }\n\n    .seg-system { background: #7c4dff; }\n    .seg-symbols { background: #00bcd4; }\n    .seg-files { background: #4caf50; }\n    .seg-urls { background: #ff9800; }\n    .seg-history { background: #f44336; }\n    .seg-free { background: transparent; }\n\n    .budget-legend {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 10px;\n      margin-top: 8px;\n    }\n\n    .legend-item {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      font-size: 11px;\n      color: var(--text-secondary);\n    }\n\n    .legend-dot {\n      width: 8px;\n      height: 8px;\n      border-radius: 2px;\n      flex-shrink: 0;\n    }\n\n    /*  Category cards  */\n    .category {\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      margin-bottom: 8px;\n      overflow: hidden;\n      background: var(--bg-elevated);\n    }\n\n    .category-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      cursor: pointer;\n      user-select: none;\n      transition: background var(--transition-fast);\n    }\n    .category-header:hover { background: var(--bg-surface); }\n\n    .category-icon { font-size: 14px; flex-shrink: 0; }\n\n    .category-name {\n      font-size: 12px;\n      font-weight: 600;\n      color: var(--text-primary);\n      flex: 1;\n    }\n\n    .category-tokens {\n      font-size: 11px;\n      font-family: var(--font-mono);\n      color: var(--text-secondary);\n    }\n\n    .category-toggle {\n      font-size: 10px;\n      color: var(--text-muted);\n      width: 14px;\n      text-align: center;\n    }\n\n    .category-body {\n      border-top: 1px solid var(--border-color);\n      padding: 8px 12px;\n    }\n\n    .detail-row {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 3px 0;\n      font-size: 11px;\n    }\n\n    .detail-path {\n      font-family: var(--font-mono);\n      color: var(--text-secondary);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      min-width: 0;\n      flex: 1;\n      margin-right: 8px;\n    }\n\n    .detail-tokens {\n      font-family: var(--font-mono);\n      color: var(--text-muted);\n      flex-shrink: 0;\n    }\n\n    .detail-note {\n      font-size: 11px;\n      color: var(--text-muted);\n      font-style: italic;\n      padding: 2px 0;\n    }\n\n    /*  Session totals  */\n    .session-section {\n      margin-top: 16px;\n      padding: 10px 12px;\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n    }\n\n    .session-title {\n      font-size: 12px;\n      font-weight: 600;\n      color: var(--text-primary);\n      margin-bottom: 6px;\n    }\n\n    .session-grid {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 4px 16px;\n    }\n\n    .session-stat {\n      display: flex;\n      justify-content: space-between;\n      font-size: 11px;\n    }\n\n    .stat-label { color: var(--text-secondary); }\n\n    .stat-value {\n      font-family: var(--font-mono);\n      color: var(--text-primary);\n    }\n\n    /*  Cache rate badge  */\n    .cache-badge {\n      display: inline-flex;\n      align-items: center;\n      gap: 4px;\n      padding: 2px 8px;\n      border-radius: 10px;\n      font-size: 11px;\n      font-weight: 600;\n    }\n    .cache-badge.good { background: rgba(76,175,80,0.15); color: #4caf50; }\n    .cache-badge.ok { background: rgba(255,152,0,0.15); color: #ff9800; }\n    .cache-badge.low { background: rgba(244,67,54,0.15); color: #f44336; }\n  `;\n\n  constructor() {\n    super();\n    this._data = null;\n    this._loading = false;\n    this._error = '';\n    this._expanded = new Set();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._boundRefresh = () => this._refresh();\n    window.addEventListener('stream-complete', this._boundRefresh);\n    window.addEventListener('compaction-event', this._boundRefresh);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    window.removeEventListener('stream-complete', this._boundRefresh);\n    window.removeEventListener('compaction-event', this._boundRefresh);\n  }\n\n  onRpcReady() {\n    this._refresh();\n  }\n\n  async _refresh() {\n    if (!this.rpcConnected) return;\n    this._loading = true;\n    this._error = '';\n    try {\n      const data = await this.rpcExtract('LLM.get_context_breakdown');\n      if (data && !data.error) {\n        this._data = data;\n      } else {\n        this._error = data?.error || 'No data returned';\n      }\n    } catch (e) {\n      this._error = String(e);\n    } finally {\n      this._loading = false;\n    }\n  }\n\n  _toggle(key) {\n    const next = new Set(this._expanded);\n    if (next.has(key)) next.delete(key);\n    else next.add(key);\n    this._expanded = next;\n  }\n\n  _fmt(n) {\n    if (n == null) return '0';\n    if (n >= 1000) return `${(n / 1000).toFixed(1)}k`;\n    return String(n);\n  }\n\n  _pct(part, total) {\n    if (!total) return 0;\n    return Math.max(0.5, (part / total) * 100);\n  }\n\n  _cacheClass(rate) {\n    if (rate >= 60) return 'good';\n    if (rate >= 30) return 'ok';\n    return 'low';\n  }\n\n  render() {\n    return html`\n      <div class=\"toolbar\">\n        <span class=\"toolbar-title\">Context Budget</span>\n        ${this._data ? html`\n          <span class=\"cache-badge ${this._cacheClass(this._data.cache_hit_rate)}\">\n            Cache ${this._data.cache_hit_rate}%\n          </span>\n        ` : nothing}\n        <button class=\"refresh-btn\" @click=${this._refresh} aria-label=\"Refresh context data\"> Refresh</button>\n      </div>\n      <div class=\"content\" role=\"region\" aria-label=\"Context budget details\">\n        ${this._loading ? html`<div class=\"loading-state\">Loading...</div>`\n        : this._error ? html`<div class=\"error-state\"> ${this._error}</div>`\n        : !this._data ? html`<div class=\"empty-state\">No context data yet</div>`\n        : this._renderData()}\n      </div>\n    `;\n  }\n\n  _renderData() {\n    const d = this._data;\n    const b = d.breakdown;\n    const max = d.max_input_tokens || 1;\n    const total = d.total_tokens || 0;\n\n    const segments = [\n      { key: 'system', tokens: b.system?.tokens || 0, cls: 'seg-system', label: 'System' },\n      { key: 'symbols', tokens: b.symbol_map?.tokens || 0, cls: 'seg-symbols', label: 'Symbols' },\n      { key: 'files', tokens: b.files?.tokens || 0, cls: 'seg-files', label: 'Files' },\n      { key: 'urls', tokens: b.urls?.tokens || 0, cls: 'seg-urls', label: 'URLs' },\n      { key: 'history', tokens: b.history?.tokens || 0, cls: 'seg-history', label: 'History' },\n    ];\n\n    return html`\n      <div class=\"budget-section\">\n        <div class=\"budget-header\">\n          <span class=\"budget-label\">Token Budget</span>\n          <span class=\"budget-value\">${this._fmt(total)} / ${this._fmt(max)}</span>\n        </div>\n        <div class=\"budget-bar\" role=\"meter\" aria-label=\"Token budget usage\"\n          aria-valuenow=${total} aria-valuemin=\"0\" aria-valuemax=${max}>\n          ${segments.map(s => html`\n            <div class=\"budget-segment ${s.cls}\"\n              style=\"width:${this._pct(s.tokens, max)}%\"\n              title=\"${s.label}: ${this._fmt(s.tokens)}\"\n              aria-hidden=\"true\"></div>\n          `)}\n        </div>\n        <div class=\"budget-legend\">\n          ${segments.filter(s => s.tokens > 0).map(s => html`\n            <span class=\"legend-item\">\n              <span class=\"legend-dot ${s.cls}\"></span>\n              ${s.label}: ${this._fmt(s.tokens)}\n            </span>\n          `)}\n        </div>\n      </div>\n\n      ${this._renderCategory('system', '', 'System Prompt', b.system?.tokens, null)}\n      ${this._renderCategory('symbols', '', 'Symbol Map', b.symbol_map?.tokens,\n        () => html`\n          <div class=\"detail-note\">${b.symbol_map?.files || 0} files indexed</div>\n        `\n      )}\n      ${this._renderCategory('files', '', 'Active Files', b.files?.tokens,\n        () => (b.files?.items || []).map(f => html`\n          <div class=\"detail-row\">\n            <span class=\"detail-path\">${f.path}</span>\n            <span class=\"detail-tokens\">${this._fmt(f.tokens)}</span>\n          </div>\n        `)\n      )}\n      ${this._renderCategory('urls', '', 'URL Context', b.urls?.tokens,\n        () => (b.urls?.items || []).length === 0\n          ? html`<div class=\"detail-note\">No URLs fetched</div>`\n          : (b.urls?.items || []).map(u => html`\n            <div class=\"detail-row\">\n              <span class=\"detail-path\" title=\"${u.url}\">${u.display_name || u.url}</span>\n              <span class=\"detail-tokens\">${this._fmt(u.tokens)}</span>\n            </div>\n          `)\n      )}\n      ${this._renderCategory('history', '', 'History', b.history?.tokens,\n        () => html`\n          ${b.history?.needs_summary ? html`\n            <div class=\"detail-note\"> Approaching compaction threshold</div>\n          ` : nothing}\n          <div class=\"detail-note\">Max: ${this._fmt(b.history?.max_tokens)} tokens</div>\n        `\n      )}\n\n      ${d.session_totals ? this._renderSessionTotals(d.session_totals) : nothing}\n    `;\n  }\n\n  _renderCategory(key, icon, name, tokens, detailFn) {\n    const expanded = this._expanded.has(key);\n    const hasDetail = !!detailFn;\n\n    return html`\n      <div class=\"category\">\n        <div class=\"category-header\"\n          @click=${() => hasDetail && this._toggle(key)}\n          role=${hasDetail ? 'button' : 'presentation'}\n          tabindex=${hasDetail ? '0' : nothing}\n          aria-expanded=${hasDetail ? expanded : nothing}\n          @keydown=${(e) => { if (hasDetail && (e.key === 'Enter' || e.key === ' ')) { e.preventDefault(); this._toggle(key); } }}>\n          <span class=\"category-icon\" aria-hidden=\"true\">${icon}</span>\n          <span class=\"category-name\">${name}</span>\n          <span class=\"category-tokens\">${this._fmt(tokens)}</span>\n          ${hasDetail ? html`\n            <span class=\"category-toggle\" aria-hidden=\"true\">${expanded ? '' : ''}</span>\n          ` : nothing}\n        </div>\n        ${expanded && hasDetail ? html`\n          <div class=\"category-body\" role=\"region\" aria-label=\"${name} details\">${detailFn()}</div>\n        ` : nothing}\n      </div>\n    `;\n  }\n\n  _renderSessionTotals(totals) {\n    return html`\n      <div class=\"session-section\">\n        <div class=\"session-title\">Session Totals</div>\n        <div class=\"session-grid\">\n          <div class=\"session-stat\">\n            <span class=\"stat-label\">Prompt</span>\n            <span class=\"stat-value\">${this._fmt(totals.prompt)}</span>\n          </div>\n          <div class=\"session-stat\">\n            <span class=\"stat-label\">Completion</span>\n            <span class=\"stat-value\">${this._fmt(totals.completion)}</span>\n          </div>\n          <div class=\"session-stat\">\n            <span class=\"stat-label\">Cache Hit</span>\n            <span class=\"stat-value\">${this._fmt(totals.cache_hit)}</span>\n          </div>\n          <div class=\"session-stat\">\n            <span class=\"stat-label\">Cache Write</span>\n            <span class=\"stat-value\">${this._fmt(totals.cache_write)}</span>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('context-tab', ContextTab);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\n\n/**\n * Cache Tiers tab  tier blocks with item lists, stability bars,\n * recent promotions/demotions, and fuzzy filter.\n */\nclass CacheTab extends RpcMixin(LitElement) {\n  static properties = {\n    _data: { type: Object, state: true },\n    _loading: { type: Boolean, state: true },\n    _error: { type: String, state: true },\n    _filter: { type: String, state: true },\n    _expandedTiers: { type: Object, state: true },\n  };\n\n  static styles = css`\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    .toolbar {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      border-bottom: 1px solid var(--border-color);\n      background: var(--bg-secondary);\n      flex-shrink: 0;\n    }\n\n    .filter-input {\n      flex: 1;\n      padding: 5px 8px;\n      background: var(--bg-primary);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      color: var(--text-primary);\n      font-size: 12px;\n      font-family: var(--font-mono);\n      outline: none;\n    }\n    .filter-input:focus { border-color: var(--accent-primary); }\n    .filter-input::placeholder { color: var(--text-muted); }\n\n    .refresh-btn {\n      background: none;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 3px 8px;\n      cursor: pointer;\n      font-size: 11px;\n      color: var(--text-secondary);\n      transition: background var(--transition-fast);\n      flex-shrink: 0;\n    }\n    .refresh-btn:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n\n    .content {\n      flex: 1;\n      overflow-y: auto;\n      padding: 12px;\n    }\n\n    .loading-state, .error-state, .empty-state {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--text-muted);\n      font-size: 13px;\n    }\n    .error-state { color: var(--accent-error); }\n\n    /*  Tier block  */\n    .tier-block {\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      margin-bottom: 10px;\n      overflow: hidden;\n      background: var(--bg-elevated);\n    }\n\n    .tier-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 8px 12px;\n      cursor: pointer;\n      user-select: none;\n      transition: background var(--transition-fast);\n    }\n    .tier-header:hover { background: var(--bg-surface); }\n\n    .tier-badge {\n      font-size: 10px;\n      font-weight: 700;\n      padding: 2px 6px;\n      border-radius: 3px;\n      color: white;\n      flex-shrink: 0;\n    }\n    .tier-badge.L0 { background: #7c4dff; }\n    .tier-badge.L1 { background: #00bcd4; }\n    .tier-badge.L2 { background: #4caf50; }\n    .tier-badge.L3 { background: #ff9800; }\n    .tier-badge.active { background: #78909c; }\n\n    .tier-name {\n      font-size: 12px;\n      font-weight: 600;\n      color: var(--text-primary);\n      flex: 1;\n    }\n\n    .tier-tokens {\n      font-size: 11px;\n      font-family: var(--font-mono);\n      color: var(--text-secondary);\n    }\n\n    .tier-cached {\n      font-size: 10px;\n      padding: 1px 6px;\n      border-radius: 8px;\n      background: rgba(76,175,80,0.15);\n      color: #4caf50;\n    }\n    .tier-cached.uncached {\n      background: rgba(120,144,156,0.15);\n      color: #78909c;\n    }\n\n    .tier-toggle {\n      font-size: 10px;\n      color: var(--text-muted);\n      width: 14px;\n      text-align: center;\n    }\n\n    .tier-body {\n      border-top: 1px solid var(--border-color);\n      padding: 8px 12px;\n    }\n\n    /*  Content groups  */\n    .content-group {\n      margin-bottom: 8px;\n    }\n    .content-group:last-child { margin-bottom: 0; }\n\n    .group-header {\n      font-size: 10px;\n      font-weight: 600;\n      color: var(--text-muted);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n      margin-bottom: 4px;\n    }\n\n    .item-row {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 3px 0;\n      font-size: 11px;\n    }\n\n    .item-key {\n      font-family: var(--font-mono);\n      color: var(--text-secondary);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      min-width: 0;\n      flex: 1;\n    }\n\n    .item-n {\n      font-family: var(--font-mono);\n      font-size: 10px;\n      color: var(--text-muted);\n      flex-shrink: 0;\n      min-width: 20px;\n      text-align: right;\n    }\n\n    .item-tokens {\n      font-family: var(--font-mono);\n      color: var(--text-muted);\n      flex-shrink: 0;\n      font-size: 10px;\n    }\n\n    /*  Stability bar (N progress)  */\n    .stability-bar {\n      width: 40px;\n      height: 6px;\n      background: var(--bg-surface);\n      border-radius: 3px;\n      overflow: hidden;\n      flex-shrink: 0;\n    }\n\n    .stability-fill {\n      height: 100%;\n      border-radius: 3px;\n      transition: width var(--transition-normal);\n    }\n    .stability-fill.low { background: #ff9800; }\n    .stability-fill.mid { background: #00bcd4; }\n    .stability-fill.high { background: #4caf50; }\n\n    /*  Recent changes  */\n    .changes-section {\n      margin-top: 16px;\n    }\n\n    .changes-title {\n      font-size: 12px;\n      font-weight: 600;\n      color: var(--text-primary);\n      margin-bottom: 8px;\n    }\n\n    .change-row {\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      padding: 4px 0;\n      font-size: 11px;\n    }\n\n    .change-dir {\n      font-size: 13px;\n      flex-shrink: 0;\n    }\n\n    .change-key {\n      font-family: var(--font-mono);\n      color: var(--text-secondary);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      flex: 1;\n      min-width: 0;\n    }\n\n    .change-tiers {\n      font-size: 10px;\n      color: var(--text-muted);\n      flex-shrink: 0;\n    }\n\n    .no-changes {\n      font-size: 11px;\n      color: var(--text-muted);\n      font-style: italic;\n    }\n  `;\n\n  constructor() {\n    super();\n    this._data = null;\n    this._loading = false;\n    this._error = '';\n    this._filter = '';\n    this._expandedTiers = new Set();\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this._boundRefresh = () => this._refresh();\n    window.addEventListener('stream-complete', this._boundRefresh);\n    window.addEventListener('compaction-event', this._boundRefresh);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    window.removeEventListener('stream-complete', this._boundRefresh);\n    window.removeEventListener('compaction-event', this._boundRefresh);\n  }\n\n  onRpcReady() {\n    this._refresh();\n  }\n\n  async _refresh() {\n    if (!this.rpcConnected) return;\n    this._loading = true;\n    this._error = '';\n    try {\n      const data = await this.rpcExtract('LLM.get_context_breakdown');\n      if (data && !data.error) {\n        this._data = data;\n      } else {\n        this._error = data?.error || 'No data returned';\n      }\n    } catch (e) {\n      this._error = String(e);\n    } finally {\n      this._loading = false;\n    }\n  }\n\n  _toggleTier(name) {\n    const next = new Set(this._expandedTiers);\n    if (next.has(name)) next.delete(name);\n    else next.add(name);\n    this._expandedTiers = next;\n  }\n\n  _fmt(n) {\n    if (n == null) return '0';\n    if (n >= 1000) return `${(n / 1000).toFixed(1)}k`;\n    return String(n);\n  }\n\n  _matchesFilter(key) {\n    if (!this._filter) return true;\n    return key.toLowerCase().includes(this._filter.toLowerCase());\n  }\n\n  _stabilityClass(n, threshold) {\n    if (!threshold || threshold <= 0) return 'high';\n    const pct = n / threshold;\n    if (pct >= 0.7) return 'high';\n    if (pct >= 0.4) return 'mid';\n    return 'low';\n  }\n\n  _stabilityPct(n, threshold) {\n    if (!threshold || threshold <= 0) return 100;\n    return Math.min(100, (n / threshold) * 100);\n  }\n\n  _stripPrefix(key) {\n    if (key.startsWith('symbol:') || key.startsWith('file:') || key.startsWith('history:')) {\n      return key.split(':', 1)[1] || key.substring(key.indexOf(':') + 1);\n    }\n    return key;\n  }\n\n  render() {\n    return html`\n      <div class=\"toolbar\">\n        <input type=\"text\" class=\"filter-input\"\n          placeholder=\"Filter items...\"\n          aria-label=\"Filter cache items\"\n          .value=${this._filter}\n          @input=${(e) => this._filter = e.target.value}>\n        <button class=\"refresh-btn\" @click=${this._refresh} aria-label=\"Refresh cache data\"> Refresh</button>\n      </div>\n      <div class=\"content\" role=\"region\" aria-label=\"Cache tier details\">\n        ${this._loading ? html`<div class=\"loading-state\">Loading...</div>`\n        : this._error ? html`<div class=\"error-state\"> ${this._error}</div>`\n        : !this._data ? html`<div class=\"empty-state\">No cache data yet</div>`\n        : this._renderData()}\n      </div>\n    `;\n  }\n\n  _renderData() {\n    const blocks = this._data.blocks || [];\n    const promotions = this._data.promotions || [];\n    const demotions = this._data.demotions || [];\n\n    return html`\n      ${blocks.map(block => this._renderTierBlock(block))}\n      ${(promotions.length > 0 || demotions.length > 0)\n        ? this._renderChanges(promotions, demotions)\n        : nothing}\n    `;\n  }\n\n  _renderTierBlock(block) {\n    const expanded = this._expandedTiers.has(block.name);\n    const tierClass = block.name.replace(/\\s+/g, '');\n\n    // Filter items across all content groups\n    const filteredContents = (block.contents || []).map(group => {\n      if (!group.items) return group;\n      const filtered = group.items.filter(it => this._matchesFilter(it.key));\n      return { ...group, items: filtered, count: filtered.length };\n    }).filter(g => g.count > 0 || g.type === 'history');\n\n    if (this._filter && filteredContents.length === 0) return nothing;\n\n    return html`\n      <div class=\"tier-block\">\n        <div class=\"tier-header\" @click=${() => this._toggleTier(block.name)}\n          role=\"button\" tabindex=\"0\" aria-expanded=${expanded}\n          aria-label=\"${block.name} tier  ${this._fmt(block.tokens)} tokens, ${block.cached ? 'cached' : 'uncached'}\"\n          @keydown=${(e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this._toggleTier(block.name); } }}>\n          <span class=\"tier-badge ${tierClass}\" aria-hidden=\"true\">${block.name}</span>\n          <span class=\"tier-name\">${block.cached ? 'Cached' : 'Uncached'}</span>\n          <span class=\"tier-tokens\">${this._fmt(block.tokens)} tokens</span>\n          <span class=\"tier-cached ${block.cached ? '' : 'uncached'}\">\n            ${block.cached ? ' cached' : ' live'}\n          </span>\n          <span class=\"tier-toggle\" aria-hidden=\"true\">${expanded ? '' : ''}</span>\n        </div>\n        ${expanded ? html`\n          <div class=\"tier-body\">\n            ${filteredContents.length === 0 ? html`\n              <span style=\"font-size:11px;color:var(--text-muted)\">No items</span>\n            ` : filteredContents.map(g => this._renderContentGroup(g))}\n          </div>\n        ` : nothing}\n      </div>\n    `;\n  }\n\n  _renderContentGroup(group) {\n    return html`\n      <div class=\"content-group\">\n        <div class=\"group-header\">${group.type} (${group.count})</div>\n        ${group.type === 'history' ? html`\n          <div style=\"font-size:11px;color:var(--text-muted)\">\n            ${this._fmt(group.tokens)} tokens\n          </div>\n        ` : (group.items || []).map(it => html`\n          <div class=\"item-row\">\n            <span class=\"item-key\" title=\"${it.key}\">${this._stripPrefix(it.key)}</span>\n            <span class=\"item-n\">${it.n}</span>\n            <div class=\"stability-bar\" role=\"meter\" aria-label=\"Stability\"\n              aria-valuenow=${it.n} aria-valuemin=\"0\"\n              aria-valuemax=${it.threshold || 12}\n              title=\"N=${it.n}/${it.threshold || '?'}\">\n              <div class=\"stability-fill ${this._stabilityClass(it.n, it.threshold)}\"\n                style=\"width:${this._stabilityPct(it.n, it.threshold)}%\" aria-hidden=\"true\"></div>\n            </div>\n            <span class=\"item-tokens\">${this._fmt(it.tokens)}</span>\n          </div>\n        `)}\n      </div>\n    `;\n  }\n\n  _renderChanges(promotions, demotions) {\n    return html`\n      <div class=\"changes-section\">\n        <div class=\"changes-title\">Recent Changes</div>\n        ${promotions.length === 0 && demotions.length === 0 ? html`\n          <div class=\"no-changes\">No tier changes since last request</div>\n        ` : nothing}\n        ${promotions.map(c => html`\n          <div class=\"change-row\">\n            <span class=\"change-dir\"></span>\n            <span class=\"change-key\" title=\"${c.key}\">${this._stripPrefix(c.key)}</span>\n            <span class=\"change-tiers\">${c.from}  ${c.to}</span>\n          </div>\n        `)}\n        ${demotions.map(c => html`\n          <div class=\"change-row\">\n            <span class=\"change-dir\"></span>\n            <span class=\"change-key\" title=\"${c.key}\">${this._stripPrefix(c.key)}</span>\n            <span class=\"change-tiers\">${c.from}  ${c.to}</span>\n          </div>\n        `)}\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('cache-tab', CacheTab);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\n\n/**\n * Settings tab  config file cards with edit/reload, toast feedback.\n *\n * Config types: litellm (JSON), app (JSON), snippets (JSON),\n * system (Markdown), system_extra (Markdown), compaction (Markdown).\n */\n\nconst CONFIG_CARDS = [\n  { key: 'litellm', label: 'LLM Config', icon: '', lang: 'json', reloadable: true },\n  { key: 'app', label: 'App Config', icon: '', lang: 'json', reloadable: true },\n  { key: 'system', label: 'System Prompt', icon: '', lang: 'markdown', reloadable: false },\n  { key: 'system_extra', label: 'System Extra', icon: '', lang: 'markdown', reloadable: false },\n  { key: 'compaction', label: 'Compaction Skill', icon: '', lang: 'markdown', reloadable: false },\n  { key: 'snippets', label: 'Snippets', icon: '', lang: 'json', reloadable: false },\n];\n\nclass SettingsTab extends RpcMixin(LitElement) {\n  static properties = {\n    _editing: { type: String, state: true },\n    _content: { type: String, state: true },\n    _configPath: { type: String, state: true },\n    _saving: { type: Boolean, state: true },\n    _toast: { type: Object, state: true },\n    _configInfo: { type: Object, state: true },\n  };\n\n  static styles = css`\n    :host {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      overflow: hidden;\n    }\n\n    .content {\n      flex: 1;\n      overflow-y: auto;\n      padding: 12px;\n    }\n\n    /*  Info banner  */\n    .info-banner {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n      padding: 10px 12px;\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      margin-bottom: 12px;\n      font-size: 11px;\n    }\n\n    .info-row {\n      display: flex;\n      gap: 8px;\n    }\n\n    .info-label {\n      color: var(--text-muted);\n      min-width: 100px;\n      flex-shrink: 0;\n    }\n\n    .info-value {\n      color: var(--text-secondary);\n      font-family: var(--font-mono);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n\n    /*  Config cards  */\n    .card-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n      gap: 8px;\n      margin-bottom: 12px;\n    }\n\n    .sr-only {\n      position: absolute;\n      width: 1px;\n      height: 1px;\n      padding: 0;\n      margin: -1px;\n      overflow: hidden;\n      clip: rect(0,0,0,0);\n      white-space: nowrap;\n      border: 0;\n    }\n\n    .config-card {\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      padding: 12px;\n      background: var(--bg-elevated);\n      cursor: pointer;\n      transition: background var(--transition-fast), border-color var(--transition-fast);\n    }\n    .config-card:hover {\n      background: var(--bg-surface);\n      border-color: var(--accent-primary);\n    }\n    .config-card.active {\n      border-color: var(--accent-primary);\n      background: var(--bg-surface);\n    }\n\n    .card-header {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      margin-bottom: 6px;\n    }\n\n    .card-icon { font-size: 18px; }\n\n    .card-label {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--text-primary);\n    }\n\n    .card-lang {\n      font-size: 10px;\n      color: var(--text-muted);\n      text-transform: uppercase;\n      padding: 1px 5px;\n      background: var(--bg-surface);\n      border-radius: 3px;\n      margin-left: auto;\n    }\n\n    /*  Editor area  */\n    .editor-area {\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-md);\n      overflow: hidden;\n      display: flex;\n      flex-direction: column;\n      background: var(--bg-elevated);\n    }\n\n    .editor-toolbar {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 6px 12px;\n      border-bottom: 1px solid var(--border-color);\n      background: var(--bg-secondary);\n    }\n\n    .editor-title {\n      font-size: 12px;\n      font-weight: 600;\n      color: var(--text-primary);\n      flex: 1;\n    }\n\n    .editor-path {\n      font-size: 10px;\n      font-family: var(--font-mono);\n      color: var(--text-muted);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      max-width: 200px;\n    }\n\n    .editor-btn {\n      background: none;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 3px 10px;\n      cursor: pointer;\n      font-size: 11px;\n      color: var(--text-secondary);\n      transition: background var(--transition-fast), color var(--transition-fast);\n    }\n    .editor-btn:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n    .editor-btn.primary {\n      background: var(--accent-primary);\n      color: white;\n      border-color: var(--accent-primary);\n    }\n    .editor-btn.primary:hover {\n      opacity: 0.9;\n    }\n    .editor-btn:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n\n    .editor-textarea {\n      width: 100%;\n      min-height: 300px;\n      padding: 12px;\n      background: var(--bg-primary);\n      color: var(--text-primary);\n      border: none;\n      font-family: var(--font-mono);\n      font-size: 12px;\n      line-height: 1.5;\n      resize: vertical;\n      outline: none;\n      tab-size: 2;\n      box-sizing: border-box;\n    }\n\n    /*  Toast  */\n    .toast {\n      position: fixed;\n      bottom: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      padding: 8px 16px;\n      border-radius: var(--radius-md);\n      font-size: 12px;\n      font-weight: 500;\n      z-index: 500;\n      animation: toast-in 0.3s ease, toast-out 0.3s ease 2.7s;\n      pointer-events: none;\n    }\n    .toast.success {\n      background: rgba(76,175,80,0.9);\n      color: white;\n    }\n    .toast.error {\n      background: rgba(244,67,54,0.9);\n      color: white;\n    }\n    .toast.info {\n      background: rgba(33,150,243,0.9);\n      color: white;\n    }\n\n    @keyframes toast-in {\n      from { opacity: 0; transform: translateX(-50%) translateY(10px); }\n      to { opacity: 1; transform: translateX(-50%) translateY(0); }\n    }\n    @keyframes toast-out {\n      from { opacity: 1; }\n      to { opacity: 0; }\n    }\n  `;\n\n  constructor() {\n    super();\n    this._editing = null;\n    this._content = '';\n    this._configPath = '';\n    this._saving = false;\n    this._toast = null;\n    this._configInfo = null;\n    this._toastTimer = null;\n  }\n\n  onRpcReady() {\n    this._loadConfigInfo();\n  }\n\n  async _loadConfigInfo() {\n    try {\n      const info = await this.rpcExtract('Settings.get_config_info');\n      this._configInfo = info;\n    } catch (e) {\n      console.warn('Failed to load config info:', e);\n    }\n  }\n\n  async _openEditor(key) {\n    try {\n      const result = await this.rpcExtract('Settings.get_config_content', key);\n      if (result?.error) {\n        this._showToast(result.error, 'error');\n        return;\n      }\n      this._editing = key;\n      this._content = result.content || '';\n      this._configPath = result.path || '';\n    } catch (e) {\n      this._showToast(String(e), 'error');\n    }\n  }\n\n  async _save() {\n    if (!this._editing || this._saving) return;\n    this._saving = true;\n    try {\n      const result = await this.rpcExtract(\n        'Settings.save_config_content', this._editing, this._content\n      );\n      if (result?.error) {\n        this._showToast(`Save failed: ${result.error}`, 'error');\n      } else {\n        this._showToast('Saved successfully', 'success');\n        // Auto-reload if applicable\n        const card = CONFIG_CARDS.find(c => c.key === this._editing);\n        if (card?.reloadable) {\n          await this._reload(this._editing);\n        }\n      }\n    } catch (e) {\n      this._showToast(`Save failed: ${e}`, 'error');\n    } finally {\n      this._saving = false;\n    }\n  }\n\n  async _reload(key) {\n    try {\n      let result;\n      if (key === 'litellm') {\n        result = await this.rpcExtract('Settings.reload_llm_config');\n        this._showToast(\n          `Reloaded: model=${result?.model || '?'}`,\n          'info'\n        );\n      } else if (key === 'app') {\n        result = await this.rpcExtract('Settings.reload_app_config');\n        this._showToast('App config reloaded', 'info');\n      }\n    } catch (e) {\n      this._showToast(`Reload failed: ${e}`, 'error');\n    }\n  }\n\n  _closeEditor() {\n    this._editing = null;\n    this._content = '';\n    this._configPath = '';\n  }\n\n  _showToast(message, type = 'info') {\n    if (this._toastTimer) clearTimeout(this._toastTimer);\n    this._toast = { message, type };\n    this._toastTimer = setTimeout(() => {\n      this._toast = null;\n    }, 3000);\n  }\n\n  render() {\n    return html`\n      <div class=\"content\">\n        ${this._configInfo ? this._renderInfo() : nothing}\n        ${this._renderCardGrid()}\n        ${this._editing ? this._renderEditor() : nothing}\n      </div>\n      ${this._toast ? html`\n        <div class=\"toast ${this._toast.type}\" role=\"alert\" aria-live=\"assertive\">${this._toast.message}</div>\n      ` : nothing}\n    `;\n  }\n\n  _renderInfo() {\n    const info = this._configInfo;\n    return html`\n      <div class=\"info-banner\">\n        <div class=\"info-row\">\n          <span class=\"info-label\">Model</span>\n          <span class=\"info-value\">${info.model || ''}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"info-label\">Smaller Model</span>\n          <span class=\"info-value\">${info.smaller_model || ''}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"info-label\">Config Dir</span>\n          <span class=\"info-value\" title=\"${info.config_dir || ''}\">${info.config_dir || ''}</span>\n        </div>\n      </div>\n    `;\n  }\n\n  _renderCardGrid() {\n    return html`\n      <div class=\"card-grid\" role=\"list\" aria-label=\"Configuration files\">\n        ${CONFIG_CARDS.map(card => html`\n          <div class=\"config-card ${this._editing === card.key ? 'active' : ''}\"\n            role=\"listitem\"\n            tabindex=\"0\"\n            aria-label=\"Edit ${card.label}\"\n            aria-current=${this._editing === card.key ? 'true' : nothing}\n            @click=${() => this._openEditor(card.key)}\n            @keydown=${(e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); this._openEditor(card.key); } }}>\n            <div class=\"card-header\">\n              <span class=\"card-icon\" aria-hidden=\"true\">${card.icon}</span>\n              <span class=\"card-label\">${card.label}</span>\n              <span class=\"card-lang\">${card.lang}</span>\n            </div>\n          </div>\n        `)}\n      </div>\n    `;\n  }\n\n  _renderEditor() {\n    const card = CONFIG_CARDS.find(c => c.key === this._editing);\n    return html`\n      <div class=\"editor-area\" role=\"region\" aria-label=\"Editing ${card?.label || this._editing}\">\n        <div class=\"editor-toolbar\" role=\"toolbar\" aria-label=\"Editor actions\">\n          <span class=\"editor-title\">${card?.icon || ''} ${card?.label || this._editing}</span>\n          <span class=\"editor-path\" title=\"${this._configPath}\">${this._configPath}</span>\n          ${card?.reloadable ? html`\n            <button class=\"editor-btn\" @click=${() => this._reload(this._editing)}\n              aria-label=\"Reload ${card?.label} configuration\">\n               Reload\n            </button>\n          ` : nothing}\n          <button class=\"editor-btn primary\" @click=${this._save} ?disabled=${this._saving}\n            aria-label=\"Save ${card?.label}\">\n            ${this._saving ? 'Saving...' : ' Save'}\n          </button>\n          <button class=\"editor-btn\" @click=${this._closeEditor} aria-label=\"Close editor\"></button>\n        </div>\n        <textarea class=\"editor-textarea\"\n          aria-label=\"${card?.label || 'Config'} content\"\n          .value=${this._content}\n          @input=${(e) => this._content = e.target.value}\n          @keydown=${(e) => { if ((e.ctrlKey || e.metaKey) && e.key === 's') { e.preventDefault(); this._save(); } }}\n          spellcheck=\"false\"\n        ></textarea>\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('settings-tab', SettingsTab);","import { LitElement, html, css } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\nimport '../chat/files-tab.js';\nimport '../chat/search-tab.js';\nimport '../chat/context-tab.js';\nimport '../chat/cache-tab.js';\nimport '../chat/settings-tab.js';\n\n// Tab definitions\nconst TABS = [\n  { id: 'FILES', icon: '', label: 'Files & Chat' },\n  { id: 'SEARCH', icon: '', label: 'Search' },\n  { id: 'CONTEXT', icon: '', label: 'Context Budget' },\n  { id: 'CACHE', icon: '', label: 'Cache Tiers' },\n  { id: 'SETTINGS', icon: '', label: 'Settings' },\n];\n\nclass AcDialog extends RpcMixin(LitElement) {\n  static properties = {\n    connected: { type: Boolean },\n    error: { type: String },\n    activeTab: { type: String, state: true },\n    minimized: { type: Boolean, state: true },\n    _dragging: { type: Boolean, state: true },\n    _positioned: { type: Boolean, state: true },\n    _visitedTabs: { type: Object, state: true },\n    _historyPercent: { type: Number, state: true },\n  };\n\n  static KEYBOARD_SHORTCUTS = {\n    '1': 'FILES',\n    '2': 'SEARCH',\n    '3': 'CONTEXT',\n    '4': 'CACHE',\n    '5': 'SETTINGS',\n  };\n\n  static styles = css`\n    :host {\n      display: block;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 50vw;\n      min-width: 400px;\n      height: 100vh;\n      z-index: 10;\n    }\n\n    .dialog {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      height: 100%;\n      background: var(--bg-secondary);\n      border: 1px solid var(--border-color);\n      border-radius: 0 var(--radius-lg) var(--radius-lg) 0;\n      box-shadow: var(--shadow-lg);\n      overflow: hidden;\n    }\n\n    :host(.positioned) {\n      min-width: 300px;\n      min-height: 200px;\n    }\n\n    :host(.minimized) {\n      height: 48px !important;\n      min-height: 48px;\n    }\n\n    :host(.minimized) .content,\n    :host(.minimized) .history-bar {\n      display: none;\n    }\n\n    /* Header */\n    .header {\n      display: flex;\n      align-items: center;\n      height: 48px;\n      padding: 0 12px;\n      background: var(--bg-elevated);\n      border-bottom: 1px solid var(--border-color);\n      cursor: default;\n      user-select: none;\n      flex-shrink: 0;\n    }\n\n    .header-left {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      min-width: 120px;\n      cursor: pointer;\n    }\n\n    .header-left .title {\n      font-size: 13px;\n      font-weight: 600;\n      color: var(--text-primary);\n    }\n\n    .connection-dot {\n      width: 8px;\n      height: 8px;\n      border-radius: 50%;\n      background: var(--accent-error);\n      flex-shrink: 0;\n    }\n    .connection-dot.connected { background: var(--accent-success); }\n\n    .tabs {\n      display: flex;\n      gap: 2px;\n      flex: 1;\n      justify-content: center;\n    }\n\n    .tab-btn {\n      background: none;\n      border: none;\n      padding: 6px 10px;\n      border-radius: var(--radius-sm);\n      cursor: pointer;\n      font-size: 16px;\n      color: var(--text-secondary);\n      transition: background var(--transition-fast), color var(--transition-fast);\n      position: relative;\n    }\n\n    .tab-btn:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n\n    .tab-btn.active {\n      background: var(--bg-surface);\n      color: var(--accent-primary);\n    }\n\n    .tab-btn .tooltip {\n      display: none;\n      position: absolute;\n      top: 100%;\n      left: 50%;\n      transform: translateX(-50%);\n      padding: 4px 8px;\n      background: var(--bg-elevated);\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      font-size: 11px;\n      white-space: nowrap;\n      z-index: 100;\n      color: var(--text-secondary);\n      pointer-events: none;\n    }\n\n    .tab-btn:hover .tooltip { display: block; }\n\n    .header-right {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      min-width: 80px;\n      justify-content: flex-end;\n    }\n\n    .header-btn {\n      background: none;\n      border: none;\n      padding: 4px 8px;\n      border-radius: var(--radius-sm);\n      cursor: pointer;\n      font-size: 14px;\n      color: var(--text-secondary);\n      transition: background var(--transition-fast);\n    }\n\n    .header-btn:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n\n    /* Content area */\n    .content {\n      flex: 1;\n      overflow: hidden;\n      position: relative;\n    }\n\n    .tab-panel {\n      width: 100%;\n      height: 100%;\n      overflow: auto;\n    }\n\n    .tab-panel[hidden] {\n      display: none;\n    }\n\n    .tab-placeholder {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--text-muted);\n      font-size: 14px;\n    }\n\n    .connecting-overlay {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      gap: 16px;\n      color: var(--text-secondary);\n      font-size: 14px;\n      padding: 24px;\n      text-align: center;\n    }\n\n    .connecting-brand {\n      font-size: 3rem;\n      font-weight: 700;\n      color: var(--text-primary);\n      opacity: 0.6;\n      letter-spacing: 2px;\n      font-family: var(--font-mono);\n    }\n\n    .connecting-spinner {\n      display: inline-block;\n      width: 24px;\n      height: 24px;\n      border: 3px solid var(--border-color);\n      border-top-color: var(--accent-primary);\n      border-radius: 50%;\n      animation: conn-spin 0.8s linear infinite;\n    }\n\n    @keyframes conn-spin { to { transform: rotate(360deg); } }\n\n    .connecting-message {\n      color: var(--text-muted);\n      font-size: 13px;\n      max-width: 300px;\n      line-height: 1.5;\n    }\n\n    .connecting-error {\n      color: var(--accent-error);\n      font-size: 13px;\n    }\n\n    /* History bar */\n    .history-bar {\n      height: 3px;\n      background: var(--bg-elevated);\n      flex-shrink: 0;\n    }\n\n    .history-fill {\n      height: 100%;\n      background: var(--accent-success);\n      transition: width var(--transition-normal), background var(--transition-normal);\n      border-radius: 0 2px 2px 0;\n    }\n\n    .history-fill.warning { background: var(--accent-warning); }\n    .history-fill.critical { background: var(--accent-error); }\n\n    /* Resize handles  always rendered, positioned within the dialog */\n    .resize-handle {\n      position: absolute;\n      z-index: 10;\n    }\n    /* Right edge always available (primary handle for left-docked state) */\n    .resize-e { top: 8px; right: 0; bottom: 8px; width: 4px; cursor: e-resize; }\n\n    /* Other edges only available after undocking */\n    .resize-n { top: 0; left: 8px; right: 8px; height: 4px; cursor: n-resize; }\n    .resize-s { bottom: 0; left: 8px; right: 8px; height: 4px; cursor: s-resize; }\n    .resize-w { top: 8px; left: 0; bottom: 8px; width: 4px; cursor: w-resize; }\n    .resize-ne { top: 0; right: 0; width: 8px; height: 8px; cursor: ne-resize; }\n    .resize-nw { top: 0; left: 0; width: 8px; height: 8px; cursor: nw-resize; }\n    .resize-se { bottom: 0; right: 0; width: 8px; height: 8px; cursor: se-resize; }\n    .resize-sw { bottom: 0; left: 0; width: 8px; height: 8px; cursor: sw-resize; }\n  `;\n\n  constructor() {\n    super();\n    this.activeTab = 'FILES';\n    this.minimized = false;\n    this._dragging = false;\n    this._positioned = false;\n    this._visitedTabs = new Set(['FILES']);\n    this._dragStart = null;\n    this._resizeDir = null;\n    this._historyPercent = 0;\n\n    this._onMouseMove = this._onMouseMove.bind(this);\n    this._onMouseUp = this._onMouseUp.bind(this);\n\n    this._boundOnStreamComplete = this._onStreamCompleteForBar.bind(this);\n    this._boundOnCompactionEvent = this._onCompactionEventForBar.bind(this);\n    this._boundOnStateLoaded = this._onStateLoadedForBar.bind(this);\n    this._boundOnSessionReset = this._onSessionResetForBar.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addEventListener('search-navigate', this._onSearchNavigate.bind(this));\n    window.addEventListener('stream-complete', this._boundOnStreamComplete);\n    window.addEventListener('compaction-event', this._boundOnCompactionEvent);\n    window.addEventListener('state-loaded', this._boundOnStateLoaded);\n    window.addEventListener('session-reset', this._boundOnSessionReset);\n    this._boundOnGlobalKeyDown = this._onGlobalKeyDown.bind(this);\n    window.addEventListener('keydown', this._boundOnGlobalKeyDown);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    window.removeEventListener('stream-complete', this._boundOnStreamComplete);\n    window.removeEventListener('compaction-event', this._boundOnCompactionEvent);\n    window.removeEventListener('state-loaded', this._boundOnStateLoaded);\n    window.removeEventListener('session-reset', this._boundOnSessionReset);\n    window.removeEventListener('keydown', this._boundOnGlobalKeyDown);\n  }\n\n  onRpcReady() {\n    this._refreshHistoryBar();\n  }\n\n  //  Tab switching \n\n  _switchTab(tabId) {\n    this.activeTab = tabId;\n    this._visitedTabs = new Set([...this._visitedTabs, tabId]);\n\n    // Focus search input when switching to search tab\n    if (tabId === 'SEARCH') {\n      this.updateComplete.then(() => {\n        this.shadowRoot.querySelector('search-tab')?.focus();\n      });\n    }\n  }\n\n  //  Global keyboard shortcuts \n\n  _onGlobalKeyDown(e) {\n    // Alt+1..5 to switch tabs\n    if (e.altKey && !e.ctrlKey && !e.metaKey) {\n      const tabId = AcDialog.KEYBOARD_SHORTCUTS[e.key];\n      if (tabId) {\n        e.preventDefault();\n        if (this.minimized) this._toggleMinimize();\n        this._switchTab(tabId);\n        return;\n      }\n    }\n    // Alt+M to toggle minimize\n    if (e.altKey && e.key === 'm' && !e.ctrlKey && !e.metaKey) {\n      e.preventDefault();\n      this._toggleMinimize();\n    }\n  }\n\n  //  Search navigation \n\n  _onSearchNavigate(e) {\n    // Re-dispatch as navigate-file so it bubbles up to app-shell which owns the diff viewer\n    e.stopPropagation();\n    this.dispatchEvent(new CustomEvent('navigate-file', {\n      detail: e.detail,\n      bubbles: true, composed: true,\n    }));\n  }\n\n  //  Minimize \n\n  _toggleMinimize() {\n    this.minimized = !this.minimized;\n    if (this.minimized) {\n      this.classList.add('minimized');\n    } else {\n      this.classList.remove('minimized');\n    }\n  }\n\n  //  Dragging \n\n  _onHeaderMouseDown(e) {\n    if (e.target.closest('button')) return; // Don't drag from buttons\n    this._dragStart = { x: e.clientX, y: e.clientY, moved: false };\n    document.addEventListener('mousemove', this._onMouseMove);\n    document.addEventListener('mouseup', this._onMouseUp);\n  }\n\n  _onMouseMove(e) {\n    if (this._resizeDir) {\n      this._handleResize(e);\n      return;\n    }\n    if (!this._dragStart) return;\n\n    const dx = e.clientX - this._dragStart.x;\n    const dy = e.clientY - this._dragStart.y;\n\n    if (!this._dragStart.moved && Math.abs(dx) + Math.abs(dy) < 5) return;\n    this._dragStart.moved = true;\n\n    const host = this;\n    if (!this._positioned) {\n      // Switch from default docked to explicit positioning\n      const rect = host.getBoundingClientRect();\n      host.style.left = rect.left + 'px';\n      host.style.top = rect.top + 'px';\n      host.style.width = rect.width + 'px';\n      host.style.height = rect.height + 'px';\n      this._positioned = true;\n      this.classList.add('positioned');\n      this._dragStart.x = e.clientX;\n      this._dragStart.y = e.clientY;\n      return;\n    }\n\n    const left = parseFloat(host.style.left) + dx;\n    const top = parseFloat(host.style.top) + dy;\n    host.style.left = left + 'px';\n    host.style.top = top + 'px';\n\n    this._dragStart.x = e.clientX;\n    this._dragStart.y = e.clientY;\n  }\n\n  _onMouseUp(e) {\n    document.removeEventListener('mousemove', this._onMouseMove);\n    document.removeEventListener('mouseup', this._onMouseUp);\n\n    if (this._resizeDir) {\n      this._resizeDir = null;\n      return;\n    }\n\n    if (this._dragStart && !this._dragStart.moved) {\n      this._toggleMinimize();\n    }\n    this._dragStart = null;\n  }\n\n  //  Resizing \n\n  _onResizeStart(dir, e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const host = this;\n    if (!this._positioned) {\n      const rect = host.getBoundingClientRect();\n      host.style.left = rect.left + 'px';\n      host.style.top = rect.top + 'px';\n      host.style.width = rect.width + 'px';\n      host.style.height = rect.height + 'px';\n      this._positioned = true;\n      this.classList.add('positioned');\n    }\n\n    this._resizeDir = dir;\n    this._resizeStart = {\n      x: e.clientX,\n      y: e.clientY,\n      left: parseFloat(host.style.left),\n      top: parseFloat(host.style.top),\n      width: parseFloat(host.style.width),\n      height: parseFloat(host.style.height),\n    };\n\n    document.addEventListener('mousemove', this._onMouseMove);\n    document.addEventListener('mouseup', this._onMouseUp);\n  }\n\n  _handleResize(e) {\n    const host = this;\n    const s = this._resizeStart;\n    const dx = e.clientX - s.x;\n    const dy = e.clientY - s.y;\n    const dir = this._resizeDir;\n\n    let left = s.left, top = s.top, width = s.width, height = s.height;\n\n    if (dir.includes('e')) width = Math.max(300, s.width + dx);\n    if (dir.includes('w')) { width = Math.max(300, s.width - dx); left = s.left + s.width - width; }\n    if (dir.includes('s')) height = Math.max(200, s.height + dy);\n    if (dir.includes('n')) { height = Math.max(200, s.height - dy); top = s.top + s.height - height; }\n\n    host.style.left = left + 'px';\n    host.style.top = top + 'px';\n    host.style.width = width + 'px';\n    host.style.height = height + 'px';\n  }\n\n  //  History bar \n\n  _onStreamCompleteForBar() {\n    this._refreshHistoryBar();\n  }\n\n  _onCompactionEventForBar(e) {\n    const event = e.detail?.event;\n    if (event?.type === 'compaction_complete' && event.case !== 'none') {\n      this._refreshHistoryBar();\n    }\n  }\n\n  _onStateLoadedForBar() {\n    this._refreshHistoryBar();\n  }\n\n  _onSessionResetForBar() {\n    this._refreshHistoryBar();\n  }\n\n  async _refreshHistoryBar() {\n    if (!this.rpcConnected) return;\n    try {\n      const status = await this.rpcExtract('LLM.get_history_status');\n      if (status && typeof status.percent === 'number') {\n        this._historyPercent = status.percent;\n      }\n    } catch (e) {\n      // History bar is non-critical  silently ignore\n    }\n  }\n\n  _historyBarClass() {\n    if (this._historyPercent > 90) return 'critical';\n    if (this._historyPercent > 75) return 'warning';\n    return '';\n  }\n\n  //  Render \n\n  render() {\n    const activeLabel = TABS.find(t => t.id === this.activeTab)?.label || '';\n\n    return html`\n      <div class=\"dialog\" role=\"region\" aria-label=\"Main dialog\">\n\n        <!-- Right edge always available (primary handle for left-docked state) -->\n        <div class=\"resize-handle resize-e\" aria-hidden=\"true\" @mousedown=${(e) => this._onResizeStart('e', e)}></div>\n\n        ${this._positioned ? html`\n          <div class=\"resize-handle resize-n\" aria-hidden=\"true\" @mousedown=${(e) => this._onResizeStart('n', e)}></div>\n          <div class=\"resize-handle resize-s\" aria-hidden=\"true\" @mousedown=${(e) => this._onResizeStart('s', e)}></div>\n          <div class=\"resize-handle resize-w\" aria-hidden=\"true\" @mousedown=${(e) => this._onResizeStart('w', e)}></div>\n          <div class=\"resize-handle resize-ne\" aria-hidden=\"true\" @mousedown=${(e) => this._onResizeStart('ne', e)}></div>\n          <div class=\"resize-handle resize-nw\" aria-hidden=\"true\" @mousedown=${(e) => this._onResizeStart('nw', e)}></div>\n          <div class=\"resize-handle resize-se\" aria-hidden=\"true\" @mousedown=${(e) => this._onResizeStart('se', e)}></div>\n          <div class=\"resize-handle resize-sw\" aria-hidden=\"true\" @mousedown=${(e) => this._onResizeStart('sw', e)}></div>\n        ` : ''}\n\n        <div class=\"header\" @mousedown=${this._onHeaderMouseDown} role=\"toolbar\" aria-label=\"Dialog controls\">\n          <div class=\"header-left\" @click=${this._toggleMinimize}>\n            <span class=\"connection-dot ${this.connected ? 'connected' : ''}\"\n              role=\"status\"\n              aria-label=${this.connected ? 'Connected to server' : 'Disconnected from server'}></span>\n            <span class=\"title\">${activeLabel}</span>\n          </div>\n\n          <nav class=\"tabs\" role=\"tablist\" aria-label=\"Main navigation\">\n            ${TABS.map((tab, i) => html`\n              <button\n                role=\"tab\"\n                class=\"tab-btn ${this.activeTab === tab.id ? 'active' : ''}\"\n                aria-selected=${this.activeTab === tab.id}\n                aria-controls=\"tabpanel-${tab.id}\"\n                id=\"tab-${tab.id}\"\n                @click=${(e) => { e.stopPropagation(); this._switchTab(tab.id); }}\n                title=\"${tab.label} (Alt+${i + 1})\"\n                aria-label=\"${tab.label}\"\n              >\n                ${tab.icon}\n                <span class=\"tooltip\">${tab.label}</span>\n              </button>\n            `)}\n          </nav>\n\n          <div class=\"header-right\">\n            <button class=\"header-btn\" @click=${(e) => { e.stopPropagation(); this._toggleMinimize(); }}\n              title=${this.minimized ? 'Maximize (Alt+M)' : 'Minimize (Alt+M)'}\n              aria-label=${this.minimized ? 'Maximize dialog' : 'Minimize dialog'}\n              aria-expanded=${!this.minimized}>\n              ${this.minimized ? '' : ''}\n            </button>\n          </div>\n        </div>\n\n        <div class=\"content\">\n          ${!this.connected ? html`\n            <div class=\"connecting-overlay\">\n              <div class=\"connecting-brand\">ACDC</div>\n              ${this.error ? html`\n                <div class=\"connecting-error\">${this.error}</div>\n                <div class=\"connecting-spinner\"></div>\n                <div class=\"connecting-message\">Attempting to reconnect to server...</div>\n              ` : html`\n                <div class=\"connecting-spinner\"></div>\n                <div class=\"connecting-message\">Connecting to server...</div>\n              `}\n            </div>\n          ` : html`\n            ${this._renderTabPanel('FILES', () => html`\n              <files-tab></files-tab>\n            `)}\n            ${this._renderTabPanel('SEARCH', () => html`\n              <search-tab></search-tab>\n            `)}\n            ${this._renderTabPanel('CONTEXT', () => html`\n              <context-tab></context-tab>\n            `)}\n            ${this._renderTabPanel('CACHE', () => html`\n              <cache-tab></cache-tab>\n            `)}\n            ${this._renderTabPanel('SETTINGS', () => html`\n              <settings-tab></settings-tab>\n            `)}\n          `}\n        </div>\n\n        <div class=\"history-bar\" role=\"progressbar\"\n          aria-label=\"History token usage\"\n          aria-valuenow=${this._historyPercent}\n          aria-valuemin=\"0\"\n          aria-valuemax=\"100\">\n          <div class=\"history-fill ${this._historyBarClass()}\"\n               style=\"width: ${this._historyPercent}%\"></div>\n        </div>\n      </div>\n    `;\n  }\n\n  _renderTabPanel(tabId, contentFn) {\n    // Only render tabs that have been visited (lazy loading)\n    if (!this._visitedTabs.has(tabId)) {\n      return html`<div class=\"tab-panel\" role=\"tabpanel\" id=\"tabpanel-${tabId}\"\n        aria-labelledby=\"tab-${tabId}\" ?hidden=${this.activeTab !== tabId}></div>`;\n    }\n    return html`\n      <div class=\"tab-panel\" role=\"tabpanel\" id=\"tabpanel-${tabId}\"\n        aria-labelledby=\"tab-${tabId}\" ?hidden=${this.activeTab !== tabId}>\n        ${contentFn()}\n      </div>\n    `;\n  }\n}\n\ncustomElements.define('ac-dialog', AcDialog);","import { LitElement, html, css, nothing } from 'lit';\nimport { RpcMixin } from '../rpc-mixin.js';\n\n/**\n * Diff Viewer  side-by-side Monaco diff editor with file tabs,\n * dirty tracking, language detection, and save flow.\n */\n\n// Extension  Monaco language ID\nconst LANG_MAP = {\n  '.py': 'python',\n  '.js': 'javascript', '.mjs': 'javascript', '.jsx': 'javascript',\n  '.ts': 'typescript', '.tsx': 'typescript',\n  '.json': 'json',\n  '.html': 'html', '.htm': 'html',\n  '.css': 'css', '.scss': 'scss', '.less': 'less',\n  '.md': 'markdown', '.markdown': 'markdown',\n  '.yaml': 'yaml', '.yml': 'yaml',\n  '.xml': 'xml', '.svg': 'xml',\n  '.sh': 'shell', '.bash': 'shell', '.zsh': 'shell',\n  '.c': 'c', '.h': 'c',\n  '.cpp': 'cpp', '.cc': 'cpp', '.cxx': 'cpp', '.hpp': 'cpp', '.hxx': 'cpp',\n  '.java': 'java',\n  '.go': 'go',\n  '.rs': 'rust',\n  '.rb': 'ruby',\n  '.sql': 'sql',\n  '.toml': 'ini',\n  '.ini': 'ini',\n  '.cfg': 'ini',\n  '.txt': 'plaintext',\n};\n\nfunction detectLanguage(filePath) {\n  if (!filePath) return 'plaintext';\n  const dot = filePath.lastIndexOf('.');\n  if (dot < 0) return 'plaintext';\n  const ext = filePath.substring(dot).toLowerCase();\n  return LANG_MAP[ext] || 'plaintext';\n}\n\n/**\n * Map Monaco language IDs to languages the backend symbol index supports.\n * Returns null for unsupported languages (no LSP features).\n */\nfunction isLspSupported(langId) {\n  const supported = new Set([\n    'python', 'javascript', 'typescript', 'c', 'cpp',\n  ]);\n  return supported.has(langId);\n}\n\n/** @typedef {{ path: string, original: string, modified: string, is_new: boolean, is_read_only?: boolean, is_config?: boolean, config_type?: string, real_path?: string, savedContent: string }} DiffFile */\n\nclass DiffViewer extends RpcMixin(LitElement) {\n  static properties = {\n    _files: { type: Array, state: true },\n    _activeIndex: { type: Number, state: true },\n    _dirtyPaths: { type: Object, state: true },\n    _monacoReady: { type: Boolean, state: true },\n  };\n\n  /** The path of the currently active file (read-only, for external consumers). */\n  get activePath() {\n    if (this._activeIndex >= 0 && this._activeIndex < this._files.length) {\n      return this._files[this._activeIndex].path;\n    }\n    return '';\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n      width: 100%;\n      height: 100%;\n      position: relative;\n    }\n\n    .container {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      height: 100%;\n      background: var(--bg-primary);\n    }\n\n    /*  Tab bar  */\n    .tab-bar {\n      display: flex;\n      align-items: center;\n      gap: 0;\n      padding: 0 4px;\n      height: 34px;\n      background: var(--bg-elevated);\n      border-bottom: 1px solid var(--border-color);\n      flex-shrink: 0;\n      overflow-x: auto;\n      scrollbar-width: none;\n    }\n    .tab-bar::-webkit-scrollbar { display: none; }\n\n    .tab {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 4px 10px;\n      font-size: 12px;\n      font-family: var(--font-mono);\n      color: var(--text-secondary);\n      cursor: pointer;\n      border-right: 1px solid var(--border-color);\n      white-space: nowrap;\n      transition: background var(--transition-fast), color var(--transition-fast);\n      flex-shrink: 0;\n      user-select: none;\n    }\n    .tab:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n    .tab.active {\n      background: var(--bg-primary);\n      color: var(--text-primary);\n      border-bottom: 2px solid var(--accent-primary);\n    }\n\n    .tab-badge {\n      font-size: 9px;\n      font-weight: 700;\n      padding: 0px 4px;\n      border-radius: 3px;\n      color: white;\n    }\n    .tab-badge.new { background: var(--accent-success); }\n    .tab-badge.mod { background: var(--accent-warning); }\n\n    .tab-dirty {\n      color: var(--accent-warning);\n      font-size: 14px;\n      line-height: 1;\n    }\n\n    .tab-close {\n      font-size: 12px;\n      color: var(--text-muted);\n      cursor: pointer;\n      padding: 0 2px;\n      border-radius: 2px;\n      line-height: 1;\n    }\n    .tab-close:hover {\n      color: var(--accent-error);\n      background: rgba(239,83,80,0.15);\n    }\n\n    .tab-actions {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 0 8px;\n      margin-left: auto;\n      flex-shrink: 0;\n    }\n\n    .tab-action-btn {\n      background: none;\n      border: 1px solid var(--border-color);\n      border-radius: var(--radius-sm);\n      padding: 2px 8px;\n      cursor: pointer;\n      font-size: 11px;\n      color: var(--text-secondary);\n      transition: background var(--transition-fast), color var(--transition-fast);\n      white-space: nowrap;\n    }\n    .tab-action-btn:hover {\n      background: var(--bg-surface);\n      color: var(--text-primary);\n    }\n    .tab-action-btn:disabled {\n      opacity: 0.4;\n      cursor: not-allowed;\n    }\n\n    .close-all-btn {\n      background: none;\n      border: none;\n      padding: 2px 6px;\n      cursor: pointer;\n      font-size: 12px;\n      color: var(--text-muted);\n      border-radius: var(--radius-sm);\n      transition: color var(--transition-fast);\n    }\n    .close-all-btn:hover { color: var(--accent-error); }\n\n    /*  Editor container  */\n    .editor-wrapper {\n      flex: 1;\n      position: relative;\n      overflow: hidden;\n      min-height: 0;\n    }\n\n    .editor-container {\n      width: 100%;\n      height: 100%;\n      position: relative;\n    }\n\n    .empty-state {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--text-muted);\n      font-size: 13px;\n      position: relative;\n    }\n\n    .brand-watermark {\n      position: absolute;\n      left: 75%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      font-size: 8rem;\n      font-weight: 800;\n      letter-spacing: 0.08em;\n      color: var(--text-muted);\n      opacity: 0.18;\n      user-select: none;\n      pointer-events: none;\n      white-space: nowrap;\n    }\n\n    .loading-state {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 100%;\n      color: var(--text-muted);\n      font-size: 13px;\n      gap: 8px;\n    }\n\n    .spinner {\n      display: inline-block;\n      width: 14px;\n      height: 14px;\n      border: 2px solid var(--border-color);\n      border-top-color: var(--accent-primary);\n      border-radius: 50%;\n      animation: spin 0.8s linear infinite;\n    }\n    @keyframes spin { to { transform: rotate(360deg); } }\n  `;\n\n  constructor() {\n    super();\n    /** @type {DiffFile[]} */\n    this._files = [];\n    this._activeIndex = -1;\n    this._dirtyPaths = new Set();\n    this._monacoReady = false;\n\n    this._monaco = null;\n    this._editor = null;\n    this._styleObserver = null;\n    this._lspRegistered = false;\n    this._lspDisposables = [];\n\n    this._onKeyDown = this._onKeyDown.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    document.addEventListener('keydown', this._onKeyDown);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    document.removeEventListener('keydown', this._onKeyDown);\n    this._disposeLspProviders();\n    this._disposeEditor();\n    if (this._styleObserver) {\n      this._styleObserver.disconnect();\n      this._styleObserver = null;\n    }\n  }\n\n  onRpcReady() {\n    this._tryRegisterLsp();\n  }\n\n  //  Public API \n\n  get isDirty() {\n    return this._dirtyPaths.size > 0;\n  }\n\n  get fileCount() {\n    return this._files.length;\n  }\n\n  /**\n   * Open a file in the diff viewer.\n   * @param {{ path: string, original?: string, modified?: string, is_new?: boolean, is_read_only?: boolean, is_config?: boolean, config_type?: string, real_path?: string, line?: number }} opts\n   */\n  async openFile(opts) {\n    const { path, original = '', modified = '', is_new = false,\n            is_read_only = false, is_config = false, config_type = '',\n            real_path = '', line = null } = opts;\n\n    // Check if already open\n    const existingIdx = this._files.findIndex(f => f.path === path);\n    if (existingIdx >= 0) {\n      this._activeIndex = existingIdx;\n      await this._ensureMonaco();\n      this._showActiveFile();\n      if (line) this._revealLine(line);\n      this._emitActiveFileChanged();\n      return;\n    }\n\n    // Add new file\n    const file = {\n      path,\n      original,\n      modified,\n      is_new,\n      is_read_only: !!is_read_only,\n      is_config: !!is_config,\n      config_type: config_type || '',\n      real_path: real_path || '',\n      savedContent: modified,\n    };\n\n    this._files = [...this._files, file];\n    this._activeIndex = this._files.length - 1;\n\n    await this._ensureMonaco();\n    this._showActiveFile();\n    if (line) this._revealLine(line);\n    this._emitActiveFileChanged();\n  }\n\n  /**\n   * Open a repo file with HEAD vs working copy diff.\n   */\n  async openRepoFile(path, line = null) {\n    if (!this.rpcConnected) return;\n\n    let original = '';\n    let modified = '';\n    let is_new = false;\n\n    try {\n      // Fetch HEAD version\n      const headResult = await this.rpcExtract('Repo.get_file_content', path, 'HEAD');\n      original = headResult?.content || '';\n    } catch {\n      // New file  no HEAD version\n    }\n\n    try {\n      // Fetch working copy\n      const workResult = await this.rpcExtract('Repo.get_file_content', path);\n      modified = workResult?.content || '';\n      if (!original && modified) is_new = true;\n    } catch {\n      // File doesn't exist in working copy\n    }\n\n    await this.openFile({\n      path,\n      original,\n      modified,\n      is_new,\n      is_read_only: false,\n      line,\n    });\n  }\n\n  /**\n   * Open a config file for editing.\n   */\n  async openConfigFile(configType, label) {\n    if (!this.rpcConnected) return;\n    try {\n      const result = await this.rpcExtract('Settings.get_config_content', configType);\n      if (result?.error) {\n        console.error('Failed to load config:', result.error);\n        return;\n      }\n      const content = result.content || '';\n      const displayPath = `[config] ${label || configType}`;\n\n      await this.openFile({\n        path: displayPath,\n        original: content,\n        modified: content,\n        is_config: true,\n        config_type: configType,\n        real_path: result.path || '',\n      });\n    } catch (e) {\n      console.error('Failed to open config:', e);\n    }\n  }\n\n  /**\n   * Open files from edit results (post-edit refresh).\n   */\n  async openEditResults(editResults, filesModified) {\n    if (!this.rpcConnected || !filesModified?.length) return;\n\n    for (const fpath of filesModified) {\n      let original = '';\n      let modified = '';\n      let is_new = false;\n\n      try {\n        const headResult = await this.rpcExtract('Repo.get_file_content', fpath, 'HEAD');\n        original = headResult?.content || '';\n      } catch {\n        // New file\n      }\n\n      try {\n        const workResult = await this.rpcExtract('Repo.get_file_content', fpath);\n        modified = workResult?.content || '';\n        if (!original && modified) is_new = true;\n      } catch {\n        continue;\n      }\n\n      // Update if already open, else add\n      const existingIdx = this._files.findIndex(f => f.path === fpath);\n      if (existingIdx >= 0) {\n        const updated = [...this._files];\n        updated[existingIdx] = {\n          ...updated[existingIdx],\n          original,\n          modified,\n          is_new,\n          savedContent: modified,\n        };\n        this._files = updated;\n        this._dirtyPaths = new Set([...this._dirtyPaths].filter(p => p !== fpath));\n      } else {\n        this._files = [...this._files, {\n          path: fpath,\n          original,\n          modified,\n          is_new,\n          is_read_only: false,\n          is_config: false,\n          config_type: '',\n          real_path: '',\n          savedContent: modified,\n        }];\n      }\n    }\n\n    this._activeIndex = this._files.findIndex(f => filesModified.includes(f.path));\n    if (this._activeIndex < 0 && this._files.length > 0) this._activeIndex = 0;\n    await this._ensureMonaco();\n    this._showActiveFile();\n    this._emitActiveFileChanged();\n  }\n\n  /**\n   * Close all files.\n   */\n  closeAll() {\n    this._files = [];\n    this._activeIndex = -1;\n    this._dirtyPaths = new Set();\n    this._disposeEditor();\n    this._emitActiveFileChanged();\n  }\n\n  //  Monaco setup \n\n  async _ensureMonaco() {\n    if (this._monacoReady) return;\n\n    try {\n      // Dynamic import  lazy load Monaco\n      // Workers are configured by vite-plugin-monaco-editor automatically\n      const monaco = await import('monaco-editor');\n      this._monaco = monaco;\n\n      this._monacoReady = true;\n      this._tryRegisterLsp();\n    } catch (e) {\n      console.error('Failed to load Monaco:', e);\n    }\n  }\n\n  _createEditor() {\n    if (!this._monaco || this._editor) return;\n\n    const container = this.shadowRoot.querySelector('.editor-container');\n    if (!container) return;\n\n    // Copy Monaco styles into shadow root BEFORE creating the editor,\n    // so all CSS (including diff decorations) is available from the start.\n    this._injectMonacoStyles();\n\n    this._editor = this._monaco.editor.createDiffEditor(container, {\n      theme: 'vs-dark',\n      automaticLayout: true,\n      readOnly: false,\n      originalEditable: false,\n      renderSideBySide: true,\n      enableSplitViewResizing: true,\n      minimap: { enabled: false },\n      scrollBeyondLastLine: false,\n      fontSize: 13,\n      fontFamily: \"var(--font-mono), 'Fira Code', 'Cascadia Code', monospace\",\n      fixedOverflowWidgets: true,\n    });\n\n    // Watch for content changes on the modified editor\n    const modifiedEditor = this._editor.getModifiedEditor();\n    modifiedEditor.onDidChangeModelContent(() => {\n      this._onContentChanged();\n    });\n  }\n\n  _injectMonacoStyles() {\n    const root = this.shadowRoot;\n    if (!root) return;\n\n    // Initial sync\n    this._syncAllStyles();\n\n    // Monaco dynamically injects <style> tags into document.head (and\n    // possibly document.body) for decorations, diff highlighting,\n    // colorization, etc. These don't penetrate Shadow DOM.\n    // Watch both head and body for changes.\n    if (!this._styleObserver) {\n      this._styleObserver = new MutationObserver(() => this._syncAllStyles());\n      this._styleObserver.observe(document.head, {\n        childList: true,\n        subtree: true,\n        characterData: true,\n      });\n      this._styleObserver.observe(document.body, {\n        childList: true,\n        subtree: true,\n        characterData: true,\n      });\n    }\n  }\n\n  _syncAllStyles() {\n    const root = this.shadowRoot;\n    if (!root) return;\n\n    // Strategy: clone all <style> and <link> from document.head into shadow root.\n    // Monaco injects its CSS there at runtime. We remove old clones and re-clone\n    // everything to catch both new tags and mutations to existing ones.\n    root.querySelectorAll('[data-monaco-styles]').forEach(el => el.remove());\n\n    for (const node of document.head.querySelectorAll('style, link[rel=\"stylesheet\"]')) {\n      const clone = node.cloneNode(true);\n      clone.setAttribute('data-monaco-styles', 'true');\n      root.appendChild(clone);\n    }\n\n    // Monaco may also inject <style> tags into document.body or other locations\n    for (const node of document.body.querySelectorAll('style')) {\n      const clone = node.cloneNode(true);\n      clone.setAttribute('data-monaco-styles', 'true');\n      root.appendChild(clone);\n    }\n\n    // Adopt any constructed stylesheets (CSSStyleSheet objects)\n    if (document.adoptedStyleSheets?.length > 0) {\n      root.adoptedStyleSheets = [...document.adoptedStyleSheets];\n    }\n\n    // Minimal Shadow DOM fixes for Monaco widgets that may not\n    // receive proper styling from the cloned stylesheets.\n    if (!root.querySelector('#monaco-shadow-fixes')) {\n      const fixes = document.createElement('style');\n      fixes.id = 'monaco-shadow-fixes';\n      fixes.textContent = `\n        /* Find widget z-index within shadow root */\n        .monaco-editor .find-widget {\n          z-index: 100;\n        }\n\n        /* Ensure both editor panes receive pointer events for scrolling */\n        .monaco-diff-editor .editor.original,\n        .monaco-diff-editor .editor.modified {\n          pointer-events: auto;\n        }\n\n        /* Highlight line decoration (used by _revealLine) */\n        .highlight-line {\n          background: rgba(79, 195, 247, 0.15) !important;\n        }\n      `;\n      root.appendChild(fixes);\n    }\n  }\n\n  _disposeEditor() {\n    if (this._editor) {\n      this._editor.dispose();\n      this._editor = null;\n    }\n  }\n\n  _showActiveFile() {\n    if (!this._monaco || this._activeIndex < 0 || this._activeIndex >= this._files.length) return;\n\n    const file = this._files[this._activeIndex];\n    const lang = detectLanguage(file.real_path || file.path);\n\n    if (!this._editor) {\n      this._createEditor();\n    }\n\n    if (!this._editor) return;\n\n    const originalModel = this._monaco.editor.createModel(file.original, lang);\n    const modifiedModel = this._monaco.editor.createModel(file.modified, lang);\n\n    // Capture old models before replacing\n    const oldModel = this._editor.getModel();\n\n    // Set new model FIRST  editor must release old models before we dispose them\n    this._editor.setModel({\n      original: originalModel,\n      modified: modifiedModel,\n    });\n\n    // Now safe to dispose old models\n    if (oldModel) {\n      if (oldModel.original) oldModel.original.dispose();\n      if (oldModel.modified) oldModel.modified.dispose();\n    }\n\n    // Set read-only state\n    this._editor.getModifiedEditor().updateOptions({\n      readOnly: !!file.is_read_only,\n    });\n\n    // Layout after model change\n    requestAnimationFrame(() => {\n      if (this._editor) this._editor.layout();\n    });\n\n    // Monaco computes diffs asynchronously  decoration styles may\n    // be injected after the diff worker returns. One delayed re-sync\n    // as a safety net alongside the MutationObserver.\n    setTimeout(() => this._syncAllStyles(), 500);\n  }\n\n  _revealLine(line) {\n    if (!this._editor || !line) return;\n    requestAnimationFrame(() => {\n      const modifiedEditor = this._editor.getModifiedEditor();\n      modifiedEditor.revealLineInCenter(line);\n      modifiedEditor.setPosition({ lineNumber: line, column: 1 });\n\n      // Temporary highlight\n      const decorations = modifiedEditor.deltaDecorations([], [{\n        range: new this._monaco.Range(line, 1, line, 1),\n        options: {\n          isWholeLine: true,\n          className: 'highlight-line',\n          overviewRuler: {\n            color: '#4fc3f7',\n            position: this._monaco.editor.OverviewRulerLane.Full,\n          },\n        },\n      }]);\n\n      // Remove highlight after 2 seconds\n      setTimeout(() => {\n        if (this._editor) {\n          modifiedEditor.deltaDecorations(decorations, []);\n        }\n      }, 2000);\n    });\n  }\n\n  //  Content change tracking \n\n  _onContentChanged() {\n    if (this._activeIndex < 0 || this._activeIndex >= this._files.length) return;\n    const file = this._files[this._activeIndex];\n    if (file.is_read_only) return;\n\n    const modifiedEditor = this._editor.getModifiedEditor();\n    const currentContent = modifiedEditor.getValue();\n    const next = new Set(this._dirtyPaths);\n\n    if (currentContent !== file.savedContent) {\n      next.add(file.path);\n    } else {\n      next.delete(file.path);\n    }\n\n    if (next.size !== this._dirtyPaths.size || [...next].some(p => !this._dirtyPaths.has(p))) {\n      this._dirtyPaths = next;\n      this._emitDirtyChanged();\n    }\n  }\n\n  _emitDirtyChanged() {\n    this.dispatchEvent(new CustomEvent('dirty-changed', {\n      detail: { isDirty: this.isDirty, dirtyPaths: [...this._dirtyPaths] },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  _emitActiveFileChanged() {\n    this.dispatchEvent(new CustomEvent('active-file-changed', {\n      detail: { path: this.activePath },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  //  Save \n\n  async _saveActive() {\n    if (this._activeIndex < 0) return;\n    await this._saveFile(this._activeIndex);\n  }\n\n  async _saveFile(index) {\n    const file = this._files[index];\n    if (!file || file.is_read_only) return;\n    if (!this._editor || this._activeIndex !== index) return;\n\n    const modifiedEditor = this._editor.getModifiedEditor();\n    const content = modifiedEditor.getValue();\n\n    // Update saved content\n    const updated = [...this._files];\n    updated[index] = { ...updated[index], modified: content, savedContent: content };\n    this._files = updated;\n\n    // Clear dirty\n    const next = new Set(this._dirtyPaths);\n    next.delete(file.path);\n    this._dirtyPaths = next;\n    this._emitDirtyChanged();\n\n    // Dispatch save event for parent to handle\n    this.dispatchEvent(new CustomEvent('file-save', {\n      detail: {\n        path: file.path,\n        content,\n        isConfig: file.is_config,\n        configType: file.config_type,\n        realPath: file.real_path,\n      },\n      bubbles: true, composed: true,\n    }));\n  }\n\n  async _saveAll() {\n    for (let i = 0; i < this._files.length; i++) {\n      if (this._dirtyPaths.has(this._files[i].path)) {\n        // Switch to file, get content, save\n        if (this._activeIndex !== i) {\n          this._activeIndex = i;\n          this._showActiveFile();\n          // Wait for model to update\n          await new Promise(r => requestAnimationFrame(r));\n        }\n        await this._saveFile(i);\n      }\n    }\n  }\n\n  //  Tab actions \n\n  _selectTab(index) {\n    if (index === this._activeIndex) return;\n\n    // Before switching: sync current editor content to file state\n    this._syncCurrentContent();\n\n    this._activeIndex = index;\n    this._showActiveFile();\n    this._emitActiveFileChanged();\n  }\n\n  _closeTab(index, e) {\n    if (e) e.stopPropagation();\n\n    const file = this._files[index];\n    const updated = this._files.filter((_, i) => i !== index);\n    const next = new Set(this._dirtyPaths);\n    next.delete(file.path);\n    this._dirtyPaths = next;\n\n    this._files = updated;\n\n    if (updated.length === 0) {\n      this._activeIndex = -1;\n      this._disposeEditor();\n    } else if (this._activeIndex >= updated.length) {\n      this._activeIndex = updated.length - 1;\n      this._showActiveFile();\n    } else if (index <= this._activeIndex) {\n      this._activeIndex = Math.max(0, this._activeIndex - 1);\n      this._showActiveFile();\n    }\n\n    this._emitDirtyChanged();\n    this._emitActiveFileChanged();\n  }\n\n  _closeAll() {\n    this.closeAll();\n    this._emitDirtyChanged();\n  }\n\n  _syncCurrentContent() {\n    if (!this._editor || this._activeIndex < 0 || this._activeIndex >= this._files.length) return;\n    const file = this._files[this._activeIndex];\n    if (file.is_read_only) return;\n\n    const modifiedEditor = this._editor.getModifiedEditor();\n    const content = modifiedEditor.getValue();\n    if (content !== file.modified) {\n      const updated = [...this._files];\n      updated[this._activeIndex] = { ...updated[this._activeIndex], modified: content };\n      this._files = updated;\n    }\n  }\n\n  //  Keyboard \n\n  _onKeyDown(e) {\n    if (this._files.length === 0) return;\n\n    // Ctrl+S / Cmd+S  save active file\n    if ((e.ctrlKey || e.metaKey) && e.key === 's') {\n      e.preventDefault();\n      this._saveActive();\n      return;\n    }\n\n    // Ctrl+W / Cmd+W  close active tab\n    if ((e.ctrlKey || e.metaKey) && e.key === 'w') {\n      if (this._files.length > 0 && this._activeIndex >= 0) {\n        e.preventDefault();\n        this._closeTab(this._activeIndex);\n      }\n    }\n  }\n\n  //  Render \n\n  render() {\n    return html`\n      <div class=\"container\" role=\"region\" aria-label=\"Diff viewer\">\n        ${this._files.length > 0 ? html`\n          ${this._renderTabBar()}\n          <div class=\"editor-wrapper\">\n            ${this._monacoReady ? html`\n              <div class=\"editor-container\" role=\"document\" aria-label=\"Code diff editor\"></div>\n            ` : html`\n              <div class=\"loading-state\" role=\"status\"><span class=\"spinner\" aria-hidden=\"true\"></span> Loading editor...</div>\n            `}\n          </div>\n        ` : html`\n          <div class=\"empty-state\">\n            <span class=\"brand-watermark\">ACDC</span>\n          </div>\n        `}\n      </div>\n    `;\n  }\n\n  _renderTabBar() {\n    const hasDirty = this._dirtyPaths.size > 0;\n\n    return html`\n      <div class=\"tab-bar\" role=\"tablist\" aria-label=\"Open files\">\n        ${this._files.map((file, i) => {\n          const isDirty = this._dirtyPaths.has(file.path);\n          const isActive = i === this._activeIndex;\n          const displayPath = file.path.length > 40\n            ? '' + file.path.slice(-38)\n            : file.path;\n\n          return html`\n            <div class=\"tab ${isActive ? 'active' : ''}\" role=\"tab\"\n              aria-selected=${isActive}\n              aria-label=\"${file.path}${isDirty ? ' (unsaved changes)' : ''}\"\n              tabindex=${isActive ? '0' : '-1'}\n              @click=${() => this._selectTab(i)}\n              @keydown=${(e) => {\n                if (e.key === 'ArrowRight') { e.preventDefault(); this._selectTab(Math.min(i + 1, this._files.length - 1)); }\n                if (e.key === 'ArrowLeft') { e.preventDefault(); this._selectTab(Math.max(i - 1, 0)); }\n              }}>\n              ${file.is_new ? html`<span class=\"tab-badge new\" aria-label=\"New file\">NEW</span>` : nothing}\n              ${!file.is_new && file.original !== file.savedContent ? html`<span class=\"tab-badge mod\" aria-label=\"Modified\">MOD</span>` : nothing}\n              <span>${displayPath}</span>\n              ${isDirty ? html`<span class=\"tab-dirty\" aria-hidden=\"true\"></span>` : nothing}\n              <span class=\"tab-close\" role=\"button\" aria-label=\"Close ${file.path}\"\n                @click=${(e) => this._closeTab(i, e)}></span>\n            </div>\n          `;\n        })}\n        <div class=\"tab-actions\">\n          ${hasDirty ? html`\n            <button class=\"tab-action-btn\" @click=${this._saveAll}\n              aria-label=\"Save all modified files\"> Save All</button>\n          ` : nothing}\n          <button class=\"close-all-btn\" @click=${this._closeAll} title=\"Close all files\"\n            aria-label=\"Close all open files\"> All</button>\n        </div>\n      </div>\n    `;\n  }\n\n  updated(changedProps) {\n    super.updated(changedProps);\n    // Ensure editor is created when container becomes available\n    if (this._monacoReady && !this._editor && this._files.length > 0) {\n      this.updateComplete.then(() => {\n        this._createEditor();\n        this._showActiveFile();\n      });\n    }\n  }\n\n  //  LSP Integration \n\n  /**\n   * Register Monaco language providers once both Monaco and RPC are ready.\n   */\n  _tryRegisterLsp() {\n    if (this._lspRegistered || !this._monacoReady || !this.rpcConnected || !this._monaco) return;\n    this._lspRegistered = true;\n    console.log('[lsp] Registering Monaco language providers');\n\n    const monaco = this._monaco;\n    const viewer = this;\n\n    // Register for all supported languages\n    const languages = ['python', 'javascript', 'typescript', 'c', 'cpp'];\n\n    for (const langId of languages) {\n      // Hover provider\n      this._lspDisposables.push(\n        monaco.languages.registerHoverProvider(langId, {\n          provideHover: (model, position) => viewer._provideHover(model, position),\n        })\n      );\n\n      // Definition provider\n      this._lspDisposables.push(\n        monaco.languages.registerDefinitionProvider(langId, {\n          provideDefinition: (model, position) => viewer._provideDefinition(model, position),\n        })\n      );\n\n      // Reference provider\n      this._lspDisposables.push(\n        monaco.languages.registerReferenceProvider(langId, {\n          provideReferences: (model, position, _ctx) => viewer._provideReferences(model, position),\n        })\n      );\n\n      // Completion provider\n      this._lspDisposables.push(\n        monaco.languages.registerCompletionItemProvider(langId, {\n          triggerCharacters: ['.', '_'],\n          provideCompletionItems: (model, position) => viewer._provideCompletions(model, position),\n        })\n      );\n    }\n  }\n\n  _disposeLspProviders() {\n    for (const d of this._lspDisposables) {\n      try { d.dispose(); } catch {}\n    }\n    this._lspDisposables = [];\n    this._lspRegistered = false;\n  }\n\n  /**\n   * Get the file path for the model being queried.\n   * Compares by URI string since Monaco providers may receive model references\n   * that are not identity-equal to the editor's current models.\n   */\n  _getPathForModel(model) {\n    if (!this._editor || this._activeIndex < 0) return null;\n    const file = this._files[this._activeIndex];\n    if (!file || file.is_config) return null;\n\n    const modelUri = model.uri.toString();\n\n    // Check modified editor's model\n    const modifiedModel = this._editor.getModifiedEditor().getModel();\n    if (modifiedModel && modifiedModel.uri.toString() === modelUri) {\n      return file.real_path || file.path;\n    }\n\n    // Also allow original side (read-only, but hover/refs still useful)\n    const originalModel = this._editor.getOriginalEditor().getModel();\n    if (originalModel && originalModel.uri.toString() === modelUri) {\n      return file.real_path || file.path;\n    }\n\n    return null;\n  }\n\n  async _provideHover(model, position) {\n    const path = this._getPathForModel(model);\n    if (!path) return null;\n\n    try {\n      const result = await this.rpcExtract(\n        'LLM.lsp_get_hover', path, position.lineNumber, position.column\n      );\n      if (!result) return null;\n      return {\n        contents: [{ value: result, isTrusted: true }],\n      };\n    } catch (e) {\n      console.warn('[lsp] hover error:', e);\n      return null;\n    }\n  }\n\n  async _provideDefinition(model, position) {\n    const path = this._getPathForModel(model);\n    if (!path) return null;\n\n    try {\n      const result = await this.rpcExtract(\n        'LLM.lsp_get_definition', path, position.lineNumber, position.column\n      );\n      if (!result || !result.file) return null;\n\n      const targetFile = result.file;\n      const range = result.range || {};\n      const targetLine = range.start_line || 1;\n      const targetCol = Math.max(1, range.start_col || 1);\n\n      // If definition is in a different file, open it in the diff viewer\n      if (targetFile !== path) {\n        setTimeout(() => this.openRepoFile(targetFile, targetLine), 0);\n        return null;\n      }\n\n      // Same file  return location for Monaco to navigate to\n      return [{\n        uri: model.uri,\n        range: new this._monaco.Range(\n          targetLine, targetCol,\n          range.end_line || targetLine, Math.max(1, range.end_col || targetCol)\n        ),\n      }];\n    } catch (e) {\n      console.warn('[lsp] definition error:', e);\n      return null;\n    }\n  }\n\n  async _provideReferences(model, position) {\n    const path = this._getPathForModel(model);\n    if (!path) return null;\n\n    try {\n      const results = await this.rpcExtract(\n        'LLM.lsp_get_references', path, position.lineNumber, position.column\n      );\n      if (!results || !results.length) return null;\n\n      const monaco = this._monaco;\n      // For same-file references, use the model's URI so Monaco can display them.\n      // For cross-file references, use a file URI (Monaco will show them in peek).\n      return results.map(ref => {\n        const range = ref.range || {};\n        const refFile = ref.file || path;\n        const uri = refFile === path ? model.uri : monaco.Uri.parse(`file:///${refFile}`);\n        const startLine = range.start_line || ref.line || 1;\n        const startCol = Math.max(1, range.start_col || 1);\n        return {\n          uri,\n          range: new monaco.Range(\n            startLine,\n            startCol,\n            range.end_line || startLine,\n            Math.max(1, range.end_col || startCol)\n          ),\n        };\n      });\n    } catch (e) {\n      console.warn('[lsp] references error:', e);\n      return null;\n    }\n  }\n\n  async _provideCompletions(model, position) {\n    const path = this._getPathForModel(model);\n    if (!path) return null;\n\n    try {\n      const word = model.getWordUntilPosition(position);\n\n      const results = await this.rpcExtract(\n        'LLM.lsp_get_completions', path, position.lineNumber, position.column\n      );\n      if (!results || !results.length) return { suggestions: [] };\n\n      const monaco = this._monaco;\n      const range = new monaco.Range(\n        position.lineNumber, word.startColumn,\n        position.lineNumber, word.endColumn\n      );\n\n      const KIND_MAP = {\n        class: monaco.languages.CompletionItemKind.Class,\n        function: monaco.languages.CompletionItemKind.Function,\n        method: monaco.languages.CompletionItemKind.Method,\n        variable: monaco.languages.CompletionItemKind.Variable,\n        property: monaco.languages.CompletionItemKind.Property,\n        module: monaco.languages.CompletionItemKind.Module,\n        import: monaco.languages.CompletionItemKind.Reference,\n      };\n\n      const suggestions = results.map((item, i) => ({\n        label: item.label,\n        kind: KIND_MAP[item.kind] || monaco.languages.CompletionItemKind.Text,\n        detail: item.detail || '',\n        insertText: item.label,\n        range,\n        sortText: String(i).padStart(5, '0'),\n      }));\n\n      return { suggestions };\n    } catch (e) {\n      console.warn('[lsp] completions error:', e);\n      return { suggestions: [] };\n    }\n  }\n}\n\ncustomElements.define('diff-viewer', DiffViewer);","import { LitElement, html, css, nothing } from 'lit';\n\n/**\n * Toast notification container  listens for 'ac-toast' events on window\n * and displays auto-dismissing messages.\n */\nclass ToastContainer extends LitElement {\n  static properties = {\n    _toasts: { type: Array, state: true },\n  };\n\n  static styles = css`\n    :host {\n      position: fixed;\n      bottom: 16px;\n      right: 16px;\n      z-index: 10000;\n      display: flex;\n      flex-direction: column-reverse;\n      gap: 8px;\n      pointer-events: none;\n    }\n\n    .toast {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      padding: 10px 16px;\n      border-radius: var(--radius-md, 8px);\n      font-size: 13px;\n      font-weight: 500;\n      color: var(--text-primary, #e0e0e0);\n      background: var(--bg-elevated, #2a2a2a);\n      border: 1px solid var(--border-color, #444);\n      box-shadow: var(--shadow-lg, 0 4px 12px rgba(0,0,0,0.3));\n      pointer-events: auto;\n      max-width: 380px;\n      animation: toast-in 0.25s ease-out;\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    .toast.fading {\n      opacity: 0;\n      transform: translateX(20px);\n    }\n\n    .toast.success { border-left: 3px solid var(--accent-success, #66bb6a); }\n    .toast.error { border-left: 3px solid var(--accent-error, #ef5350); }\n    .toast.warning { border-left: 3px solid var(--accent-warning, #ff9800); }\n    .toast.info { border-left: 3px solid var(--accent-primary, #4fc3f7); }\n\n    .toast-icon {\n      font-size: 16px;\n      flex-shrink: 0;\n    }\n\n    .toast-message {\n      flex: 1;\n      min-width: 0;\n    }\n\n    .toast-close {\n      background: none;\n      border: none;\n      color: var(--text-muted, #888);\n      cursor: pointer;\n      font-size: 14px;\n      padding: 0 2px;\n      flex-shrink: 0;\n      line-height: 1;\n    }\n    .toast-close:hover { color: var(--text-primary, #e0e0e0); }\n\n    @keyframes toast-in {\n      from {\n        opacity: 0;\n        transform: translateX(20px);\n      }\n      to {\n        opacity: 1;\n        transform: translateX(0);\n      }\n    }\n  `;\n\n  static ICONS = {\n    success: '',\n    error: '',\n    warning: '',\n    info: '',\n  };\n\n  constructor() {\n    super();\n    this._toasts = [];\n    this._idCounter = 0;\n    this._onToast = this._onToast.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    window.addEventListener('ac-toast', this._onToast);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    window.removeEventListener('ac-toast', this._onToast);\n    // Clear all timers\n    for (const toast of this._toasts) {\n      if (toast._timer) clearTimeout(toast._timer);\n      if (toast._fadeTimer) clearTimeout(toast._fadeTimer);\n    }\n  }\n\n  _onToast(e) {\n    const { message, type = 'info', duration = 5000 } = e.detail || {};\n    if (!message) return;\n\n    const id = ++this._idCounter;\n    const toast = { id, message, type, fading: false };\n\n    // Auto-dismiss\n    toast._fadeTimer = setTimeout(() => this._startFade(id), duration);\n\n    this._toasts = [...this._toasts, toast];\n\n    // Cap at 5 visible toasts\n    if (this._toasts.length > 5) {\n      const oldest = this._toasts[0];\n      this._dismiss(oldest.id);\n    }\n  }\n\n  _startFade(id) {\n    this._toasts = this._toasts.map(t =>\n      t.id === id ? { ...t, fading: true } : t\n    );\n    // Remove after fade animation\n    setTimeout(() => this._remove(id), 300);\n  }\n\n  _dismiss(id) {\n    const toast = this._toasts.find(t => t.id === id);\n    if (toast) {\n      if (toast._fadeTimer) clearTimeout(toast._fadeTimer);\n      if (toast._timer) clearTimeout(toast._timer);\n    }\n    this._startFade(id);\n  }\n\n  _remove(id) {\n    this._toasts = this._toasts.filter(t => t.id !== id);\n  }\n\n  render() {\n    if (this._toasts.length === 0) return nothing;\n\n    return html`\n      ${this._toasts.map(toast => html`\n        <div class=\"toast ${toast.type} ${toast.fading ? 'fading' : ''}\" role=\"alert\" aria-live=\"assertive\">\n          <span class=\"toast-icon\" aria-hidden=\"true\">${ToastContainer.ICONS[toast.type] || ''}</span>\n          <span class=\"toast-message\">${toast.message}</span>\n          <button class=\"toast-close\" @click=${() => this._dismiss(toast.id)} aria-label=\"Dismiss notification\"></button>\n        </div>\n      `)}\n    `;\n  }\n}\n\ncustomElements.define('toast-container', ToastContainer);","import { html, css } from 'lit';\nimport { JRPCClient } from '@flatmax/jrpc-oo';\nimport { SharedRpc } from './rpc-mixin.js';\nimport './dialog/ac-dialog.js';\nimport './chat/diff-viewer.js';\nimport './chat/toast-container.js';\n\n/**\n * Root application shell.\n * Extends JRPCClient (LitElement + WebSocket) from jrpc-oo.\n * Manages the RPC connection, hosts the dialog (foreground)\n * and diff viewer (background).\n */\nclass AcApp extends JRPCClient {\n  static properties = {\n    connected: { type: Boolean, state: true },\n    error: { type: String, state: true },\n    _reconnecting: { type: Boolean, state: true },\n    _reconnectAttempt: { type: Number, state: true },\n  };\n\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n        width: 100%;\n        height: 100%;\n        position: relative;\n      }\n\n      .diff-background {\n        position: fixed;\n        inset: 0;\n        z-index: 0;\n      }\n\n      ac-dialog {\n        /* Positioning managed by ac-dialog itself via :host styles */\n      }\n\n      .reconnect-banner {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 32px;\n        background: var(--accent-warning, #ff9800);\n        color: #000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 12px;\n        font-weight: 600;\n        z-index: 9999;\n        gap: 8px;\n      }\n\n      .reconnect-spinner {\n        display: inline-block;\n        width: 12px;\n        height: 12px;\n        border: 2px solid rgba(0,0,0,0.3);\n        border-top-color: #000;\n        border-radius: 50%;\n        animation: rspin 0.8s linear infinite;\n      }\n\n      @keyframes rspin { to { transform: rotate(360deg); } }\n    `;\n  }\n\n  constructor() {\n    super();\n    this.connected = false;\n    this.error = '';\n    this._reconnecting = false;\n    this._reconnectAttempt = 0;\n    this._reconnectTimer = null;\n    this.remoteTimeout = 60;\n\n    // Extract WebSocket port from URL ?port=N\n    const params = new URLSearchParams(window.location.search);\n    const port = params.get('port') || '18080';\n    this.serverURI = `ws://localhost:${port}`;\n\n    this._onNavigateFile = this._onNavigateFile.bind(this);\n    this._onFileSave = this._onFileSave.bind(this);\n    this._onStreamCompleteForDiff = this._onStreamCompleteForDiff.bind(this);\n    this._onActiveFileChanged = this._onActiveFileChanged.bind(this);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.addClass(this, 'AcApp');\n    this.addEventListener('navigate-file', this._onNavigateFile);\n    this.addEventListener('file-save', this._onFileSave);\n    this.addEventListener('active-file-changed', this._onActiveFileChanged);\n    window.addEventListener('stream-complete', this._onStreamCompleteForDiff);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener('navigate-file', this._onNavigateFile);\n    this.removeEventListener('file-save', this._onFileSave);\n    this.removeEventListener('active-file-changed', this._onActiveFileChanged);\n    window.removeEventListener('stream-complete', this._onStreamCompleteForDiff);\n  }\n\n  /**\n   * Called by jrpc-oo when the WebSocket connection is established\n   * and the remote method proxy (this.call) is populated.\n   */\n  setupDone() {\n    console.log(`[ac-dc] Connected to ${this.serverURI}`);\n    this.connected = true;\n    this.error = '';\n    this._reconnecting = false;\n    this._reconnectAttempt = 0;\n    if (this._reconnectTimer) {\n      clearTimeout(this._reconnectTimer);\n      this._reconnectTimer = null;\n    }\n\n    // Publish the call proxy to all child components via the singleton\n    SharedRpc.set(this.call);\n\n    // Load initial state\n    this._loadInitialState();\n\n    // Show reconnection success toast if we were reconnecting\n    if (this._wasDisconnected) {\n      this._wasDisconnected = false;\n      this._dispatchToast('Reconnected to server', 'success');\n    }\n  }\n\n  /**\n   * Called by jrpc-oo when connection fails or is lost.\n   */\n  setupSkip() {\n    console.warn('[ac-dc] Connection failed or skipped');\n    const wasConnected = this.connected;\n    this.connected = false;\n    this.error = 'Connection failed';\n\n    if (wasConnected) {\n      this._wasDisconnected = true;\n      SharedRpc.reset();\n      this._dispatchToast('Disconnected from server  reconnecting...', 'error');\n    }\n\n    this._scheduleReconnect();\n  }\n\n  /**\n   * Called by jrpc-oo when remote disconnects.\n   */\n  remoteDisconnected() {\n    console.warn('[ac-dc] Remote disconnected');\n    const wasConnected = this.connected;\n    this.connected = false;\n\n    if (wasConnected) {\n      this._wasDisconnected = true;\n      SharedRpc.reset();\n      this._dispatchToast('Server disconnected  reconnecting...', 'error');\n    }\n\n    this._scheduleReconnect();\n  }\n\n  _scheduleReconnect() {\n    if (this._reconnectTimer) return;\n    this._reconnecting = true;\n    this._reconnectAttempt++;\n    // Exponential backoff: 1s, 2s, 4s, 8s, max 15s\n    const delay = Math.min(1000 * Math.pow(2, this._reconnectAttempt - 1), 15000);\n    console.log(`[ac-dc] Reconnecting in ${delay}ms (attempt ${this._reconnectAttempt})`);\n    this._reconnectTimer = setTimeout(() => {\n      this._reconnectTimer = null;\n      try {\n        this.open();\n      } catch (e) {\n        console.warn('[ac-dc] Reconnect attempt failed:', e);\n        this._scheduleReconnect();\n      }\n    }, delay);\n  }\n\n  _dispatchToast(message, type = 'info') {\n    window.dispatchEvent(new CustomEvent('ac-toast', {\n      detail: { message, type },\n      bubbles: true,\n    }));\n  }\n\n  /**\n   * Methods the server can call on the client.\n   * These must be class methods (not late-assigned) so jrpc-oo\n   * discovers them during connection setup.\n   */\n  streamChunk(requestId, content) {\n    this._dispatch('stream-chunk', { requestId, content });\n    return true;\n  }\n\n  streamComplete(requestId, result) {\n    this._dispatch('stream-complete', { requestId, result });\n    return true;\n  }\n\n  compactionEvent(requestId, event) {\n    this._dispatch('compaction-event', { requestId, event });\n    return true;\n  }\n\n  filesChanged(selectedFiles) {\n    this._dispatch('files-changed', { selectedFiles });\n    return true;\n  }\n\n  async _loadInitialState() {\n    try {\n      const state = await this._extract('LLM.get_current_state');\n      this._dispatch('state-loaded', state);\n    } catch (e) {\n      console.error('[ac-dc] Failed to load initial state:', e);\n    }\n  }\n\n  /**\n   * Helper to call and unwrap jrpc-oo response envelope.\n   */\n  async _extract(method, ...args) {\n    const result = await this.call[method](...args);\n    if (result && typeof result === 'object') {\n      const keys = Object.keys(result);\n      if (keys.length === 1) return result[keys[0]];\n    }\n    return result;\n  }\n\n  _dispatch(name, detail) {\n    window.dispatchEvent(new CustomEvent(name, { detail, bubbles: true }));\n  }\n\n  //  Diff viewer event routing \n\n  _onNavigateFile(e) {\n    const { path, line } = e.detail || {};\n    if (!path) return;\n    const diffViewer = this.shadowRoot.querySelector('diff-viewer');\n    if (diffViewer) {\n      diffViewer.openRepoFile(path, line || null);\n    }\n  }\n\n  async _onFileSave(e) {\n    e.stopPropagation();\n    const { path, content, isConfig, configType } = e.detail || {};\n    if (!path) return;\n\n    if (isConfig && configType) {\n      try {\n        await this._extract('Settings.save_config_content', configType, content);\n      } catch (err) {\n        console.error('Config save failed:', err);\n      }\n    } else {\n      try {\n        await this._extract('Repo.write_file', path, content);\n        try { await this._extract('Repo.stage_files', [path]); } catch {}\n        try { await this._extract('LLM.invalidate_symbol_files', [path]); } catch {}\n        // Notify file tree to refresh\n        this._dispatch('files-changed', {});\n      } catch (err) {\n        console.error('File save failed:', err);\n      }\n    }\n  }\n\n  _onStreamCompleteForDiff(e) {\n    const { result } = e.detail || {};\n    if (!result?.files_modified?.length) return;\n    const diffViewer = this.shadowRoot.querySelector('diff-viewer');\n    if (diffViewer) {\n      diffViewer.openEditResults(result.edit_results, result.files_modified);\n    }\n  }\n\n  _onActiveFileChanged(e) {\n    // Relay to files-tab via window event so it can highlight in file picker\n    window.dispatchEvent(new CustomEvent('viewer-active-file', {\n      detail: { path: e.detail?.path || '' },\n    }));\n  }\n\n  render() {\n    return html`\n      <div class=\"diff-background\">\n        <diff-viewer></diff-viewer>\n      </div>\n      <ac-dialog .connected=${this.connected} .error=${this.error}></ac-dialog>\n      ${this._reconnecting ? html`\n        <div class=\"reconnect-banner\">\n          <span class=\"reconnect-spinner\"></span>\n          Reconnecting${this._reconnectAttempt > 1 ? ` (attempt ${this._reconnectAttempt})` : ''}...\n        </div>\n      ` : ''}\n      <toast-container></toast-container>\n    `;\n  }\n}\n\ncustomElements.define('ac-app', AcApp);"],"file":"assets/index-DTQQFvfP.js"}